'use strict';const a348_0x147293=a348_0x7acd;(function(_0x1a51af,_0x2da239){const _0x15a9f2=a348_0x7acd,_0x2c8086=_0x1a51af();while(!![]){try{const _0x4b900d=-parseInt(_0x15a9f2(0x95))/0x1+-parseInt(_0x15a9f2(0x67))/0x2*(parseInt(_0x15a9f2(0x7a))/0x3)+-parseInt(_0x15a9f2(0x65))/0x4*(parseInt(_0x15a9f2(0x72))/0x5)+-parseInt(_0x15a9f2(0x8d))/0x6+-parseInt(_0x15a9f2(0x76))/0x7+-parseInt(_0x15a9f2(0x83))/0x8*(parseInt(_0x15a9f2(0x71))/0x9)+parseInt(_0x15a9f2(0x6c))/0xa*(parseInt(_0x15a9f2(0x78))/0xb);if(_0x4b900d===_0x2da239)break;else _0x2c8086['push'](_0x2c8086['shift']());}catch(_0x3c5841){_0x2c8086['push'](_0x2c8086['shift']());}}}(a348_0x466a,0x2f340));function a348_0x466a(){const _0x43b8ac=['709488ifFTfJ','uncaughtException','Server\x20started\x20on\x20port:\x20','logger','flushdb','120850fBusfj','info','stack','default','message','364698PhAxak','1030350HzkQtD','payGatewayInitialize','toString','listen','1431010BQgjGt','./workers/licenseChecker','1100rzOVxF','(((.+)+)+)+$','3OGSjUm','./helpers/useRedisAuthState','all','toUTCString','./queues','PORT','./services/PaymentGatewayServices/PaymentGatewayServices','./models/Company','env','16kBXMAi','./utils/logger','catch','redis','error','__esModule','startLicenseChecker','apply','\x20unhandledRejection:','./libs/socket','860352dRZRgB','./services/WbotServices/StartAllWhatsAppsSessions','startQueueProcess','__importDefault','Error\x20initializing\x20payment\x20gateway:\x20','search','\x20uncaughtException:','push','25476lbYBxi','defineProperty','map','4tVLDST','findAll'];a348_0x466a=function(){return _0x43b8ac;};return a348_0x466a();}var __importDefault=this&&this[a348_0x147293(0x90)]||function(_0x5889b5){const _0x22e5b6=a348_0x147293;return _0x5889b5&&_0x5889b5[_0x22e5b6(0x88)]?_0x5889b5:{'default':_0x5889b5};};function a348_0x7acd(_0x43484a,_0x50305e){const _0x9d6c7b=a348_0x466a();return a348_0x7acd=function(_0x49ff7a,_0x18d01c){_0x49ff7a=_0x49ff7a-0x64;let _0x466ae0=_0x9d6c7b[_0x49ff7a];return _0x466ae0;},a348_0x7acd(_0x43484a,_0x50305e);}Object[a348_0x147293(0x96)](exports,'__esModule',{'value':!![]});const http_graceful_shutdown_1=__importDefault(require('http-graceful-shutdown')),app_1=__importDefault(require('./app')),socket_1=require(a348_0x147293(0x8c)),logger_1=require(a348_0x147293(0x84)),StartAllWhatsAppsSessions_1=require(a348_0x147293(0x8e)),Company_1=__importDefault(require(a348_0x147293(0x81))),queues_1=require(a348_0x147293(0x7e)),PaymentGatewayServices_1=require(a348_0x147293(0x80)),useRedisAuthState_1=require(a348_0x147293(0x7b)),licenseChecker_1=require(a348_0x147293(0x77));async function startServer(){const _0x48a613=a348_0x147293,_0x302c87=(function(){let _0x40554e=!![];return function(_0x25288e,_0x474b25){const _0xbbf232=_0x40554e?function(){const _0x537cde=a348_0x7acd;if(_0x474b25){const _0x5ac513=_0x474b25[_0x537cde(0x8a)](_0x25288e,arguments);return _0x474b25=null,_0x5ac513;}}:function(){};return _0x40554e=![],_0xbbf232;};}()),_0x42dbb5=_0x302c87(this,function(){const _0x1e3f62=a348_0x7acd;return _0x42dbb5[_0x1e3f62(0x74)]()[_0x1e3f62(0x92)](_0x1e3f62(0x79))[_0x1e3f62(0x74)]()['constructor'](_0x42dbb5)[_0x1e3f62(0x92)](_0x1e3f62(0x79));});_0x42dbb5();try{await(0x0,licenseChecker_1[_0x48a613(0x89)])();const _0x29e345=app_1['default'][_0x48a613(0x75)](process[_0x48a613(0x82)]['PORT'],async()=>{const _0x1f38e4=_0x48a613;if(process[_0x1f38e4(0x82)]['FLUSH_REDIS_ON_START']=='true')await useRedisAuthState_1[_0x1f38e4(0x86)][_0x1f38e4(0x6b)]();const _0x2bc40a=await Company_1[_0x1f38e4(0x6f)][_0x1f38e4(0x66)]({'where':{'status':!![]}}),_0x9c2f1c=[];_0x2bc40a[_0x1f38e4(0x64)](async _0x17f1ec=>{const _0x58a069=_0x1f38e4,_0x2a328d=(0x0,StartAllWhatsAppsSessions_1['StartAllWhatsAppsSessions'])(_0x17f1ec['id']);_0x9c2f1c[_0x58a069(0x94)](_0x2a328d);}),Promise[_0x1f38e4(0x7c)](_0x9c2f1c)['then'](async()=>{const _0x559244=_0x1f38e4;await(0x0,queues_1[_0x559244(0x8f)])();}),logger_1[_0x1f38e4(0x6a)][_0x1f38e4(0x6d)](_0x1f38e4(0x69)+process['env'][_0x1f38e4(0x7f)]),(0x0,PaymentGatewayServices_1[_0x1f38e4(0x73)])()[_0x1f38e4(0x85)](_0x160cf5=>{const _0x31ab01=_0x1f38e4;logger_1['logger']['error'](_0x31ab01(0x91)+_0x160cf5[_0x31ab01(0x70)]);}),_0x2bc40a[_0x1f38e4(0x64)](async _0x965712=>{const _0x4aec20=_0x1f38e4,_0x5a5a96=(0x0,PaymentGatewayServices_1['checkOpenInvoices'])(_0x965712['id']);_0x9c2f1c[_0x4aec20(0x94)](_0x5a5a96);});});(0x0,socket_1['initIO'])(_0x29e345),(0x0,http_graceful_shutdown_1[_0x48a613(0x6f)])(_0x29e345),process['on'](_0x48a613(0x68),_0x51579b=>{const _0xbfacbd=_0x48a613;console['error'](new Date()[_0xbfacbd(0x7d)]()+_0xbfacbd(0x93),_0x51579b[_0xbfacbd(0x70)]),console[_0xbfacbd(0x87)](_0x51579b[_0xbfacbd(0x6e)]);}),process['on']('unhandledRejection',(_0x41cbfd,_0x2eb17c)=>{const _0x1b6ec1=_0x48a613;console[_0x1b6ec1(0x87)](new Date()[_0x1b6ec1(0x7d)]()+_0x1b6ec1(0x8b),_0x41cbfd,_0x2eb17c);});}catch(_0x3d6213){logger_1['logger'][_0x48a613(0x87)]('Failed\x20to\x20start\x20the\x20server:',_0x3d6213),process['exit'](0x1);}}startServer();