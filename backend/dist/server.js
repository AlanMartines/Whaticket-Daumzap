'use strict';const a348_0x17b9f4=a348_0x6d7e;(function(_0x29756a,_0x4820fa){const _0x54ad4b=a348_0x6d7e,_0x1b060e=_0x29756a();while(!![]){try{const _0x4b3070=parseInt(_0x54ad4b(0x129))/0x1*(-parseInt(_0x54ad4b(0x114))/0x2)+-parseInt(_0x54ad4b(0x122))/0x3*(parseInt(_0x54ad4b(0x119))/0x4)+parseInt(_0x54ad4b(0x10b))/0x5*(parseInt(_0x54ad4b(0xfd))/0x6)+parseInt(_0x54ad4b(0x12d))/0x7+-parseInt(_0x54ad4b(0x112))/0x8*(parseInt(_0x54ad4b(0x115))/0x9)+-parseInt(_0x54ad4b(0x12f))/0xa+parseInt(_0x54ad4b(0x10c))/0xb;if(_0x4b3070===_0x4820fa)break;else _0x1b060e['push'](_0x1b060e['shift']());}catch(_0x583955){_0x1b060e['push'](_0x1b060e['shift']());}}}(a348_0x360d,0x7d44a));var __importDefault=this&&this[a348_0x17b9f4(0x105)]||function(_0x4ecad5){return _0x4ecad5&&_0x4ecad5['__esModule']?_0x4ecad5:{'default':_0x4ecad5};};Object[a348_0x17b9f4(0xfe)](exports,a348_0x17b9f4(0x116),{'value':!![]});const http_graceful_shutdown_1=__importDefault(require(a348_0x17b9f4(0x11b))),app_1=__importDefault(require(a348_0x17b9f4(0x12b))),socket_1=require(a348_0x17b9f4(0x102)),logger_1=require('./utils/logger'),StartAllWhatsAppsSessions_1=require(a348_0x17b9f4(0x104)),Company_1=__importDefault(require(a348_0x17b9f4(0x110))),queues_1=require(a348_0x17b9f4(0x121)),PaymentGatewayServices_1=require(a348_0x17b9f4(0x132)),useRedisAuthState_1=require(a348_0x17b9f4(0x10d)),licenseChecker_1=require(a348_0x17b9f4(0x131));function a348_0x6d7e(_0x5a5e2e,_0xe385a5){const _0x2be26b=a348_0x360d();return a348_0x6d7e=function(_0x53a03f,_0xae5e05){_0x53a03f=_0x53a03f-0xfb;let _0x360dcc=_0x2be26b[_0x53a03f];return _0x360dcc;},a348_0x6d7e(_0x5a5e2e,_0xe385a5);}function a348_0x360d(){const _0x429bde=['push','toString','logger','then','1QGKHLv','Failed\x20to\x20start\x20the\x20server:','./app','startQueueProcess','5158902bmpvJo','payGatewayInitialize','335960ShJhIp','initIO','./workers/licenseChecker','./services/PaymentGatewayServices/PaymentGatewayServices','catch','flushdb','FLUSH_REDIS_ON_START','5262TaRzFN','defineProperty','uncaughtException','constructor','true','./libs/socket','Server\x20started\x20on\x20port:\x20','./services/WbotServices/StartAllWhatsAppsSessions','__importDefault','toUTCString','findAll','search','all','StartAllWhatsAppsSessions','190oFziyW','15635642KkRtVM','./helpers/useRedisAuthState','\x20unhandledRejection:','error','./models/Company','redis','7976UyPjzC','env','368864mvWrTL','7065yBJsPI','__esModule','PORT','info','22412DXHffT','message','http-graceful-shutdown','(((.+)+)+)+$','map','listen','startLicenseChecker','apply','./queues','363JQHjff','default','exit'];a348_0x360d=function(){return _0x429bde;};return a348_0x360d();}async function startServer(){const _0x27dde5=a348_0x17b9f4,_0x2b176d=(function(){let _0x14a3eb=!![];return function(_0x386a92,_0xcc1b24){const _0xfd33d0=_0x14a3eb?function(){const _0x4f4e39=a348_0x6d7e;if(_0xcc1b24){const _0xc7697a=_0xcc1b24[_0x4f4e39(0x120)](_0x386a92,arguments);return _0xcc1b24=null,_0xc7697a;}}:function(){};return _0x14a3eb=![],_0xfd33d0;};}()),_0x12d333=_0x2b176d(this,function(){const _0x1c8492=a348_0x6d7e;return _0x12d333[_0x1c8492(0x126)]()[_0x1c8492(0x108)](_0x1c8492(0x11c))[_0x1c8492(0x126)]()[_0x1c8492(0x100)](_0x12d333)['search'](_0x1c8492(0x11c));});_0x12d333();try{await(0x0,licenseChecker_1[_0x27dde5(0x11f)])();const _0x1c4dc6=app_1[_0x27dde5(0x123)][_0x27dde5(0x11e)](process[_0x27dde5(0x113)][_0x27dde5(0x117)],async()=>{const _0x5ee93d=_0x27dde5;if(process[_0x5ee93d(0x113)][_0x5ee93d(0xfc)]==_0x5ee93d(0x101))await useRedisAuthState_1[_0x5ee93d(0x111)][_0x5ee93d(0xfb)]();const _0x49d92e=await Company_1[_0x5ee93d(0x123)][_0x5ee93d(0x107)]({'where':{'status':!![]}}),_0x2c806f=[];_0x49d92e[_0x5ee93d(0x11d)](async _0x257650=>{const _0x5a9462=_0x5ee93d,_0x4910d8=(0x0,StartAllWhatsAppsSessions_1[_0x5a9462(0x10a)])(_0x257650['id']);_0x2c806f['push'](_0x4910d8);}),Promise[_0x5ee93d(0x109)](_0x2c806f)[_0x5ee93d(0x128)](async()=>{const _0x252bc5=_0x5ee93d;await(0x0,queues_1[_0x252bc5(0x12c)])();}),logger_1[_0x5ee93d(0x127)][_0x5ee93d(0x118)](_0x5ee93d(0x103)+process[_0x5ee93d(0x113)][_0x5ee93d(0x117)]),(0x0,PaymentGatewayServices_1[_0x5ee93d(0x12e)])()[_0x5ee93d(0x133)](_0x3b01cb=>{const _0x3dc2fc=_0x5ee93d;logger_1[_0x3dc2fc(0x127)][_0x3dc2fc(0x10f)]('Error\x20initializing\x20payment\x20gateway:\x20'+_0x3b01cb[_0x3dc2fc(0x11a)]);}),_0x49d92e[_0x5ee93d(0x11d)](async _0x807dca=>{const _0x3cac0a=_0x5ee93d,_0x2ff758=(0x0,PaymentGatewayServices_1['checkOpenInvoices'])(_0x807dca['id']);_0x2c806f[_0x3cac0a(0x125)](_0x2ff758);});});(0x0,socket_1[_0x27dde5(0x130)])(_0x1c4dc6),(0x0,http_graceful_shutdown_1['default'])(_0x1c4dc6),process['on'](_0x27dde5(0xff),_0x4dcdbe=>{const _0xd75115=_0x27dde5;console[_0xd75115(0x10f)](new Date()['toUTCString']()+'\x20uncaughtException:',_0x4dcdbe[_0xd75115(0x11a)]),console['error'](_0x4dcdbe['stack']);}),process['on']('unhandledRejection',(_0x296e57,_0x518c9e)=>{const _0x2bcd33=_0x27dde5;console[_0x2bcd33(0x10f)](new Date()[_0x2bcd33(0x106)]()+_0x2bcd33(0x10e),_0x296e57,_0x518c9e);});}catch(_0x156897){logger_1['logger'][_0x27dde5(0x10f)](_0x27dde5(0x12a),_0x156897),process[_0x27dde5(0x124)](0x1);}}startServer();