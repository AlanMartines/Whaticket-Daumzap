'use strict';const a348_0x2ced3b=a348_0x2ee3;(function(_0x4d204b,_0x5a65e1){const _0x4dd279=a348_0x2ee3,_0x568dfe=_0x4d204b();while(!![]){try{const _0xc09c9a=-parseInt(_0x4dd279(0x16f))/0x1+parseInt(_0x4dd279(0x171))/0x2+-parseInt(_0x4dd279(0x164))/0x3+-parseInt(_0x4dd279(0x15f))/0x4+-parseInt(_0x4dd279(0x185))/0x5+-parseInt(_0x4dd279(0x15d))/0x6*(parseInt(_0x4dd279(0x17c))/0x7)+parseInt(_0x4dd279(0x161))/0x8;if(_0xc09c9a===_0x5a65e1)break;else _0x568dfe['push'](_0x568dfe['shift']());}catch(_0x130e60){_0x568dfe['push'](_0x568dfe['shift']());}}}(a348_0xe3cd,0x6efd1));var __importDefault=this&&this[a348_0x2ced3b(0x15e)]||function(_0x377488){const _0x344c7b=a348_0x2ced3b;return _0x377488&&_0x377488[_0x344c7b(0x159)]?_0x377488:{'default':_0x377488};};function a348_0xe3cd(){const _0x4d693f=['search','constructor','./services/PaymentGatewayServices/PaymentGatewayServices','\x20uncaughtException:','exit','payGatewayInitialize','602GhAYRC','default','./helpers/useRedisAuthState','message','info','Error\x20initializing\x20payment\x20gateway:\x20','redis','flushdb','logger','1704305syRGRA','./models/Company','./workers/licenseChecker','initIO','toUTCString','uncaughtException','apply','Server\x20started\x20on\x20port:\x20','__esModule','error','map','startLicenseChecker','468DmSCtN','__importDefault','1071860ABAzQn','unhandledRejection','9381464OhlynR','defineProperty','findAll','2159877isSGep','checkOpenInvoices','FLUSH_REDIS_ON_START','true','http-graceful-shutdown','./services/WbotServices/StartAllWhatsAppsSessions','stack','listen','push','(((.+)+)+)+$','./app','216355MZUiuv','all','1667548vzNhbn','PORT','StartAllWhatsAppsSessions','\x20unhandledRejection:','env'];a348_0xe3cd=function(){return _0x4d693f;};return a348_0xe3cd();}function a348_0x2ee3(_0x1853f0,_0x1f8ed7){const _0x1e90c7=a348_0xe3cd();return a348_0x2ee3=function(_0x2672de,_0x516f59){_0x2672de=_0x2672de-0x157;let _0xe3cde=_0x1e90c7[_0x2672de];return _0xe3cde;},a348_0x2ee3(_0x1853f0,_0x1f8ed7);}Object[a348_0x2ced3b(0x162)](exports,a348_0x2ced3b(0x159),{'value':!![]});const http_graceful_shutdown_1=__importDefault(require(a348_0x2ced3b(0x168))),app_1=__importDefault(require(a348_0x2ced3b(0x16e))),socket_1=require('./libs/socket'),logger_1=require('./utils/logger'),StartAllWhatsAppsSessions_1=require(a348_0x2ced3b(0x169)),Company_1=__importDefault(require(a348_0x2ced3b(0x186))),queues_1=require('./queues'),PaymentGatewayServices_1=require(a348_0x2ced3b(0x178)),useRedisAuthState_1=require(a348_0x2ced3b(0x17e)),licenseChecker_1=require(a348_0x2ced3b(0x187));async function startServer(){const _0x3a6913=a348_0x2ced3b,_0x21474f=(function(){let _0x2bc575=!![];return function(_0x3ec427,_0x19c215){const _0x5b53d3=_0x2bc575?function(){const _0x5cc1a1=a348_0x2ee3;if(_0x19c215){const _0x4ed298=_0x19c215[_0x5cc1a1(0x157)](_0x3ec427,arguments);return _0x19c215=null,_0x4ed298;}}:function(){};return _0x2bc575=![],_0x5b53d3;};}()),_0x2fd0b2=_0x21474f(this,function(){const _0x492d28=a348_0x2ee3;return _0x2fd0b2['toString']()[_0x492d28(0x176)](_0x492d28(0x16d))['toString']()[_0x492d28(0x177)](_0x2fd0b2)[_0x492d28(0x176)]('(((.+)+)+)+$');});_0x2fd0b2();try{await(0x0,licenseChecker_1[_0x3a6913(0x15c)])();const _0x3c9e68=app_1[_0x3a6913(0x17d)][_0x3a6913(0x16b)](process[_0x3a6913(0x175)]['PORT'],async()=>{const _0x29ad61=_0x3a6913;if(process[_0x29ad61(0x175)][_0x29ad61(0x166)]==_0x29ad61(0x167))await useRedisAuthState_1[_0x29ad61(0x182)][_0x29ad61(0x183)]();const _0x17b0c1=await Company_1[_0x29ad61(0x17d)][_0x29ad61(0x163)]({'where':{'status':!![]}}),_0x414b18=[];_0x17b0c1[_0x29ad61(0x15b)](async _0x16f610=>{const _0x344118=_0x29ad61,_0x18c042=(0x0,StartAllWhatsAppsSessions_1[_0x344118(0x173)])(_0x16f610['id']);_0x414b18[_0x344118(0x16c)](_0x18c042);}),Promise[_0x29ad61(0x170)](_0x414b18)['then'](async()=>{await(0x0,queues_1['startQueueProcess'])();}),logger_1[_0x29ad61(0x184)][_0x29ad61(0x180)](_0x29ad61(0x158)+process[_0x29ad61(0x175)][_0x29ad61(0x172)]),(0x0,PaymentGatewayServices_1[_0x29ad61(0x17b)])()['catch'](_0x1a3c3f=>{const _0x489107=_0x29ad61;logger_1[_0x489107(0x184)][_0x489107(0x15a)](_0x489107(0x181)+_0x1a3c3f['message']);}),_0x17b0c1['map'](async _0x26628c=>{const _0x58bc06=_0x29ad61,_0xead315=(0x0,PaymentGatewayServices_1[_0x58bc06(0x165)])(_0x26628c['id']);_0x414b18[_0x58bc06(0x16c)](_0xead315);});});(0x0,socket_1[_0x3a6913(0x188)])(_0x3c9e68),(0x0,http_graceful_shutdown_1[_0x3a6913(0x17d)])(_0x3c9e68),process['on'](_0x3a6913(0x18a),_0x41e5d8=>{const _0x398458=_0x3a6913;console['error'](new Date()[_0x398458(0x189)]()+_0x398458(0x179),_0x41e5d8[_0x398458(0x17f)]),console[_0x398458(0x15a)](_0x41e5d8[_0x398458(0x16a)]);}),process['on'](_0x3a6913(0x160),(_0x3a4848,_0x17809e)=>{const _0x1adee9=_0x3a6913;console['error'](new Date()[_0x1adee9(0x189)]()+_0x1adee9(0x174),_0x3a4848,_0x17809e);});}catch(_0x1f19db){logger_1[_0x3a6913(0x184)][_0x3a6913(0x15a)]('Failed\x20to\x20start\x20the\x20server:',_0x1f19db),process[_0x3a6913(0x17a)](0x1);}}startServer();