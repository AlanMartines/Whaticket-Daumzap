'use strict';const a348_0x28151b=a348_0xea23;function a348_0xea23(_0x113d0f,_0x5912de){const _0x5f437d=a348_0x2fc1();return a348_0xea23=function(_0x139a4a,_0x3ac450){_0x139a4a=_0x139a4a-0x123;let _0x2fc1a9=_0x5f437d[_0x139a4a];return _0x2fc1a9;},a348_0xea23(_0x113d0f,_0x5912de);}(function(_0x189ba9,_0x556237){const _0x18590d=a348_0xea23,_0x2dcbf6=_0x189ba9();while(!![]){try{const _0x2f78be=parseInt(_0x18590d(0x151))/0x1+-parseInt(_0x18590d(0x124))/0x2+parseInt(_0x18590d(0x139))/0x3+-parseInt(_0x18590d(0x14c))/0x4+-parseInt(_0x18590d(0x150))/0x5*(-parseInt(_0x18590d(0x134))/0x6)+-parseInt(_0x18590d(0x153))/0x7+-parseInt(_0x18590d(0x135))/0x8*(-parseInt(_0x18590d(0x13d))/0x9);if(_0x2f78be===_0x556237)break;else _0x2dcbf6['push'](_0x2dcbf6['shift']());}catch(_0x155640){_0x2dcbf6['push'](_0x2dcbf6['shift']());}}}(a348_0x2fc1,0x34a05));var __importDefault=this&&this[a348_0x28151b(0x13b)]||function(_0x2ab362){const _0x63fe6e=a348_0x28151b;return _0x2ab362&&_0x2ab362[_0x63fe6e(0x12e)]?_0x2ab362:{'default':_0x2ab362};};Object[a348_0x28151b(0x13c)](exports,'__esModule',{'value':!![]});const http_graceful_shutdown_1=__importDefault(require(a348_0x28151b(0x130))),app_1=__importDefault(require(a348_0x28151b(0x12b))),socket_1=require('./libs/socket'),logger_1=require(a348_0x28151b(0x13a)),StartAllWhatsAppsSessions_1=require(a348_0x28151b(0x136)),Company_1=__importDefault(require(a348_0x28151b(0x146))),queues_1=require(a348_0x28151b(0x12f)),PaymentGatewayServices_1=require(a348_0x28151b(0x145)),useRedisAuthState_1=require('./helpers/useRedisAuthState'),licenseChecker_1=require(a348_0x28151b(0x14b));async function startServer(){const _0x5ac97e=a348_0x28151b,_0x569faa=(function(){let _0x539017=!![];return function(_0x1bbbba,_0x10f25e){const _0x7d6954=_0x539017?function(){const _0xac4cd4=a348_0xea23;if(_0x10f25e){const _0x37d7e2=_0x10f25e[_0xac4cd4(0x149)](_0x1bbbba,arguments);return _0x10f25e=null,_0x37d7e2;}}:function(){};return _0x539017=![],_0x7d6954;};}()),_0x5640e1=_0x569faa(this,function(){const _0x4fc993=a348_0xea23;return _0x5640e1['toString']()[_0x4fc993(0x137)](_0x4fc993(0x127))[_0x4fc993(0x12c)]()[_0x4fc993(0x128)](_0x5640e1)[_0x4fc993(0x137)](_0x4fc993(0x127));});_0x5640e1();try{await(0x0,licenseChecker_1['startLicenseChecker'])();const _0x55d54a=app_1[_0x5ac97e(0x133)][_0x5ac97e(0x144)](process[_0x5ac97e(0x154)][_0x5ac97e(0x12a)],async()=>{const _0x568f22=_0x5ac97e;if(process[_0x568f22(0x154)][_0x568f22(0x131)]==_0x568f22(0x155))await useRedisAuthState_1[_0x568f22(0x14a)][_0x568f22(0x13f)]();const _0x17401f=await Company_1['default'][_0x568f22(0x132)]({'where':{'status':!![]}}),_0x217e3b=[];_0x17401f[_0x568f22(0x147)](async _0x48db55=>{const _0xdbe80d=_0x568f22,_0x5e31e9=(0x0,StartAllWhatsAppsSessions_1['StartAllWhatsAppsSessions'])(_0x48db55['id']);_0x217e3b[_0xdbe80d(0x13e)](_0x5e31e9);}),Promise[_0x568f22(0x123)](_0x217e3b)[_0x568f22(0x126)](async()=>{const _0x3bf672=_0x568f22;await(0x0,queues_1[_0x3bf672(0x12d)])();}),logger_1[_0x568f22(0x14f)][_0x568f22(0x158)](_0x568f22(0x14d)+process[_0x568f22(0x154)][_0x568f22(0x12a)]),(0x0,PaymentGatewayServices_1['payGatewayInitialize'])()[_0x568f22(0x129)](_0x46ff15=>{const _0x58f278=_0x568f22;logger_1[_0x58f278(0x14f)][_0x58f278(0x142)](_0x58f278(0x156)+_0x46ff15[_0x58f278(0x148)]);}),_0x17401f['map'](async _0x17e7b8=>{const _0xfed776=_0x568f22,_0x447cd0=(0x0,PaymentGatewayServices_1[_0xfed776(0x14e)])(_0x17e7b8['id']);_0x217e3b['push'](_0x447cd0);});});(0x0,socket_1['initIO'])(_0x55d54a),(0x0,http_graceful_shutdown_1[_0x5ac97e(0x133)])(_0x55d54a),process['on'](_0x5ac97e(0x125),_0x37b79b=>{const _0x5308d2=_0x5ac97e;console['error'](new Date()['toUTCString']()+_0x5308d2(0x157),_0x37b79b[_0x5308d2(0x148)]),console[_0x5308d2(0x142)](_0x37b79b[_0x5308d2(0x140)]);}),process['on'](_0x5ac97e(0x152),(_0x2eba76,_0x157d61)=>{const _0x444205=_0x5ac97e;console[_0x444205(0x142)](new Date()[_0x444205(0x138)]()+_0x444205(0x143),_0x2eba76,_0x157d61);});}catch(_0x433d45){logger_1[_0x5ac97e(0x14f)][_0x5ac97e(0x142)](_0x5ac97e(0x141),_0x433d45),process['exit'](0x1);}}startServer();function a348_0x2fc1(){const _0x2691cb=['info','all','127320pVLQPN','uncaughtException','then','(((.+)+)+)+$','constructor','catch','PORT','./app','toString','startQueueProcess','__esModule','./queues','http-graceful-shutdown','FLUSH_REDIS_ON_START','findAll','default','822AhgcIj','8oZkyVK','./services/WbotServices/StartAllWhatsAppsSessions','search','toUTCString','606936AOGovd','./utils/logger','__importDefault','defineProperty','1246257xefhIK','push','flushdb','stack','Failed\x20to\x20start\x20the\x20server:','error','\x20unhandledRejection:','listen','./services/PaymentGatewayServices/PaymentGatewayServices','./models/Company','map','message','apply','redis','./workers/licenseChecker','795120JBxjLO','Server\x20started\x20on\x20port:\x20','checkOpenInvoices','logger','3550tXtjSP','160486ZdFDAn','unhandledRejection','843808ffXAvb','env','true','Error\x20initializing\x20payment\x20gateway:\x20','\x20uncaughtException:'];a348_0x2fc1=function(){return _0x2691cb;};return a348_0x2fc1();}