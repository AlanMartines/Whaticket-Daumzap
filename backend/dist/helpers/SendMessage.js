const a244_0x3def6f=a244_0x4e84;(function(_0x43b834,_0x355f82){const _0x5bfe69=a244_0x4e84,_0x43bbd4=_0x43b834();while(!![]){try{const _0x5dff71=parseInt(_0x5bfe69(0x142))/0x1*(-parseInt(_0x5bfe69(0x159))/0x2)+-parseInt(_0x5bfe69(0x166))/0x3+-parseInt(_0x5bfe69(0x141))/0x4*(-parseInt(_0x5bfe69(0x145))/0x5)+parseInt(_0x5bfe69(0x150))/0x6*(parseInt(_0x5bfe69(0x149))/0x7)+parseInt(_0x5bfe69(0x151))/0x8+parseInt(_0x5bfe69(0x162))/0x9+parseInt(_0x5bfe69(0x155))/0xa*(parseInt(_0x5bfe69(0x158))/0xb);if(_0x5dff71===_0x355f82)break;else _0x43bbd4['push'](_0x43bbd4['shift']());}catch(_0x217cee){_0x43bbd4['push'](_0x43bbd4['shift']());}}}(a244_0x4ec9,0x730c1));function a244_0x4e84(_0x121080,_0x31ab42){const _0x42089b=a244_0x4ec9();return a244_0x4e84=function(_0x3a0b79,_0x1a9154){_0x3a0b79=_0x3a0b79-0x13d;let _0x4ec913=_0x42089b[_0x3a0b79];return _0x4ec913;},a244_0x4e84(_0x121080,_0x31ab42);}function a244_0x4ec9(){const _0x16bf16=['187877aaeHMU','body','string','77920NCfIeQ','./GetWhatsappWbot','../services/MessageServices/CreateMessageService','SendMessage','14kEURCg','../services/WbotServices/CheckNumber','../services/WbotServices/SendWhatsAppMedia','getMessageOptions','fileName','sendMessage','finalName','1588806WnJBhD','1981144EKeQCi','mediaPath','SendPresenceStatus','s.whatsapp.net','7880KLSOjG','../services/WbotServices/wbotMessageListener','fromMe','682CxbTAz','10gqOWsg','replace','key','constructor','../services/TicketServices/FindOrCreateTicketService','toString','contact','participant','(((.+)+)+)+$','1585071ovBHmp','number','update','remoteJid','972150vhNein','default','body\x20is\x20not\x20a\x20string','search','__esModule','jid','stringify','../helpers/Mustache','trace','defineProperty','isGroup','./SendPresenceStatus','verifyMessage','../helpers/SetTicketMessagesAsRead','188hcThtX'];a244_0x4ec9=function(){return _0x16bf16;};return a244_0x4ec9();}const a244_0x1a9154=(function(){let _0x5943b6=!![];return function(_0x114ba0,_0x5e5d57){const _0x47217e=_0x5943b6?function(){if(_0x5e5d57){const _0x449a62=_0x5e5d57['apply'](_0x114ba0,arguments);return _0x5e5d57=null,_0x449a62;}}:function(){};return _0x5943b6=![],_0x47217e;};}()),a244_0x3a0b79=a244_0x1a9154(this,function(){const _0x258f98=a244_0x4e84;return a244_0x3a0b79[_0x258f98(0x15e)]()[_0x258f98(0x169)](_0x258f98(0x161))[_0x258f98(0x15e)]()[_0x258f98(0x15c)](a244_0x3a0b79)['search'](_0x258f98(0x161));});a244_0x3a0b79();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x486031){const _0x17fb13=a244_0x4e84;return _0x486031&&_0x486031[_0x17fb13(0x16a)]?_0x486031:{'default':_0x486031};};Object[a244_0x3def6f(0x16f)](exports,a244_0x3def6f(0x16a),{'value':!![]}),exports[a244_0x3def6f(0x148)]=void 0x0;const GetWhatsappWbot_1=__importDefault(require(a244_0x3def6f(0x146))),SendWhatsAppMedia_1=require(a244_0x3def6f(0x14b)),CreateOrUpdateContactService_1=__importDefault(require('../services/ContactServices/CreateOrUpdateContactService')),FindOrCreateTicketService_1=__importDefault(require(a244_0x3def6f(0x15d))),CheckNumber_1=__importDefault(require(a244_0x3def6f(0x14a))),SetTicketMessagesAsRead_1=__importDefault(require(a244_0x3def6f(0x140))),Mustache_1=__importDefault(require(a244_0x3def6f(0x16d))),wbotMessageListener_1=require(a244_0x3def6f(0x156)),mime_1=__importDefault(require('mime')),CreateMessageService_1=__importDefault(require(a244_0x3def6f(0x147))),SendPresenceStatus_1=require(a244_0x3def6f(0x13e)),SendMessage=async(_0x28ad56,_0x3f9acb)=>{const _0x4ee706=a244_0x3def6f;try{const _0x1a9479=await(0x0,GetWhatsappWbot_1[_0x4ee706(0x167)])(_0x28ad56),_0x176545=_0x3f9acb[_0x4ee706(0x163)],_0x5733dc=_0x3f9acb[_0x4ee706(0x143)],_0x552ae8=_0x28ad56['companyId'],_0x42b7a2=await(0x0,CheckNumber_1[_0x4ee706(0x167)])(_0x176545['toLocaleString'](),_0x552ae8),_0x276424=_0x42b7a2['jid'][_0x4ee706(0x15a)](/\D/g,''),_0x2aecef={'name':''+_0x276424,'number':_0x276424,'isGroup':![],'companyId':_0x552ae8},_0xcb37a0=await(0x0,CreateOrUpdateContactService_1[_0x4ee706(0x167)])(_0x2aecef,_0x1a9479,_0x42b7a2[_0x4ee706(0x16b)]),_0x427710=await(0x0,FindOrCreateTicketService_1[_0x4ee706(0x167)])(_0xcb37a0,_0x28ad56['id'],0x0,_0x552ae8),_0x3c0e25=_0x427710['contact'][_0x4ee706(0x163)]+'@'+(_0x427710[_0x4ee706(0x13d)]?'g.us':_0x4ee706(0x154));let _0x493955;if(_0x3f9acb[_0x4ee706(0x152)]){const _0x58cb77=await(0x0,SendWhatsAppMedia_1[_0x4ee706(0x14c)])(_0x3f9acb[_0x4ee706(0x14d)],_0x3f9acb[_0x4ee706(0x152)],_0x3f9acb[_0x4ee706(0x143)],_0x552ae8);if(_0x58cb77){await(0x0,SendPresenceStatus_1[_0x4ee706(0x153)])(_0x1a9479,_0x3c0e25,0x0,0x2710);let _0x4a77e7=_0x493955=await _0x1a9479[_0x4ee706(0x14e)](_0x3c0e25,{..._0x58cb77});const _0x245c97=mime_1[_0x4ee706(0x167)]['lookup'](_0x3f9acb[_0x4ee706(0x152)]),_0x499660=await(0x0,wbotMessageListener_1['verifyQuotedMessage'])(_0x4a77e7),_0x338314={'id':_0x4a77e7['key']['id'],'ticketId':_0x427710['id'],'contactId':_0x4a77e7[_0x4ee706(0x15b)]['fromMe']?undefined:_0xcb37a0['id'],'body':_0x5733dc?(0x0,Mustache_1[_0x4ee706(0x167)])(_0x5733dc,_0x427710):_0x3f9acb[_0x4ee706(0x14d)],'fromMe':_0x4a77e7[_0x4ee706(0x15b)][_0x4ee706(0x157)],'read':_0x4a77e7['key'][_0x4ee706(0x157)],'mediaUrl':_0x3f9acb[_0x4ee706(0x14f)],'mediaType':typeof _0x245c97===_0x4ee706(0x144)?_0x245c97['split']('/')[0x0]:'unknown','quotedMsgId':_0x499660?.['id'],'ack':0x0,'remoteJid':_0x4a77e7[_0x4ee706(0x15b)][_0x4ee706(0x165)],'participant':_0x4a77e7[_0x4ee706(0x15b)][_0x4ee706(0x160)],'dataJson':JSON[_0x4ee706(0x16c)](_0x4a77e7)};typeof _0x338314[_0x4ee706(0x143)]!='string'&&console[_0x4ee706(0x16e)](_0x4ee706(0x168),_0x338314['body']),await _0x427710[_0x4ee706(0x164)]({'lastMessage':_0x338314['body']}),await(0x0,CreateMessageService_1[_0x4ee706(0x167)])({'messageData':_0x338314,'ticket':_0x427710,'companyId':_0x427710['companyId']});}}else{const _0x1d6921='â€Ž\x20'+_0x3f9acb[_0x4ee706(0x143)];await(0x0,SendPresenceStatus_1['SendPresenceStatus'])(_0x1a9479,_0x3c0e25);const _0x2f3ffc=await _0x1a9479[_0x4ee706(0x14e)](_0x3c0e25,{'text':(0x0,Mustache_1['default'])(_0x1d6921,_0x427710)});await(0x0,wbotMessageListener_1[_0x4ee706(0x13f)])(_0x2f3ffc,_0x427710,_0x427710[_0x4ee706(0x15f)]);}return typeof _0x5733dc!=_0x4ee706(0x144)&&console['trace'](_0x4ee706(0x168),_0x5733dc),await _0x427710[_0x4ee706(0x164)]({'lastMessage':_0x5733dc}),(0x0,SetTicketMessagesAsRead_1['default'])(_0x427710),_0x493955;}catch(_0xffeaaf){throw new Error(_0xffeaaf);}};exports['SendMessage']=SendMessage;