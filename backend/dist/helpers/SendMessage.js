const a244_0x512e93=a244_0x2116;(function(_0x46ea30,_0x2cc310){const _0xa8f253=a244_0x2116,_0x2a76b1=_0x46ea30();while(!![]){try{const _0xd604e0=-parseInt(_0xa8f253(0x1a3))/0x1*(-parseInt(_0xa8f253(0x1a2))/0x2)+parseInt(_0xa8f253(0x1ca))/0x3*(parseInt(_0xa8f253(0x1a0))/0x4)+parseInt(_0xa8f253(0x1a5))/0x5*(-parseInt(_0xa8f253(0x19e))/0x6)+-parseInt(_0xa8f253(0x1a9))/0x7*(parseInt(_0xa8f253(0x1b1))/0x8)+-parseInt(_0xa8f253(0x1a1))/0x9+-parseInt(_0xa8f253(0x197))/0xa*(-parseInt(_0xa8f253(0x1aa))/0xb)+-parseInt(_0xa8f253(0x1c9))/0xc;if(_0xd604e0===_0x2cc310)break;else _0x2a76b1['push'](_0x2a76b1['shift']());}catch(_0x3295ce){_0x2a76b1['push'](_0x2a76b1['shift']());}}}(a244_0x36a5,0x9e838));const a244_0x552042=(function(){let _0x251bb9=!![];return function(_0x41c15f,_0x19238f){const _0x522da8=_0x251bb9?function(){if(_0x19238f){const _0xddfb6a=_0x19238f['apply'](_0x41c15f,arguments);return _0x19238f=null,_0xddfb6a;}}:function(){};return _0x251bb9=![],_0x522da8;};}()),a244_0x5d7fff=a244_0x552042(this,function(){const _0x131acc=a244_0x2116;return a244_0x5d7fff['toString']()[_0x131acc(0x1ae)]('(((.+)+)+)+$')[_0x131acc(0x19b)]()[_0x131acc(0x19a)](a244_0x5d7fff)[_0x131acc(0x1ae)](_0x131acc(0x1a4));});a244_0x5d7fff();function a244_0x36a5(){const _0x2a0810=['3ThuASt','g.us','1200MZgyJH','sendMessage','key','constructor','toString','body','number','166902ruLVXT','../services/WbotServices/wbotMessageListener','69864VSgRug','4156812KrtdOA','151318sgTcNV','10WlgVEh','(((.+)+)+)+$','5UQTQqN','body\x20is\x20not\x20a\x20string','defineProperty','verifyMessage','7LygPle','117722WxTzwH','contact','update','fromMe','search','split','trace','1036824SUGrHs','finalName','companyId','mediaPath','../helpers/SetTicketMessagesAsRead','replace','../services/MessageServices/CreateMessageService','verifyQuotedMessage','toLocaleString','../helpers/Mustache','SendPresenceStatus','lookup','SendMessage','../services/WbotServices/SendWhatsAppMedia','s.whatsapp.net','jid','../services/WbotServices/CheckNumber','participant','stringify','getMessageOptions','./SendPresenceStatus','default','unknown','remoteJid','9476832WkmmHp'];a244_0x36a5=function(){return _0x2a0810;};return a244_0x36a5();}'use strict';var __importDefault=this&&this['__importDefault']||function(_0xdaa4c){return _0xdaa4c&&_0xdaa4c['__esModule']?_0xdaa4c:{'default':_0xdaa4c};};function a244_0x2116(_0x301eeb,_0x580513){const _0x2158a7=a244_0x36a5();return a244_0x2116=function(_0x5d7fff,_0x552042){_0x5d7fff=_0x5d7fff-0x197;let _0x36a508=_0x2158a7[_0x5d7fff];return _0x36a508;},a244_0x2116(_0x301eeb,_0x580513);}Object[a244_0x512e93(0x1a7)](exports,'__esModule',{'value':!![]}),exports[a244_0x512e93(0x1bd)]=void 0x0;const GetWhatsappWbot_1=__importDefault(require('./GetWhatsappWbot')),SendWhatsAppMedia_1=require(a244_0x512e93(0x1be)),CreateOrUpdateContactService_1=__importDefault(require('../services/ContactServices/CreateOrUpdateContactService')),FindOrCreateTicketService_1=__importDefault(require('../services/TicketServices/FindOrCreateTicketService')),CheckNumber_1=__importDefault(require(a244_0x512e93(0x1c1))),SetTicketMessagesAsRead_1=__importDefault(require(a244_0x512e93(0x1b5))),Mustache_1=__importDefault(require(a244_0x512e93(0x1ba))),wbotMessageListener_1=require(a244_0x512e93(0x19f)),mime_1=__importDefault(require('mime')),CreateMessageService_1=__importDefault(require(a244_0x512e93(0x1b7))),SendPresenceStatus_1=require(a244_0x512e93(0x1c5)),SendMessage=async(_0x350160,_0x5922f0)=>{const _0x5a88ff=a244_0x512e93;try{const _0x425598=await(0x0,GetWhatsappWbot_1[_0x5a88ff(0x1c6)])(_0x350160),_0x1f98bf=_0x5922f0['number'],_0x3572a4=_0x5922f0[_0x5a88ff(0x19c)],_0x5e4d1b=_0x350160[_0x5a88ff(0x1b3)],_0x5571ba=await(0x0,CheckNumber_1[_0x5a88ff(0x1c6)])(_0x1f98bf[_0x5a88ff(0x1b9)](),_0x5e4d1b),_0x5b0e94=_0x5571ba[_0x5a88ff(0x1c0)][_0x5a88ff(0x1b6)](/\D/g,''),_0x544673={'name':''+_0x5b0e94,'number':_0x5b0e94,'isGroup':![],'companyId':_0x5e4d1b},_0x3429a9=await(0x0,CreateOrUpdateContactService_1[_0x5a88ff(0x1c6)])(_0x544673,_0x425598,_0x5571ba['jid']),_0x6a4e7d=await(0x0,FindOrCreateTicketService_1[_0x5a88ff(0x1c6)])(_0x3429a9,_0x350160['id'],0x0,_0x5e4d1b),_0x3c1a57=_0x6a4e7d[_0x5a88ff(0x1ab)][_0x5a88ff(0x19d)]+'@'+(_0x6a4e7d['isGroup']?_0x5a88ff(0x1cb):_0x5a88ff(0x1bf));let _0x3342e9;if(_0x5922f0[_0x5a88ff(0x1b4)]){const _0x5e4182=await(0x0,SendWhatsAppMedia_1[_0x5a88ff(0x1c4)])(_0x5922f0['fileName'],_0x5922f0[_0x5a88ff(0x1b4)],_0x5922f0[_0x5a88ff(0x19c)],_0x5e4d1b);if(_0x5e4182){await(0x0,SendPresenceStatus_1['SendPresenceStatus'])(_0x425598,_0x3c1a57,0x0,0x2710);let _0xdcb1cf=_0x3342e9=await _0x425598[_0x5a88ff(0x198)](_0x3c1a57,{..._0x5e4182});const _0x2eb6f4=mime_1[_0x5a88ff(0x1c6)][_0x5a88ff(0x1bc)](_0x5922f0[_0x5a88ff(0x1b4)]),_0x323173=await(0x0,wbotMessageListener_1[_0x5a88ff(0x1b8)])(_0xdcb1cf),_0x470eae={'id':_0xdcb1cf[_0x5a88ff(0x199)]['id'],'ticketId':_0x6a4e7d['id'],'contactId':_0xdcb1cf[_0x5a88ff(0x199)][_0x5a88ff(0x1ad)]?undefined:_0x3429a9['id'],'body':_0x3572a4?(0x0,Mustache_1['default'])(_0x3572a4,_0x6a4e7d):_0x5922f0['fileName'],'fromMe':_0xdcb1cf['key']['fromMe'],'read':_0xdcb1cf[_0x5a88ff(0x199)]['fromMe'],'mediaUrl':_0x5922f0[_0x5a88ff(0x1b2)],'mediaType':typeof _0x2eb6f4==='string'?_0x2eb6f4[_0x5a88ff(0x1af)]('/')[0x0]:_0x5a88ff(0x1c7),'quotedMsgId':_0x323173?.['id'],'ack':0x0,'remoteJid':_0xdcb1cf[_0x5a88ff(0x199)][_0x5a88ff(0x1c8)],'participant':_0xdcb1cf['key'][_0x5a88ff(0x1c2)],'dataJson':JSON[_0x5a88ff(0x1c3)](_0xdcb1cf)};typeof _0x470eae[_0x5a88ff(0x19c)]!='string'&&console[_0x5a88ff(0x1b0)](_0x5a88ff(0x1a6),_0x470eae[_0x5a88ff(0x19c)]),await _0x6a4e7d['update']({'lastMessage':_0x470eae[_0x5a88ff(0x19c)]}),await(0x0,CreateMessageService_1[_0x5a88ff(0x1c6)])({'messageData':_0x470eae,'ticket':_0x6a4e7d,'companyId':_0x6a4e7d[_0x5a88ff(0x1b3)]});}}else{const _0x208eda='â€Ž\x20'+_0x5922f0['body'];await(0x0,SendPresenceStatus_1[_0x5a88ff(0x1bb)])(_0x425598,_0x3c1a57);const _0x51cc8f=await _0x425598[_0x5a88ff(0x198)](_0x3c1a57,{'text':(0x0,Mustache_1[_0x5a88ff(0x1c6)])(_0x208eda,_0x6a4e7d)});await(0x0,wbotMessageListener_1[_0x5a88ff(0x1a8)])(_0x51cc8f,_0x6a4e7d,_0x6a4e7d[_0x5a88ff(0x1ab)]);}return typeof _0x3572a4!='string'&&console[_0x5a88ff(0x1b0)](_0x5a88ff(0x1a6),_0x3572a4),await _0x6a4e7d[_0x5a88ff(0x1ac)]({'lastMessage':_0x3572a4}),(0x0,SetTicketMessagesAsRead_1[_0x5a88ff(0x1c6)])(_0x6a4e7d),_0x3342e9;}catch(_0x4cb4ff){throw new Error(_0x4cb4ff);}};exports['SendMessage']=SendMessage;