const a423_0x1eba85=a423_0x43e7;(function(_0xecd730,_0x4fce7e){const _0x35cac7=a423_0x43e7,_0x509742=_0xecd730();while(!![]){try{const _0x4b4f20=parseInt(_0x35cac7(0xec))/0x1*(parseInt(_0x35cac7(0xe0))/0x2)+parseInt(_0x35cac7(0xe2))/0x3*(-parseInt(_0x35cac7(0xf2))/0x4)+parseInt(_0x35cac7(0xd0))/0x5+parseInt(_0x35cac7(0xd8))/0x6*(parseInt(_0x35cac7(0xf5))/0x7)+-parseInt(_0x35cac7(0xeb))/0x8+-parseInt(_0x35cac7(0xd2))/0x9*(-parseInt(_0x35cac7(0xe5))/0xa)+-parseInt(_0x35cac7(0xcc))/0xb;if(_0x4b4f20===_0x4fce7e)break;else _0x509742['push'](_0x509742['shift']());}catch(_0x1bfa86){_0x509742['push'](_0x509742['shift']());}}}(a423_0x1867,0xd0dd2));const a423_0x3d02bc=(function(){let _0x1da45c=!![];return function(_0x40e9ca,_0x2c53e6){const _0x2811d5=_0x1da45c?function(){const _0xe6cf99=a423_0x43e7;if(_0x2c53e6){const _0x4030b1=_0x2c53e6[_0xe6cf99(0xf1)](_0x40e9ca,arguments);return _0x2c53e6=null,_0x4030b1;}}:function(){};return _0x1da45c=![],_0x2811d5;};}()),a423_0x5a696c=a423_0x3d02bc(this,function(){const _0x191ad4=a423_0x43e7;return a423_0x5a696c[_0x191ad4(0xed)]()['search'](_0x191ad4(0xd4))[_0x191ad4(0xed)]()[_0x191ad4(0xdf)](a423_0x5a696c)[_0x191ad4(0xf0)](_0x191ad4(0xd4));});a423_0x5a696c();'use strict';var __createBinding=this&&this[a423_0x1eba85(0xf6)]||(Object[a423_0x1eba85(0xe8)]?function(_0x483a73,_0x578e8a,_0x2d46bc,_0x535449){const _0x1dede0=a423_0x1eba85;if(_0x535449===undefined)_0x535449=_0x2d46bc;var _0xf46a26=Object[_0x1dede0(0xdd)](_0x578e8a,_0x2d46bc);(!_0xf46a26||('get'in _0xf46a26?!_0x578e8a['__esModule']:_0xf46a26['writable']||_0xf46a26['configurable']))&&(_0xf46a26={'enumerable':!![],'get':function(){return _0x578e8a[_0x2d46bc];}}),Object[_0x1dede0(0xe3)](_0x483a73,_0x535449,_0xf46a26);}:function(_0x4711be,_0x3e9db9,_0x186219,_0xb7d2c3){if(_0xb7d2c3===undefined)_0xb7d2c3=_0x186219;_0x4711be[_0xb7d2c3]=_0x3e9db9[_0x186219];}),__setModuleDefault=this&&this[a423_0x1eba85(0xe1)]||(Object['create']?function(_0xa81987,_0x301264){const _0x164957=a423_0x1eba85;Object['defineProperty'](_0xa81987,_0x164957(0xe6),{'enumerable':!![],'value':_0x301264});}:function(_0x21d51c,_0x299b87){const _0x2f8e8c=a423_0x1eba85;_0x21d51c[_0x2f8e8c(0xe6)]=_0x299b87;}),__importStar=this&&this[a423_0x1eba85(0xc8)]||function(_0x298a90){const _0x597474=a423_0x1eba85;if(_0x298a90&&_0x298a90[_0x597474(0xde)])return _0x298a90;var _0x2ce1d9={};if(_0x298a90!=null){for(var _0x2100fa in _0x298a90)if(_0x2100fa!==_0x597474(0xe6)&&Object[_0x597474(0xea)]['hasOwnProperty'][_0x597474(0xd3)](_0x298a90,_0x2100fa))__createBinding(_0x2ce1d9,_0x298a90,_0x2100fa);}return __setModuleDefault(_0x2ce1d9,_0x298a90),_0x2ce1d9;},__importDefault=this&&this[a423_0x1eba85(0xca)]||function(_0x7f0aa0){return _0x7f0aa0&&_0x7f0aa0['__esModule']?_0x7f0aa0:{'default':_0x7f0aa0};};Object['defineProperty'](exports,a423_0x1eba85(0xde),{'value':!![]}),exports[a423_0x1eba85(0xf4)]=void 0x0;function a423_0x43e7(_0x3626f3,_0x2827a0){const _0x2abfc2=a423_0x1867();return a423_0x43e7=function(_0x5a696c,_0x3d02bc){_0x5a696c=_0x5a696c-0xc6;let _0x1867fa=_0x2abfc2[_0x5a696c];return _0x1867fa;},a423_0x43e7(_0x3626f3,_0x2827a0);}function a423_0x1867(){const _0x178854=['create','moment','prototype','2793024Opdnmz','890481DmjylM','toString','nodemailer','value','search','apply','2796PdyaZM','schedule','SendMail','1431381iDWKkn','__createBinding','sendMail','../../models/Email','findOne','add','Erro\x20ao\x20agendar\x20e-mail:','__importStar','format','__importDefault','createTransport','27457969KPdfDw','E-mail\x20enviado\x20imediatamente','Erro\x20ao\x20enviar\x20e-mail:','smtpport','6437885BepZCM','Agendamento\x20de\x20e-mail\x20realizado\x20com\x20sucesso','2151nwLlsI','call','(((.+)+)+)+$','node-cron','message','hour','12kxfVdT','../../models/Setting','smtpauth','error','YYYY-MM-DDTHH:mm','getOwnPropertyDescriptor','__esModule','constructor','2bJVLqZ','__setModuleDefault','48EvWKtP','defineProperty','usersmtpauth','47070QJAuXY','default','Erro\x20ao\x20agendar\x20e-mail:\x20'];a423_0x1867=function(){return _0x178854;};return a423_0x1867();}const nodemailer_1=__importDefault(require(a423_0x1eba85(0xee))),Setting_1=__importDefault(require(a423_0x1eba85(0xd9))),Email_1=__importDefault(require(a423_0x1eba85(0xf8))),cron=__importStar(require(a423_0x1eba85(0xd5))),moment_1=__importDefault(require(a423_0x1eba85(0xe9))),SendMail=async(_0x119392,_0x1b5bc5,_0x5d79c3,_0x3daa8d,_0x3dee89,_0x98ce,_0x2e7199)=>{const _0x59863b=a423_0x1eba85;try{const _0x7a7a46=await Setting_1['default'][_0x59863b(0xf9)]({'where':{'companyId':_0x119392,'key':_0x59863b(0xda)}}),_0x4b03a1=await Setting_1[_0x59863b(0xe6)]['findOne']({'where':{'companyId':_0x119392,'key':_0x59863b(0xe4)}}),_0x938319=await Setting_1[_0x59863b(0xe6)][_0x59863b(0xf9)]({'where':{'companyId':_0x119392,'key':'clientsecretsmtpauth'}}),_0x456ce3=await Setting_1[_0x59863b(0xe6)]['findOne']({'where':{'companyId':_0x119392,'key':_0x59863b(0xcf)}}),_0x20f0c8=_0x7a7a46[_0x59863b(0xef)],_0x14e43f=_0x4b03a1[_0x59863b(0xef)],_0x2c57c1=_0x938319[_0x59863b(0xef)],_0x103323=_0x456ce3[_0x59863b(0xef)],_0x23d8ec=nodemailer_1[_0x59863b(0xe6)][_0x59863b(0xcb)]({'host':_0x20f0c8,'port':Number(_0x103323),'secure':![],'auth':{'user':_0x14e43f,'pass':_0x2c57c1}});async function _0x12d4bb(_0x1e7e06){const _0x19fb0a=_0x59863b;try{const _0x123bbe={'from':_0x14e43f,'to':_0x1b5bc5,'subject':_0x3daa8d,'text':_0x3dee89};return await _0x23d8ec[_0x19fb0a(0xf7)](_0x123bbe),await Email_1[_0x19fb0a(0xe6)]['create']({'sender':_0x1b5bc5,'subject':_0x3daa8d,'message':_0x3dee89,'companyId':_0x119392}),{'message':'E-mail\x20agendado\x20e\x20salvo\x20com\x20sucesso'};}catch(_0x251a47){console['error'](_0x19fb0a(0xce),_0x251a47);throw new Error('Erro\x20ao\x20enviar\x20e-mail:\x20'+_0x251a47);}}if(_0x2e7199)return cron[_0x59863b(0xf3)](_0x2e7199,()=>{const _0x50129e=_0x59863b,_0x4996b8=(0x0,moment_1[_0x50129e(0xe6)])()['add'](0x1,_0x50129e(0xd7))[_0x50129e(0xc9)]('YYYY-MM-DDTHH:mm');_0x12d4bb(_0x4996b8);}),{'message':_0x59863b(0xd1)};else{const _0x1e3e9d=(0x0,moment_1['default'])()[_0x59863b(0xc6)](0x1,'hour')[_0x59863b(0xc9)](_0x59863b(0xdc));return _0x12d4bb(_0x1e3e9d),{'message':_0x59863b(0xcd)};}}catch(_0x128498){return console[_0x59863b(0xdb)](_0x59863b(0xc7),_0x128498),{'error':_0x59863b(0xe7)+_0x128498[_0x59863b(0xd6)]};}};exports[a423_0x1eba85(0xf4)]=SendMail,exports[a423_0x1eba85(0xe6)]=exports['SendMail'];