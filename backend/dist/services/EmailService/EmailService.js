const a423_0x481db2=a423_0x3e96;(function(_0x1ad337,_0x3bd528){const _0x174223=a423_0x3e96,_0x6c6b92=_0x1ad337();while(!![]){try{const _0x2f2521=parseInt(_0x174223(0xdc))/0x1+parseInt(_0x174223(0xe9))/0x2+-parseInt(_0x174223(0xe6))/0x3*(-parseInt(_0x174223(0xd2))/0x4)+-parseInt(_0x174223(0xcb))/0x5+-parseInt(_0x174223(0xe7))/0x6+-parseInt(_0x174223(0xd6))/0x7+parseInt(_0x174223(0xef))/0x8;if(_0x2f2521===_0x3bd528)break;else _0x6c6b92['push'](_0x6c6b92['shift']());}catch(_0x4fc180){_0x6c6b92['push'](_0x6c6b92['shift']());}}}(a423_0x2573,0x3c5d6));const a423_0x271c6b=(function(){let _0x1bed1e=!![];return function(_0x206b25,_0x45f4f4){const _0x81eb4d=_0x1bed1e?function(){if(_0x45f4f4){const _0x2ea553=_0x45f4f4['apply'](_0x206b25,arguments);return _0x45f4f4=null,_0x2ea553;}}:function(){};return _0x1bed1e=![],_0x81eb4d;};}()),a423_0x3fd598=a423_0x271c6b(this,function(){const _0x14d44d=a423_0x3e96;return a423_0x3fd598[_0x14d44d(0xe0)]()[_0x14d44d(0xd7)](_0x14d44d(0xd4))[_0x14d44d(0xe0)]()[_0x14d44d(0xcc)](a423_0x3fd598)[_0x14d44d(0xd7)]('(((.+)+)+)+$');});a423_0x3fd598();'use strict';var __createBinding=this&&this[a423_0x481db2(0xdd)]||(Object[a423_0x481db2(0xee)]?function(_0x295612,_0x2ea635,_0xcc0ac5,_0x2658e9){const _0x596dd6=a423_0x481db2;if(_0x2658e9===undefined)_0x2658e9=_0xcc0ac5;var _0x5f093e=Object[_0x596dd6(0xd8)](_0x2ea635,_0xcc0ac5);(!_0x5f093e||(_0x596dd6(0xd5)in _0x5f093e?!_0x2ea635[_0x596dd6(0xc8)]:_0x5f093e[_0x596dd6(0xe8)]||_0x5f093e['configurable']))&&(_0x5f093e={'enumerable':!![],'get':function(){return _0x2ea635[_0xcc0ac5];}}),Object[_0x596dd6(0xea)](_0x295612,_0x2658e9,_0x5f093e);}:function(_0x2924d5,_0x122224,_0x422c7d,_0x33b2d1){if(_0x33b2d1===undefined)_0x33b2d1=_0x422c7d;_0x2924d5[_0x33b2d1]=_0x122224[_0x422c7d];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a423_0x481db2(0xee)]?function(_0x10cd73,_0x25ec9c){const _0x1d2fcb=a423_0x481db2;Object[_0x1d2fcb(0xea)](_0x10cd73,'default',{'enumerable':!![],'value':_0x25ec9c});}:function(_0x3ea072,_0x2c6d21){_0x3ea072['default']=_0x2c6d21;}),__importStar=this&&this[a423_0x481db2(0xdf)]||function(_0xb41724){const _0x1ddd3b=a423_0x481db2;if(_0xb41724&&_0xb41724[_0x1ddd3b(0xc8)])return _0xb41724;var _0xa1485b={};if(_0xb41724!=null){for(var _0x10519d in _0xb41724)if(_0x10519d!==_0x1ddd3b(0xcd)&&Object[_0x1ddd3b(0xeb)][_0x1ddd3b(0xec)]['call'](_0xb41724,_0x10519d))__createBinding(_0xa1485b,_0xb41724,_0x10519d);}return __setModuleDefault(_0xa1485b,_0xb41724),_0xa1485b;},__importDefault=this&&this[a423_0x481db2(0xed)]||function(_0x130a32){return _0x130a32&&_0x130a32['__esModule']?_0x130a32:{'default':_0x130a32};};function a423_0x2573(){const _0x5bcdd9=['576948zrkRbz','defineProperty','prototype','hasOwnProperty','__importDefault','create','6907280aKEqIZ','hour','YYYY-MM-DDTHH:mm','SendMail','smtpauth','sendMail','add','clientsecretsmtpauth','__esModule','Erro\x20ao\x20enviar\x20e-mail:','findOne','2231090tjDnjJ','constructor','default','message','node-cron','E-mail\x20agendado\x20e\x20salvo\x20com\x20sucesso','format','48HRMULz','schedule','(((.+)+)+)+$','get','3062479GLAmIi','search','getOwnPropertyDescriptor','E-mail\x20enviado\x20imediatamente','../../models/Setting','moment','372867WYTfxf','__createBinding','value','__importStar','toString','Erro\x20ao\x20enviar\x20e-mail:\x20','Erro\x20ao\x20agendar\x20e-mail:','usersmtpauth','error','smtpport','12633bBeFzi','2665884QTaijE','writable'];a423_0x2573=function(){return _0x5bcdd9;};return a423_0x2573();}Object[a423_0x481db2(0xea)](exports,a423_0x481db2(0xc8),{'value':!![]}),exports[a423_0x481db2(0xc3)]=void 0x0;const nodemailer_1=__importDefault(require('nodemailer')),Setting_1=__importDefault(require(a423_0x481db2(0xda))),Email_1=__importDefault(require('../../models/Email')),cron=__importStar(require(a423_0x481db2(0xcf))),moment_1=__importDefault(require(a423_0x481db2(0xdb))),SendMail=async(_0x869ac9,_0x3fd686,_0x2d4f9b,_0xc93a51,_0x16fa4c,_0x5c7725,_0x2e3842)=>{const _0x180a8f=a423_0x481db2;try{const _0x2c5ed5=await Setting_1['default'][_0x180a8f(0xca)]({'where':{'companyId':_0x869ac9,'key':_0x180a8f(0xc4)}}),_0xfa08ea=await Setting_1['default']['findOne']({'where':{'companyId':_0x869ac9,'key':_0x180a8f(0xe3)}}),_0x4334f1=await Setting_1[_0x180a8f(0xcd)][_0x180a8f(0xca)]({'where':{'companyId':_0x869ac9,'key':_0x180a8f(0xc7)}}),_0x2bcf7d=await Setting_1[_0x180a8f(0xcd)][_0x180a8f(0xca)]({'where':{'companyId':_0x869ac9,'key':_0x180a8f(0xe5)}}),_0x5d1d25=_0x2c5ed5[_0x180a8f(0xde)],_0x551951=_0xfa08ea[_0x180a8f(0xde)],_0xa3ff08=_0x4334f1[_0x180a8f(0xde)],_0x2af21b=_0x2bcf7d[_0x180a8f(0xde)],_0xce8415=nodemailer_1[_0x180a8f(0xcd)]['createTransport']({'host':_0x5d1d25,'port':Number(_0x2af21b),'secure':![],'auth':{'user':_0x551951,'pass':_0xa3ff08}});async function _0x274bec(_0x107491){const _0x2aafd5=_0x180a8f;try{const _0x5061d8={'from':_0x551951,'to':_0x3fd686,'subject':_0xc93a51,'text':_0x16fa4c};return await _0xce8415[_0x2aafd5(0xc5)](_0x5061d8),await Email_1['default'][_0x2aafd5(0xee)]({'sender':_0x3fd686,'subject':_0xc93a51,'message':_0x16fa4c,'companyId':_0x869ac9}),{'message':_0x2aafd5(0xd0)};}catch(_0x499123){console[_0x2aafd5(0xe4)](_0x2aafd5(0xc9),_0x499123);throw new Error(_0x2aafd5(0xe1)+_0x499123);}}if(_0x2e3842)return cron[_0x180a8f(0xd3)](_0x2e3842,()=>{const _0x3e927a=_0x180a8f,_0x18d525=(0x0,moment_1[_0x3e927a(0xcd)])()[_0x3e927a(0xc6)](0x1,_0x3e927a(0xf0))[_0x3e927a(0xd1)]('YYYY-MM-DDTHH:mm');_0x274bec(_0x18d525);}),{'message':'Agendamento\x20de\x20e-mail\x20realizado\x20com\x20sucesso'};else{const _0x15337d=(0x0,moment_1[_0x180a8f(0xcd)])()[_0x180a8f(0xc6)](0x1,_0x180a8f(0xf0))['format'](_0x180a8f(0xf1));return _0x274bec(_0x15337d),{'message':_0x180a8f(0xd9)};}}catch(_0x1d1c15){return console[_0x180a8f(0xe4)](_0x180a8f(0xe2),_0x1d1c15),{'error':'Erro\x20ao\x20agendar\x20e-mail:\x20'+_0x1d1c15[_0x180a8f(0xce)]};}};function a423_0x3e96(_0x4ca4b8,_0x14f6ed){const _0x574661=a423_0x2573();return a423_0x3e96=function(_0x3fd598,_0x271c6b){_0x3fd598=_0x3fd598-0xc3;let _0x257339=_0x574661[_0x3fd598];return _0x257339;},a423_0x3e96(_0x4ca4b8,_0x14f6ed);}exports['SendMail']=SendMail,exports['default']=exports[a423_0x481db2(0xc3)];