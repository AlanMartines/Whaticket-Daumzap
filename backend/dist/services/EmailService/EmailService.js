const a423_0x375f22=a423_0x50ee;function a423_0x50ee(_0x3dabde,_0x451807){const _0x4542de=a423_0x5e65();return a423_0x50ee=function(_0x550f9d,_0x5b0197){_0x550f9d=_0x550f9d-0x1a9;let _0x5e6551=_0x4542de[_0x550f9d];return _0x5e6551;},a423_0x50ee(_0x3dabde,_0x451807);}(function(_0x44c818,_0x8630c3){const _0x28e43b=a423_0x50ee,_0x27cf0c=_0x44c818();while(!![]){try{const _0x59897e=-parseInt(_0x28e43b(0x1cd))/0x1*(parseInt(_0x28e43b(0x1bb))/0x2)+parseInt(_0x28e43b(0x1bf))/0x3+-parseInt(_0x28e43b(0x1d2))/0x4+parseInt(_0x28e43b(0x1ac))/0x5+parseInt(_0x28e43b(0x1cb))/0x6*(parseInt(_0x28e43b(0x1c3))/0x7)+-parseInt(_0x28e43b(0x1ca))/0x8*(-parseInt(_0x28e43b(0x1be))/0x9)+-parseInt(_0x28e43b(0x1b2))/0xa*(parseInt(_0x28e43b(0x1d6))/0xb);if(_0x59897e===_0x8630c3)break;else _0x27cf0c['push'](_0x27cf0c['shift']());}catch(_0x446e78){_0x27cf0c['push'](_0x27cf0c['shift']());}}}(a423_0x5e65,0xc1a97));const a423_0x5b0197=(function(){let _0x160395=!![];return function(_0x1918b9,_0x11e48e){const _0x2e8f34=_0x160395?function(){const _0x8b1b80=a423_0x50ee;if(_0x11e48e){const _0x56d602=_0x11e48e[_0x8b1b80(0x1d0)](_0x1918b9,arguments);return _0x11e48e=null,_0x56d602;}}:function(){};return _0x160395=![],_0x2e8f34;};}()),a423_0x550f9d=a423_0x5b0197(this,function(){const _0x286814=a423_0x50ee;return a423_0x550f9d[_0x286814(0x1ab)]()['search'](_0x286814(0x1d5))[_0x286814(0x1ab)]()[_0x286814(0x1b6)](a423_0x550f9d)['search']('(((.+)+)+)+$');});function a423_0x5e65(){const _0x56c8f1=['10eCvwGJ','configurable','__createBinding','__importDefault','constructor','add','__setModuleDefault','YYYY-MM-DDTHH:mm','E-mail\x20enviado\x20imediatamente','1756652BdowLs','hasOwnProperty','hour','711sDkMKz','4177443yUCjRU','sendMail','value','message','192171KVSsJg','nodemailer','clientsecretsmtpauth','smtpport','moment','error','createTransport','131368RmBMSK','234yBOPqe','SendMail','1KpwwlI','smtpauth','default','apply','defineProperty','5382908cBnzXj','usersmtpauth','schedule','(((.+)+)+)+$','19316275mtCiQX','../../models/Setting','findOne','create','Erro\x20ao\x20agendar\x20e-mail:\x20','toString','5064550IbWAhS','writable','__esModule','Erro\x20ao\x20enviar\x20e-mail:\x20','prototype','format'];a423_0x5e65=function(){return _0x56c8f1;};return a423_0x5e65();}a423_0x550f9d();'use strict';var __createBinding=this&&this[a423_0x375f22(0x1b4)]||(Object[a423_0x375f22(0x1a9)]?function(_0x594058,_0x32a3e6,_0x2a346c,_0x59b4cf){const _0x475462=a423_0x375f22;if(_0x59b4cf===undefined)_0x59b4cf=_0x2a346c;var _0x1af76e=Object['getOwnPropertyDescriptor'](_0x32a3e6,_0x2a346c);(!_0x1af76e||('get'in _0x1af76e?!_0x32a3e6[_0x475462(0x1ae)]:_0x1af76e[_0x475462(0x1ad)]||_0x1af76e[_0x475462(0x1b3)]))&&(_0x1af76e={'enumerable':!![],'get':function(){return _0x32a3e6[_0x2a346c];}}),Object[_0x475462(0x1d1)](_0x594058,_0x59b4cf,_0x1af76e);}:function(_0x30899e,_0x9e983,_0xa76444,_0x4fdaf9){if(_0x4fdaf9===undefined)_0x4fdaf9=_0xa76444;_0x30899e[_0x4fdaf9]=_0x9e983[_0xa76444];}),__setModuleDefault=this&&this[a423_0x375f22(0x1b8)]||(Object[a423_0x375f22(0x1a9)]?function(_0x2cff39,_0x467d43){const _0x5d61d3=a423_0x375f22;Object[_0x5d61d3(0x1d1)](_0x2cff39,_0x5d61d3(0x1cf),{'enumerable':!![],'value':_0x467d43});}:function(_0x2419a4,_0x83aa5e){const _0x41c513=a423_0x375f22;_0x2419a4[_0x41c513(0x1cf)]=_0x83aa5e;}),__importStar=this&&this['__importStar']||function(_0x29c4d5){const _0x14eafe=a423_0x375f22;if(_0x29c4d5&&_0x29c4d5[_0x14eafe(0x1ae)])return _0x29c4d5;var _0x4a81e9={};if(_0x29c4d5!=null){for(var _0x1031c2 in _0x29c4d5)if(_0x1031c2!=='default'&&Object[_0x14eafe(0x1b0)][_0x14eafe(0x1bc)]['call'](_0x29c4d5,_0x1031c2))__createBinding(_0x4a81e9,_0x29c4d5,_0x1031c2);}return __setModuleDefault(_0x4a81e9,_0x29c4d5),_0x4a81e9;},__importDefault=this&&this[a423_0x375f22(0x1b5)]||function(_0x413f1b){return _0x413f1b&&_0x413f1b['__esModule']?_0x413f1b:{'default':_0x413f1b};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a423_0x375f22(0x1cc)]=void 0x0;const nodemailer_1=__importDefault(require(a423_0x375f22(0x1c4))),Setting_1=__importDefault(require(a423_0x375f22(0x1d7))),Email_1=__importDefault(require('../../models/Email')),cron=__importStar(require('node-cron')),moment_1=__importDefault(require(a423_0x375f22(0x1c7))),SendMail=async(_0x421be1,_0x190e7d,_0x56146e,_0x11de21,_0x280108,_0x2728f0,_0x583463)=>{const _0xf63743=a423_0x375f22;try{const _0x375c31=await Setting_1[_0xf63743(0x1cf)][_0xf63743(0x1d8)]({'where':{'companyId':_0x421be1,'key':_0xf63743(0x1ce)}}),_0x398857=await Setting_1[_0xf63743(0x1cf)][_0xf63743(0x1d8)]({'where':{'companyId':_0x421be1,'key':_0xf63743(0x1d3)}}),_0x495c16=await Setting_1['default'][_0xf63743(0x1d8)]({'where':{'companyId':_0x421be1,'key':_0xf63743(0x1c5)}}),_0x36969b=await Setting_1['default'][_0xf63743(0x1d8)]({'where':{'companyId':_0x421be1,'key':_0xf63743(0x1c6)}}),_0x2d680f=_0x375c31[_0xf63743(0x1c1)],_0x241459=_0x398857[_0xf63743(0x1c1)],_0x9d2d78=_0x495c16[_0xf63743(0x1c1)],_0x52b1a5=_0x36969b[_0xf63743(0x1c1)],_0x26a0a8=nodemailer_1[_0xf63743(0x1cf)][_0xf63743(0x1c9)]({'host':_0x2d680f,'port':Number(_0x52b1a5),'secure':![],'auth':{'user':_0x241459,'pass':_0x9d2d78}});async function _0x146d63(_0xa0bdc4){const _0x3d6b0b=_0xf63743;try{const _0x13d4e5={'from':_0x241459,'to':_0x190e7d,'subject':_0x11de21,'text':_0x280108};return await _0x26a0a8[_0x3d6b0b(0x1c0)](_0x13d4e5),await Email_1[_0x3d6b0b(0x1cf)][_0x3d6b0b(0x1a9)]({'sender':_0x190e7d,'subject':_0x11de21,'message':_0x280108,'companyId':_0x421be1}),{'message':'E-mail\x20agendado\x20e\x20salvo\x20com\x20sucesso'};}catch(_0x4dc653){console[_0x3d6b0b(0x1c8)]('Erro\x20ao\x20enviar\x20e-mail:',_0x4dc653);throw new Error(_0x3d6b0b(0x1af)+_0x4dc653);}}if(_0x583463)return cron[_0xf63743(0x1d4)](_0x583463,()=>{const _0x1d477d=_0xf63743,_0x1f2fd5=(0x0,moment_1[_0x1d477d(0x1cf)])()[_0x1d477d(0x1b7)](0x1,'hour')['format'](_0x1d477d(0x1b9));_0x146d63(_0x1f2fd5);}),{'message':'Agendamento\x20de\x20e-mail\x20realizado\x20com\x20sucesso'};else{const _0x18fb9b=(0x0,moment_1[_0xf63743(0x1cf)])()['add'](0x1,_0xf63743(0x1bd))[_0xf63743(0x1b1)](_0xf63743(0x1b9));return _0x146d63(_0x18fb9b),{'message':_0xf63743(0x1ba)};}}catch(_0x1498d5){return console[_0xf63743(0x1c8)]('Erro\x20ao\x20agendar\x20e-mail:',_0x1498d5),{'error':_0xf63743(0x1aa)+_0x1498d5[_0xf63743(0x1c2)]};}};exports['SendMail']=SendMail,exports['default']=exports[a423_0x375f22(0x1cc)];