const a544_0x5d5e6b=a544_0x325c;(function(_0x257cc8,_0x89c840){const _0x368b3d=a544_0x325c,_0x23c544=_0x257cc8();while(!![]){try{const _0x9e4dad=-parseInt(_0x368b3d(0x80))/0x1*(parseInt(_0x368b3d(0xb1))/0x2)+-parseInt(_0x368b3d(0x9b))/0x3+parseInt(_0x368b3d(0x7f))/0x4+parseInt(_0x368b3d(0x86))/0x5+parseInt(_0x368b3d(0x8e))/0x6+parseInt(_0x368b3d(0x8b))/0x7*(-parseInt(_0x368b3d(0x9f))/0x8)+parseInt(_0x368b3d(0x91))/0x9;if(_0x9e4dad===_0x89c840)break;else _0x23c544['push'](_0x23c544['shift']());}catch(_0x20a7ab){_0x23c544['push'](_0x23c544['shift']());}}}(a544_0x5de8,0x66149));const a544_0x35a257=(function(){let _0x5793b4=!![];return function(_0x35b3c7,_0x2f9035){const _0x3d9c5e=_0x5793b4?function(){const _0x2946b6=a544_0x325c;if(_0x2f9035){const _0x1bf0e0=_0x2f9035[_0x2946b6(0x99)](_0x35b3c7,arguments);return _0x2f9035=null,_0x1bf0e0;}}:function(){};return _0x5793b4=![],_0x3d9c5e;};}()),a544_0x1f12fc=a544_0x35a257(this,function(){const _0x498f07=a544_0x325c;return a544_0x1f12fc[_0x498f07(0xa9)]()['search'](_0x498f07(0x8f))['toString']()[_0x498f07(0x9d)](a544_0x1f12fc)['search'](_0x498f07(0x8f));});a544_0x1f12fc();'use strict';var __createBinding=this&&this[a544_0x5d5e6b(0xa4)]||(Object[a544_0x5d5e6b(0xa3)]?function(_0x2924f4,_0x2777de,_0x1265b7,_0x5b9bd3){const _0x4c3ed1=a544_0x5d5e6b;if(_0x5b9bd3===undefined)_0x5b9bd3=_0x1265b7;var _0x2585ae=Object[_0x4c3ed1(0x88)](_0x2777de,_0x1265b7);(!_0x2585ae||(_0x4c3ed1(0x97)in _0x2585ae?!_0x2777de[_0x4c3ed1(0xab)]:_0x2585ae['writable']||_0x2585ae['configurable']))&&(_0x2585ae={'enumerable':!![],'get':function(){return _0x2777de[_0x1265b7];}}),Object['defineProperty'](_0x2924f4,_0x5b9bd3,_0x2585ae);}:function(_0x5ae37c,_0x19a4c6,_0x1d14b0,_0x3ff8ee){if(_0x3ff8ee===undefined)_0x3ff8ee=_0x1d14b0;_0x5ae37c[_0x3ff8ee]=_0x19a4c6[_0x1d14b0];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a544_0x5d5e6b(0xa3)]?function(_0x2f0966,_0x18c583){const _0x2f8f52=a544_0x5d5e6b;Object[_0x2f8f52(0xa7)](_0x2f0966,_0x2f8f52(0xa1),{'enumerable':!![],'value':_0x18c583});}:function(_0x2acedf,_0x51657e){_0x2acedf['default']=_0x51657e;}),__importStar=this&&this[a544_0x5d5e6b(0xa5)]||function(_0x2c2c42){const _0x240ea6=a544_0x5d5e6b;if(_0x2c2c42&&_0x2c2c42['__esModule'])return _0x2c2c42;var _0x3efeb0={};if(_0x2c2c42!=null){for(var _0x23ac3e in _0x2c2c42)if(_0x23ac3e!==_0x240ea6(0xa1)&&Object[_0x240ea6(0xa2)][_0x240ea6(0xb3)][_0x240ea6(0xa0)](_0x2c2c42,_0x23ac3e))__createBinding(_0x3efeb0,_0x2c2c42,_0x23ac3e);}return __setModuleDefault(_0x3efeb0,_0x2c2c42),_0x3efeb0;},__importDefault=this&&this['__importDefault']||function(_0x199239){const _0x6cd72b=a544_0x5d5e6b;return _0x199239&&_0x199239[_0x6cd72b(0xab)]?_0x199239:{'default':_0x199239};};function a544_0x5de8(){const _0x44e9ed=['call','default','prototype','create','__createBinding','__importStar','replace','defineProperty','contatos_depois.txt','toString','error','__esModule','company','name','../ContactServices/CreateContactService','writeFile','contatos_antes.txt','281378SZqdky','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20','hasOwnProperty','companyId','stringify','1640264AdrZpl','3bIPbas','Failed\x20to\x20write\x20contacts\x20to\x20file:\x20','../../helpers/GetDefaultWhatsApp','findOne','@sentry/node','public','227445fgPzZd','../../utils/logger','getOwnPropertyDescriptor','lodash','includes','24871aMvZzc','captureException','logger','2357376XqQRlW','(((.+)+)+)+$','../BaileysServices/ShowBaileysService','5284044WSzwwt','join','isArray','resolve','save','path','get','g.us','apply','status@broadcast','645624PKWEIJ','../../models/Contact','constructor','parse','856XTZrGD'];a544_0x5de8=function(){return _0x44e9ed;};return a544_0x5de8();}Object[a544_0x5d5e6b(0xa7)](exports,'__esModule',{'value':!![]});function a544_0x325c(_0x141cec,_0x16a051){const _0x3b4fcc=a544_0x5de8();return a544_0x325c=function(_0x1f12fc,_0x35a257){_0x1f12fc=_0x1f12fc-0x7d;let _0x5de88a=_0x3b4fcc[_0x1f12fc];return _0x5de88a;},a544_0x325c(_0x141cec,_0x16a051);}const Sentry=__importStar(require(a544_0x5d5e6b(0x84))),GetDefaultWhatsApp_1=__importDefault(require(a544_0x5d5e6b(0x82))),wbot_1=require('../../libs/wbot'),Contact_1=__importDefault(require(a544_0x5d5e6b(0x9c))),logger_1=require(a544_0x5d5e6b(0x87)),ShowBaileysService_1=__importDefault(require(a544_0x5d5e6b(0x90))),CreateContactService_1=__importDefault(require(a544_0x5d5e6b(0xae))),lodash_1=require(a544_0x5d5e6b(0x89)),path_1=__importDefault(require(a544_0x5d5e6b(0x96))),fs_1=__importDefault(require('fs')),ImportContactsService=async _0xf9c05c=>{const _0xcd9a16=a544_0x5d5e6b,_0x251993=await(0x0,GetDefaultWhatsApp_1[_0xcd9a16(0xa1)])(_0xf9c05c),_0x2fb029=(0x0,wbot_1['getWbot'])(_0x251993['id']);let _0x35677e;try{const _0xd4d304=await(0x0,ShowBaileysService_1[_0xcd9a16(0xa1)])(_0x2fb029['id']);_0x35677e=JSON[_0xcd9a16(0x9e)](_0xd4d304['contacts']);const _0x2786df=path_1[_0xcd9a16(0xa1)][_0xcd9a16(0x94)](__dirname,'..','..','..','public','company'+_0x251993[_0xcd9a16(0x7d)]),_0x1a19ad=path_1['default'][_0xcd9a16(0x92)](_0x2786df,_0xcd9a16(0xb0));fs_1[_0xcd9a16(0xa1)][_0xcd9a16(0xaf)](_0x1a19ad,JSON[_0xcd9a16(0x7e)](_0x35677e,null,0x2),_0x42387a=>{const _0x151b8b=_0xcd9a16;if(_0x42387a){logger_1[_0x151b8b(0x8d)]['error'](_0x151b8b(0x81)+_0x42387a);throw _0x42387a;}});}catch(_0x5455e2){Sentry[_0xcd9a16(0x8c)](_0x5455e2),logger_1['logger'][_0xcd9a16(0xaa)](_0xcd9a16(0xb2)+_0x5455e2);}const _0x59af68=path_1['default']['resolve'](__dirname,'..','..','..',_0xcd9a16(0x85),_0xcd9a16(0xac)+_0x251993[_0xcd9a16(0x7d)]),_0x14a733=path_1[_0xcd9a16(0xa1)]['join'](_0x59af68,_0xcd9a16(0xa8));fs_1[_0xcd9a16(0xa1)][_0xcd9a16(0xaf)](_0x14a733,JSON[_0xcd9a16(0x7e)](_0x35677e,null,0x2),_0x339581=>{const _0x5942f2=_0xcd9a16;if(_0x339581){logger_1['logger'][_0x5942f2(0xaa)](_0x5942f2(0x81)+_0x339581);throw _0x339581;}});const _0x1850f4=(0x0,lodash_1['isString'])(_0x35677e)?JSON['parse'](_0x35677e):_0x35677e;if((0x0,lodash_1[_0xcd9a16(0x93)])(_0x1850f4))for(const {id:_0x509542,name:_0x3a8aef,notify:_0x49eb39}of _0x1850f4){if(_0x509542===_0xcd9a16(0x9a)||_0x509542[_0xcd9a16(0x8a)](_0xcd9a16(0x98)))continue;const _0x5a30f2=_0x509542[_0xcd9a16(0xa6)](/\D/g,''),_0x586f5d=await Contact_1[_0xcd9a16(0xa1)][_0xcd9a16(0x83)]({'where':{'number':_0x5a30f2,'companyId':_0xf9c05c}});if(_0x586f5d)_0x586f5d[_0xcd9a16(0xad)]=_0x3a8aef||_0x49eb39,await _0x586f5d[_0xcd9a16(0x95)]();else try{await(0x0,CreateContactService_1[_0xcd9a16(0xa1)])({'number':_0x5a30f2,'name':_0x3a8aef||_0x49eb39,'companyId':_0xf9c05c});}catch(_0x50c0bd){Sentry[_0xcd9a16(0x8c)](_0x50c0bd),logger_1[_0xcd9a16(0x8d)]['warn']('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20'+_0x50c0bd);}}};exports[a544_0x5d5e6b(0xa1)]=ImportContactsService;