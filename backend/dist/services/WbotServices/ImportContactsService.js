const a544_0x4a3e5d=a544_0x104a;(function(_0xe4205a,_0x1f5d98){const _0x3a73f8=a544_0x104a,_0xb49137=_0xe4205a();while(!![]){try{const _0x1c19a7=parseInt(_0x3a73f8(0x16d))/0x1+-parseInt(_0x3a73f8(0x19a))/0x2+-parseInt(_0x3a73f8(0x177))/0x3*(parseInt(_0x3a73f8(0x170))/0x4)+parseInt(_0x3a73f8(0x196))/0x5*(-parseInt(_0x3a73f8(0x17f))/0x6)+-parseInt(_0x3a73f8(0x185))/0x7+parseInt(_0x3a73f8(0x181))/0x8+-parseInt(_0x3a73f8(0x18c))/0x9*(-parseInt(_0x3a73f8(0x190))/0xa);if(_0x1c19a7===_0x1f5d98)break;else _0xb49137['push'](_0xb49137['shift']());}catch(_0x5e5b7b){_0xb49137['push'](_0xb49137['shift']());}}}(a544_0x104d,0x629b9));const a544_0x29dc82=(function(){let _0x518051=!![];return function(_0x1bc9b0,_0xec7ea2){const _0x5f5a0e=_0x518051?function(){const _0x2a9a2a=a544_0x104a;if(_0xec7ea2){const _0x11be0e=_0xec7ea2[_0x2a9a2a(0x187)](_0x1bc9b0,arguments);return _0xec7ea2=null,_0x11be0e;}}:function(){};return _0x518051=![],_0x5f5a0e;};}()),a544_0x63a8b5=a544_0x29dc82(this,function(){const _0x3ba475=a544_0x104a;return a544_0x63a8b5[_0x3ba475(0x180)]()['search'](_0x3ba475(0x17a))['toString']()[_0x3ba475(0x19e)](a544_0x63a8b5)['search'](_0x3ba475(0x17a));});function a544_0x104d(){const _0x3558ff=['4qLwqVZ','company','stringify','getWbot','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20','replace','Failed\x20to\x20write\x20contacts\x20to\x20file:\x20','1547505UsUUiB','../BaileysServices/ShowBaileysService','error','(((.+)+)+)+$','name','join','__importDefault','contacts','92994vYgnNC','toString','4405616wxHCnr','lodash','../../utils/logger','__createBinding','3103842HZhiqA','defineProperty','apply','__setModuleDefault','call','logger','../../helpers/GetDefaultWhatsApp','44703aQCoEK','writeFile','save','__importStar','2410WqHzNM','create','../../models/Contact','writable','resolve','public','250wdzsIn','contatos_depois.txt','companyId','contatos_antes.txt','6448WSEofN','@sentry/node','findOne','prototype','constructor','../../libs/wbot','default','../ContactServices/CreateContactService','393563KJkjmi','__esModule','parse'];a544_0x104d=function(){return _0x3558ff;};return a544_0x104d();}a544_0x63a8b5();'use strict';var __createBinding=this&&this[a544_0x4a3e5d(0x184)]||(Object[a544_0x4a3e5d(0x191)]?function(_0x548a94,_0x53524f,_0x5ba9bf,_0x46406c){const _0x449091=a544_0x4a3e5d;if(_0x46406c===undefined)_0x46406c=_0x5ba9bf;var _0x626ab3=Object['getOwnPropertyDescriptor'](_0x53524f,_0x5ba9bf);(!_0x626ab3||('get'in _0x626ab3?!_0x53524f[_0x449091(0x16e)]:_0x626ab3[_0x449091(0x193)]||_0x626ab3['configurable']))&&(_0x626ab3={'enumerable':!![],'get':function(){return _0x53524f[_0x5ba9bf];}}),Object[_0x449091(0x186)](_0x548a94,_0x46406c,_0x626ab3);}:function(_0x369f01,_0x164370,_0x46613d,_0x287039){if(_0x287039===undefined)_0x287039=_0x46613d;_0x369f01[_0x287039]=_0x164370[_0x46613d];}),__setModuleDefault=this&&this[a544_0x4a3e5d(0x188)]||(Object[a544_0x4a3e5d(0x191)]?function(_0x117663,_0x18b8fb){const _0x1013e8=a544_0x4a3e5d;Object[_0x1013e8(0x186)](_0x117663,_0x1013e8(0x1a0),{'enumerable':!![],'value':_0x18b8fb});}:function(_0x18fff1,_0x4ae974){const _0x2ce4a4=a544_0x4a3e5d;_0x18fff1[_0x2ce4a4(0x1a0)]=_0x4ae974;}),__importStar=this&&this[a544_0x4a3e5d(0x18f)]||function(_0x547ed7){const _0x40bf2d=a544_0x4a3e5d;if(_0x547ed7&&_0x547ed7[_0x40bf2d(0x16e)])return _0x547ed7;var _0x168c8d={};if(_0x547ed7!=null){for(var _0x36de2d in _0x547ed7)if(_0x36de2d!==_0x40bf2d(0x1a0)&&Object[_0x40bf2d(0x19d)]['hasOwnProperty'][_0x40bf2d(0x189)](_0x547ed7,_0x36de2d))__createBinding(_0x168c8d,_0x547ed7,_0x36de2d);}return __setModuleDefault(_0x168c8d,_0x547ed7),_0x168c8d;},__importDefault=this&&this[a544_0x4a3e5d(0x17d)]||function(_0x4e934b){return _0x4e934b&&_0x4e934b['__esModule']?_0x4e934b:{'default':_0x4e934b};};Object['defineProperty'](exports,a544_0x4a3e5d(0x16e),{'value':!![]});function a544_0x104a(_0x25ef88,_0x39d37e){const _0x43fef0=a544_0x104d();return a544_0x104a=function(_0x63a8b5,_0x29dc82){_0x63a8b5=_0x63a8b5-0x16c;let _0x104dfd=_0x43fef0[_0x63a8b5];return _0x104dfd;},a544_0x104a(_0x25ef88,_0x39d37e);}const Sentry=__importStar(require(a544_0x4a3e5d(0x19b))),GetDefaultWhatsApp_1=__importDefault(require(a544_0x4a3e5d(0x18b))),wbot_1=require(a544_0x4a3e5d(0x19f)),Contact_1=__importDefault(require(a544_0x4a3e5d(0x192))),logger_1=require(a544_0x4a3e5d(0x183)),ShowBaileysService_1=__importDefault(require(a544_0x4a3e5d(0x178))),CreateContactService_1=__importDefault(require(a544_0x4a3e5d(0x16c))),lodash_1=require(a544_0x4a3e5d(0x182)),path_1=__importDefault(require('path')),fs_1=__importDefault(require('fs')),ImportContactsService=async _0x5e4ad6=>{const _0x257cbf=a544_0x4a3e5d,_0x430fca=await(0x0,GetDefaultWhatsApp_1['default'])(_0x5e4ad6),_0x339ab9=(0x0,wbot_1[_0x257cbf(0x173)])(_0x430fca['id']);let _0x8927d2;try{const _0x3a79e4=await(0x0,ShowBaileysService_1['default'])(_0x339ab9['id']);_0x8927d2=JSON['parse'](_0x3a79e4[_0x257cbf(0x17e)]);const _0x99f816=path_1[_0x257cbf(0x1a0)]['resolve'](__dirname,'..','..','..',_0x257cbf(0x195),_0x257cbf(0x171)+_0x430fca[_0x257cbf(0x198)]),_0x2460ba=path_1[_0x257cbf(0x1a0)][_0x257cbf(0x17c)](_0x99f816,_0x257cbf(0x199));fs_1[_0x257cbf(0x1a0)]['writeFile'](_0x2460ba,JSON['stringify'](_0x8927d2,null,0x2),_0x2ff648=>{const _0x10c616=_0x257cbf;if(_0x2ff648){logger_1[_0x10c616(0x18a)]['error'](_0x10c616(0x176)+_0x2ff648);throw _0x2ff648;}});}catch(_0x28a1df){Sentry['captureException'](_0x28a1df),logger_1['logger'][_0x257cbf(0x179)](_0x257cbf(0x174)+_0x28a1df);}const _0x2710b5=path_1[_0x257cbf(0x1a0)][_0x257cbf(0x194)](__dirname,'..','..','..','public',_0x257cbf(0x171)+_0x430fca[_0x257cbf(0x198)]),_0x1aae40=path_1[_0x257cbf(0x1a0)][_0x257cbf(0x17c)](_0x2710b5,_0x257cbf(0x197));fs_1[_0x257cbf(0x1a0)][_0x257cbf(0x18d)](_0x1aae40,JSON[_0x257cbf(0x172)](_0x8927d2,null,0x2),_0x47e271=>{const _0x3b4c91=_0x257cbf;if(_0x47e271){logger_1[_0x3b4c91(0x18a)]['error'](_0x3b4c91(0x176)+_0x47e271);throw _0x47e271;}});const _0x5c78eb=(0x0,lodash_1['isString'])(_0x8927d2)?JSON[_0x257cbf(0x16f)](_0x8927d2):_0x8927d2;if((0x0,lodash_1['isArray'])(_0x5c78eb))for(const {id:_0x4b3dd6,name:_0x4773d2,notify:_0x3c77f5}of _0x5c78eb){if(_0x4b3dd6==='status@broadcast'||_0x4b3dd6['includes']('g.us'))continue;const _0x55b6a2=_0x4b3dd6[_0x257cbf(0x175)](/\D/g,''),_0x45e92e=await Contact_1[_0x257cbf(0x1a0)][_0x257cbf(0x19c)]({'where':{'number':_0x55b6a2,'companyId':_0x5e4ad6}});if(_0x45e92e)_0x45e92e[_0x257cbf(0x17b)]=_0x4773d2||_0x3c77f5,await _0x45e92e[_0x257cbf(0x18e)]();else try{await(0x0,CreateContactService_1[_0x257cbf(0x1a0)])({'number':_0x55b6a2,'name':_0x4773d2||_0x3c77f5,'companyId':_0x5e4ad6});}catch(_0x410917){Sentry['captureException'](_0x410917),logger_1[_0x257cbf(0x18a)]['warn'](_0x257cbf(0x174)+_0x410917);}}};exports[a544_0x4a3e5d(0x1a0)]=ImportContactsService;