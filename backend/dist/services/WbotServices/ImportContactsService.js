const a544_0x417de2=a544_0x1161;(function(_0x3179b2,_0x572e46){const _0x3f1741=a544_0x1161,_0x493028=_0x3179b2();while(!![]){try{const _0x8dc119=-parseInt(_0x3f1741(0x1a6))/0x1*(parseInt(_0x3f1741(0x197))/0x2)+parseInt(_0x3f1741(0x186))/0x3+-parseInt(_0x3f1741(0x1ac))/0x4+parseInt(_0x3f1741(0x1b7))/0x5*(-parseInt(_0x3f1741(0x1a2))/0x6)+-parseInt(_0x3f1741(0x194))/0x7+-parseInt(_0x3f1741(0x187))/0x8*(parseInt(_0x3f1741(0x190))/0x9)+-parseInt(_0x3f1741(0x182))/0xa*(-parseInt(_0x3f1741(0x1a9))/0xb);if(_0x8dc119===_0x572e46)break;else _0x493028['push'](_0x493028['shift']());}catch(_0x39895c){_0x493028['push'](_0x493028['shift']());}}}(a544_0x4c5c,0xece5d));const a544_0xac01ed=(function(){let _0x392cf2=!![];return function(_0x3b1a90,_0x287817){const _0xf2ba11=_0x392cf2?function(){const _0x321dce=a544_0x1161;if(_0x287817){const _0x191e54=_0x287817[_0x321dce(0x189)](_0x3b1a90,arguments);return _0x287817=null,_0x191e54;}}:function(){};return _0x392cf2=![],_0xf2ba11;};}()),a544_0x434460=a544_0xac01ed(this,function(){const _0x2d6fcb=a544_0x1161;return a544_0x434460['toString']()[_0x2d6fcb(0x18d)](_0x2d6fcb(0x1b2))[_0x2d6fcb(0x188)]()[_0x2d6fcb(0x18f)](a544_0x434460)[_0x2d6fcb(0x18d)]('(((.+)+)+)+$');});a544_0x434460();'use strict';var __createBinding=this&&this[a544_0x417de2(0x19f)]||(Object[a544_0x417de2(0x19c)]?function(_0x595b93,_0x70806a,_0x4f6b84,_0x39395a){const _0x6a4c61=a544_0x417de2;if(_0x39395a===undefined)_0x39395a=_0x4f6b84;var _0x299aea=Object[_0x6a4c61(0x19d)](_0x70806a,_0x4f6b84);(!_0x299aea||(_0x6a4c61(0x18b)in _0x299aea?!_0x70806a['__esModule']:_0x299aea['writable']||_0x299aea[_0x6a4c61(0x1af)]))&&(_0x299aea={'enumerable':!![],'get':function(){return _0x70806a[_0x4f6b84];}}),Object['defineProperty'](_0x595b93,_0x39395a,_0x299aea);}:function(_0x13475a,_0x106012,_0x4cd26b,_0x41e2d2){if(_0x41e2d2===undefined)_0x41e2d2=_0x4cd26b;_0x13475a[_0x41e2d2]=_0x106012[_0x4cd26b];}),__setModuleDefault=this&&this[a544_0x417de2(0x18c)]||(Object[a544_0x417de2(0x19c)]?function(_0x1625ce,_0x8ae47c){const _0x2d8dfb=a544_0x417de2;Object[_0x2d8dfb(0x1a1)](_0x1625ce,'default',{'enumerable':!![],'value':_0x8ae47c});}:function(_0x5e376c,_0x30c566){const _0x222e3f=a544_0x417de2;_0x5e376c[_0x222e3f(0x181)]=_0x30c566;}),__importStar=this&&this[a544_0x417de2(0x1a3)]||function(_0x8b127a){const _0x1789c8=a544_0x417de2;if(_0x8b127a&&_0x8b127a[_0x1789c8(0x19e)])return _0x8b127a;var _0x3ed990={};if(_0x8b127a!=null){for(var _0x53bea5 in _0x8b127a)if(_0x53bea5!==_0x1789c8(0x181)&&Object[_0x1789c8(0x1b5)][_0x1789c8(0x1a0)][_0x1789c8(0x17e)](_0x8b127a,_0x53bea5))__createBinding(_0x3ed990,_0x8b127a,_0x53bea5);}return __setModuleDefault(_0x3ed990,_0x8b127a),_0x3ed990;},__importDefault=this&&this[a544_0x417de2(0x1a8)]||function(_0x18fa74){const _0x18721f=a544_0x417de2;return _0x18fa74&&_0x18fa74[_0x18721f(0x19e)]?_0x18fa74:{'default':_0x18fa74};};Object[a544_0x417de2(0x1a1)](exports,a544_0x417de2(0x19e),{'value':!![]});function a544_0x4c5c(){const _0x234eb6=['status@broadcast','3786055pEpCWN','writeFile','name','2RYobva','isString','company','isArray','Failed\x20to\x20write\x20contacts\x20to\x20file:\x20','create','getOwnPropertyDescriptor','__esModule','__createBinding','hasOwnProperty','defineProperty','3148770AEwkdh','__importStar','g.us','../BaileysServices/ShowBaileysService','303934prWzIK','lodash','__importDefault','11YAWZVL','warn','../ContactServices/CreateContactService','5342424ecIzmF','error','replace','configurable','stringify','contatos_depois.txt','(((.+)+)+)+$','public','logger','prototype','includes','10XCNtmx','getWbot','contatos_antes.txt','path','call','companyId','../../libs/wbot','default','34762710CvwWqf','@sentry/node','findOne','save','2894994sgdqVG','113384XYPvhb','toString','apply','captureException','get','__setModuleDefault','search','join','constructor','153gXDuZX','resolve','parse'];a544_0x4c5c=function(){return _0x234eb6;};return a544_0x4c5c();}function a544_0x1161(_0xa05e29,_0x2e83ab){const _0x7c1e1f=a544_0x4c5c();return a544_0x1161=function(_0x434460,_0xac01ed){_0x434460=_0x434460-0x17d;let _0x4c5c1f=_0x7c1e1f[_0x434460];return _0x4c5c1f;},a544_0x1161(_0xa05e29,_0x2e83ab);}const Sentry=__importStar(require(a544_0x417de2(0x183))),GetDefaultWhatsApp_1=__importDefault(require('../../helpers/GetDefaultWhatsApp')),wbot_1=require(a544_0x417de2(0x180)),Contact_1=__importDefault(require('../../models/Contact')),logger_1=require('../../utils/logger'),ShowBaileysService_1=__importDefault(require(a544_0x417de2(0x1a5))),CreateContactService_1=__importDefault(require(a544_0x417de2(0x1ab))),lodash_1=require(a544_0x417de2(0x1a7)),path_1=__importDefault(require(a544_0x417de2(0x17d))),fs_1=__importDefault(require('fs')),ImportContactsService=async _0x2087b1=>{const _0x50d5c9=a544_0x417de2,_0x202fdc=await(0x0,GetDefaultWhatsApp_1[_0x50d5c9(0x181)])(_0x2087b1),_0xd35f73=(0x0,wbot_1[_0x50d5c9(0x1b8)])(_0x202fdc['id']);let _0x4e3922;try{const _0x438ba4=await(0x0,ShowBaileysService_1[_0x50d5c9(0x181)])(_0xd35f73['id']);_0x4e3922=JSON[_0x50d5c9(0x192)](_0x438ba4['contacts']);const _0x2bb504=path_1[_0x50d5c9(0x181)][_0x50d5c9(0x191)](__dirname,'..','..','..',_0x50d5c9(0x1b3),_0x50d5c9(0x199)+_0x202fdc[_0x50d5c9(0x17f)]),_0xfe0da3=path_1['default'][_0x50d5c9(0x18e)](_0x2bb504,_0x50d5c9(0x1b9));fs_1[_0x50d5c9(0x181)]['writeFile'](_0xfe0da3,JSON[_0x50d5c9(0x1b0)](_0x4e3922,null,0x2),_0x232867=>{const _0x26c2b6=_0x50d5c9;if(_0x232867){logger_1[_0x26c2b6(0x1b4)][_0x26c2b6(0x1ad)](_0x26c2b6(0x19b)+_0x232867);throw _0x232867;}});}catch(_0x355c47){Sentry[_0x50d5c9(0x18a)](_0x355c47),logger_1[_0x50d5c9(0x1b4)]['error']('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20'+_0x355c47);}const _0x38abd8=path_1[_0x50d5c9(0x181)][_0x50d5c9(0x191)](__dirname,'..','..','..',_0x50d5c9(0x1b3),_0x50d5c9(0x199)+_0x202fdc[_0x50d5c9(0x17f)]),_0xf1a822=path_1[_0x50d5c9(0x181)]['join'](_0x38abd8,_0x50d5c9(0x1b1));fs_1[_0x50d5c9(0x181)][_0x50d5c9(0x195)](_0xf1a822,JSON['stringify'](_0x4e3922,null,0x2),_0x2e44cc=>{const _0x3896ea=_0x50d5c9;if(_0x2e44cc){logger_1[_0x3896ea(0x1b4)][_0x3896ea(0x1ad)](_0x3896ea(0x19b)+_0x2e44cc);throw _0x2e44cc;}});const _0x2449ef=(0x0,lodash_1[_0x50d5c9(0x198)])(_0x4e3922)?JSON[_0x50d5c9(0x192)](_0x4e3922):_0x4e3922;if((0x0,lodash_1[_0x50d5c9(0x19a)])(_0x2449ef))for(const {id:_0x22491b,name:_0x51fe67,notify:_0x2628b5}of _0x2449ef){if(_0x22491b===_0x50d5c9(0x193)||_0x22491b[_0x50d5c9(0x1b6)](_0x50d5c9(0x1a4)))continue;const _0x9ed056=_0x22491b[_0x50d5c9(0x1ae)](/\D/g,''),_0x3f71e9=await Contact_1['default'][_0x50d5c9(0x184)]({'where':{'number':_0x9ed056,'companyId':_0x2087b1}});if(_0x3f71e9)_0x3f71e9[_0x50d5c9(0x196)]=_0x51fe67||_0x2628b5,await _0x3f71e9[_0x50d5c9(0x185)]();else try{await(0x0,CreateContactService_1[_0x50d5c9(0x181)])({'number':_0x9ed056,'name':_0x51fe67||_0x2628b5,'companyId':_0x2087b1});}catch(_0x16d8d5){Sentry[_0x50d5c9(0x18a)](_0x16d8d5),logger_1[_0x50d5c9(0x1b4)][_0x50d5c9(0x1aa)]('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20'+_0x16d8d5);}}};exports[a544_0x417de2(0x181)]=ImportContactsService;