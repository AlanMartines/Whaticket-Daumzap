const a544_0xdd75db=a544_0xf9cb;function a544_0x4b97(){const _0x3a542f=['resolve','call','companyId','error','save','../../helpers/GetDefaultWhatsApp','hasOwnProperty','Failed\x20to\x20write\x20contacts\x20to\x20file:\x20','public','prototype','captureException','includes','11159650LklnJh','warn','../../models/Contact','get','findOne','14THEOkA','25367683aUouaA','__importDefault','__esModule','__setModuleDefault','constructor','name','16rkZsvp','865251YUKnCP','parse','join','logger','../../libs/wbot','929020pModyn','default','defineProperty','../BaileysServices/ShowBaileysService','../ContactServices/CreateContactService','../../utils/logger','Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20','configurable','contacts','getWbot','lodash','writable','contatos_depois.txt','stringify','24wOuazJ','create','search','1096119ayqEfu','6sBPYXb','489905EJKiKc','__importStar','4871274SSEMIT','g.us','(((.+)+)+)+$','replace','writeFile','120pCxQBq','company','toString'];a544_0x4b97=function(){return _0x3a542f;};return a544_0x4b97();}(function(_0x35cde5,_0x546e0f){const _0x57f96a=a544_0xf9cb,_0x2cdae5=_0x35cde5();while(!![]){try{const _0x24e214=-parseInt(_0x57f96a(0x14a))/0x1*(parseInt(_0x57f96a(0x149))/0x2)+parseInt(_0x57f96a(0x148))/0x3+parseInt(_0x57f96a(0x131))/0x4*(-parseInt(_0x57f96a(0x137))/0x5)+-parseInt(_0x57f96a(0x14c))/0x6*(parseInt(_0x57f96a(0x12a))/0x7)+-parseInt(_0x57f96a(0x151))/0x8*(parseInt(_0x57f96a(0x132))/0x9)+parseInt(_0x57f96a(0x125))/0xa+-parseInt(_0x57f96a(0x12b))/0xb*(-parseInt(_0x57f96a(0x145))/0xc);if(_0x24e214===_0x546e0f)break;else _0x2cdae5['push'](_0x2cdae5['shift']());}catch(_0x41a704){_0x2cdae5['push'](_0x2cdae5['shift']());}}}(a544_0x4b97,0xc6f16));const a544_0x2fbce8=(function(){let _0x2e5086=!![];return function(_0x30a901,_0x105671){const _0x3a74f5=_0x2e5086?function(){if(_0x105671){const _0x4ab453=_0x105671['apply'](_0x30a901,arguments);return _0x105671=null,_0x4ab453;}}:function(){};return _0x2e5086=![],_0x3a74f5;};}()),a544_0x5425b6=a544_0x2fbce8(this,function(){const _0x3a9150=a544_0xf9cb;return a544_0x5425b6[_0x3a9150(0x118)]()[_0x3a9150(0x147)](_0x3a9150(0x14e))[_0x3a9150(0x118)]()[_0x3a9150(0x12f)](a544_0x5425b6)[_0x3a9150(0x147)](_0x3a9150(0x14e));});a544_0x5425b6();'use strict';var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x1afd5e,_0x5cd45b,_0x21bbf0,_0x5ad3de){const _0x1ccc0e=a544_0xf9cb;if(_0x5ad3de===undefined)_0x5ad3de=_0x21bbf0;var _0x48bded=Object['getOwnPropertyDescriptor'](_0x5cd45b,_0x21bbf0);(!_0x48bded||(_0x1ccc0e(0x128)in _0x48bded?!_0x5cd45b[_0x1ccc0e(0x12d)]:_0x48bded[_0x1ccc0e(0x142)]||_0x48bded[_0x1ccc0e(0x13e)]))&&(_0x48bded={'enumerable':!![],'get':function(){return _0x5cd45b[_0x21bbf0];}}),Object[_0x1ccc0e(0x139)](_0x1afd5e,_0x5ad3de,_0x48bded);}:function(_0x581f5a,_0x4ab9a2,_0x337381,_0x3775e1){if(_0x3775e1===undefined)_0x3775e1=_0x337381;_0x581f5a[_0x3775e1]=_0x4ab9a2[_0x337381];}),__setModuleDefault=this&&this[a544_0xdd75db(0x12e)]||(Object[a544_0xdd75db(0x146)]?function(_0xb0ede3,_0x233b3b){const _0x374a44=a544_0xdd75db;Object[_0x374a44(0x139)](_0xb0ede3,_0x374a44(0x138),{'enumerable':!![],'value':_0x233b3b});}:function(_0x3f77f0,_0x235aef){_0x3f77f0['default']=_0x235aef;}),__importStar=this&&this[a544_0xdd75db(0x14b)]||function(_0x48db51){const _0x1b25e5=a544_0xdd75db;if(_0x48db51&&_0x48db51[_0x1b25e5(0x12d)])return _0x48db51;var _0x1e38a6={};if(_0x48db51!=null){for(var _0x37f307 in _0x48db51)if(_0x37f307!==_0x1b25e5(0x138)&&Object[_0x1b25e5(0x122)][_0x1b25e5(0x11f)][_0x1b25e5(0x11a)](_0x48db51,_0x37f307))__createBinding(_0x1e38a6,_0x48db51,_0x37f307);}return __setModuleDefault(_0x1e38a6,_0x48db51),_0x1e38a6;},__importDefault=this&&this[a544_0xdd75db(0x12c)]||function(_0x525e78){return _0x525e78&&_0x525e78['__esModule']?_0x525e78:{'default':_0x525e78};};Object[a544_0xdd75db(0x139)](exports,'__esModule',{'value':!![]});const Sentry=__importStar(require('@sentry/node')),GetDefaultWhatsApp_1=__importDefault(require(a544_0xdd75db(0x11e))),wbot_1=require(a544_0xdd75db(0x136)),Contact_1=__importDefault(require(a544_0xdd75db(0x127))),logger_1=require(a544_0xdd75db(0x13c)),ShowBaileysService_1=__importDefault(require(a544_0xdd75db(0x13a))),CreateContactService_1=__importDefault(require(a544_0xdd75db(0x13b))),lodash_1=require(a544_0xdd75db(0x141)),path_1=__importDefault(require('path')),fs_1=__importDefault(require('fs')),ImportContactsService=async _0x5770d3=>{const _0x28a913=a544_0xdd75db,_0x35a533=await(0x0,GetDefaultWhatsApp_1[_0x28a913(0x138)])(_0x5770d3),_0x1e6e06=(0x0,wbot_1[_0x28a913(0x140)])(_0x35a533['id']);let _0x581bf6;try{const _0x357867=await(0x0,ShowBaileysService_1['default'])(_0x1e6e06['id']);_0x581bf6=JSON['parse'](_0x357867[_0x28a913(0x13f)]);const _0x18a9f8=path_1[_0x28a913(0x138)][_0x28a913(0x119)](__dirname,'..','..','..',_0x28a913(0x121),_0x28a913(0x152)+_0x35a533[_0x28a913(0x11b)]),_0x51cc0b=path_1['default'][_0x28a913(0x134)](_0x18a9f8,'contatos_antes.txt');fs_1['default'][_0x28a913(0x150)](_0x51cc0b,JSON[_0x28a913(0x144)](_0x581bf6,null,0x2),_0x535ccf=>{const _0x4ccbb2=_0x28a913;if(_0x535ccf){logger_1[_0x4ccbb2(0x135)][_0x4ccbb2(0x11c)](_0x4ccbb2(0x120)+_0x535ccf);throw _0x535ccf;}});}catch(_0x598e82){Sentry[_0x28a913(0x123)](_0x598e82),logger_1['logger'][_0x28a913(0x11c)](_0x28a913(0x13d)+_0x598e82);}const _0x1b9bde=path_1[_0x28a913(0x138)][_0x28a913(0x119)](__dirname,'..','..','..','public',_0x28a913(0x152)+_0x35a533[_0x28a913(0x11b)]),_0x581bfe=path_1[_0x28a913(0x138)][_0x28a913(0x134)](_0x1b9bde,_0x28a913(0x143));fs_1[_0x28a913(0x138)]['writeFile'](_0x581bfe,JSON['stringify'](_0x581bf6,null,0x2),_0xab72ed=>{const _0x4ed935=_0x28a913;if(_0xab72ed){logger_1[_0x4ed935(0x135)][_0x4ed935(0x11c)]('Failed\x20to\x20write\x20contacts\x20to\x20file:\x20'+_0xab72ed);throw _0xab72ed;}});const _0x32743f=(0x0,lodash_1['isString'])(_0x581bf6)?JSON[_0x28a913(0x133)](_0x581bf6):_0x581bf6;if((0x0,lodash_1['isArray'])(_0x32743f))for(const {id:_0x1b06e9,name:_0x440bba,notify:_0x27aaf7}of _0x32743f){if(_0x1b06e9==='status@broadcast'||_0x1b06e9[_0x28a913(0x124)](_0x28a913(0x14d)))continue;const _0xfcb03a=_0x1b06e9[_0x28a913(0x14f)](/\D/g,''),_0x2f81e3=await Contact_1[_0x28a913(0x138)][_0x28a913(0x129)]({'where':{'number':_0xfcb03a,'companyId':_0x5770d3}});if(_0x2f81e3)_0x2f81e3[_0x28a913(0x130)]=_0x440bba||_0x27aaf7,await _0x2f81e3[_0x28a913(0x11d)]();else try{await(0x0,CreateContactService_1[_0x28a913(0x138)])({'number':_0xfcb03a,'name':_0x440bba||_0x27aaf7,'companyId':_0x5770d3});}catch(_0x4b9a52){Sentry[_0x28a913(0x123)](_0x4b9a52),logger_1['logger'][_0x28a913(0x126)]('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20'+_0x4b9a52);}}};function a544_0xf9cb(_0xcfbcdb,_0x5832ce){const _0x5b3e92=a544_0x4b97();return a544_0xf9cb=function(_0x5425b6,_0x2fbce8){_0x5425b6=_0x5425b6-0x118;let _0x4b9721=_0x5b3e92[_0x5425b6];return _0x4b9721;},a544_0xf9cb(_0xcfbcdb,_0x5832ce);}exports[a544_0xdd75db(0x138)]=ImportContactsService;