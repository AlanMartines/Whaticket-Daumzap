const a542_0x28b635=a542_0x9fd9;(function(_0x515fcb,_0x689b8d){const _0x430098=a542_0x9fd9,_0x372bbd=_0x515fcb();while(!![]){try{const _0x167239=parseInt(_0x430098(0x188))/0x1+parseInt(_0x430098(0x186))/0x2*(parseInt(_0x430098(0x16a))/0x3)+parseInt(_0x430098(0x17c))/0x4+parseInt(_0x430098(0x170))/0x5+parseInt(_0x430098(0x189))/0x6*(parseInt(_0x430098(0x17e))/0x7)+-parseInt(_0x430098(0x17f))/0x8*(-parseInt(_0x430098(0x187))/0x9)+parseInt(_0x430098(0x16b))/0xa*(-parseInt(_0x430098(0x183))/0xb);if(_0x167239===_0x689b8d)break;else _0x372bbd['push'](_0x372bbd['shift']());}catch(_0x4e3738){_0x372bbd['push'](_0x372bbd['shift']());}}}(a542_0x31e4,0x8af11));function a542_0x31e4(){const _0x5d64ff=['key','defineProperty','11OilZeQ','__esModule','update','8xknKgk','5347206eSAMnU','794423CLSaPN','1356ezQbQg','../../helpers/GetTicketWbot','305751SolitT','16302550Aidmvv','__importDefault','toString','body','log','927430EPlmUM','contact','dataJson','default','../../models/Message','ERR_EDITING_WAPP_MSG','constructor','apply','findByPk','ticket','../../models/Ticket','../../errors/AppError','372492vMANyP','../../models/OldMessage','3857eGQexF','8ztQvwf','(((.+)+)+)+$'];a542_0x31e4=function(){return _0x5d64ff;};return a542_0x31e4();}const a542_0x2d5f78=(function(){let _0x105297=!![];return function(_0x552566,_0x46cde3){const _0x58f2b7=_0x105297?function(){const _0x3c88ff=a542_0x9fd9;if(_0x46cde3){const _0x4d5de6=_0x46cde3[_0x3c88ff(0x177)](_0x552566,arguments);return _0x46cde3=null,_0x4d5de6;}}:function(){};return _0x105297=![],_0x58f2b7;};}()),a542_0x318d8a=a542_0x2d5f78(this,function(){const _0x1913fb=a542_0x9fd9;return a542_0x318d8a[_0x1913fb(0x16d)]()['search'](_0x1913fb(0x180))[_0x1913fb(0x16d)]()[_0x1913fb(0x176)](a542_0x318d8a)['search']('(((.+)+)+)+$');});a542_0x318d8a();function a542_0x9fd9(_0x21e374,_0x21405c){const _0x70518c=a542_0x31e4();return a542_0x9fd9=function(_0x318d8a,_0x2d5f78){_0x318d8a=_0x318d8a-0x169;let _0x31e468=_0x70518c[_0x318d8a];return _0x31e468;},a542_0x9fd9(_0x21e374,_0x21405c);}'use strict';var __importDefault=this&&this[a542_0x28b635(0x16c)]||function(_0x2e5860){const _0x376094=a542_0x28b635;return _0x2e5860&&_0x2e5860[_0x376094(0x184)]?_0x2e5860:{'default':_0x2e5860};};Object[a542_0x28b635(0x182)](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require(a542_0x28b635(0x17b))),GetTicketWbot_1=__importDefault(require(a542_0x28b635(0x169))),Message_1=__importDefault(require(a542_0x28b635(0x174))),OldMessage_1=__importDefault(require(a542_0x28b635(0x17d))),Ticket_1=__importDefault(require(a542_0x28b635(0x17a))),EditWhatsAppMessage=async({messageId:_0x2bbf8e,companyId:_0x3221d6,body:_0xe8e97})=>{const _0x524790=a542_0x28b635,_0x1379e8=await Message_1[_0x524790(0x173)][_0x524790(0x178)](_0x2bbf8e,{'include':[{'model':Ticket_1['default'],'as':_0x524790(0x179),'include':[_0x524790(0x171)]}]});if(!_0x1379e8)throw new AppError_1[(_0x524790(0x173))]('No\x20message\x20found\x20with\x20this\x20ID.');const {ticket:_0xdc2f8c}=_0x1379e8,_0xda301e=await(0x0,GetTicketWbot_1[_0x524790(0x173)])(_0xdc2f8c),_0x32e344=JSON['parse'](_0x1379e8[_0x524790(0x172)]);try{await _0xda301e['sendMessage'](_0x1379e8['remoteJid'],{'text':_0xe8e97,'edit':_0x32e344[_0x524790(0x181)]},{});const _0xe05cdb={'messageId':_0x2bbf8e,'body':_0x1379e8[_0x524790(0x16e)]};return await OldMessage_1[_0x524790(0x173)]['upsert'](_0xe05cdb),_0x1379e8[_0x524790(0x185)]({'body':_0xe8e97,'isEdited':!![]}),{'ticketId':_0x1379e8['ticketId'],'companyId':_0x3221d6,'message':_0x1379e8};}catch(_0x499ead){console[_0x524790(0x16f)](_0x499ead);throw new AppError_1[(_0x524790(0x173))](_0x524790(0x175));}};exports['default']=EditWhatsAppMessage;