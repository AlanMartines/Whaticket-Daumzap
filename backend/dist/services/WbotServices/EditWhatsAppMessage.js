const a542_0x13f3eb=a542_0x32cf;function a542_0x3e86(){const _0xae79cc=['apply','3639222RMqwcU','21lJMFXI','5mcKcFS','(((.+)+)+)+$','sendMessage','remoteJid','../../helpers/GetTicketWbot','../../models/OldMessage','__esModule','__importDefault','ticket','dataJson','findByPk','toString','981614rkxRYv','default','No\x20message\x20found\x20with\x20this\x20ID.','constructor','../../errors/AppError','defineProperty','ERR_EDITING_WAPP_MSG','update','11469MfNcpQ','key','parse','5039898CPicbO','450DryTkI','ticketId','726860FxOrBS','202456bJGlap','1373056ppDnKO'];a542_0x3e86=function(){return _0xae79cc;};return a542_0x3e86();}function a542_0x32cf(_0x364f7,_0x35aa51){const _0x16ba85=a542_0x3e86();return a542_0x32cf=function(_0xae221d,_0x3c5bb9){_0xae221d=_0xae221d-0x1f1;let _0x3e86ac=_0x16ba85[_0xae221d];return _0x3e86ac;},a542_0x32cf(_0x364f7,_0x35aa51);}(function(_0x46a911,_0x239528){const _0x334ed5=a542_0x32cf,_0x308b87=_0x46a911();while(!![]){try{const _0x4ff009=-parseInt(_0x334ed5(0x1fc))/0x1+-parseInt(_0x334ed5(0x208))/0x2*(-parseInt(_0x334ed5(0x204))/0x3)+-parseInt(_0x334ed5(0x20c))/0x4*(parseInt(_0x334ed5(0x210))/0x5)+parseInt(_0x334ed5(0x207))/0x6+-parseInt(_0x334ed5(0x20f))/0x7*(-parseInt(_0x334ed5(0x20b))/0x8)+parseInt(_0x334ed5(0x20e))/0x9+-parseInt(_0x334ed5(0x20a))/0xa;if(_0x4ff009===_0x239528)break;else _0x308b87['push'](_0x308b87['shift']());}catch(_0x42aef9){_0x308b87['push'](_0x308b87['shift']());}}}(a542_0x3e86,0xbf219));const a542_0x3c5bb9=(function(){let _0x19d282=!![];return function(_0x12af88,_0x312f7e){const _0x4a058e=_0x19d282?function(){const _0x774880=a542_0x32cf;if(_0x312f7e){const _0x1ff095=_0x312f7e[_0x774880(0x20d)](_0x12af88,arguments);return _0x312f7e=null,_0x1ff095;}}:function(){};return _0x19d282=![],_0x4a058e;};}()),a542_0xae221d=a542_0x3c5bb9(this,function(){const _0x2e56bb=a542_0x32cf;return a542_0xae221d[_0x2e56bb(0x1fb)]()['search'](_0x2e56bb(0x1f1))[_0x2e56bb(0x1fb)]()[_0x2e56bb(0x1ff)](a542_0xae221d)['search']('(((.+)+)+)+$');});a542_0xae221d();'use strict';var __importDefault=this&&this[a542_0x13f3eb(0x1f7)]||function(_0x548707){const _0x19fff1=a542_0x13f3eb;return _0x548707&&_0x548707[_0x19fff1(0x1f6)]?_0x548707:{'default':_0x548707};};Object[a542_0x13f3eb(0x201)](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require(a542_0x13f3eb(0x200))),GetTicketWbot_1=__importDefault(require(a542_0x13f3eb(0x1f4))),Message_1=__importDefault(require('../../models/Message')),OldMessage_1=__importDefault(require(a542_0x13f3eb(0x1f5))),Ticket_1=__importDefault(require('../../models/Ticket')),EditWhatsAppMessage=async({messageId:_0x15eb48,companyId:_0x378ce5,body:_0x59a13d})=>{const _0x4aa80c=a542_0x13f3eb,_0x4e98d6=await Message_1[_0x4aa80c(0x1fd)][_0x4aa80c(0x1fa)](_0x15eb48,{'include':[{'model':Ticket_1[_0x4aa80c(0x1fd)],'as':_0x4aa80c(0x1f8),'include':['contact']}]});if(!_0x4e98d6)throw new AppError_1['default'](_0x4aa80c(0x1fe));const {ticket:_0x3d49a5}=_0x4e98d6,_0x137982=await(0x0,GetTicketWbot_1[_0x4aa80c(0x1fd)])(_0x3d49a5),_0x5cdcc6=JSON[_0x4aa80c(0x206)](_0x4e98d6[_0x4aa80c(0x1f9)]);try{await _0x137982[_0x4aa80c(0x1f2)](_0x4e98d6[_0x4aa80c(0x1f3)],{'text':_0x59a13d,'edit':_0x5cdcc6[_0x4aa80c(0x205)]},{});const _0x1d22a0={'messageId':_0x15eb48,'body':_0x4e98d6['body']};return await OldMessage_1[_0x4aa80c(0x1fd)]['upsert'](_0x1d22a0),_0x4e98d6[_0x4aa80c(0x203)]({'body':_0x59a13d,'isEdited':!![]}),{'ticketId':_0x4e98d6[_0x4aa80c(0x209)],'companyId':_0x378ce5,'message':_0x4e98d6};}catch(_0x114b93){console['log'](_0x114b93);throw new AppError_1[(_0x4aa80c(0x1fd))](_0x4aa80c(0x202));}};exports[a542_0x13f3eb(0x1fd)]=EditWhatsAppMessage;