function a567_0xa92d(_0x27442e,_0x207e1b){const _0x455e51=a567_0x4fdf();return a567_0xa92d=function(_0x2aeed4,_0xb26e53){_0x2aeed4=_0x2aeed4-0x130;let _0x4fdf96=_0x455e51[_0x2aeed4];return _0x4fdf96;},a567_0xa92d(_0x27442e,_0x207e1b);}const a567_0x4d1bb4=a567_0xa92d;(function(_0x2a416a,_0x5022c2){const _0x5edf2f=a567_0xa92d,_0xe9c60b=_0x2a416a();while(!![]){try{const _0x37aa4e=parseInt(_0x5edf2f(0x144))/0x1+-parseInt(_0x5edf2f(0x130))/0x2+parseInt(_0x5edf2f(0x142))/0x3+parseInt(_0x5edf2f(0x139))/0x4*(parseInt(_0x5edf2f(0x13d))/0x5)+-parseInt(_0x5edf2f(0x140))/0x6+parseInt(_0x5edf2f(0x14d))/0x7+-parseInt(_0x5edf2f(0x131))/0x8;if(_0x37aa4e===_0x5022c2)break;else _0xe9c60b['push'](_0xe9c60b['shift']());}catch(_0x4da0a0){_0xe9c60b['push'](_0xe9c60b['shift']());}}}(a567_0x4fdf,0xc79a9));const a567_0xb26e53=(function(){let _0x2115ec=!![];return function(_0x1aa3bd,_0x2137ba){const _0x179aab=_0x2115ec?function(){const _0x4bce17=a567_0xa92d;if(_0x2137ba){const _0x172877=_0x2137ba[_0x4bce17(0x147)](_0x1aa3bd,arguments);return _0x2137ba=null,_0x172877;}}:function(){};return _0x2115ec=![],_0x179aab;};}()),a567_0x2aeed4=a567_0xb26e53(this,function(){const _0x58ef4c=a567_0xa92d;return a567_0x2aeed4[_0x58ef4c(0x150)]()[_0x58ef4c(0x14c)]('(((.+)+)+)+$')[_0x58ef4c(0x150)]()[_0x58ef4c(0x14a)](a567_0x2aeed4)['search'](_0x58ef4c(0x134));});a567_0x2aeed4();'use strict';var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x15f55f,_0x452827,_0x30a86d,_0x15a7f3){const _0x2b70dd=a567_0xa92d;if(_0x15a7f3===undefined)_0x15a7f3=_0x30a86d;var _0x1d1b11=Object['getOwnPropertyDescriptor'](_0x452827,_0x30a86d);(!_0x1d1b11||('get'in _0x1d1b11?!_0x452827['__esModule']:_0x1d1b11[_0x2b70dd(0x148)]||_0x1d1b11[_0x2b70dd(0x14b)]))&&(_0x1d1b11={'enumerable':!![],'get':function(){return _0x452827[_0x30a86d];}}),Object[_0x2b70dd(0x13f)](_0x15f55f,_0x15a7f3,_0x1d1b11);}:function(_0x14b515,_0x391a18,_0x43bcc6,_0x2035be){if(_0x2035be===undefined)_0x2035be=_0x43bcc6;_0x14b515[_0x2035be]=_0x391a18[_0x43bcc6];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x23307f,_0x47a43e){const _0x236887=a567_0xa92d;Object[_0x236887(0x13f)](_0x23307f,'default',{'enumerable':!![],'value':_0x47a43e});}:function(_0x16c956,_0xda0409){const _0x87cf16=a567_0xa92d;_0x16c956[_0x87cf16(0x151)]=_0xda0409;}),__importStar=this&&this[a567_0x4d1bb4(0x141)]||function(_0x205d2b){const _0x3a1049=a567_0x4d1bb4;if(_0x205d2b&&_0x205d2b['__esModule'])return _0x205d2b;var _0x6865b9={};if(_0x205d2b!=null){for(var _0x482f0c in _0x205d2b)if(_0x482f0c!==_0x3a1049(0x151)&&Object[_0x3a1049(0x149)][_0x3a1049(0x136)][_0x3a1049(0x14e)](_0x205d2b,_0x482f0c))__createBinding(_0x6865b9,_0x205d2b,_0x482f0c);}return __setModuleDefault(_0x6865b9,_0x205d2b),_0x6865b9;},__importDefault=this&&this[a567_0x4d1bb4(0x13e)]||function(_0x59ea7b){const _0x436466=a567_0x4d1bb4;return _0x59ea7b&&_0x59ea7b[_0x436466(0x138)]?_0x59ea7b:{'default':_0x59ea7b};};Object[a567_0x4d1bb4(0x13f)](exports,a567_0x4d1bb4(0x138),{'value':!![]});const Yup=__importStar(require('yup')),sequelize_1=require(a567_0x4d1bb4(0x145)),AppError_1=__importDefault(require(a567_0x4d1bb4(0x146))),Whatsapp_1=__importDefault(require(a567_0x4d1bb4(0x152))),ShowWhatsAppService_1=__importDefault(require(a567_0x4d1bb4(0x13c))),AssociateWhatsappQueue_1=__importDefault(require('./AssociateWhatsappQueue')),UpdateWhatsAppService=async({whatsappData:_0x58949b,whatsappId:_0xf087db,companyId:_0x1b753d})=>{const _0x4ef773=a567_0x4d1bb4,_0x598860=Yup[_0x4ef773(0x143)]()[_0x4ef773(0x13a)]({'name':Yup['string']()['min'](0x2),'status':Yup[_0x4ef773(0x135)](),'isDefault':Yup[_0x4ef773(0x13b)]()}),{name:_0x12660d,status:_0x3e0a17,isDefault:_0x4974da,session:_0x27f0e9,greetingMessage:_0x4f98b9,complationMessage:_0x7f2307,outOfHoursMessage:_0x2354e1,ratingMessage:_0xad8819,queueIds:queueIds=[],token:_0x38940e,timeSendQueue:_0x43c91d,sendIdQueue:sendIdQueue=null,promptId:_0xcb7ad7,integrationId:_0x4e5988,maxUseBotQueues:_0x213fd8,timeUseBotQueues:_0x43f68f,expiresTicket:_0x599597,expiresInactiveMessage:_0x447fdf,allowGroup:_0x50b8d5,importOldMessages:_0xa2c140,importRecentMessages:_0x54e16c,closedTicketsPostImported:_0x3796ee,importOldMessagesGroups:_0x1d6cd4}=_0x58949b;try{await _0x598860['validate']({'name':_0x12660d,'status':_0x3e0a17,'isDefault':_0x4974da});}catch(_0x23efd5){throw new AppError_1['default'](_0x23efd5['message']);}if(queueIds[_0x4ef773(0x132)]>0x1&&!_0x4f98b9)throw new AppError_1[(_0x4ef773(0x151))](_0x4ef773(0x14f));let _0x45825f=null;_0x4974da&&(_0x45825f=await Whatsapp_1[_0x4ef773(0x151)][_0x4ef773(0x133)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op']['not']]:_0xf087db},'companyId':_0x1b753d}}),_0x45825f&&await _0x45825f[_0x4ef773(0x137)]({'isDefault':![]}));const _0x17a430=await(0x0,ShowWhatsAppService_1[_0x4ef773(0x151)])(_0xf087db,_0x1b753d);return await _0x17a430[_0x4ef773(0x137)]({'name':_0x12660d,'status':_0x3e0a17,'session':_0x27f0e9,'greetingMessage':_0x4f98b9,'complationMessage':_0x7f2307,'outOfHoursMessage':_0x2354e1,'ratingMessage':_0xad8819,'isDefault':_0x4974da,'companyId':_0x1b753d,'token':_0x38940e,'timeSendQueue':_0x43c91d,'sendIdQueue':sendIdQueue,'promptId':_0xcb7ad7?_0xcb7ad7:null,'integrationId':_0x4e5988?_0x4e5988:null,'maxUseBotQueues':_0x213fd8,'timeUseBotQueues':_0x43f68f,'expiresTicket':_0x599597,'expiresInactiveMessage':_0x447fdf,'allowGroup':_0x50b8d5,'importOldMessages':_0xa2c140,'importRecentMessages':_0x54e16c,'closedTicketsPostImported':_0x3796ee,'importOldMessagesGroups':_0x1d6cd4}),await(0x0,AssociateWhatsappQueue_1['default'])(_0x17a430,queueIds),{'whatsapp':_0x17a430,'oldDefaultWhatsapp':_0x45825f};};exports[a567_0x4d1bb4(0x151)]=UpdateWhatsAppService;function a567_0x4fdf(){const _0xf96220=['defineProperty','6587958UpgfRd','__importStar','4282041yxEbtv','object','1328560CfIwGU','sequelize','../../errors/AppError','apply','writable','prototype','constructor','configurable','search','3527538OKcAwM','call','ERR_WAPP_GREETING_REQUIRED','toString','default','../../models/Whatsapp','1527736vVawKl','17703952NEDzEh','length','findOne','(((.+)+)+)+$','string','hasOwnProperty','update','__esModule','6530364HMyYLC','shape','boolean','./ShowWhatsAppService','5fVtiuX','__importDefault'];a567_0x4fdf=function(){return _0xf96220;};return a567_0x4fdf();}