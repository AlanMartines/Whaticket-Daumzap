const a567_0x4487b4=a567_0xfd9d;(function(_0x2e63ba,_0x2c647f){const _0x8cc1e3=a567_0xfd9d,_0x1afc3a=_0x2e63ba();while(!![]){try{const _0x567480=parseInt(_0x8cc1e3(0x90))/0x1*(parseInt(_0x8cc1e3(0x97))/0x2)+-parseInt(_0x8cc1e3(0x92))/0x3*(-parseInt(_0x8cc1e3(0x79))/0x4)+parseInt(_0x8cc1e3(0x7c))/0x5+-parseInt(_0x8cc1e3(0x7f))/0x6*(parseInt(_0x8cc1e3(0xa0))/0x7)+-parseInt(_0x8cc1e3(0x88))/0x8*(parseInt(_0x8cc1e3(0x9d))/0x9)+-parseInt(_0x8cc1e3(0x8d))/0xa+-parseInt(_0x8cc1e3(0x93))/0xb*(parseInt(_0x8cc1e3(0x8b))/0xc);if(_0x567480===_0x2c647f)break;else _0x1afc3a['push'](_0x1afc3a['shift']());}catch(_0x3486c7){_0x1afc3a['push'](_0x1afc3a['shift']());}}}(a567_0x181e,0xf3107));const a567_0x3f8878=(function(){let _0x3a96ae=!![];return function(_0x411145,_0x887dc5){const _0x234bbc=_0x3a96ae?function(){const _0x108325=a567_0xfd9d;if(_0x887dc5){const _0x26ea46=_0x887dc5[_0x108325(0x98)](_0x411145,arguments);return _0x887dc5=null,_0x26ea46;}}:function(){};return _0x3a96ae=![],_0x234bbc;};}()),a567_0x5e48fe=a567_0x3f8878(this,function(){const _0x316bfd=a567_0xfd9d;return a567_0x5e48fe['toString']()['search'](_0x316bfd(0x9a))[_0x316bfd(0x78)]()[_0x316bfd(0x91)](a567_0x5e48fe)['search'](_0x316bfd(0x9a));});a567_0x5e48fe();'use strict';var __createBinding=this&&this[a567_0x4487b4(0x9c)]||(Object[a567_0x4487b4(0x86)]?function(_0x4359f8,_0xeed3ce,_0x4f0f16,_0x2f76a0){const _0x3f80f4=a567_0x4487b4;if(_0x2f76a0===undefined)_0x2f76a0=_0x4f0f16;var _0x1fb2bf=Object['getOwnPropertyDescriptor'](_0xeed3ce,_0x4f0f16);(!_0x1fb2bf||('get'in _0x1fb2bf?!_0xeed3ce[_0x3f80f4(0x80)]:_0x1fb2bf['writable']||_0x1fb2bf[_0x3f80f4(0x9e)]))&&(_0x1fb2bf={'enumerable':!![],'get':function(){return _0xeed3ce[_0x4f0f16];}}),Object[_0x3f80f4(0x89)](_0x4359f8,_0x2f76a0,_0x1fb2bf);}:function(_0x2faaee,_0xb27f02,_0x39d96e,_0x17cb3f){if(_0x17cb3f===undefined)_0x17cb3f=_0x39d96e;_0x2faaee[_0x17cb3f]=_0xb27f02[_0x39d96e];}),__setModuleDefault=this&&this[a567_0x4487b4(0x7d)]||(Object[a567_0x4487b4(0x86)]?function(_0x4e0ba2,_0x5e1438){const _0x294d7d=a567_0x4487b4;Object['defineProperty'](_0x4e0ba2,_0x294d7d(0x96),{'enumerable':!![],'value':_0x5e1438});}:function(_0x35a1d6,_0x49c030){_0x35a1d6['default']=_0x49c030;}),__importStar=this&&this[a567_0x4487b4(0x9f)]||function(_0x4dd580){const _0x347f4b=a567_0x4487b4;if(_0x4dd580&&_0x4dd580['__esModule'])return _0x4dd580;var _0x29e093={};if(_0x4dd580!=null){for(var _0x26e5bb in _0x4dd580)if(_0x26e5bb!==_0x347f4b(0x96)&&Object[_0x347f4b(0x99)][_0x347f4b(0x94)][_0x347f4b(0xa1)](_0x4dd580,_0x26e5bb))__createBinding(_0x29e093,_0x4dd580,_0x26e5bb);}return __setModuleDefault(_0x29e093,_0x4dd580),_0x29e093;},__importDefault=this&&this[a567_0x4487b4(0x82)]||function(_0x29486a){const _0x523db8=a567_0x4487b4;return _0x29486a&&_0x29486a[_0x523db8(0x80)]?_0x29486a:{'default':_0x29486a};};Object[a567_0x4487b4(0x89)](exports,a567_0x4487b4(0x80),{'value':!![]});const Yup=__importStar(require('yup')),sequelize_1=require(a567_0x4487b4(0x95)),AppError_1=__importDefault(require(a567_0x4487b4(0x8e))),Whatsapp_1=__importDefault(require(a567_0x4487b4(0x7a))),ShowWhatsAppService_1=__importDefault(require(a567_0x4487b4(0x84))),AssociateWhatsappQueue_1=__importDefault(require(a567_0x4487b4(0x8a))),UpdateWhatsAppService=async({whatsappData:_0x25b56b,whatsappId:_0x2d67aa,companyId:_0x5e9fc9})=>{const _0x21e839=a567_0x4487b4,_0x276533=Yup[_0x21e839(0x8f)]()[_0x21e839(0x9b)]({'name':Yup[_0x21e839(0x8c)]()['min'](0x2),'status':Yup['string'](),'isDefault':Yup[_0x21e839(0x81)]()}),{name:_0x3f2eff,status:_0x594e45,isDefault:_0x41feb9,session:_0x178dd4,greetingMessage:_0x1edb34,complationMessage:_0x11b684,outOfHoursMessage:_0x4d1831,ratingMessage:_0x32f061,queueIds:queueIds=[],token:_0x5f20dd,timeSendQueue:_0x516d5a,sendIdQueue:sendIdQueue=null,promptId:_0x187e78,integrationId:_0xbd7ca,maxUseBotQueues:_0x269673,timeUseBotQueues:_0x8a9290,expiresTicket:_0x403504,expiresInactiveMessage:_0x488915,allowGroup:_0x4a0b94,importOldMessages:_0x5dac8b,importRecentMessages:_0x2ab30c,closedTicketsPostImported:_0x3bb6b9,importOldMessagesGroups:_0x3b36e2}=_0x25b56b;try{await _0x276533[_0x21e839(0x85)]({'name':_0x3f2eff,'status':_0x594e45,'isDefault':_0x41feb9});}catch(_0x331d49){throw new AppError_1[(_0x21e839(0x96))](_0x331d49[_0x21e839(0x83)]);}if(queueIds[_0x21e839(0x77)]>0x1&&!_0x1edb34)throw new AppError_1[(_0x21e839(0x96))](_0x21e839(0x7e));let _0x1fa9da=null;_0x41feb9&&(_0x1fa9da=await Whatsapp_1['default'][_0x21e839(0x87)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op'][_0x21e839(0x7b)]]:_0x2d67aa},'companyId':_0x5e9fc9}}),_0x1fa9da&&await _0x1fa9da[_0x21e839(0xa2)]({'isDefault':![]}));const _0x5e253a=await(0x0,ShowWhatsAppService_1[_0x21e839(0x96)])(_0x2d67aa,_0x5e9fc9);return await _0x5e253a[_0x21e839(0xa2)]({'name':_0x3f2eff,'status':_0x594e45,'session':_0x178dd4,'greetingMessage':_0x1edb34,'complationMessage':_0x11b684,'outOfHoursMessage':_0x4d1831,'ratingMessage':_0x32f061,'isDefault':_0x41feb9,'companyId':_0x5e9fc9,'token':_0x5f20dd,'timeSendQueue':_0x516d5a,'sendIdQueue':sendIdQueue,'promptId':_0x187e78?_0x187e78:null,'integrationId':_0xbd7ca?_0xbd7ca:null,'maxUseBotQueues':_0x269673,'timeUseBotQueues':_0x8a9290,'expiresTicket':_0x403504,'expiresInactiveMessage':_0x488915,'allowGroup':_0x4a0b94,'importOldMessages':_0x5dac8b,'importRecentMessages':_0x2ab30c,'closedTicketsPostImported':_0x3bb6b9,'importOldMessagesGroups':_0x3b36e2}),await(0x0,AssociateWhatsappQueue_1[_0x21e839(0x96)])(_0x5e253a,queueIds),{'whatsapp':_0x5e253a,'oldDefaultWhatsapp':_0x1fa9da};};function a567_0xfd9d(_0x56abdf,_0x4bb307){const _0x3ce752=a567_0x181e();return a567_0xfd9d=function(_0x5e48fe,_0x3f8878){_0x5e48fe=_0x5e48fe-0x77;let _0x181e59=_0x3ce752[_0x5e48fe];return _0x181e59;},a567_0xfd9d(_0x56abdf,_0x4bb307);}function a567_0x181e(){const _0x1a0aa0=['__importDefault','message','./ShowWhatsAppService','validate','create','findOne','16ziBDYR','defineProperty','./AssociateWhatsappQueue','20004QptPOo','string','1561630eCxlhr','../../errors/AppError','object','900853VcuurI','constructor','4398HWurXa','33YCrWIY','hasOwnProperty','sequelize','default','4apOggb','apply','prototype','(((.+)+)+)+$','shape','__createBinding','2495079AatODr','configurable','__importStar','9401567pRzfxM','call','update','length','toString','1548HUiXCF','../../models/Whatsapp','not','3426250iEsDCv','__setModuleDefault','ERR_WAPP_GREETING_REQUIRED','6QBhQDK','__esModule','boolean'];a567_0x181e=function(){return _0x1a0aa0;};return a567_0x181e();}exports[a567_0x4487b4(0x96)]=UpdateWhatsAppService;