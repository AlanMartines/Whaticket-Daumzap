const a567_0x21b6ef=a567_0x224b;(function(_0x564e4d,_0x2c17f4){const _0x1b5630=a567_0x224b,_0x20caa1=_0x564e4d();while(!![]){try{const _0x404d1c=-parseInt(_0x1b5630(0x1a9))/0x1+parseInt(_0x1b5630(0x190))/0x2*(-parseInt(_0x1b5630(0x193))/0x3)+-parseInt(_0x1b5630(0x18b))/0x4*(parseInt(_0x1b5630(0x1ac))/0x5)+-parseInt(_0x1b5630(0x1a8))/0x6*(-parseInt(_0x1b5630(0x186))/0x7)+-parseInt(_0x1b5630(0x1ae))/0x8*(-parseInt(_0x1b5630(0x1ab))/0x9)+-parseInt(_0x1b5630(0x19d))/0xa+parseInt(_0x1b5630(0x1a0))/0xb*(-parseInt(_0x1b5630(0x19b))/0xc);if(_0x404d1c===_0x2c17f4)break;else _0x20caa1['push'](_0x20caa1['shift']());}catch(_0x3537e4){_0x20caa1['push'](_0x20caa1['shift']());}}}(a567_0x1aba,0x82f41));const a567_0x5a1ea8=(function(){let _0x2aa330=!![];return function(_0x260727,_0x5e9d6a){const _0x12b144=_0x2aa330?function(){const _0x375a01=a567_0x224b;if(_0x5e9d6a){const _0x1e0fb0=_0x5e9d6a[_0x375a01(0x1a7)](_0x260727,arguments);return _0x5e9d6a=null,_0x1e0fb0;}}:function(){};return _0x2aa330=![],_0x12b144;};}()),a567_0x205de4=a567_0x5a1ea8(this,function(){const _0x147bcd=a567_0x224b;return a567_0x205de4[_0x147bcd(0x187)]()[_0x147bcd(0x1a1)](_0x147bcd(0x1a2))[_0x147bcd(0x187)]()[_0x147bcd(0x196)](a567_0x205de4)[_0x147bcd(0x1a1)](_0x147bcd(0x1a2));});a567_0x205de4();'use strict';var __createBinding=this&&this[a567_0x21b6ef(0x188)]||(Object[a567_0x21b6ef(0x18a)]?function(_0x2af2e7,_0x1cd9a2,_0x31a525,_0xae65d4){const _0x14c94d=a567_0x21b6ef;if(_0xae65d4===undefined)_0xae65d4=_0x31a525;var _0x4f9eb7=Object[_0x14c94d(0x18e)](_0x1cd9a2,_0x31a525);(!_0x4f9eb7||('get'in _0x4f9eb7?!_0x1cd9a2['__esModule']:_0x4f9eb7[_0x14c94d(0x197)]||_0x4f9eb7['configurable']))&&(_0x4f9eb7={'enumerable':!![],'get':function(){return _0x1cd9a2[_0x31a525];}}),Object[_0x14c94d(0x191)](_0x2af2e7,_0xae65d4,_0x4f9eb7);}:function(_0x397df6,_0x4811fa,_0x48300b,_0x21d6a0){if(_0x21d6a0===undefined)_0x21d6a0=_0x48300b;_0x397df6[_0x21d6a0]=_0x4811fa[_0x48300b];}),__setModuleDefault=this&&this[a567_0x21b6ef(0x199)]||(Object[a567_0x21b6ef(0x18a)]?function(_0x571da4,_0x53f302){const _0x5bd318=a567_0x21b6ef;Object[_0x5bd318(0x191)](_0x571da4,_0x5bd318(0x194),{'enumerable':!![],'value':_0x53f302});}:function(_0x2baaf1,_0x1223ce){const _0x4a3805=a567_0x21b6ef;_0x2baaf1[_0x4a3805(0x194)]=_0x1223ce;}),__importStar=this&&this['__importStar']||function(_0x383fc8){const _0x5c9817=a567_0x21b6ef;if(_0x383fc8&&_0x383fc8[_0x5c9817(0x18c)])return _0x383fc8;var _0x1a4779={};if(_0x383fc8!=null){for(var _0x4cb2cc in _0x383fc8)if(_0x4cb2cc!==_0x5c9817(0x194)&&Object[_0x5c9817(0x1ad)][_0x5c9817(0x18d)]['call'](_0x383fc8,_0x4cb2cc))__createBinding(_0x1a4779,_0x383fc8,_0x4cb2cc);}return __setModuleDefault(_0x1a4779,_0x383fc8),_0x1a4779;},__importDefault=this&&this[a567_0x21b6ef(0x18f)]||function(_0x25f738){const _0x4dcd26=a567_0x21b6ef;return _0x25f738&&_0x25f738[_0x4dcd26(0x18c)]?_0x25f738:{'default':_0x25f738};};function a567_0x224b(_0x26f828,_0x7b9709){const _0x117af1=a567_0x1aba();return a567_0x224b=function(_0x205de4,_0x5a1ea8){_0x205de4=_0x205de4-0x185;let _0x1abac9=_0x117af1[_0x205de4];return _0x1abac9;},a567_0x224b(_0x26f828,_0x7b9709);}Object[a567_0x21b6ef(0x191)](exports,a567_0x21b6ef(0x18c),{'value':!![]});const Yup=__importStar(require(a567_0x21b6ef(0x19c))),sequelize_1=require(a567_0x21b6ef(0x19f)),AppError_1=__importDefault(require(a567_0x21b6ef(0x192))),Whatsapp_1=__importDefault(require(a567_0x21b6ef(0x1aa))),ShowWhatsAppService_1=__importDefault(require(a567_0x21b6ef(0x1a3))),AssociateWhatsappQueue_1=__importDefault(require(a567_0x21b6ef(0x198))),UpdateWhatsAppService=async({whatsappData:_0x1d0d8c,whatsappId:_0xe9ceaa,companyId:_0x4cd0e6})=>{const _0x379fc8=a567_0x21b6ef,_0x47d6e7=Yup[_0x379fc8(0x1af)]()[_0x379fc8(0x1b1)]({'name':Yup[_0x379fc8(0x1a5)]()[_0x379fc8(0x19e)](0x2),'status':Yup[_0x379fc8(0x1a5)](),'isDefault':Yup[_0x379fc8(0x185)]()}),{name:_0x432a12,status:_0x56a27e,isDefault:_0x1fb1cf,session:_0x2d61f7,greetingMessage:_0x16995c,complationMessage:_0x149e50,outOfHoursMessage:_0x1777b0,ratingMessage:_0x5d4ac9,queueIds:queueIds=[],token:_0x27bbae,timeSendQueue:_0x2becaa,sendIdQueue:sendIdQueue=null,promptId:_0x3179a0,integrationId:_0x3057c2,maxUseBotQueues:_0x4f45f6,timeUseBotQueues:_0x10332f,expiresTicket:_0x4c8ae8,expiresInactiveMessage:_0x4bd01a,allowGroup:_0x5ba282,importOldMessages:_0x58f03c,importRecentMessages:_0x56ae65,closedTicketsPostImported:_0x2ca6a3,importOldMessagesGroups:_0x1975d3}=_0x1d0d8c;try{await _0x47d6e7['validate']({'name':_0x432a12,'status':_0x56a27e,'isDefault':_0x1fb1cf});}catch(_0x3cb972){throw new AppError_1['default'](_0x3cb972[_0x379fc8(0x189)]);}if(queueIds[_0x379fc8(0x1a4)]>0x1&&!_0x16995c)throw new AppError_1[(_0x379fc8(0x194))](_0x379fc8(0x1b0));let _0x5cc4b0=null;_0x1fb1cf&&(_0x5cc4b0=await Whatsapp_1[_0x379fc8(0x194)][_0x379fc8(0x19a)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op'][_0x379fc8(0x195)]]:_0xe9ceaa},'companyId':_0x4cd0e6}}),_0x5cc4b0&&await _0x5cc4b0['update']({'isDefault':![]}));const _0x4f509b=await(0x0,ShowWhatsAppService_1[_0x379fc8(0x194)])(_0xe9ceaa,_0x4cd0e6);return await _0x4f509b[_0x379fc8(0x1a6)]({'name':_0x432a12,'status':_0x56a27e,'session':_0x2d61f7,'greetingMessage':_0x16995c,'complationMessage':_0x149e50,'outOfHoursMessage':_0x1777b0,'ratingMessage':_0x5d4ac9,'isDefault':_0x1fb1cf,'companyId':_0x4cd0e6,'token':_0x27bbae,'timeSendQueue':_0x2becaa,'sendIdQueue':sendIdQueue,'promptId':_0x3179a0?_0x3179a0:null,'integrationId':_0x3057c2?_0x3057c2:null,'maxUseBotQueues':_0x4f45f6,'timeUseBotQueues':_0x10332f,'expiresTicket':_0x4c8ae8,'expiresInactiveMessage':_0x4bd01a,'allowGroup':_0x5ba282,'importOldMessages':_0x58f03c,'importRecentMessages':_0x56ae65,'closedTicketsPostImported':_0x2ca6a3,'importOldMessagesGroups':_0x1975d3}),await(0x0,AssociateWhatsappQueue_1[_0x379fc8(0x194)])(_0x4f509b,queueIds),{'whatsapp':_0x4f509b,'oldDefaultWhatsapp':_0x5cc4b0};};function a567_0x1aba(){const _0x2f2d5d=['22496DyImQY','object','ERR_WAPP_GREETING_REQUIRED','shape','boolean','7146314ErahBm','toString','__createBinding','message','create','44ljMryO','__esModule','hasOwnProperty','getOwnPropertyDescriptor','__importDefault','1878BClPUM','defineProperty','../../errors/AppError','69PBqKhm','default','not','constructor','writable','./AssociateWhatsappQueue','__setModuleDefault','findOne','156xUhgYC','yup','3167580GzahwZ','min','sequelize','133727kJdTco','search','(((.+)+)+)+$','./ShowWhatsAppService','length','string','update','apply','6oZRYIz','873818UkoWEp','../../models/Whatsapp','2997SOzHYT','23045PpUaru','prototype'];a567_0x1aba=function(){return _0x2f2d5d;};return a567_0x1aba();}exports['default']=UpdateWhatsAppService;