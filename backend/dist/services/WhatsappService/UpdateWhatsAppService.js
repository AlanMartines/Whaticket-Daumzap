const a567_0x27cd01=a567_0x426d;function a567_0x522b(){const _0x448e14=['update','__importStar','__importDefault','453002MYPzav','configurable','ERR_WAPP_GREETING_REQUIRED','1529619ZUuIjJ','38555VWRkly','prototype','get','../../errors/AppError','search','toString','writable','__setModuleDefault','validate','apply','2OUaUoR','findOne','not','hasOwnProperty','__esModule','618SQMITj','default','139376TNkSUf','./ShowWhatsAppService','constructor','create','6410047lUsBhQ','3890erWRct','boolean','getOwnPropertyDescriptor','28185dHskIc','string','call','3094072MBswYt','99Oofcrw','sequelize','defineProperty','object','../../models/Whatsapp','(((.+)+)+)+$'];a567_0x522b=function(){return _0x448e14;};return a567_0x522b();}(function(_0x590cc8,_0xb175d9){const _0x5e254c=a567_0x426d,_0x6da082=_0x590cc8();while(!![]){try{const _0x2a9fe8=parseInt(_0x5e254c(0x8f))/0x1+parseInt(_0x5e254c(0x9d))/0x2*(-parseInt(_0x5e254c(0x92))/0x3)+parseInt(_0x5e254c(0xaf))/0x4+-parseInt(_0x5e254c(0xac))/0x5*(-parseInt(_0x5e254c(0xa2))/0x6)+parseInt(_0x5e254c(0xa8))/0x7+-parseInt(_0x5e254c(0xa4))/0x8*(parseInt(_0x5e254c(0xb0))/0x9)+-parseInt(_0x5e254c(0xa9))/0xa*(parseInt(_0x5e254c(0x93))/0xb);if(_0x2a9fe8===_0xb175d9)break;else _0x6da082['push'](_0x6da082['shift']());}catch(_0x546d25){_0x6da082['push'](_0x6da082['shift']());}}}(a567_0x522b,0xa09e4));function a567_0x426d(_0x509985,_0x57d678){const _0x592338=a567_0x522b();return a567_0x426d=function(_0x20f947,_0x3b4d78){_0x20f947=_0x20f947-0x8e;let _0x522b95=_0x592338[_0x20f947];return _0x522b95;},a567_0x426d(_0x509985,_0x57d678);}const a567_0x3b4d78=(function(){let _0x53bf0a=!![];return function(_0x534e55,_0x279361){const _0x27461b=_0x53bf0a?function(){const _0xb2c182=a567_0x426d;if(_0x279361){const _0x46d1ee=_0x279361[_0xb2c182(0x9c)](_0x534e55,arguments);return _0x279361=null,_0x46d1ee;}}:function(){};return _0x53bf0a=![],_0x27461b;};}()),a567_0x20f947=a567_0x3b4d78(this,function(){const _0x226bc4=a567_0x426d;return a567_0x20f947[_0x226bc4(0x98)]()[_0x226bc4(0x97)](_0x226bc4(0xb5))[_0x226bc4(0x98)]()[_0x226bc4(0xa6)](a567_0x20f947)['search'](_0x226bc4(0xb5));});a567_0x20f947();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a567_0x27cd01(0xa7)]?function(_0x2306d2,_0x36eccd,_0x3801c0,_0x516c8c){const _0x4791ac=a567_0x27cd01;if(_0x516c8c===undefined)_0x516c8c=_0x3801c0;var _0x40caac=Object[_0x4791ac(0xab)](_0x36eccd,_0x3801c0);(!_0x40caac||(_0x4791ac(0x95)in _0x40caac?!_0x36eccd[_0x4791ac(0xa1)]:_0x40caac[_0x4791ac(0x99)]||_0x40caac[_0x4791ac(0x90)]))&&(_0x40caac={'enumerable':!![],'get':function(){return _0x36eccd[_0x3801c0];}}),Object[_0x4791ac(0xb2)](_0x2306d2,_0x516c8c,_0x40caac);}:function(_0x57cea9,_0xb4e212,_0x114ca4,_0x3bb5c9){if(_0x3bb5c9===undefined)_0x3bb5c9=_0x114ca4;_0x57cea9[_0x3bb5c9]=_0xb4e212[_0x114ca4];}),__setModuleDefault=this&&this[a567_0x27cd01(0x9a)]||(Object[a567_0x27cd01(0xa7)]?function(_0x11788e,_0x5ad439){const _0x4c13cb=a567_0x27cd01;Object[_0x4c13cb(0xb2)](_0x11788e,_0x4c13cb(0xa3),{'enumerable':!![],'value':_0x5ad439});}:function(_0x4db0ec,_0x4e3757){const _0x46d2ae=a567_0x27cd01;_0x4db0ec[_0x46d2ae(0xa3)]=_0x4e3757;}),__importStar=this&&this[a567_0x27cd01(0xb7)]||function(_0x418f5e){const _0x19398f=a567_0x27cd01;if(_0x418f5e&&_0x418f5e[_0x19398f(0xa1)])return _0x418f5e;var _0x243208={};if(_0x418f5e!=null){for(var _0x3878c5 in _0x418f5e)if(_0x3878c5!==_0x19398f(0xa3)&&Object[_0x19398f(0x94)][_0x19398f(0xa0)][_0x19398f(0xae)](_0x418f5e,_0x3878c5))__createBinding(_0x243208,_0x418f5e,_0x3878c5);}return __setModuleDefault(_0x243208,_0x418f5e),_0x243208;},__importDefault=this&&this[a567_0x27cd01(0x8e)]||function(_0x2a1b24){const _0x456cb1=a567_0x27cd01;return _0x2a1b24&&_0x2a1b24[_0x456cb1(0xa1)]?_0x2a1b24:{'default':_0x2a1b24};};Object['defineProperty'](exports,a567_0x27cd01(0xa1),{'value':!![]});const Yup=__importStar(require('yup')),sequelize_1=require(a567_0x27cd01(0xb1)),AppError_1=__importDefault(require(a567_0x27cd01(0x96))),Whatsapp_1=__importDefault(require(a567_0x27cd01(0xb4))),ShowWhatsAppService_1=__importDefault(require(a567_0x27cd01(0xa5))),AssociateWhatsappQueue_1=__importDefault(require('./AssociateWhatsappQueue')),UpdateWhatsAppService=async({whatsappData:_0x1f6d16,whatsappId:_0x5162c0,companyId:_0x87758b})=>{const _0x2f7fcd=a567_0x27cd01,_0x1dcb23=Yup[_0x2f7fcd(0xb3)]()['shape']({'name':Yup[_0x2f7fcd(0xad)]()['min'](0x2),'status':Yup[_0x2f7fcd(0xad)](),'isDefault':Yup[_0x2f7fcd(0xaa)]()}),{name:_0x435baf,status:_0x42d807,isDefault:_0xa8f3a,session:_0x48637b,greetingMessage:_0x2ac472,complationMessage:_0x5b502f,outOfHoursMessage:_0x5adf66,ratingMessage:_0x12a41f,queueIds:queueIds=[],token:_0x18fcae,timeSendQueue:_0x2ebfd4,sendIdQueue:sendIdQueue=null,promptId:_0x2cc024,integrationId:_0x332a5e,maxUseBotQueues:_0x5f56a1,timeUseBotQueues:_0x566565,expiresTicket:_0x32eaea,expiresInactiveMessage:_0x446f31,allowGroup:_0x1d5137,importOldMessages:_0x38ff5a,importRecentMessages:_0x1d1270,closedTicketsPostImported:_0x260d2c,importOldMessagesGroups:_0x35c1e0}=_0x1f6d16;try{await _0x1dcb23[_0x2f7fcd(0x9b)]({'name':_0x435baf,'status':_0x42d807,'isDefault':_0xa8f3a});}catch(_0x41a04c){throw new AppError_1[(_0x2f7fcd(0xa3))](_0x41a04c['message']);}if(queueIds['length']>0x1&&!_0x2ac472)throw new AppError_1[(_0x2f7fcd(0xa3))](_0x2f7fcd(0x91));let _0x15ad76=null;_0xa8f3a&&(_0x15ad76=await Whatsapp_1[_0x2f7fcd(0xa3)][_0x2f7fcd(0x9e)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op'][_0x2f7fcd(0x9f)]]:_0x5162c0},'companyId':_0x87758b}}),_0x15ad76&&await _0x15ad76[_0x2f7fcd(0xb6)]({'isDefault':![]}));const _0x48d12d=await(0x0,ShowWhatsAppService_1['default'])(_0x5162c0,_0x87758b);return await _0x48d12d[_0x2f7fcd(0xb6)]({'name':_0x435baf,'status':_0x42d807,'session':_0x48637b,'greetingMessage':_0x2ac472,'complationMessage':_0x5b502f,'outOfHoursMessage':_0x5adf66,'ratingMessage':_0x12a41f,'isDefault':_0xa8f3a,'companyId':_0x87758b,'token':_0x18fcae,'timeSendQueue':_0x2ebfd4,'sendIdQueue':sendIdQueue,'promptId':_0x2cc024?_0x2cc024:null,'integrationId':_0x332a5e?_0x332a5e:null,'maxUseBotQueues':_0x5f56a1,'timeUseBotQueues':_0x566565,'expiresTicket':_0x32eaea,'expiresInactiveMessage':_0x446f31,'allowGroup':_0x1d5137,'importOldMessages':_0x38ff5a,'importRecentMessages':_0x1d1270,'closedTicketsPostImported':_0x260d2c,'importOldMessagesGroups':_0x35c1e0}),await(0x0,AssociateWhatsappQueue_1[_0x2f7fcd(0xa3)])(_0x48d12d,queueIds),{'whatsapp':_0x48d12d,'oldDefaultWhatsapp':_0x15ad76};};exports[a567_0x27cd01(0xa3)]=UpdateWhatsAppService;