const a533_0x20e310=a533_0x28f5;(function(_0x334929,_0x3e4182){const _0x3ea4c7=a533_0x28f5,_0x188fa0=_0x334929();while(!![]){try{const _0x238baf=parseInt(_0x3ea4c7(0x1a4))/0x1*(parseInt(_0x3ea4c7(0x1a7))/0x2)+parseInt(_0x3ea4c7(0x1c2))/0x3+parseInt(_0x3ea4c7(0x19e))/0x4+-parseInt(_0x3ea4c7(0x1ca))/0x5*(-parseInt(_0x3ea4c7(0x1b6))/0x6)+-parseInt(_0x3ea4c7(0x1c4))/0x7+parseInt(_0x3ea4c7(0x1c5))/0x8*(-parseInt(_0x3ea4c7(0x19c))/0x9)+parseInt(_0x3ea4c7(0x1af))/0xa*(parseInt(_0x3ea4c7(0x1bd))/0xb);if(_0x238baf===_0x3e4182)break;else _0x188fa0['push'](_0x188fa0['shift']());}catch(_0x25b4b1){_0x188fa0['push'](_0x188fa0['shift']());}}}(a533_0x1f58,0xc22d3));function a533_0x28f5(_0x513026,_0x8bbfee){const _0x3b17b4=a533_0x1f58();return a533_0x28f5=function(_0x141452,_0x42e248){_0x141452=_0x141452-0x19a;let _0x1f58e0=_0x3b17b4[_0x141452];return _0x1f58e0;},a533_0x28f5(_0x513026,_0x8bbfee);}const a533_0x42e248=(function(){let _0x292677=!![];return function(_0x1d91ba,_0x50dbd5){const _0x5c9892=_0x292677?function(){const _0x17fd9c=a533_0x28f5;if(_0x50dbd5){const _0x3fafaf=_0x50dbd5[_0x17fd9c(0x1bf)](_0x1d91ba,arguments);return _0x50dbd5=null,_0x3fafaf;}}:function(){};return _0x292677=![],_0x5c9892;};}()),a533_0x141452=a533_0x42e248(this,function(){const _0x38f0e3=a533_0x28f5;return a533_0x141452['toString']()[_0x38f0e3(0x1a1)](_0x38f0e3(0x1be))[_0x38f0e3(0x19f)]()[_0x38f0e3(0x1aa)](a533_0x141452)[_0x38f0e3(0x1a1)](_0x38f0e3(0x1be));});a533_0x141452();'use strict';var __createBinding=this&&this[a533_0x20e310(0x1c9)]||(Object['create']?function(_0x1c6016,_0x2ed8b1,_0x27f1d6,_0x33e237){const _0xbdd6f6=a533_0x20e310;if(_0x33e237===undefined)_0x33e237=_0x27f1d6;var _0x586394=Object['getOwnPropertyDescriptor'](_0x2ed8b1,_0x27f1d6);(!_0x586394||('get'in _0x586394?!_0x2ed8b1[_0xbdd6f6(0x1b7)]:_0x586394[_0xbdd6f6(0x1a3)]||_0x586394[_0xbdd6f6(0x1a9)]))&&(_0x586394={'enumerable':!![],'get':function(){return _0x2ed8b1[_0x27f1d6];}}),Object[_0xbdd6f6(0x1a0)](_0x1c6016,_0x33e237,_0x586394);}:function(_0x2086e4,_0x31679c,_0xc10f5a,_0x5a9986){if(_0x5a9986===undefined)_0x5a9986=_0xc10f5a;_0x2086e4[_0x5a9986]=_0x31679c[_0xc10f5a];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x50e2ed,_0x1d60f1){Object['defineProperty'](_0x50e2ed,'default',{'enumerable':!![],'value':_0x1d60f1});}:function(_0x335764,_0x2839b9){_0x335764['default']=_0x2839b9;}),__importStar=this&&this[a533_0x20e310(0x1a2)]||function(_0x419e46){const _0x29f711=a533_0x20e310;if(_0x419e46&&_0x419e46['__esModule'])return _0x419e46;var _0x3b0fc5={};if(_0x419e46!=null){for(var _0x23d39a in _0x419e46)if(_0x23d39a!=='default'&&Object[_0x29f711(0x1b0)]['hasOwnProperty'][_0x29f711(0x1a6)](_0x419e46,_0x23d39a))__createBinding(_0x3b0fc5,_0x419e46,_0x23d39a);}return __setModuleDefault(_0x3b0fc5,_0x419e46),_0x3b0fc5;},__importDefault=this&&this[a533_0x20e310(0x1ab)]||function(_0x5a72f1){const _0x1eaf7d=a533_0x20e310;return _0x5a72f1&&_0x5a72f1[_0x1eaf7d(0x1b7)]?_0x5a72f1:{'default':_0x5a72f1};};function a533_0x1f58(){const _0x413831=['42UySIkY','__esModule','yup','required','../../errors/AppError','admin','Número\x20máximo\x20de\x20usuários\x20já\x20alcançado:\x20','1341637dMVqym','(((.+)+)+)+$','apply','queues','plan','3092787zeAHdn','findOne','8987195DJGmGT','66512GObseO','reload','object','Company\x20not\x20found','__createBinding','997205jmgvBc','Check-email','create','1521wgjQyj','../../models/User','2433008iWrAru','toString','defineProperty','search','__importStar','writable','3308liTCFF','shape','call','124iyBuhO','count','configurable','constructor','__importDefault','test','$set','boolean','20cbXHbz','prototype','string','email','../../models/Plan','default','message'];a533_0x1f58=function(){return _0x413831;};return a533_0x1f58();}Object[a533_0x20e310(0x1a0)](exports,a533_0x20e310(0x1b7),{'value':!![]});const Yup=__importStar(require(a533_0x20e310(0x1b8))),AppError_1=__importDefault(require(a533_0x20e310(0x1ba))),SerializeUser_1=require('../../helpers/SerializeUser'),User_1=__importDefault(require(a533_0x20e310(0x19d))),Plan_1=__importDefault(require(a533_0x20e310(0x1b3))),Company_1=__importDefault(require('../../models/Company')),CreateUserService=async({email:_0x5f3e81,password:_0xf2f7a1,name:_0x328787,queueIds:queueIds=[],companyId:_0x569404,profile:profile=a533_0x20e310(0x1bb),allTicket:_0x225672,spy:_0x37d6ef,whatsappId:_0x5c0520,startWork:_0x159c38,endWork:_0xed0750,isTricked:_0x51168b,super:_0x3a87fb,defaultMenu:_0x13bc8c})=>{const _0x41445a=a533_0x20e310;if(_0x569404!==undefined){const _0x37614a=await Company_1[_0x41445a(0x1b4)][_0x41445a(0x1c3)]({'where':{'id':_0x569404},'include':[{'model':Plan_1[_0x41445a(0x1b4)],'as':'plan'}]});if(_0x37614a){const _0x37af8b=await User_1['default'][_0x41445a(0x1a8)]({'where':{'companyId':_0x569404}});if(_0x37af8b>=_0x37614a[_0x41445a(0x1c1)]['users'])throw new AppError_1[(_0x41445a(0x1b4))](_0x41445a(0x1bc)+_0x37af8b,0x190);}else throw new AppError_1[(_0x41445a(0x1b4))](_0x41445a(0x1c8),0x194);}const _0x2c4add=Yup[_0x41445a(0x1c7)]()[_0x41445a(0x1a5)]({'name':Yup[_0x41445a(0x1b1)]()[_0x41445a(0x1b9)]()['min'](0x2),'email':Yup['string']()[_0x41445a(0x1b2)]()[_0x41445a(0x1b9)]()[_0x41445a(0x1ac)](_0x41445a(0x19a),'An\x20user\x20with\x20this\x20email\x20already\x20exists.',async _0x3477b4=>{const _0x4bccc6=_0x41445a;if(!_0x3477b4)return![];const _0x2291ff=await User_1[_0x4bccc6(0x1b4)]['findOne']({'where':{'email':_0x3477b4}});return!_0x2291ff;}),'password':Yup['string']()[_0x41445a(0x1b9)]()['min'](0x5),'super':Yup[_0x41445a(0x1ae)]()[_0x41445a(0x1b9)]()});try{await _0x2c4add['validate']({'email':_0x5f3e81,'password':_0xf2f7a1,'name':_0x328787,'super':_0x3a87fb});}catch(_0x596e73){throw new AppError_1['default'](_0x596e73[_0x41445a(0x1b5)],0x190);}const _0x143e15=await User_1[_0x41445a(0x1b4)][_0x41445a(0x19b)]({'email':_0x5f3e81,'password':_0xf2f7a1,'name':_0x328787,'companyId':_0x569404,'profile':profile,'allTicket':_0x225672,'whatsappId':_0x5c0520||null,'startWork':_0x159c38,'endWork':_0xed0750,'spy':_0x37d6ef,'isTricked':_0x51168b,'super':_0x3a87fb,'defaultMenu':_0x13bc8c});queueIds['length']>0x0&&await _0x143e15[_0x41445a(0x1ad)](_0x41445a(0x1c0),queueIds);await _0x143e15[_0x41445a(0x1c6)]();const _0x5434c4=await(0x0,SerializeUser_1['SerializeUser'])(_0x143e15);return _0x5434c4;};exports[a533_0x20e310(0x1b4)]=CreateUserService;