const a533_0xb6cc07=a533_0x54a0;(function(_0x3fee63,_0x2640f1){const _0x542597=a533_0x54a0,_0x1c1bd6=_0x3fee63();while(!![]){try{const _0x4f9433=parseInt(_0x542597(0x12c))/0x1*(-parseInt(_0x542597(0x11f))/0x2)+-parseInt(_0x542597(0x138))/0x3+-parseInt(_0x542597(0x10a))/0x4*(-parseInt(_0x542597(0x125))/0x5)+parseInt(_0x542597(0x10b))/0x6*(-parseInt(_0x542597(0x135))/0x7)+parseInt(_0x542597(0x11d))/0x8+parseInt(_0x542597(0x121))/0x9*(-parseInt(_0x542597(0x132))/0xa)+parseInt(_0x542597(0x137))/0xb*(parseInt(_0x542597(0x12b))/0xc);if(_0x4f9433===_0x2640f1)break;else _0x1c1bd6['push'](_0x1c1bd6['shift']());}catch(_0x40b440){_0x1c1bd6['push'](_0x1c1bd6['shift']());}}}(a533_0x4e19,0xcda76));const a533_0x51c15d=(function(){let _0x3b1d0e=!![];return function(_0x19513f,_0xf04160){const _0x112f12=_0x3b1d0e?function(){const _0x103224=a533_0x54a0;if(_0xf04160){const _0x3a96dd=_0xf04160[_0x103224(0x131)](_0x19513f,arguments);return _0xf04160=null,_0x3a96dd;}}:function(){};return _0x3b1d0e=![],_0x112f12;};}()),a533_0x2764bf=a533_0x51c15d(this,function(){const _0x17b8b6=a533_0x54a0;return a533_0x2764bf[_0x17b8b6(0x127)]()[_0x17b8b6(0x106)]('(((.+)+)+)+$')[_0x17b8b6(0x127)]()['constructor'](a533_0x2764bf)[_0x17b8b6(0x106)]('(((.+)+)+)+$');});a533_0x2764bf();'use strict';var __createBinding=this&&this[a533_0xb6cc07(0x134)]||(Object[a533_0xb6cc07(0x11e)]?function(_0xe7b707,_0x3f77ef,_0xe86a89,_0x11f76c){const _0x5b0233=a533_0xb6cc07;if(_0x11f76c===undefined)_0x11f76c=_0xe86a89;var _0x273539=Object[_0x5b0233(0x129)](_0x3f77ef,_0xe86a89);(!_0x273539||(_0x5b0233(0x10c)in _0x273539?!_0x3f77ef[_0x5b0233(0x109)]:_0x273539[_0x5b0233(0x128)]||_0x273539['configurable']))&&(_0x273539={'enumerable':!![],'get':function(){return _0x3f77ef[_0xe86a89];}}),Object[_0x5b0233(0x114)](_0xe7b707,_0x11f76c,_0x273539);}:function(_0x551db7,_0x20a784,_0x4f6a47,_0x4b75bb){if(_0x4b75bb===undefined)_0x4b75bb=_0x4f6a47;_0x551db7[_0x4b75bb]=_0x20a784[_0x4f6a47];}),__setModuleDefault=this&&this[a533_0xb6cc07(0x124)]||(Object[a533_0xb6cc07(0x11e)]?function(_0x47270b,_0x241939){const _0x2ba1aa=a533_0xb6cc07;Object['defineProperty'](_0x47270b,_0x2ba1aa(0x107),{'enumerable':!![],'value':_0x241939});}:function(_0x2f1e91,_0x38f16a){const _0x7a72b9=a533_0xb6cc07;_0x2f1e91[_0x7a72b9(0x107)]=_0x38f16a;}),__importStar=this&&this[a533_0xb6cc07(0x12a)]||function(_0x157bfd){const _0x4365a4=a533_0xb6cc07;if(_0x157bfd&&_0x157bfd[_0x4365a4(0x109)])return _0x157bfd;var _0x9fb9b8={};if(_0x157bfd!=null){for(var _0x3ee126 in _0x157bfd)if(_0x3ee126!=='default'&&Object[_0x4365a4(0x12d)][_0x4365a4(0x115)][_0x4365a4(0x133)](_0x157bfd,_0x3ee126))__createBinding(_0x9fb9b8,_0x157bfd,_0x3ee126);}return __setModuleDefault(_0x9fb9b8,_0x157bfd),_0x9fb9b8;},__importDefault=this&&this[a533_0xb6cc07(0x130)]||function(_0x26692c){return _0x26692c&&_0x26692c['__esModule']?_0x26692c:{'default':_0x26692c};};function a533_0x4e19(){const _0xfa930c=['7sQDKhc','reload','11ADWXCd','957948EklLOf','string','search','default','shape','__esModule','1528KpvhbA','4126338HaJBni','get','validate','queues','Número\x20máximo\x20de\x20usuários\x20já\x20alcançado:\x20','Company\x20not\x20found','test','findOne','users','defineProperty','hasOwnProperty','SerializeUser','Check-email','../../models/Plan','required','boolean','min','yup','1091544ByGsbA','create','203944bLsrZH','../../errors/AppError','20583xziAep','plan','email','__setModuleDefault','14015ChgvJr','object','toString','writable','getOwnPropertyDescriptor','__importStar','16257708tqhHhO','1sMJChR','prototype','message','../../models/Company','__importDefault','apply','2670PwXvuj','call','__createBinding'];a533_0x4e19=function(){return _0xfa930c;};return a533_0x4e19();}Object[a533_0xb6cc07(0x114)](exports,'__esModule',{'value':!![]});function a533_0x54a0(_0x33341c,_0x188cd3){const _0x473e8f=a533_0x4e19();return a533_0x54a0=function(_0x2764bf,_0x51c15d){_0x2764bf=_0x2764bf-0x105;let _0x4e192f=_0x473e8f[_0x2764bf];return _0x4e192f;},a533_0x54a0(_0x33341c,_0x188cd3);}const Yup=__importStar(require(a533_0xb6cc07(0x11c))),AppError_1=__importDefault(require(a533_0xb6cc07(0x120))),SerializeUser_1=require('../../helpers/SerializeUser'),User_1=__importDefault(require('../../models/User')),Plan_1=__importDefault(require(a533_0xb6cc07(0x118))),Company_1=__importDefault(require(a533_0xb6cc07(0x12f))),CreateUserService=async({email:_0x285a0f,password:_0x2d6bc2,name:_0x44a5fa,queueIds:queueIds=[],companyId:_0x594439,profile:profile='admin',allTicket:_0x314028,spy:_0x4fe006,whatsappId:_0x41c077,startWork:_0x1c8957,endWork:_0x2357d7,isTricked:_0xf316b1,super:_0xc58b02,defaultMenu:_0x5766f8})=>{const _0x4d68e6=a533_0xb6cc07;if(_0x594439!==undefined){const _0x3462fe=await Company_1[_0x4d68e6(0x107)]['findOne']({'where':{'id':_0x594439},'include':[{'model':Plan_1[_0x4d68e6(0x107)],'as':_0x4d68e6(0x122)}]});if(_0x3462fe){const _0x3fa8d9=await User_1[_0x4d68e6(0x107)]['count']({'where':{'companyId':_0x594439}});if(_0x3fa8d9>=_0x3462fe[_0x4d68e6(0x122)][_0x4d68e6(0x113)])throw new AppError_1[(_0x4d68e6(0x107))](_0x4d68e6(0x10f)+_0x3fa8d9,0x190);}else throw new AppError_1[(_0x4d68e6(0x107))](_0x4d68e6(0x110),0x194);}const _0x4281fb=Yup[_0x4d68e6(0x126)]()[_0x4d68e6(0x108)]({'name':Yup[_0x4d68e6(0x105)]()[_0x4d68e6(0x119)]()[_0x4d68e6(0x11b)](0x2),'email':Yup['string']()[_0x4d68e6(0x123)]()[_0x4d68e6(0x119)]()[_0x4d68e6(0x111)](_0x4d68e6(0x117),'An\x20user\x20with\x20this\x20email\x20already\x20exists.',async _0x44db94=>{const _0x40e7d5=_0x4d68e6;if(!_0x44db94)return![];const _0x1afaf2=await User_1['default'][_0x40e7d5(0x112)]({'where':{'email':_0x44db94}});return!_0x1afaf2;}),'password':Yup[_0x4d68e6(0x105)]()['required']()[_0x4d68e6(0x11b)](0x5),'super':Yup[_0x4d68e6(0x11a)]()[_0x4d68e6(0x119)]()});try{await _0x4281fb[_0x4d68e6(0x10d)]({'email':_0x285a0f,'password':_0x2d6bc2,'name':_0x44a5fa,'super':_0xc58b02});}catch(_0x2185f1){throw new AppError_1[(_0x4d68e6(0x107))](_0x2185f1[_0x4d68e6(0x12e)],0x190);}const _0x136d42=await User_1[_0x4d68e6(0x107)]['create']({'email':_0x285a0f,'password':_0x2d6bc2,'name':_0x44a5fa,'companyId':_0x594439,'profile':profile,'allTicket':_0x314028,'whatsappId':_0x41c077||null,'startWork':_0x1c8957,'endWork':_0x2357d7,'spy':_0x4fe006,'isTricked':_0xf316b1,'super':_0xc58b02,'defaultMenu':_0x5766f8});queueIds['length']>0x0&&await _0x136d42['$set'](_0x4d68e6(0x10e),queueIds);await _0x136d42[_0x4d68e6(0x136)]();const _0x8cc1ab=await(0x0,SerializeUser_1[_0x4d68e6(0x116)])(_0x136d42);return _0x8cc1ab;};exports[a533_0xb6cc07(0x107)]=CreateUserService;