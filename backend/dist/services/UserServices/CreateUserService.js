const a533_0x188235=a533_0x1ee4;(function(_0x60a354,_0x2fdad9){const _0x551c6a=a533_0x1ee4,_0x21142f=_0x60a354();while(!![]){try{const _0x2d2daf=parseInt(_0x551c6a(0x187))/0x1+-parseInt(_0x551c6a(0x1a9))/0x2*(-parseInt(_0x551c6a(0x1b1))/0x3)+-parseInt(_0x551c6a(0x18b))/0x4+-parseInt(_0x551c6a(0x19a))/0x5+-parseInt(_0x551c6a(0x1a6))/0x6+-parseInt(_0x551c6a(0x18e))/0x7+-parseInt(_0x551c6a(0x1aa))/0x8*(-parseInt(_0x551c6a(0x193))/0x9);if(_0x2d2daf===_0x2fdad9)break;else _0x21142f['push'](_0x21142f['shift']());}catch(_0x305137){_0x21142f['push'](_0x21142f['shift']());}}}(a533_0x586f,0x9df0a));const a533_0x520045=(function(){let _0x4bc777=!![];return function(_0x100926,_0x1951fc){const _0x2c10b7=_0x4bc777?function(){if(_0x1951fc){const _0x202a26=_0x1951fc['apply'](_0x100926,arguments);return _0x1951fc=null,_0x202a26;}}:function(){};return _0x4bc777=![],_0x2c10b7;};}()),a533_0x604522=a533_0x520045(this,function(){const _0x55fb66=a533_0x1ee4;return a533_0x604522[_0x55fb66(0x185)]()[_0x55fb66(0x1a7)](_0x55fb66(0x183))[_0x55fb66(0x185)]()[_0x55fb66(0x1a5)](a533_0x604522)['search'](_0x55fb66(0x183));});a533_0x604522();'use strict';function a533_0x1ee4(_0x412be1,_0x317f0b){const _0x4dd7b1=a533_0x586f();return a533_0x1ee4=function(_0x604522,_0x520045){_0x604522=_0x604522-0x183;let _0x586fbd=_0x4dd7b1[_0x604522];return _0x586fbd;},a533_0x1ee4(_0x412be1,_0x317f0b);}function a533_0x586f(){const _0x3c2758=['findOne','call','../../errors/AppError','$set','__importDefault','plan','5477325mCWRCh','get','validate','An\x20user\x20with\x20this\x20email\x20already\x20exists.','email','default','__createBinding','__importStar','Check-email','../../models/Plan','defineProperty','constructor','6532170zDLjLs','search','shape','244mJqawv','80912VKVoVO','required','message','writable','object','hasOwnProperty','yup','28218eqaZcg','(((.+)+)+)+$','../../models/User','toString','getOwnPropertyDescriptor','426397oJjdEv','create','../../models/Company','reload','5010096cucZvg','min','test','6928369BxYTFS','__esModule','string','boolean','Número\x20máximo\x20de\x20usuários\x20já\x20alcançado:\x20','3114jZtWBV'];a533_0x586f=function(){return _0x3c2758;};return a533_0x586f();}var __createBinding=this&&this[a533_0x188235(0x1a0)]||(Object[a533_0x188235(0x188)]?function(_0x298559,_0x598cfd,_0x66b81,_0x37c668){const _0x311ffe=a533_0x188235;if(_0x37c668===undefined)_0x37c668=_0x66b81;var _0x1487af=Object[_0x311ffe(0x186)](_0x598cfd,_0x66b81);(!_0x1487af||(_0x311ffe(0x19b)in _0x1487af?!_0x598cfd[_0x311ffe(0x18f)]:_0x1487af[_0x311ffe(0x1ad)]||_0x1487af['configurable']))&&(_0x1487af={'enumerable':!![],'get':function(){return _0x598cfd[_0x66b81];}}),Object['defineProperty'](_0x298559,_0x37c668,_0x1487af);}:function(_0xe39c9f,_0x3b875e,_0xdf8b29,_0x1fe322){if(_0x1fe322===undefined)_0x1fe322=_0xdf8b29;_0xe39c9f[_0x1fe322]=_0x3b875e[_0xdf8b29];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x3fe3fd,_0x4d449a){const _0x416689=a533_0x188235;Object['defineProperty'](_0x3fe3fd,_0x416689(0x19f),{'enumerable':!![],'value':_0x4d449a});}:function(_0x1263c7,_0xdc0af6){const _0x2eba63=a533_0x188235;_0x1263c7[_0x2eba63(0x19f)]=_0xdc0af6;}),__importStar=this&&this[a533_0x188235(0x1a1)]||function(_0x20410a){const _0x22a39c=a533_0x188235;if(_0x20410a&&_0x20410a['__esModule'])return _0x20410a;var _0x29fe04={};if(_0x20410a!=null){for(var _0x7846ce in _0x20410a)if(_0x7846ce!=='default'&&Object['prototype'][_0x22a39c(0x1af)][_0x22a39c(0x195)](_0x20410a,_0x7846ce))__createBinding(_0x29fe04,_0x20410a,_0x7846ce);}return __setModuleDefault(_0x29fe04,_0x20410a),_0x29fe04;},__importDefault=this&&this[a533_0x188235(0x198)]||function(_0x5dbc98){const _0x1ac94d=a533_0x188235;return _0x5dbc98&&_0x5dbc98[_0x1ac94d(0x18f)]?_0x5dbc98:{'default':_0x5dbc98};};Object[a533_0x188235(0x1a4)](exports,a533_0x188235(0x18f),{'value':!![]});const Yup=__importStar(require(a533_0x188235(0x1b0))),AppError_1=__importDefault(require(a533_0x188235(0x196))),SerializeUser_1=require('../../helpers/SerializeUser'),User_1=__importDefault(require(a533_0x188235(0x184))),Plan_1=__importDefault(require(a533_0x188235(0x1a3))),Company_1=__importDefault(require(a533_0x188235(0x189))),CreateUserService=async({email:_0x45194b,password:_0xb19371,name:_0x37018e,queueIds:queueIds=[],companyId:_0x4c3050,profile:profile='admin',allTicket:_0x317865,spy:_0x32e8cb,whatsappId:_0x5da666,startWork:_0x4d0370,endWork:_0x2e06ab,isTricked:_0x410323,super:_0xa8d743,defaultMenu:_0xd1111e})=>{const _0x239049=a533_0x188235;if(_0x4c3050!==undefined){const _0x36fd24=await Company_1['default'][_0x239049(0x194)]({'where':{'id':_0x4c3050},'include':[{'model':Plan_1[_0x239049(0x19f)],'as':_0x239049(0x199)}]});if(_0x36fd24){const _0x2cd36c=await User_1[_0x239049(0x19f)]['count']({'where':{'companyId':_0x4c3050}});if(_0x2cd36c>=_0x36fd24[_0x239049(0x199)]['users'])throw new AppError_1['default'](_0x239049(0x192)+_0x2cd36c,0x190);}else throw new AppError_1[(_0x239049(0x19f))]('Company\x20not\x20found',0x194);}const _0x4678b9=Yup[_0x239049(0x1ae)]()[_0x239049(0x1a8)]({'name':Yup[_0x239049(0x190)]()[_0x239049(0x1ab)]()[_0x239049(0x18c)](0x2),'email':Yup[_0x239049(0x190)]()[_0x239049(0x19e)]()[_0x239049(0x1ab)]()[_0x239049(0x18d)](_0x239049(0x1a2),_0x239049(0x19d),async _0x2b1466=>{if(!_0x2b1466)return![];const _0x43a111=await User_1['default']['findOne']({'where':{'email':_0x2b1466}});return!_0x43a111;}),'password':Yup[_0x239049(0x190)]()['required']()[_0x239049(0x18c)](0x5),'super':Yup[_0x239049(0x191)]()[_0x239049(0x1ab)]()});try{await _0x4678b9[_0x239049(0x19c)]({'email':_0x45194b,'password':_0xb19371,'name':_0x37018e,'super':_0xa8d743});}catch(_0x482bb6){throw new AppError_1['default'](_0x482bb6[_0x239049(0x1ac)],0x190);}const _0x4700b6=await User_1[_0x239049(0x19f)][_0x239049(0x188)]({'email':_0x45194b,'password':_0xb19371,'name':_0x37018e,'companyId':_0x4c3050,'profile':profile,'allTicket':_0x317865,'whatsappId':_0x5da666||null,'startWork':_0x4d0370,'endWork':_0x2e06ab,'spy':_0x32e8cb,'isTricked':_0x410323,'super':_0xa8d743,'defaultMenu':_0xd1111e});queueIds['length']>0x0&&await _0x4700b6[_0x239049(0x197)]('queues',queueIds);await _0x4700b6[_0x239049(0x18a)]();const _0x55e309=await(0x0,SerializeUser_1['SerializeUser'])(_0x4700b6);return _0x55e309;};exports['default']=CreateUserService;