const a533_0x4e5366=a533_0x5764;(function(_0x13da1e,_0x9a85af){const _0x254fad=a533_0x5764,_0x7d0ae3=_0x13da1e();while(!![]){try{const _0x80ba0c=parseInt(_0x254fad(0x14d))/0x1*(parseInt(_0x254fad(0x150))/0x2)+-parseInt(_0x254fad(0x140))/0x3+-parseInt(_0x254fad(0x151))/0x4+parseInt(_0x254fad(0x155))/0x5+-parseInt(_0x254fad(0x13d))/0x6*(parseInt(_0x254fad(0x133))/0x7)+parseInt(_0x254fad(0x129))/0x8*(-parseInt(_0x254fad(0x12c))/0x9)+-parseInt(_0x254fad(0x14f))/0xa*(-parseInt(_0x254fad(0x14b))/0xb);if(_0x80ba0c===_0x9a85af)break;else _0x7d0ae3['push'](_0x7d0ae3['shift']());}catch(_0x22a882){_0x7d0ae3['push'](_0x7d0ae3['shift']());}}}(a533_0x44aa,0x73cce));const a533_0x4cb731=(function(){let _0x1ea2e5=!![];return function(_0x468325,_0x5dbed5){const _0x2f73d9=_0x1ea2e5?function(){if(_0x5dbed5){const _0xeadc3d=_0x5dbed5['apply'](_0x468325,arguments);return _0x5dbed5=null,_0xeadc3d;}}:function(){};return _0x1ea2e5=![],_0x2f73d9;};}()),a533_0x18bee9=a533_0x4cb731(this,function(){const _0x1802f0=a533_0x5764;return a533_0x18bee9['toString']()[_0x1802f0(0x139)](_0x1802f0(0x146))['toString']()['constructor'](a533_0x18bee9)['search'](_0x1802f0(0x146));});function a533_0x44aa(){const _0x15d13c=['__importDefault','default','(((.+)+)+)+$','__setModuleDefault','queues','plan','__importStar','77eadTyb','An\x20user\x20with\x20this\x20email\x20already\x20exists.','34osOGGc','../../models/User','1707470scTRpq','30734VPLrGJ','3264116qQZori','../../helpers/SerializeUser','reload','__esModule','3026770nETyMf','min','8nJZAHh','Check-email','boolean','11619skHRMC','length','SerializeUser','string','test','../../models/Plan','findOne','3114153oqXwjv','shape','../../models/Company','defineProperty','Company\x20not\x20found','$set','search','prototype','required','../../errors/AppError','6TpAODL','yup','email','1759632YQmIdR','create','object','configurable'];a533_0x44aa=function(){return _0x15d13c;};return a533_0x44aa();}a533_0x18bee9();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a533_0x4e5366(0x141)]?function(_0x1d6be3,_0x1eed34,_0x19603,_0x475ded){const _0x2ce927=a533_0x4e5366;if(_0x475ded===undefined)_0x475ded=_0x19603;var _0x46e3ea=Object['getOwnPropertyDescriptor'](_0x1eed34,_0x19603);(!_0x46e3ea||('get'in _0x46e3ea?!_0x1eed34[_0x2ce927(0x154)]:_0x46e3ea['writable']||_0x46e3ea[_0x2ce927(0x143)]))&&(_0x46e3ea={'enumerable':!![],'get':function(){return _0x1eed34[_0x19603];}}),Object[_0x2ce927(0x136)](_0x1d6be3,_0x475ded,_0x46e3ea);}:function(_0x46a20,_0x438106,_0x12e2ac,_0x3d6fd1){if(_0x3d6fd1===undefined)_0x3d6fd1=_0x12e2ac;_0x46a20[_0x3d6fd1]=_0x438106[_0x12e2ac];}),__setModuleDefault=this&&this[a533_0x4e5366(0x147)]||(Object[a533_0x4e5366(0x141)]?function(_0x268533,_0x4379f9){const _0x3f6e66=a533_0x4e5366;Object[_0x3f6e66(0x136)](_0x268533,'default',{'enumerable':!![],'value':_0x4379f9});}:function(_0x378cab,_0x18798e){const _0x4f8219=a533_0x4e5366;_0x378cab[_0x4f8219(0x145)]=_0x18798e;}),__importStar=this&&this[a533_0x4e5366(0x14a)]||function(_0x41bfa8){const _0x1f5e68=a533_0x4e5366;if(_0x41bfa8&&_0x41bfa8[_0x1f5e68(0x154)])return _0x41bfa8;var _0x35f250={};if(_0x41bfa8!=null){for(var _0x40715d in _0x41bfa8)if(_0x40715d!==_0x1f5e68(0x145)&&Object[_0x1f5e68(0x13a)]['hasOwnProperty']['call'](_0x41bfa8,_0x40715d))__createBinding(_0x35f250,_0x41bfa8,_0x40715d);}return __setModuleDefault(_0x35f250,_0x41bfa8),_0x35f250;},__importDefault=this&&this[a533_0x4e5366(0x144)]||function(_0x49f7d5){return _0x49f7d5&&_0x49f7d5['__esModule']?_0x49f7d5:{'default':_0x49f7d5};};Object[a533_0x4e5366(0x136)](exports,a533_0x4e5366(0x154),{'value':!![]});function a533_0x5764(_0x4ee895,_0x550767){const _0x15acbb=a533_0x44aa();return a533_0x5764=function(_0x18bee9,_0x4cb731){_0x18bee9=_0x18bee9-0x128;let _0x44aa85=_0x15acbb[_0x18bee9];return _0x44aa85;},a533_0x5764(_0x4ee895,_0x550767);}const Yup=__importStar(require(a533_0x4e5366(0x13e))),AppError_1=__importDefault(require(a533_0x4e5366(0x13c))),SerializeUser_1=require(a533_0x4e5366(0x152)),User_1=__importDefault(require(a533_0x4e5366(0x14e))),Plan_1=__importDefault(require(a533_0x4e5366(0x131))),Company_1=__importDefault(require(a533_0x4e5366(0x135))),CreateUserService=async({email:_0x30e5a9,password:_0x5c7d92,name:_0x5a0b6d,queueIds:queueIds=[],companyId:_0x2b56c7,profile:profile='admin',allTicket:_0x2787c1,spy:_0x2f4449,whatsappId:_0x26822e,startWork:_0x5ded3e,endWork:_0x1b2c7f,isTricked:_0x5cc2a7,super:_0x9bbbd3,defaultMenu:_0x2862d7})=>{const _0x54f6bf=a533_0x4e5366;if(_0x2b56c7!==undefined){const _0x5bc00e=await Company_1[_0x54f6bf(0x145)][_0x54f6bf(0x132)]({'where':{'id':_0x2b56c7},'include':[{'model':Plan_1[_0x54f6bf(0x145)],'as':_0x54f6bf(0x149)}]});if(_0x5bc00e){const _0x39583a=await User_1[_0x54f6bf(0x145)]['count']({'where':{'companyId':_0x2b56c7}});if(_0x39583a>=_0x5bc00e[_0x54f6bf(0x149)]['users'])throw new AppError_1[(_0x54f6bf(0x145))]('Número\x20máximo\x20de\x20usuários\x20já\x20alcançado:\x20'+_0x39583a,0x190);}else throw new AppError_1[(_0x54f6bf(0x145))](_0x54f6bf(0x137),0x194);}const _0x1218c9=Yup[_0x54f6bf(0x142)]()[_0x54f6bf(0x134)]({'name':Yup[_0x54f6bf(0x12f)]()['required']()[_0x54f6bf(0x128)](0x2),'email':Yup[_0x54f6bf(0x12f)]()[_0x54f6bf(0x13f)]()[_0x54f6bf(0x13b)]()[_0x54f6bf(0x130)](_0x54f6bf(0x12a),_0x54f6bf(0x14c),async _0x2a70e5=>{const _0x1bab74=_0x54f6bf;if(!_0x2a70e5)return![];const _0x15f22c=await User_1[_0x1bab74(0x145)]['findOne']({'where':{'email':_0x2a70e5}});return!_0x15f22c;}),'password':Yup[_0x54f6bf(0x12f)]()[_0x54f6bf(0x13b)]()[_0x54f6bf(0x128)](0x5),'super':Yup[_0x54f6bf(0x12b)]()['required']()});try{await _0x1218c9['validate']({'email':_0x30e5a9,'password':_0x5c7d92,'name':_0x5a0b6d,'super':_0x9bbbd3});}catch(_0x4b5078){throw new AppError_1[(_0x54f6bf(0x145))](_0x4b5078['message'],0x190);}const _0x2c7a50=await User_1['default'][_0x54f6bf(0x141)]({'email':_0x30e5a9,'password':_0x5c7d92,'name':_0x5a0b6d,'companyId':_0x2b56c7,'profile':profile,'allTicket':_0x2787c1,'whatsappId':_0x26822e||null,'startWork':_0x5ded3e,'endWork':_0x1b2c7f,'spy':_0x2f4449,'isTricked':_0x5cc2a7,'super':_0x9bbbd3,'defaultMenu':_0x2862d7});queueIds[_0x54f6bf(0x12d)]>0x0&&await _0x2c7a50[_0x54f6bf(0x138)](_0x54f6bf(0x148),queueIds);await _0x2c7a50[_0x54f6bf(0x153)]();const _0xe3ad81=await(0x0,SerializeUser_1[_0x54f6bf(0x12e)])(_0x2c7a50);return _0xe3ad81;};exports['default']=CreateUserService;