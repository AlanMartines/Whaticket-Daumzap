const a424_0xab302b=a424_0xce74;(function(_0x4ef982,_0x5eb632){const _0x343848=a424_0xce74,_0x3f4dd6=_0x4ef982();while(!![]){try{const _0xd85d39=-parseInt(_0x343848(0x14c))/0x1+parseInt(_0x343848(0x15b))/0x2+parseInt(_0x343848(0x14d))/0x3+parseInt(_0x343848(0x151))/0x4+-parseInt(_0x343848(0x15f))/0x5*(parseInt(_0x343848(0x16e))/0x6)+-parseInt(_0x343848(0x14e))/0x7+parseInt(_0x343848(0x15c))/0x8*(-parseInt(_0x343848(0x162))/0x9);if(_0xd85d39===_0x5eb632)break;else _0x3f4dd6['push'](_0x3f4dd6['shift']());}catch(_0x372a3e){_0x3f4dd6['push'](_0x3f4dd6['shift']());}}}(a424_0x5908,0xe5f4d));const a424_0x5ce1bc=(function(){let _0x4de4b8=!![];return function(_0x4d143c,_0x18af23){const _0x1f407a=_0x4de4b8?function(){if(_0x18af23){const _0x4d5c40=_0x18af23['apply'](_0x4d143c,arguments);return _0x18af23=null,_0x4d5c40;}}:function(){};return _0x4de4b8=![],_0x1f407a;};}()),a424_0x5f2bc3=a424_0x5ce1bc(this,function(){const _0x52283b=a424_0xce74;return a424_0x5f2bc3['toString']()[_0x52283b(0x173)](_0x52283b(0x170))[_0x52283b(0x16c)]()[_0x52283b(0x15a)](a424_0x5f2bc3)[_0x52283b(0x173)](_0x52283b(0x170));});a424_0x5f2bc3();'use strict';var __createBinding=this&&this[a424_0xab302b(0x16d)]||(Object['create']?function(_0x4715ae,_0xa34e87,_0x4e63a9,_0x5e4ebb){const _0x4f5d2a=a424_0xab302b;if(_0x5e4ebb===undefined)_0x5e4ebb=_0x4e63a9;var _0x344334=Object[_0x4f5d2a(0x15d)](_0xa34e87,_0x4e63a9);(!_0x344334||(_0x4f5d2a(0x158)in _0x344334?!_0xa34e87[_0x4f5d2a(0x14b)]:_0x344334[_0x4f5d2a(0x14f)]||_0x344334[_0x4f5d2a(0x15e)]))&&(_0x344334={'enumerable':!![],'get':function(){return _0xa34e87[_0x4e63a9];}}),Object['defineProperty'](_0x4715ae,_0x5e4ebb,_0x344334);}:function(_0x3f30cf,_0x3e2638,_0x5107a5,_0x5c4b42){if(_0x5c4b42===undefined)_0x5c4b42=_0x5107a5;_0x3f30cf[_0x5c4b42]=_0x3e2638[_0x5107a5];}),__setModuleDefault=this&&this[a424_0xab302b(0x168)]||(Object[a424_0xab302b(0x16a)]?function(_0x6c833e,_0x287484){const _0x450cb8=a424_0xab302b;Object['defineProperty'](_0x6c833e,_0x450cb8(0x150),{'enumerable':!![],'value':_0x287484});}:function(_0x140dad,_0x3b51a7){const _0x255a6e=a424_0xab302b;_0x140dad[_0x255a6e(0x150)]=_0x3b51a7;}),__importStar=this&&this[a424_0xab302b(0x167)]||function(_0x4882f8){const _0x2da5bf=a424_0xab302b;if(_0x4882f8&&_0x4882f8[_0x2da5bf(0x14b)])return _0x4882f8;var _0x325d88={};if(_0x4882f8!=null){for(var _0x3ee8ea in _0x4882f8)if(_0x3ee8ea!==_0x2da5bf(0x150)&&Object[_0x2da5bf(0x161)][_0x2da5bf(0x16b)][_0x2da5bf(0x153)](_0x4882f8,_0x3ee8ea))__createBinding(_0x325d88,_0x4882f8,_0x3ee8ea);}return __setModuleDefault(_0x325d88,_0x4882f8),_0x325d88;},__importDefault=this&&this['__importDefault']||function(_0x2223cb){const _0x3ff68f=a424_0xab302b;return _0x2223cb&&_0x2223cb[_0x3ff68f(0x14b)]?_0x2223cb:{'default':_0x2223cb};};function a424_0x5908(){const _0x219e03=['3632160vYUAdO','152ihOJYd','getOwnPropertyDescriptor','configurable','370JDGzJt','upsert','prototype','52641jksOkf','message','defineProperty','../../models/FilesOptions','shape','__importStar','__setModuleDefault','string','create','hasOwnProperty','toString','__createBinding','52014iOPfBJ','object','(((.+)+)+)+$','length','../../models/Files','search','all','__esModule','1193394eaWhLl','58953gjFSbS','825622uyxrwX','writable','default','4680588DCVfsQ','ERR_RATING_NAME_ALREADY_EXISTS','call','map','required','yup','./ShowService','get','min','constructor'];a424_0x5908=function(){return _0x219e03;};return a424_0x5908();}function a424_0xce74(_0x2ead5b,_0x4f3408){const _0x23e147=a424_0x5908();return a424_0xce74=function(_0x5f2bc3,_0x5ce1bc){_0x5f2bc3=_0x5f2bc3-0x14b;let _0x59086a=_0x23e147[_0x5f2bc3];return _0x59086a;},a424_0xce74(_0x2ead5b,_0x4f3408);}Object[a424_0xab302b(0x164)](exports,a424_0xab302b(0x14b),{'value':!![]});const Yup=__importStar(require(a424_0xab302b(0x156))),AppError_1=__importDefault(require('../../errors/AppError')),Files_1=__importDefault(require(a424_0xab302b(0x172))),FilesOptions_1=__importDefault(require(a424_0xab302b(0x165))),ShowService_1=__importDefault(require(a424_0xab302b(0x157))),CreateService=async({name:_0x5a5d8a,message:_0x3e381b,companyId:_0x559e64,options:_0x38f350})=>{const _0x69da3c=a424_0xab302b,_0x2b0ce6=Yup[_0x69da3c(0x16f)]()[_0x69da3c(0x166)]({'name':Yup[_0x69da3c(0x169)]()[_0x69da3c(0x155)]()[_0x69da3c(0x159)](0x3)['test']('Check-unique-name',_0x69da3c(0x152),async _0x2d2a00=>{const _0x8193cb=_0x69da3c;if(_0x2d2a00){const _0x45c249=await Files_1[_0x8193cb(0x150)]['findOne']({'where':{'name':_0x2d2a00,'companyId':_0x559e64}});return!_0x45c249;}return![];})});try{await _0x2b0ce6['validate']({'name':_0x5a5d8a});}catch(_0x4bfcaf){throw new AppError_1[(_0x69da3c(0x150))](_0x4bfcaf[_0x69da3c(0x163)]);}let _0x26014a=await Files_1[_0x69da3c(0x150)][_0x69da3c(0x16a)]({'name':_0x5a5d8a,'message':_0x3e381b,'companyId':_0x559e64});return _0x38f350&&_0x38f350[_0x69da3c(0x171)]>0x0&&await Promise[_0x69da3c(0x174)](_0x38f350[_0x69da3c(0x154)](async _0x1ddd89=>{const _0x522742=_0x69da3c;await FilesOptions_1['default'][_0x522742(0x160)]({..._0x1ddd89,'fileId':_0x26014a['id']});})),_0x26014a=await(0x0,ShowService_1[_0x69da3c(0x150)])(_0x26014a['id'],_0x559e64),_0x26014a;};exports[a424_0xab302b(0x150)]=CreateService;