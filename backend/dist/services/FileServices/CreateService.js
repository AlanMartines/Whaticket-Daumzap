const a424_0x362b32=a424_0x1e68;(function(_0xedf4d2,_0x5c3d29){const _0x4197e9=a424_0x1e68,_0x1abad1=_0xedf4d2();while(!![]){try{const _0x419e78=-parseInt(_0x4197e9(0x191))/0x1+-parseInt(_0x4197e9(0x182))/0x2*(parseInt(_0x4197e9(0x188))/0x3)+-parseInt(_0x4197e9(0x18a))/0x4+-parseInt(_0x4197e9(0x180))/0x5+parseInt(_0x4197e9(0x1a1))/0x6+parseInt(_0x4197e9(0x192))/0x7*(-parseInt(_0x4197e9(0x19b))/0x8)+parseInt(_0x4197e9(0x181))/0x9;if(_0x419e78===_0x5c3d29)break;else _0x1abad1['push'](_0x1abad1['shift']());}catch(_0x3aa018){_0x1abad1['push'](_0x1abad1['shift']());}}}(a424_0x5628,0x4200b));const a424_0x189ead=(function(){let _0x16d1fa=!![];return function(_0x5b7239,_0x3b340b){const _0x1d7c8f=_0x16d1fa?function(){const _0x11174b=a424_0x1e68;if(_0x3b340b){const _0x99c3c7=_0x3b340b[_0x11174b(0x19e)](_0x5b7239,arguments);return _0x3b340b=null,_0x99c3c7;}}:function(){};return _0x16d1fa=![],_0x1d7c8f;};}()),a424_0x4a76a9=a424_0x189ead(this,function(){const _0x26478f=a424_0x1e68;return a424_0x4a76a9[_0x26478f(0x18c)]()['search']('(((.+)+)+)+$')[_0x26478f(0x18c)]()[_0x26478f(0x194)](a424_0x4a76a9)[_0x26478f(0x17f)](_0x26478f(0x189));});a424_0x4a76a9();function a424_0x5628(){const _0x9066a8=['402329vhyRGs','161HuUOSO','__setModuleDefault','constructor','__importDefault','findOne','__esModule','get','configurable','call','40504onQddP','./ShowService','../../models/FilesOptions','apply','min','object','1906500IYiveV','required','default','all','search','91135SEvtHZ','8100225OpTXCG','12SLvRoZ','test','getOwnPropertyDescriptor','../../errors/AppError','defineProperty','create','1509YrOMvD','(((.+)+)+)+$','1629620eDzZsZ','hasOwnProperty','toString','__createBinding','shape','writable','upsert'];a424_0x5628=function(){return _0x9066a8;};return a424_0x5628();}'use strict';var __createBinding=this&&this[a424_0x362b32(0x18d)]||(Object[a424_0x362b32(0x187)]?function(_0x269644,_0xe4bb2e,_0x558f9b,_0x36d198){const _0x7d634a=a424_0x362b32;if(_0x36d198===undefined)_0x36d198=_0x558f9b;var _0x1be872=Object[_0x7d634a(0x184)](_0xe4bb2e,_0x558f9b);(!_0x1be872||(_0x7d634a(0x198)in _0x1be872?!_0xe4bb2e[_0x7d634a(0x197)]:_0x1be872[_0x7d634a(0x18f)]||_0x1be872[_0x7d634a(0x199)]))&&(_0x1be872={'enumerable':!![],'get':function(){return _0xe4bb2e[_0x558f9b];}}),Object[_0x7d634a(0x186)](_0x269644,_0x36d198,_0x1be872);}:function(_0x5cef53,_0x32251c,_0x2fca7a,_0x123433){if(_0x123433===undefined)_0x123433=_0x2fca7a;_0x5cef53[_0x123433]=_0x32251c[_0x2fca7a];}),__setModuleDefault=this&&this[a424_0x362b32(0x193)]||(Object[a424_0x362b32(0x187)]?function(_0x54c85b,_0x139de7){const _0x16a697=a424_0x362b32;Object[_0x16a697(0x186)](_0x54c85b,_0x16a697(0x17d),{'enumerable':!![],'value':_0x139de7});}:function(_0x3628a0,_0x3a3c74){_0x3628a0['default']=_0x3a3c74;}),__importStar=this&&this['__importStar']||function(_0x5d1fc1){const _0x5e4355=a424_0x362b32;if(_0x5d1fc1&&_0x5d1fc1[_0x5e4355(0x197)])return _0x5d1fc1;var _0x14c29b={};if(_0x5d1fc1!=null){for(var _0x55efc8 in _0x5d1fc1)if(_0x55efc8!==_0x5e4355(0x17d)&&Object['prototype'][_0x5e4355(0x18b)][_0x5e4355(0x19a)](_0x5d1fc1,_0x55efc8))__createBinding(_0x14c29b,_0x5d1fc1,_0x55efc8);}return __setModuleDefault(_0x14c29b,_0x5d1fc1),_0x14c29b;},__importDefault=this&&this[a424_0x362b32(0x195)]||function(_0x45746f){return _0x45746f&&_0x45746f['__esModule']?_0x45746f:{'default':_0x45746f};};Object[a424_0x362b32(0x186)](exports,a424_0x362b32(0x197),{'value':!![]});function a424_0x1e68(_0x1195f2,_0x13dde6){const _0xd6c617=a424_0x5628();return a424_0x1e68=function(_0x4a76a9,_0x189ead){_0x4a76a9=_0x4a76a9-0x17d;let _0x56280b=_0xd6c617[_0x4a76a9];return _0x56280b;},a424_0x1e68(_0x1195f2,_0x13dde6);}const Yup=__importStar(require('yup')),AppError_1=__importDefault(require(a424_0x362b32(0x185))),Files_1=__importDefault(require('../../models/Files')),FilesOptions_1=__importDefault(require(a424_0x362b32(0x19d))),ShowService_1=__importDefault(require(a424_0x362b32(0x19c))),CreateService=async({name:_0x18c713,message:_0x4ebc7f,companyId:_0x33471e,options:_0x3132bf})=>{const _0x332a0a=a424_0x362b32,_0x4f4f28=Yup[_0x332a0a(0x1a0)]()[_0x332a0a(0x18e)]({'name':Yup['string']()[_0x332a0a(0x1a2)]()[_0x332a0a(0x19f)](0x3)[_0x332a0a(0x183)]('Check-unique-name','ERR_RATING_NAME_ALREADY_EXISTS',async _0x467c24=>{const _0x26fbef=_0x332a0a;if(_0x467c24){const _0x1cc447=await Files_1[_0x26fbef(0x17d)][_0x26fbef(0x196)]({'where':{'name':_0x467c24,'companyId':_0x33471e}});return!_0x1cc447;}return![];})});try{await _0x4f4f28['validate']({'name':_0x18c713});}catch(_0x35520b){throw new AppError_1[(_0x332a0a(0x17d))](_0x35520b['message']);}let _0xe70dcb=await Files_1['default']['create']({'name':_0x18c713,'message':_0x4ebc7f,'companyId':_0x33471e});return _0x3132bf&&_0x3132bf['length']>0x0&&await Promise[_0x332a0a(0x17e)](_0x3132bf['map'](async _0x3f6c8b=>{const _0x39e70d=_0x332a0a;await FilesOptions_1['default'][_0x39e70d(0x190)]({..._0x3f6c8b,'fileId':_0xe70dcb['id']});})),_0xe70dcb=await(0x0,ShowService_1['default'])(_0xe70dcb['id'],_0x33471e),_0xe70dcb;};exports[a424_0x362b32(0x17d)]=CreateService;