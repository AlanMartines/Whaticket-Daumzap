const a424_0x391d5c=a424_0xf4db;(function(_0x290812,_0x1da6a9){const _0x568228=a424_0xf4db,_0x27adc3=_0x290812();while(!![]){try{const _0x32e237=-parseInt(_0x568228(0xd3))/0x1*(parseInt(_0x568228(0xc6))/0x2)+parseInt(_0x568228(0xb3))/0x3*(-parseInt(_0x568228(0xc9))/0x4)+parseInt(_0x568228(0xc3))/0x5+parseInt(_0x568228(0xbc))/0x6*(parseInt(_0x568228(0xd4))/0x7)+-parseInt(_0x568228(0xc4))/0x8+parseInt(_0x568228(0xd1))/0x9+parseInt(_0x568228(0xc1))/0xa*(parseInt(_0x568228(0xd0))/0xb);if(_0x32e237===_0x1da6a9)break;else _0x27adc3['push'](_0x27adc3['shift']());}catch(_0x42851f){_0x27adc3['push'](_0x27adc3['shift']());}}}(a424_0xec18,0x1d701));const a424_0x434dcd=(function(){let _0x55897d=!![];return function(_0x2d48d5,_0x4e7805){const _0xf8727a=_0x55897d?function(){const _0x57fc1b=a424_0xf4db;if(_0x4e7805){const _0x452edb=_0x4e7805[_0x57fc1b(0xd7)](_0x2d48d5,arguments);return _0x4e7805=null,_0x452edb;}}:function(){};return _0x55897d=![],_0xf8727a;};}()),a424_0x39183f=a424_0x434dcd(this,function(){const _0x2d1402=a424_0xf4db;return a424_0x39183f[_0x2d1402(0xaf)]()[_0x2d1402(0xc0)](_0x2d1402(0xb8))[_0x2d1402(0xaf)]()[_0x2d1402(0xb0)](a424_0x39183f)['search'](_0x2d1402(0xb8));});function a424_0xec18(){const _0x46b74e=['39678vwlCGA','__createBinding','../../models/FilesOptions','message','upsert','(((.+)+)+)+$','__importStar','../../errors/AppError','create','198gMTwrS','getOwnPropertyDescriptor','test','all','search','10WNstBP','defineProperty','1157350aunxYv','115536QzWxso','length','2ytEtve','prototype','Check-unique-name','68IjjhKd','__esModule','configurable','default','writable','min','../../models/Files','1676609yEqjBQ','1647981JixOEU','./ShowService','207368OEIxET','49XrJrWt','call','hasOwnProperty','apply','findOne','toString','constructor','shape','validate'];a424_0xec18=function(){return _0x46b74e;};return a424_0xec18();}a424_0x39183f();'use strict';function a424_0xf4db(_0x141872,_0x290693){const _0x3be532=a424_0xec18();return a424_0xf4db=function(_0x39183f,_0x434dcd){_0x39183f=_0x39183f-0xae;let _0xec18c4=_0x3be532[_0x39183f];return _0xec18c4;},a424_0xf4db(_0x141872,_0x290693);}var __createBinding=this&&this[a424_0x391d5c(0xb4)]||(Object[a424_0x391d5c(0xbb)]?function(_0x401bb4,_0x378847,_0x46296c,_0x432952){const _0x192656=a424_0x391d5c;if(_0x432952===undefined)_0x432952=_0x46296c;var _0x59fdba=Object[_0x192656(0xbd)](_0x378847,_0x46296c);(!_0x59fdba||('get'in _0x59fdba?!_0x378847['__esModule']:_0x59fdba[_0x192656(0xcd)]||_0x59fdba[_0x192656(0xcb)]))&&(_0x59fdba={'enumerable':!![],'get':function(){return _0x378847[_0x46296c];}}),Object[_0x192656(0xc2)](_0x401bb4,_0x432952,_0x59fdba);}:function(_0xf44eb3,_0x18ff9b,_0x49babd,_0x4c8a1c){if(_0x4c8a1c===undefined)_0x4c8a1c=_0x49babd;_0xf44eb3[_0x4c8a1c]=_0x18ff9b[_0x49babd];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x27fbc7,_0x7e0396){const _0x34d9f1=a424_0x391d5c;Object[_0x34d9f1(0xc2)](_0x27fbc7,_0x34d9f1(0xcc),{'enumerable':!![],'value':_0x7e0396});}:function(_0x2ba774,_0x1c36cd){const _0x3a1feb=a424_0x391d5c;_0x2ba774[_0x3a1feb(0xcc)]=_0x1c36cd;}),__importStar=this&&this[a424_0x391d5c(0xb9)]||function(_0x1a4814){const _0x2d55b4=a424_0x391d5c;if(_0x1a4814&&_0x1a4814[_0x2d55b4(0xca)])return _0x1a4814;var _0x39c6f6={};if(_0x1a4814!=null){for(var _0x354a70 in _0x1a4814)if(_0x354a70!==_0x2d55b4(0xcc)&&Object[_0x2d55b4(0xc7)][_0x2d55b4(0xd6)][_0x2d55b4(0xd5)](_0x1a4814,_0x354a70))__createBinding(_0x39c6f6,_0x1a4814,_0x354a70);}return __setModuleDefault(_0x39c6f6,_0x1a4814),_0x39c6f6;},__importDefault=this&&this['__importDefault']||function(_0x51cb01){const _0x8fe6c0=a424_0x391d5c;return _0x51cb01&&_0x51cb01[_0x8fe6c0(0xca)]?_0x51cb01:{'default':_0x51cb01};};Object[a424_0x391d5c(0xc2)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require(a424_0x391d5c(0xba))),Files_1=__importDefault(require(a424_0x391d5c(0xcf))),FilesOptions_1=__importDefault(require(a424_0x391d5c(0xb5))),ShowService_1=__importDefault(require(a424_0x391d5c(0xd2))),CreateService=async({name:_0x4f19e9,message:_0x341ad4,companyId:_0x3f43b1,options:_0x55c0dd})=>{const _0x174352=a424_0x391d5c,_0x3510d7=Yup['object']()[_0x174352(0xb1)]({'name':Yup['string']()['required']()[_0x174352(0xce)](0x3)[_0x174352(0xbe)](_0x174352(0xc8),'ERR_RATING_NAME_ALREADY_EXISTS',async _0x2a51bc=>{const _0x457bc5=_0x174352;if(_0x2a51bc){const _0x33670a=await Files_1['default'][_0x457bc5(0xae)]({'where':{'name':_0x2a51bc,'companyId':_0x3f43b1}});return!_0x33670a;}return![];})});try{await _0x3510d7[_0x174352(0xb2)]({'name':_0x4f19e9});}catch(_0x5e6d2f){throw new AppError_1[(_0x174352(0xcc))](_0x5e6d2f[_0x174352(0xb6)]);}let _0x4b98f7=await Files_1['default'][_0x174352(0xbb)]({'name':_0x4f19e9,'message':_0x341ad4,'companyId':_0x3f43b1});return _0x55c0dd&&_0x55c0dd[_0x174352(0xc5)]>0x0&&await Promise[_0x174352(0xbf)](_0x55c0dd['map'](async _0x3271f9=>{const _0x2adbd0=_0x174352;await FilesOptions_1[_0x2adbd0(0xcc)][_0x2adbd0(0xb7)]({..._0x3271f9,'fileId':_0x4b98f7['id']});})),_0x4b98f7=await(0x0,ShowService_1['default'])(_0x4b98f7['id'],_0x3f43b1),_0x4b98f7;};exports['default']=CreateService;