const a365_0x3cb7fa=a365_0x4278;function a365_0x32f3(){const _0x15ce4f=['apply','toString','constructor','1853715zdYheY','search','CancelService','10745152fmQqlr','default','defineProperty','update','__importDefault','119821OEUymK','__esModule','findByPk','8022rzzMwu','345116NMTOpl','getJob','(((.+)+)+)+$','742SJIqjT','findAll','jobId','1278267LTGkmw','1694740qnZxMI','campaignQueue','sequelize','not','../../models/Campaign'];a365_0x32f3=function(){return _0x15ce4f;};return a365_0x32f3();}(function(_0x526b3c,_0x4c17f1){const _0x288251=a365_0x4278,_0x20955c=_0x526b3c();while(!![]){try{const _0x90ec32=parseInt(_0x288251(0x18b))/0x1+parseInt(_0x288251(0x174))/0x2+parseInt(_0x288251(0x17a))/0x3+parseInt(_0x288251(0x17b))/0x4+parseInt(_0x288251(0x183))/0x5+-parseInt(_0x288251(0x18e))/0x6*(-parseInt(_0x288251(0x177))/0x7)+-parseInt(_0x288251(0x186))/0x8;if(_0x90ec32===_0x4c17f1)break;else _0x20955c['push'](_0x20955c['shift']());}catch(_0x5123dd){_0x20955c['push'](_0x20955c['shift']());}}}(a365_0x32f3,0x4c0b2));const a365_0x3696af=(function(){let _0x1454e2=!![];return function(_0x492a95,_0x46b2cc){const _0x1e5b99=_0x1454e2?function(){const _0x17213c=a365_0x4278;if(_0x46b2cc){const _0x3d3603=_0x46b2cc[_0x17213c(0x180)](_0x492a95,arguments);return _0x46b2cc=null,_0x3d3603;}}:function(){};return _0x1454e2=![],_0x1e5b99;};}()),a365_0x55ea15=a365_0x3696af(this,function(){const _0x18b6ce=a365_0x4278;return a365_0x55ea15[_0x18b6ce(0x181)]()[_0x18b6ce(0x184)](_0x18b6ce(0x176))['toString']()[_0x18b6ce(0x182)](a365_0x55ea15)[_0x18b6ce(0x184)](_0x18b6ce(0x176));});function a365_0x4278(_0x4313f1,_0x6744a5){const _0x11ec0d=a365_0x32f3();return a365_0x4278=function(_0x55ea15,_0x3696af){_0x55ea15=_0x55ea15-0x174;let _0x32f35f=_0x11ec0d[_0x55ea15];return _0x32f35f;},a365_0x4278(_0x4313f1,_0x6744a5);}a365_0x55ea15();'use strict';var __importDefault=this&&this[a365_0x3cb7fa(0x18a)]||function(_0x4b5c07){const _0x247535=a365_0x3cb7fa;return _0x4b5c07&&_0x4b5c07[_0x247535(0x18c)]?_0x4b5c07:{'default':_0x4b5c07};};Object[a365_0x3cb7fa(0x188)](exports,a365_0x3cb7fa(0x18c),{'value':!![]}),exports[a365_0x3cb7fa(0x185)]=void 0x0;const sequelize_1=require(a365_0x3cb7fa(0x17d)),Campaign_1=__importDefault(require(a365_0x3cb7fa(0x17f))),CampaignShipping_1=__importDefault(require('../../models/CampaignShipping')),queues_1=require('../../queues');async function CancelService(_0x3821d9){const _0x3901f0=a365_0x3cb7fa,_0x30e4d8=await Campaign_1['default'][_0x3901f0(0x18d)](_0x3821d9);await _0x30e4d8[_0x3901f0(0x189)]({'status':'CANCELADA'});const _0x1c5b4f=await CampaignShipping_1[_0x3901f0(0x187)][_0x3901f0(0x178)]({'where':{'campaignId':_0x30e4d8['id'],'jobId':{[sequelize_1['Op'][_0x3901f0(0x17e)]]:null},'deliveredAt':null}}),_0x2a6f70=[];for(let _0x2d6afe of _0x1c5b4f){const _0x15fe4d=await queues_1[_0x3901f0(0x17c)][_0x3901f0(0x175)](_0x2d6afe[_0x3901f0(0x179)]);_0x2a6f70['push'](_0x15fe4d?.['remove']());}await Promise['all'](_0x2a6f70);}exports['CancelService']=CancelService;