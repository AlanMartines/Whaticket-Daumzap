const a365_0x47fe60=a365_0x3baa;(function(_0x471496,_0x218b8d){const _0x2717d5=a365_0x3baa,_0x2d576c=_0x471496();while(!![]){try{const _0x20dbbe=parseInt(_0x2717d5(0x1c9))/0x1+parseInt(_0x2717d5(0x1c5))/0x2*(parseInt(_0x2717d5(0x1d5))/0x3)+parseInt(_0x2717d5(0x1de))/0x4+-parseInt(_0x2717d5(0x1d8))/0x5+parseInt(_0x2717d5(0x1cd))/0x6*(-parseInt(_0x2717d5(0x1d0))/0x7)+-parseInt(_0x2717d5(0x1d9))/0x8+parseInt(_0x2717d5(0x1d6))/0x9;if(_0x20dbbe===_0x218b8d)break;else _0x2d576c['push'](_0x2d576c['shift']());}catch(_0x628b56){_0x2d576c['push'](_0x2d576c['shift']());}}}(a365_0x4512,0xa7119));const a365_0x39438c=(function(){let _0x3efc16=!![];return function(_0x422134,_0x2ec050){const _0x3b7795=_0x3efc16?function(){const _0x1355f9=a365_0x3baa;if(_0x2ec050){const _0x2bd513=_0x2ec050[_0x1355f9(0x1cf)](_0x422134,arguments);return _0x2ec050=null,_0x2bd513;}}:function(){};return _0x3efc16=![],_0x3b7795;};}()),a365_0x52b547=a365_0x39438c(this,function(){const _0x26fdb9=a365_0x3baa;return a365_0x52b547['toString']()[_0x26fdb9(0x1da)]('(((.+)+)+)+$')[_0x26fdb9(0x1c6)]()[_0x26fdb9(0x1cb)](a365_0x52b547)['search'](_0x26fdb9(0x1d2));});function a365_0x4512(){const _0x16fbe7=['__esModule','1707SvutRI','1120491diBSPu','CANCELADA','793755ixcwms','7375416dylRqh','search','campaignQueue','jobId','remove','3607520mlCJMB','default','sequelize','2396KCuqWk','toString','__importDefault','getJob','955469ZalohZ','defineProperty','constructor','CancelService','5391114ysoKqy','not','apply','7bCRuve','update','(((.+)+)+)+$','findByPk'];a365_0x4512=function(){return _0x16fbe7;};return a365_0x4512();}a365_0x52b547();function a365_0x3baa(_0x3ab8b4,_0x3b50a4){const _0x3d4fbe=a365_0x4512();return a365_0x3baa=function(_0x52b547,_0x39438c){_0x52b547=_0x52b547-0x1c4;let _0x451277=_0x3d4fbe[_0x52b547];return _0x451277;},a365_0x3baa(_0x3ab8b4,_0x3b50a4);}'use strict';var __importDefault=this&&this[a365_0x47fe60(0x1c7)]||function(_0x3bff0a){return _0x3bff0a&&_0x3bff0a['__esModule']?_0x3bff0a:{'default':_0x3bff0a};};Object[a365_0x47fe60(0x1ca)](exports,a365_0x47fe60(0x1d4),{'value':!![]}),exports[a365_0x47fe60(0x1cc)]=void 0x0;const sequelize_1=require(a365_0x47fe60(0x1c4)),Campaign_1=__importDefault(require('../../models/Campaign')),CampaignShipping_1=__importDefault(require('../../models/CampaignShipping')),queues_1=require('../../queues');async function CancelService(_0xf2a2e8){const _0x484a48=a365_0x47fe60,_0x444241=await Campaign_1['default'][_0x484a48(0x1d3)](_0xf2a2e8);await _0x444241[_0x484a48(0x1d1)]({'status':_0x484a48(0x1d7)});const _0x551410=await CampaignShipping_1[_0x484a48(0x1df)]['findAll']({'where':{'campaignId':_0x444241['id'],'jobId':{[sequelize_1['Op'][_0x484a48(0x1ce)]]:null},'deliveredAt':null}}),_0x43b8df=[];for(let _0x366321 of _0x551410){const _0x4a27d0=await queues_1[_0x484a48(0x1db)][_0x484a48(0x1c8)](_0x366321[_0x484a48(0x1dc)]);_0x43b8df['push'](_0x4a27d0?.[_0x484a48(0x1dd)]());}await Promise['all'](_0x43b8df);}exports[a365_0x47fe60(0x1cc)]=CancelService;