const a365_0x14b2eb=a365_0x46db;(function(_0x57b391,_0x48a151){const _0x4d8a61=a365_0x46db,_0x5bf87a=_0x57b391();while(!![]){try{const _0x1f7845=-parseInt(_0x4d8a61(0x152))/0x1+-parseInt(_0x4d8a61(0x141))/0x2+parseInt(_0x4d8a61(0x13a))/0x3*(-parseInt(_0x4d8a61(0x145))/0x4)+parseInt(_0x4d8a61(0x139))/0x5*(parseInt(_0x4d8a61(0x147))/0x6)+parseInt(_0x4d8a61(0x138))/0x7*(parseInt(_0x4d8a61(0x14d))/0x8)+-parseInt(_0x4d8a61(0x144))/0x9+-parseInt(_0x4d8a61(0x14a))/0xa*(-parseInt(_0x4d8a61(0x13b))/0xb);if(_0x1f7845===_0x48a151)break;else _0x5bf87a['push'](_0x5bf87a['shift']());}catch(_0x3b19d7){_0x5bf87a['push'](_0x5bf87a['shift']());}}}(a365_0x10ad,0xd0233));function a365_0x10ad(){const _0x155141=['5062149txDwUF','40684uIALLk','CancelService','136812IuBWFT','(((.+)+)+)+$','default','83610vDnvgt','../../models/Campaign','../../models/CampaignShipping','1660088MsLult','sequelize','search','not','remove','926549LZxzpS','toString','../../queues','constructor','21MJpKBa','370FVxODf','141olmrci','2277gKRUke','defineProperty','apply','campaignQueue','__importDefault','findAll','2442060yHAKUN','jobId','__esModule'];a365_0x10ad=function(){return _0x155141;};return a365_0x10ad();}const a365_0x3b4804=(function(){let _0x5f5d16=!![];return function(_0x35e9e7,_0x286045){const _0x3080a5=_0x5f5d16?function(){const _0x57055f=a365_0x46db;if(_0x286045){const _0x37ed5d=_0x286045[_0x57055f(0x13d)](_0x35e9e7,arguments);return _0x286045=null,_0x37ed5d;}}:function(){};return _0x5f5d16=![],_0x3080a5;};}()),a365_0x4497d6=a365_0x3b4804(this,function(){const _0x53ee9d=a365_0x46db;return a365_0x4497d6[_0x53ee9d(0x153)]()[_0x53ee9d(0x14f)](_0x53ee9d(0x148))[_0x53ee9d(0x153)]()[_0x53ee9d(0x137)](a365_0x4497d6)[_0x53ee9d(0x14f)](_0x53ee9d(0x148));});a365_0x4497d6();'use strict';var __importDefault=this&&this[a365_0x14b2eb(0x13f)]||function(_0x3dd1ae){const _0x1a1ef7=a365_0x14b2eb;return _0x3dd1ae&&_0x3dd1ae[_0x1a1ef7(0x143)]?_0x3dd1ae:{'default':_0x3dd1ae};};Object[a365_0x14b2eb(0x13c)](exports,a365_0x14b2eb(0x143),{'value':!![]}),exports[a365_0x14b2eb(0x146)]=void 0x0;function a365_0x46db(_0x1ee71e,_0x1dbe80){const _0x5a9192=a365_0x10ad();return a365_0x46db=function(_0x4497d6,_0x3b4804){_0x4497d6=_0x4497d6-0x137;let _0x10adb2=_0x5a9192[_0x4497d6];return _0x10adb2;},a365_0x46db(_0x1ee71e,_0x1dbe80);}const sequelize_1=require(a365_0x14b2eb(0x14e)),Campaign_1=__importDefault(require(a365_0x14b2eb(0x14b))),CampaignShipping_1=__importDefault(require(a365_0x14b2eb(0x14c))),queues_1=require(a365_0x14b2eb(0x154));async function CancelService(_0x37d7fa){const _0x4a366b=a365_0x14b2eb,_0x153386=await Campaign_1[_0x4a366b(0x149)]['findByPk'](_0x37d7fa);await _0x153386['update']({'status':'CANCELADA'});const _0x319d83=await CampaignShipping_1[_0x4a366b(0x149)][_0x4a366b(0x140)]({'where':{'campaignId':_0x153386['id'],'jobId':{[sequelize_1['Op'][_0x4a366b(0x150)]]:null},'deliveredAt':null}}),_0x36c372=[];for(let _0x5f1342 of _0x319d83){const _0x10b371=await queues_1[_0x4a366b(0x13e)]['getJob'](_0x5f1342[_0x4a366b(0x142)]);_0x36c372['push'](_0x10b371?.[_0x4a366b(0x151)]());}await Promise['all'](_0x36c372);}exports[a365_0x14b2eb(0x146)]=CancelService;