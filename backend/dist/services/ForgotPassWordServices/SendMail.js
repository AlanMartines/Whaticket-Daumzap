function a431_0x4bdb(){const _0x2cb26b=['1073543CwaVpj','10767888OwuHZp','__importDefault','Erro\x20ao\x20enviar\x20e-mail:','clientsecretsmtpauth','value','Olá,\x0a\x0aVocê\x20solicitou\x20a\x20redefinição\x20de\x20senha\x20para\x20sua\x20conta,\x20utilize\x20o\x20seguinte\x20Código\x20de\x20Verificação\x20para\x20concluir\x20o\x20processo\x20de\x20redefinição\x20de\x20senha:\x0a\x0aCódigo\x20de\x20Verificação:\x20','8ZMDNXR','query','all','Redefinição\x20de\x20Senha','\x27\x20WHERE\x20email\x20=\x27','createTransport','error','../../database','usersmtpauth','4068170dGZNYy','search','6846580iNTtgW','__esModule','smtpport','45rPmeiG','402522ibQbcb','8HmFjlB','default','nodemailer','companyId','Não\x20foi\x20possível\x20inserir\x20o\x20token\x20de\x20redefinição','constructor','SELECT','UPDATE','SELECT\x20*\x20FROM\x20\x22Users\x22\x20WHERE\x20email\x20=\x27','3216992AnlVra','findOne','toString','sendMail','Email\x20não\x20encontrado','apply','QueryTypes','(((.+)+)+)+$','2997701azDxLD'];a431_0x4bdb=function(){return _0x2cb26b;};return a431_0x4bdb();}const a431_0x1fd1db=a431_0x25d7;(function(_0x3a4aae,_0xa4c65e){const _0x25cd37=a431_0x25d7,_0x1d9371=_0x3a4aae();while(!![]){try{const _0x7c4f7e=parseInt(_0x25cd37(0x1b5))/0x1+parseInt(_0x25cd37(0x1d5))/0x2+parseInt(_0x25cd37(0x1cb))/0x3*(parseInt(_0x25cd37(0x1bc))/0x4)+-parseInt(_0x25cd37(0x1c7))/0x5+parseInt(_0x25cd37(0x1b6))/0x6+-parseInt(_0x25cd37(0x1b4))/0x7*(parseInt(_0x25cd37(0x1cc))/0x8)+-parseInt(_0x25cd37(0x1ca))/0x9*(parseInt(_0x25cd37(0x1c5))/0xa);if(_0x7c4f7e===_0xa4c65e)break;else _0x1d9371['push'](_0x1d9371['shift']());}catch(_0x55e1a9){_0x1d9371['push'](_0x1d9371['shift']());}}}(a431_0x4bdb,0xdefef));function a431_0x25d7(_0x3e1ff7,_0x6d4f77){const _0x456a78=a431_0x4bdb();return a431_0x25d7=function(_0x4cc6df,_0x30590e){_0x4cc6df=_0x4cc6df-0x1b0;let _0x4bdb1e=_0x456a78[_0x4cc6df];return _0x4bdb1e;},a431_0x25d7(_0x3e1ff7,_0x6d4f77);}const a431_0x30590e=(function(){let _0x33d4c8=!![];return function(_0x2b9c81,_0x57713c){const _0x4304e0=_0x33d4c8?function(){const _0x37f3cb=a431_0x25d7;if(_0x57713c){const _0x2723bb=_0x57713c[_0x37f3cb(0x1b1)](_0x2b9c81,arguments);return _0x57713c=null,_0x2723bb;}}:function(){};return _0x33d4c8=![],_0x4304e0;};}()),a431_0x4cc6df=a431_0x30590e(this,function(){const _0x38a501=a431_0x25d7;return a431_0x4cc6df[_0x38a501(0x1d7)]()[_0x38a501(0x1c6)]('(((.+)+)+)+$')[_0x38a501(0x1d7)]()[_0x38a501(0x1d1)](a431_0x4cc6df)[_0x38a501(0x1c6)](_0x38a501(0x1b3));});a431_0x4cc6df();'use strict';var __importDefault=this&&this[a431_0x1fd1db(0x1b7)]||function(_0x2d10b1){const _0x4edf6c=a431_0x1fd1db;return _0x2d10b1&&_0x2d10b1[_0x4edf6c(0x1c8)]?_0x2d10b1:{'default':_0x2d10b1};};Object['defineProperty'](exports,a431_0x1fd1db(0x1c8),{'value':!![]});const nodemailer_1=__importDefault(require(a431_0x1fd1db(0x1ce))),sequelize_1=__importDefault(require('sequelize')),database_1=__importDefault(require(a431_0x1fd1db(0x1c3))),Setting_1=__importDefault(require('../../models/Setting')),SendMail=async(_0x2b7f53,_0x2156f7)=>{const _0x296c18=a431_0x1fd1db;try{const _0x1185fa=0x1,{hasResult:_0x412b4c,data:_0x4ad0a0}=await filterEmail(_0x2b7f53);if(!_0x412b4c)return{'status':0x194,'message':_0x296c18(0x1b0)};const _0x4c1caa=_0x4ad0a0[0x0];if(!_0x4c1caa||_0x4c1caa[_0x296c18(0x1cf)]===undefined)return{'status':0x194,'message':'Dados\x20do\x20usuário\x20não\x20encontrados'};const [_0x2196af,_0x1d59b3,_0x3499ee,_0x207a4c]=await Promise[_0x296c18(0x1be)]([Setting_1[_0x296c18(0x1cd)]['findOne']({'where':{'companyId':_0x1185fa,'key':'smtpauth'}}),Setting_1[_0x296c18(0x1cd)][_0x296c18(0x1d6)]({'where':{'companyId':_0x1185fa,'key':_0x296c18(0x1c4)}}),Setting_1[_0x296c18(0x1cd)][_0x296c18(0x1d6)]({'where':{'companyId':_0x1185fa,'key':_0x296c18(0x1b9)}}),Setting_1[_0x296c18(0x1cd)][_0x296c18(0x1d6)]({'where':{'companyId':_0x1185fa,'key':_0x296c18(0x1c9)}})]),_0x1449c0=_0x2196af?.[_0x296c18(0x1ba)],_0x382e4b=_0x1d59b3?.[_0x296c18(0x1ba)],_0x1d33ac=_0x3499ee?.[_0x296c18(0x1ba)],_0x5cc22d=_0x382e4b,_0x222ed2=_0x207a4c?.[_0x296c18(0x1ba)];if(!_0x1449c0||!_0x382e4b||!_0x1d33ac||!_0x222ed2)throw new Error('Configurações\x20SMTP\x20estão\x20incompletas');const _0x1dec27=nodemailer_1[_0x296c18(0x1cd)][_0x296c18(0x1c1)]({'host':_0x1449c0,'port':Number(_0x222ed2),'secure':![],'auth':{'user':_0x382e4b,'pass':_0x1d33ac}}),{hasResults:_0x40cb70}=await insertToken(_0x2b7f53,_0x2156f7);if(!_0x40cb70)return{'status':0x194,'message':_0x296c18(0x1d0)};const _0x3617e6={'from':_0x5cc22d,'to':_0x2b7f53,'subject':_0x296c18(0x1bf),'text':_0x296c18(0x1bb)+_0x2156f7+'\x0a\x0aPor\x20favor,\x20copie\x20e\x20cole\x20o\x20Código\x20de\x20Verificação\x20no\x20campo\x20\x27Código\x20de\x20Verificação\x27.\x0a\x0aSe\x20você\x20não\x20solicitou\x20esta\x20redefinição\x20de\x20senha,\x20por\x20favor,\x20ignore\x20este\x20e-mail.\x0a\x0a\x0aAtenciosamente'},_0x22dd21=await _0x1dec27[_0x296c18(0x1d8)](_0x3617e6);return{'status':0xc8,'message':'E-mail\x20enviado\x20com\x20sucesso','info':_0x22dd21};}catch(_0x5e7611){return console[_0x296c18(0x1c2)](_0x296c18(0x1b8),_0x5e7611),{'status':0x1f4,'message':'Erro\x20interno\x20do\x20servidor'};}},filterEmail=async _0x137dcd=>{const _0xe166ad=a431_0x1fd1db,_0x1fd830=_0xe166ad(0x1d4)+_0x137dcd+'\x27',_0x5d748c=await database_1[_0xe166ad(0x1cd)][_0xe166ad(0x1bd)](_0x1fd830,{'type':sequelize_1[_0xe166ad(0x1cd)]['QueryTypes'][_0xe166ad(0x1d2)]});return{'hasResult':_0x5d748c['length']>0x0,'data':_0x5d748c};},insertToken=async(_0x14e7db,_0x4f2764)=>{const _0x53b254=a431_0x1fd1db,_0x4788ee='UPDATE\x20\x22Users\x22\x20SET\x20\x22resetPassword\x22=\x20\x27'+_0x4f2764+_0x53b254(0x1c0)+_0x14e7db+'\x27',_0x1d399c=await database_1[_0x53b254(0x1cd)][_0x53b254(0x1bd)](_0x4788ee,{'type':sequelize_1[_0x53b254(0x1cd)][_0x53b254(0x1b2)][_0x53b254(0x1d3)]});return{'hasResults':_0x1d399c[0x1]>0x0,'datas':_0x1d399c};};exports['default']=SendMail;