function a431_0xbc2d(){const _0xcecba1=['default','9804bJYtTF','search','201668SgNstf','UPDATE\x20\x22Users\x22\x20SET\x20\x22resetPassword\x22=\x20\x27','smtpauth','50919nmIoBp','constructor','Redefinição\x20de\x20Senha','Dados\x20do\x20usuário\x20não\x20encontrados','653708EOkwtj','19730WAiTrQ','4776aOBcNi','__importDefault','clientsecretsmtpauth','defineProperty','../../models/Setting','(((.+)+)+)+$','all','Olá,\x0a\x0aVocê\x20solicitou\x20a\x20redefinição\x20de\x20senha\x20para\x20sua\x20conta,\x20utilize\x20o\x20seguinte\x20Código\x20de\x20Verificação\x20para\x20concluir\x20o\x20processo\x20de\x20redefinição\x20de\x20senha:\x0a\x0aCódigo\x20de\x20Verificação:\x20','toString','UPDATE','1DHSujA','8MBrDIq','658080kRHnWR','sequelize','value','__esModule','sendMail','\x0a\x0aPor\x20favor,\x20copie\x20e\x20cole\x20o\x20Código\x20de\x20Verificação\x20no\x20campo\x20\x27Código\x20de\x20Verificação\x27.\x0a\x0aSe\x20você\x20não\x20solicitou\x20esta\x20redefinição\x20de\x20senha,\x20por\x20favor,\x20ignore\x20este\x20e-mail.\x0a\x0a\x0aAtenciosamente','1375NKfEjS','query','Não\x20foi\x20possível\x20inserir\x20o\x20token\x20de\x20redefinição','E-mail\x20enviado\x20com\x20sucesso','smtpport','SELECT','855PbbQvh','SELECT\x20*\x20FROM\x20\x22Users\x22\x20WHERE\x20email\x20=\x27','findOne','companyId','QueryTypes','2326107zBurSR','nodemailer'];a431_0xbc2d=function(){return _0xcecba1;};return a431_0xbc2d();}const a431_0x351a83=a431_0xe95a;(function(_0x45b564,_0x53d5d0){const _0x50182a=a431_0xe95a,_0x3fd6fb=_0x45b564();while(!![]){try{const _0x3ec608=-parseInt(_0x50182a(0x13c))/0x1*(parseInt(_0x50182a(0x154))/0x2)+-parseInt(_0x50182a(0x13e))/0x3+-parseInt(_0x50182a(0x15b))/0x4+parseInt(_0x50182a(0x144))/0x5*(-parseInt(_0x50182a(0x152))/0x6)+parseInt(_0x50182a(0x14f))/0x7*(-parseInt(_0x50182a(0x13d))/0x8)+parseInt(_0x50182a(0x14a))/0x9*(-parseInt(_0x50182a(0x15c))/0xa)+-parseInt(_0x50182a(0x157))/0xb*(-parseInt(_0x50182a(0x15d))/0xc);if(_0x3ec608===_0x53d5d0)break;else _0x3fd6fb['push'](_0x3fd6fb['shift']());}catch(_0x57bc8c){_0x3fd6fb['push'](_0x3fd6fb['shift']());}}}(a431_0xbc2d,0x5f203));function a431_0xe95a(_0xe808e8,_0x2c2ee5){const _0x2bb2c0=a431_0xbc2d();return a431_0xe95a=function(_0x2489eb,_0x503018){_0x2489eb=_0x2489eb-0x135;let _0xbc2d82=_0x2bb2c0[_0x2489eb];return _0xbc2d82;},a431_0xe95a(_0xe808e8,_0x2c2ee5);}const a431_0x503018=(function(){let _0x4636d1=!![];return function(_0xcdb76f,_0x245a99){const _0x2bc72d=_0x4636d1?function(){if(_0x245a99){const _0x2ef9b3=_0x245a99['apply'](_0xcdb76f,arguments);return _0x245a99=null,_0x2ef9b3;}}:function(){};return _0x4636d1=![],_0x2bc72d;};}()),a431_0x2489eb=a431_0x503018(this,function(){const _0x26926c=a431_0xe95a;return a431_0x2489eb[_0x26926c(0x13a)]()[_0x26926c(0x153)](_0x26926c(0x137))[_0x26926c(0x13a)]()[_0x26926c(0x158)](a431_0x2489eb)[_0x26926c(0x153)](_0x26926c(0x137));});a431_0x2489eb();'use strict';var __importDefault=this&&this[a431_0x351a83(0x15e)]||function(_0x1c1f13){const _0x502390=a431_0x351a83;return _0x1c1f13&&_0x1c1f13[_0x502390(0x141)]?_0x1c1f13:{'default':_0x1c1f13};};Object[a431_0x351a83(0x135)](exports,a431_0x351a83(0x141),{'value':!![]});const nodemailer_1=__importDefault(require(a431_0x351a83(0x150))),sequelize_1=__importDefault(require(a431_0x351a83(0x13f))),database_1=__importDefault(require('../../database')),Setting_1=__importDefault(require(a431_0x351a83(0x136))),SendMail=async(_0x3545c6,_0x2a683e)=>{const _0x170e52=a431_0x351a83;try{const _0x3f1ac1=0x1,{hasResult:_0x51fe8c,data:_0x23e76a}=await filterEmail(_0x3545c6);if(!_0x51fe8c)return{'status':0x194,'message':'Email\x20não\x20encontrado'};const _0x238648=_0x23e76a[0x0];if(!_0x238648||_0x238648[_0x170e52(0x14d)]===undefined)return{'status':0x194,'message':_0x170e52(0x15a)};const [_0x887c7f,_0x8fe0ca,_0x10544e,_0x42fa7e]=await Promise[_0x170e52(0x138)]([Setting_1[_0x170e52(0x151)][_0x170e52(0x14c)]({'where':{'companyId':_0x3f1ac1,'key':_0x170e52(0x156)}}),Setting_1[_0x170e52(0x151)][_0x170e52(0x14c)]({'where':{'companyId':_0x3f1ac1,'key':'usersmtpauth'}}),Setting_1[_0x170e52(0x151)][_0x170e52(0x14c)]({'where':{'companyId':_0x3f1ac1,'key':_0x170e52(0x15f)}}),Setting_1['default']['findOne']({'where':{'companyId':_0x3f1ac1,'key':_0x170e52(0x148)}})]),_0x29334e=_0x887c7f?.['value'],_0x49298c=_0x8fe0ca?.[_0x170e52(0x140)],_0x266270=_0x10544e?.['value'],_0x2502cf=_0x49298c,_0x47182b=_0x42fa7e?.[_0x170e52(0x140)];if(!_0x29334e||!_0x49298c||!_0x266270||!_0x47182b)throw new Error('Configurações\x20SMTP\x20estão\x20incompletas');const _0x30169b=nodemailer_1[_0x170e52(0x151)]['createTransport']({'host':_0x29334e,'port':Number(_0x47182b),'secure':![],'auth':{'user':_0x49298c,'pass':_0x266270}}),{hasResults:_0x334ba9}=await insertToken(_0x3545c6,_0x2a683e);if(!_0x334ba9)return{'status':0x194,'message':_0x170e52(0x146)};const _0x2dcba5={'from':_0x2502cf,'to':_0x3545c6,'subject':_0x170e52(0x159),'text':_0x170e52(0x139)+_0x2a683e+_0x170e52(0x143)},_0x316075=await _0x30169b[_0x170e52(0x142)](_0x2dcba5);return{'status':0xc8,'message':_0x170e52(0x147),'info':_0x316075};}catch(_0x533215){return console['error']('Erro\x20ao\x20enviar\x20e-mail:',_0x533215),{'status':0x1f4,'message':'Erro\x20interno\x20do\x20servidor'};}},filterEmail=async _0x444706=>{const _0x2b568b=a431_0x351a83,_0x434436=_0x2b568b(0x14b)+_0x444706+'\x27',_0x99795d=await database_1[_0x2b568b(0x151)][_0x2b568b(0x145)](_0x434436,{'type':sequelize_1['default'][_0x2b568b(0x14e)][_0x2b568b(0x149)]});return{'hasResult':_0x99795d['length']>0x0,'data':_0x99795d};},insertToken=async(_0x3a9593,_0x5f28f6)=>{const _0x4c6090=a431_0x351a83,_0xd4a795=_0x4c6090(0x155)+_0x5f28f6+'\x27\x20WHERE\x20email\x20=\x27'+_0x3a9593+'\x27',_0x28b228=await database_1[_0x4c6090(0x151)][_0x4c6090(0x145)](_0xd4a795,{'type':sequelize_1[_0x4c6090(0x151)]['QueryTypes'][_0x4c6090(0x13b)]});return{'hasResults':_0x28b228[0x1]>0x0,'datas':_0x28b228};};exports['default']=SendMail;