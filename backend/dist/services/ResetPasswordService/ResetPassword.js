function a491_0x4aa0(){const _0x496975=['query','3892464acGMTZ','(((.+)+)+)+$','SELECT\x20*\x20FROM\x20\x22Users\x22\x20WHERE\x20email\x20=\x20\x27','QueryTypes','constructor','sequelize','search','smtpport','24DtHnlw','616295smRSty','\x27\x20AND\x20\x22resetPassword\x22\x20=\x20\x27','../../database','findOne','Configurações\x20SMTP\x20estão\x20incompletas','value','\x27\x20AND\x20\x22resetPassword\x22\x20!=\x20\x27\x27','28310EQfXxz','bcryptjs','default','Erro\x20ao\x20redefinir\x20senha:','__esModule','sendMail','Senha\x20Alterada\x20com\x20Sucesso','1253448rMPOzE','toString','smtpauth','nodemailer','8jDLytE','1675110gtoNdy','createTransport','UPDATE','../../models/Setting','hash','882760PsjHoH','SELECT','defineProperty','length','apply','\x27,\x20\x22resetPassword\x22\x20=\x20\x27\x27\x20WHERE\x20email=\x20\x27','4471976WaNGuo','usersmtpauth','error','all','Olá,\x0a\x0aSua\x20senha\x20foi\x20alterada\x20com\x20sucesso.\x0a\x0aSe\x20você\x20não\x20realizou\x20essa\x20alteração,\x20entre\x20em\x20contato\x20conosco\x20imediatamente.\x0a\x0aAtenciosamente'];a491_0x4aa0=function(){return _0x496975;};return a491_0x4aa0();}const a491_0x2d3545=a491_0x1e94;(function(_0x1b9fad,_0x2c56ba){const _0x38d775=a491_0x1e94,_0xebe384=_0x1b9fad();while(!![]){try{const _0x1c0a33=-parseInt(_0x38d775(0xdc))/0x1*(-parseInt(_0x38d775(0xd1))/0x2)+-parseInt(_0x38d775(0xdd))/0x3+parseInt(_0x38d775(0xb5))/0x4+-parseInt(_0x38d775(0xca))/0x5*(-parseInt(_0x38d775(0xc9))/0x6)+parseInt(_0x38d775(0xd8))/0x7+-parseInt(_0x38d775(0xbb))/0x8+parseInt(_0x38d775(0xc1))/0x9;if(_0x1c0a33===_0x2c56ba)break;else _0xebe384['push'](_0xebe384['shift']());}catch(_0x294b2d){_0xebe384['push'](_0xebe384['shift']());}}}(a491_0x4aa0,0x4e687));const a491_0x2d6f99=(function(){let _0x51a0c1=!![];return function(_0x3be9f9,_0x5275de){const _0x182bab=_0x51a0c1?function(){const _0x34a944=a491_0x1e94;if(_0x5275de){const _0xcf0262=_0x5275de[_0x34a944(0xb9)](_0x3be9f9,arguments);return _0x5275de=null,_0xcf0262;}}:function(){};return _0x51a0c1=![],_0x182bab;};}()),a491_0xb631af=a491_0x2d6f99(this,function(){const _0x415ace=a491_0x1e94;return a491_0xb631af[_0x415ace(0xd9)]()[_0x415ace(0xc7)](_0x415ace(0xc2))[_0x415ace(0xd9)]()[_0x415ace(0xc5)](a491_0xb631af)[_0x415ace(0xc7)](_0x415ace(0xc2));});a491_0xb631af();function a491_0x1e94(_0x5e61c8,_0x1919b3){const _0x16052a=a491_0x4aa0();return a491_0x1e94=function(_0xb631af,_0x2d6f99){_0xb631af=_0xb631af-0xb4;let _0x4aa0ea=_0x16052a[_0xb631af];return _0x4aa0ea;},a491_0x1e94(_0x5e61c8,_0x1919b3);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x374026){const _0x431dbb=a491_0x1e94;return _0x374026&&_0x374026[_0x431dbb(0xd5)]?_0x374026:{'default':_0x374026};};Object[a491_0x2d3545(0xb7)](exports,'__esModule',{'value':!![]});const sequelize_1=__importDefault(require(a491_0x2d3545(0xc6))),database_1=__importDefault(require(a491_0x2d3545(0xcc))),nodemailer_1=__importDefault(require(a491_0x2d3545(0xdb))),Setting_1=__importDefault(require(a491_0x2d3545(0xe0))),bcryptjs_1=require(a491_0x2d3545(0xd2)),ResetPassword=async(_0x5e7513,_0x485247,_0x1fd9b9)=>{const _0x15853a=a491_0x2d3545;try{const {hasResult:_0x4b6f95,data:_0x1fea3b}=await filterUser(_0x5e7513,_0x485247);if(!_0x4b6f95)return{'status':0x194,'message':'Email\x20ou\x20token\x20não\x20encontrado'};const _0x1d3deb=await(0x0,bcryptjs_1[_0x15853a(0xb4)])(_0x1fd9b9,0x8),{hasResults:_0x2a6355,datas:_0x18c02b}=await insertHasPassword(_0x5e7513,_0x485247,_0x1d3deb);if(!_0x2a6355)return{'status':0x194,'message':'Token\x20não\x20encontrado\x20ou\x20inválido'};const [_0x5370ea,_0xab95b8,_0x90bfc3,_0x55e9d4]=await Promise[_0x15853a(0xbe)]([Setting_1[_0x15853a(0xd3)][_0x15853a(0xcd)]({'where':{'key':_0x15853a(0xda)}}),Setting_1[_0x15853a(0xd3)][_0x15853a(0xcd)]({'where':{'key':_0x15853a(0xbc)}}),Setting_1[_0x15853a(0xd3)][_0x15853a(0xcd)]({'where':{'key':'clientsecretsmtpauth'}}),Setting_1[_0x15853a(0xd3)]['findOne']({'where':{'key':_0x15853a(0xc8)}})]),_0x209fff=_0x5370ea?.[_0x15853a(0xcf)],_0x1e00f3=_0xab95b8?.[_0x15853a(0xcf)],_0x25d4e4=_0x90bfc3?.[_0x15853a(0xcf)],_0x2c6ce1=_0x1e00f3,_0x27d818=_0x55e9d4?.[_0x15853a(0xcf)];if(!_0x209fff||!_0x1e00f3||!_0x25d4e4||!_0x27d818)throw new Error(_0x15853a(0xce));const _0x3d5275=nodemailer_1[_0x15853a(0xd3)][_0x15853a(0xde)]({'host':_0x209fff,'port':Number(_0x27d818),'secure':![],'auth':{'user':_0x1e00f3,'pass':_0x25d4e4}}),_0x6d31fa={'from':_0x2c6ce1,'to':_0x5e7513,'subject':_0x15853a(0xd7),'text':_0x15853a(0xbf)},_0x50e9d2=await _0x3d5275[_0x15853a(0xd6)](_0x6d31fa);return _0x50e9d2;}catch(_0x499bd4){return console[_0x15853a(0xbd)](_0x15853a(0xd4),_0x499bd4),{'status':0x1f4,'message':'Erro\x20interno\x20do\x20servidor'};}},filterUser=async(_0x487a11,_0x346797)=>{const _0x531b7c=a491_0x2d3545,_0x1e637a=_0x531b7c(0xc3)+_0x487a11+_0x531b7c(0xd0),_0xc4d5b3=await database_1[_0x531b7c(0xd3)][_0x531b7c(0xc0)](_0x1e637a,{'type':sequelize_1[_0x531b7c(0xd3)][_0x531b7c(0xc4)][_0x531b7c(0xb6)]});return{'hasResult':_0xc4d5b3[_0x531b7c(0xb8)]>0x0,'data':_0xc4d5b3};},insertHasPassword=async(_0x53c2d1,_0x508e1a,_0x67e8ee)=>{const _0xe48355=a491_0x2d3545,_0x24030a='SELECT\x20*\x20FROM\x20\x22Users\x22\x20WHERE\x20email\x20=\x20\x27'+_0x53c2d1+_0xe48355(0xcb)+_0x508e1a+'\x27',_0x1b82ee=await database_1['default'][_0xe48355(0xc0)](_0x24030a,{'type':sequelize_1[_0xe48355(0xd3)]['QueryTypes']['SELECT']}),_0xcd9973='UPDATE\x20\x22Users\x22\x20SET\x20\x22passwordHash\x22=\x20\x27'+_0x67e8ee+_0xe48355(0xba)+_0x53c2d1+_0xe48355(0xcb)+_0x508e1a+'\x27',_0x38e2de=await database_1[_0xe48355(0xd3)][_0xe48355(0xc0)](_0xcd9973,{'type':sequelize_1['default']['QueryTypes'][_0xe48355(0xdf)]});return{'hasResults':_0x38e2de[0x1]>0x0,'datas':_0x1b82ee};};exports[a491_0x2d3545(0xd3)]=ResetPassword;