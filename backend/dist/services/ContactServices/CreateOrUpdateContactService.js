function a413_0x2ec5(_0x43f092,_0x44a1c6){const _0x450dcc=a413_0x1d7b();return a413_0x2ec5=function(_0x1a7961,_0x41af55){_0x1a7961=_0x1a7961-0x156;let _0x1d7b82=_0x450dcc[_0x1a7961];return _0x1d7b82;},a413_0x2ec5(_0x43f092,_0x44a1c6);}function a413_0x1d7b(){const _0xa083db=['59414Hltqvb','7209736XzTTwe','4NSoZes','create','match','constructor','__importDefault','search','endsWith','whatsappId','../../libs/socket','-contact','4399165kqqZBZ','getIO','default','(((.+)+)+)+$','updatedAt','ceil','31186562eTBRTc','toString','54350uSolKg','changed','2424738tewBOd','findOne','name','update','company-','Error\x20getting\x20profile\x20picture:\x20','env','1611cOuwIi','FRONTEND_URL','../WbotServices/GetProfilePicUrl','332hetEIA','-mainchannel','lodash','replace','emit','12906MALJRJ','log','14UhOzSd'];a413_0x1d7b=function(){return _0xa083db;};return a413_0x1d7b();}const a413_0x5b18f3=a413_0x2ec5;(function(_0x40a6c1,_0x342c23){const _0x5d7fe4=a413_0x2ec5,_0x15cf23=_0x40a6c1();while(!![]){try{const _0x134d22=-parseInt(_0x5d7fe4(0x169))/0x1*(-parseInt(_0x5d7fe4(0x167))/0x2)+parseInt(_0x5d7fe4(0x164))/0x3*(-parseInt(_0x5d7fe4(0x15f))/0x4)+-parseInt(_0x5d7fe4(0x173))/0x5+-parseInt(_0x5d7fe4(0x17d))/0x6*(-parseInt(_0x5d7fe4(0x166))/0x7)+-parseInt(_0x5d7fe4(0x168))/0x8+-parseInt(_0x5d7fe4(0x15c))/0x9*(parseInt(_0x5d7fe4(0x17b))/0xa)+parseInt(_0x5d7fe4(0x179))/0xb;if(_0x134d22===_0x342c23)break;else _0x15cf23['push'](_0x15cf23['shift']());}catch(_0x4b9661){_0x15cf23['push'](_0x15cf23['shift']());}}}(a413_0x1d7b,0x9efe3));const a413_0x41af55=(function(){let _0x1deaf4=!![];return function(_0x42d964,_0x5d844f){const _0x5b2e7d=_0x1deaf4?function(){if(_0x5d844f){const _0x513e49=_0x5d844f['apply'](_0x42d964,arguments);return _0x5d844f=null,_0x513e49;}}:function(){};return _0x1deaf4=![],_0x5b2e7d;};}()),a413_0x1a7961=a413_0x41af55(this,function(){const _0x16e29a=a413_0x2ec5;return a413_0x1a7961['toString']()[_0x16e29a(0x16e)](_0x16e29a(0x176))[_0x16e29a(0x17a)]()[_0x16e29a(0x16c)](a413_0x1a7961)['search'](_0x16e29a(0x176));});a413_0x1a7961();'use strict';var __importDefault=this&&this[a413_0x5b18f3(0x16d)]||function(_0x556192){return _0x556192&&_0x556192['__esModule']?_0x556192:{'default':_0x556192};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const socket_1=require(a413_0x5b18f3(0x171)),Contact_1=__importDefault(require('../../models/Contact')),lodash_1=require(a413_0x5b18f3(0x161)),GetProfilePicUrl_1=__importDefault(require(a413_0x5b18f3(0x15e))),CreateOrUpdateContactService=async({name:_0x375c75,number:_0x4a33db,remoteJid:_0x86b16d,isGroup:_0x5e90c4,email:email='',companyId:_0x33fb1e,extraInfo:extraInfo=[],disableBot:disableBot=![],whatsappId:_0x3e6a7e},_0x11e05b,_0x3b7107)=>{const _0xff69bb=a413_0x5b18f3,_0x3629be=_0x5e90c4?_0x4a33db:_0x4a33db[_0xff69bb(0x162)](/[^0-9]/g,''),_0x4a5312=(0x0,socket_1[_0xff69bb(0x174)])();let _0x4d7f63;_0x4d7f63=await Contact_1['default'][_0xff69bb(0x156)]({'where':{'number':_0x3629be,'companyId':_0x33fb1e}});if(_0x4d7f63){if(_0x375c75&&(!_0x4d7f63['name']||_0x4d7f63[_0xff69bb(0x157)][_0xff69bb(0x16b)](/^[0-9]*$/))&&!_0x375c75[_0xff69bb(0x16b)](/^[0-9]*$/)){_0x4d7f63[_0xff69bb(0x17c)](_0xff69bb(0x157),!![]),_0x4d7f63['changed']('updatedAt',!![]);let _0xca7fd5;try{_0xca7fd5=await(0x0,GetProfilePicUrl_1[_0xff69bb(0x175)])(_0x4a33db,_0x33fb1e);}catch(_0x571eb9){console[_0xff69bb(0x165)]('Error\x20getting\x20profile\x20picture\x202:\x20'+_0x571eb9);}_0xca7fd5?.[_0xff69bb(0x16f)]('nopicture.png')&&(_0xca7fd5=_0x4d7f63['profilePicUrl']),_0x4d7f63[_0xff69bb(0x158)]({'name':_0x375c75,'profilePicUrl':_0xca7fd5});}const _0x546212=new Date(_0x4d7f63[_0xff69bb(0x177)]),_0x171c9e=new Date(),_0x247583=_0x171c9e['getTime']()-_0x546212['getTime'](),_0x321371=Math[_0xff69bb(0x178)](_0x247583/(0x3e8*0xe10*0x18));if(_0x321371>=0x3){let _0x710a99;try{_0x710a99=await(0x0,GetProfilePicUrl_1[_0xff69bb(0x175)])(_0x4a33db,_0x33fb1e);}catch(_0x1e14e1){console[_0xff69bb(0x165)](_0xff69bb(0x15a)+_0x1e14e1);}_0x4d7f63[_0xff69bb(0x17c)](_0xff69bb(0x177),!![]),!_0x710a99?.['endsWith']('nopicture.png')?_0x4d7f63[_0xff69bb(0x158)]({'profilePicUrl':_0x710a99,'updatedAt':new Date()}):_0x4d7f63[_0xff69bb(0x158)]({'updatedAt':new Date()});}(0x0,lodash_1['isNil'])(_0x4d7f63[_0xff69bb(0x170)]===null)&&_0x4d7f63[_0xff69bb(0x158)]({'whatsappId':_0x3e6a7e}),_0x4a5312['to'](_0xff69bb(0x159)+_0x33fb1e+'-mainchannel')[_0xff69bb(0x163)]('company-'+_0x33fb1e+'-contact',{'action':_0xff69bb(0x158),'contact':_0x4d7f63});}else{let _0x12dbcc;try{_0x12dbcc=await(0x0,GetProfilePicUrl_1[_0xff69bb(0x175)])(_0x4a33db,_0x33fb1e);}catch(_0x2d4f77){_0x12dbcc=process[_0xff69bb(0x15b)][_0xff69bb(0x15d)]+'/nopicture.png';}_0x4d7f63=await Contact_1[_0xff69bb(0x175)]['create']({'name':_0x375c75,'number':_0x3629be,'profilePicUrl':_0x12dbcc,'email':email,'isGroup':_0x5e90c4,'extraInfo':extraInfo,'companyId':_0x33fb1e,'disableBot':disableBot,'whatsappId':_0x3e6a7e}),_0x4a5312['to']('company-'+_0x33fb1e+_0xff69bb(0x160))[_0xff69bb(0x163)]('company-'+_0x33fb1e+_0xff69bb(0x172),{'action':_0xff69bb(0x16a),'contact':_0x4d7f63});}return _0x4d7f63;};exports[a413_0x5b18f3(0x175)]=CreateOrUpdateContactService;