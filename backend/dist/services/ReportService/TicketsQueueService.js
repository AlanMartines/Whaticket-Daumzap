const a490_0x224de5=a490_0x2ff2;(function(_0xae0d09,_0x5e22f1){const _0x1f0985=a490_0x2ff2,_0x6ad899=_0xae0d09();while(!![]){try{const _0xd345d1=-parseInt(_0x1f0985(0x74))/0x1+parseInt(_0x1f0985(0x91))/0x2*(parseInt(_0x1f0985(0x7b))/0x3)+-parseInt(_0x1f0985(0x77))/0x4+-parseInt(_0x1f0985(0x82))/0x5+-parseInt(_0x1f0985(0x92))/0x6*(parseInt(_0x1f0985(0x84))/0x7)+-parseInt(_0x1f0985(0x8a))/0x8*(-parseInt(_0x1f0985(0x9b))/0x9)+parseInt(_0x1f0985(0x8f))/0xa;if(_0xd345d1===_0x5e22f1)break;else _0x6ad899['push'](_0x6ad899['shift']());}catch(_0x537b19){_0x6ad899['push'](_0x6ad899['shift']());}}}(a490_0x12c6,0x6ab9e));const a490_0x5a8f50=(function(){let _0x56fe82=!![];return function(_0x130156,_0x332b93){const _0x221fe8=_0x56fe82?function(){if(_0x332b93){const _0xfb9a75=_0x332b93['apply'](_0x130156,arguments);return _0x332b93=null,_0xfb9a75;}}:function(){};return _0x56fe82=![],_0x221fe8;};}()),a490_0x57ae58=a490_0x5a8f50(this,function(){const _0x5ce936=a490_0x2ff2;return a490_0x57ae58['toString']()[_0x5ce936(0x97)](_0x5ce936(0x81))[_0x5ce936(0x7c)]()['constructor'](a490_0x57ae58)['search']('(((.+)+)+)+$');});a490_0x57ae58();function a490_0x12c6(){const _0x1e7e87=['../../models/Queue','filter','99MdwUgM','250909tuIBgq','findAll','../../models/User','3227344xmfVck','name','sequelize-typescript','queueId','77607sroFKj','toString','DESC','sequelize','updatedAt','__esModule','(((.+)+)+)+$','1341900OXLMeX','day','7DurSgP','toDate','col','Sequelize','map','companyId','71464llevzz','endOf','defineProperty','whatsappId','includes','12408010ukEtsg','open','40PnFCTK','559014NWUSFj','default','startOf','profile','../../models/Ticket','search','contactId'];a490_0x12c6=function(){return _0x1e7e87;};return a490_0x12c6();}'use strict';var __importDefault=this&&this['__importDefault']||function(_0xa48480){const _0x46a77d=a490_0x2ff2;return _0xa48480&&_0xa48480[_0x46a77d(0x80)]?_0xa48480:{'default':_0xa48480};};Object[a490_0x224de5(0x8c)](exports,a490_0x224de5(0x80),{'value':!![]});function a490_0x2ff2(_0xa98e1b,_0x340c3a){const _0x494342=a490_0x12c6();return a490_0x2ff2=function(_0x57ae58,_0x5a8f50){_0x57ae58=_0x57ae58-0x74;let _0x12c614=_0x494342[_0x57ae58];return _0x12c614;},a490_0x2ff2(_0xa98e1b,_0x340c3a);}const sequelize_1=require(a490_0x224de5(0x7e)),moment_1=__importDefault(require('moment')),Ticket_1=__importDefault(require(a490_0x224de5(0x96))),Queue_1=__importDefault(require(a490_0x224de5(0x99))),User_1=__importDefault(require(a490_0x224de5(0x76))),sequelize_typescript_1=require(a490_0x224de5(0x79)),TicketsQueueService=async({dateStart:_0x12de28,dateEnd:_0x5bbb36,status:_0x14cc78,userId:_0x416f62,companyId:_0x6bf37,profile:_0x3e1c9a})=>{const _0x456f0=a490_0x224de5;let _0x4d83cd={};const _0x5880c9=[{'model':User_1[_0x456f0(0x93)],'as':'user','attributes':['id',_0x456f0(0x78),_0x456f0(0x95)]},{'model':Queue_1[_0x456f0(0x93)],'as':'queue'}];if(_0x14cc78){const _0x53fcfa=[],_0x1a2352=await Ticket_1[_0x456f0(0x93)][_0x456f0(0x75)]({'where':{'status':_0x456f0(0x90)},'group':[_0x456f0(0x89),'contactId',_0x456f0(0x7a),_0x456f0(0x8d)],'attributes':[_0x456f0(0x89),_0x456f0(0x98),_0x456f0(0x7a),_0x456f0(0x8d),[sequelize_typescript_1[_0x456f0(0x87)]['fn']('max',sequelize_typescript_1[_0x456f0(0x87)][_0x456f0(0x86)]('id')),'id']]});_0x1a2352&&_0x53fcfa['push'](_0x1a2352[_0x456f0(0x88)](_0x1f0cb3=>_0x1f0cb3['id']));const _0x2bfac4=_0x53fcfa['reduce']((_0x467f7c,_0xd67fe)=>_0x467f7c[_0x456f0(0x9a)](_0x3806e7=>_0xd67fe[_0x456f0(0x8e)](_0x3806e7)));_0x4d83cd={..._0x4d83cd,'id':{[sequelize_1['Op']['in']]:_0x2bfac4}};}_0x3e1c9a==='user'&&(_0x4d83cd={..._0x4d83cd,'userId':_0x416f62});_0x12de28&&_0x5bbb36&&(_0x4d83cd={..._0x4d83cd,'createdAt':{[sequelize_1['Op']['between']]:[(0x0,moment_1[_0x456f0(0x93)])(_0x12de28)[_0x456f0(0x94)](_0x456f0(0x83))['toDate'](),(0x0,moment_1[_0x456f0(0x93)])(_0x5bbb36)[_0x456f0(0x8b)](_0x456f0(0x83))[_0x456f0(0x85)]()]}});const _0x1c632a=await Ticket_1[_0x456f0(0x93)]['findAll']({'where':{..._0x4d83cd,'companyId':_0x6bf37},'include':_0x5880c9,'order':[[_0x456f0(0x7f),_0x456f0(0x7d)]]});return{'data':_0x1c632a};};exports[a490_0x224de5(0x93)]=TicketsQueueService;