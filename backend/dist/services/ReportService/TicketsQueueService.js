const a490_0x4e7b92=a490_0x3029;function a490_0x3029(_0x20801a,_0xf8b3f1){const _0xf55700=a490_0x4a9a();return a490_0x3029=function(_0xa960bd,_0x3a0e02){_0xa960bd=_0xa960bd-0x114;let _0x4a9ac8=_0xf55700[_0xa960bd];return _0x4a9ac8;},a490_0x3029(_0x20801a,_0xf8b3f1);}(function(_0xe828cb,_0xcb9f19){const _0x32effd=a490_0x3029,_0x3b763a=_0xe828cb();while(!![]){try{const _0x2a4959=-parseInt(_0x32effd(0x13a))/0x1*(parseInt(_0x32effd(0x11e))/0x2)+-parseInt(_0x32effd(0x127))/0x3+-parseInt(_0x32effd(0x138))/0x4+parseInt(_0x32effd(0x121))/0x5*(-parseInt(_0x32effd(0x134))/0x6)+parseInt(_0x32effd(0x131))/0x7+-parseInt(_0x32effd(0x130))/0x8*(-parseInt(_0x32effd(0x12d))/0x9)+parseInt(_0x32effd(0x125))/0xa;if(_0x2a4959===_0xcb9f19)break;else _0x3b763a['push'](_0x3b763a['shift']());}catch(_0x3ee730){_0x3b763a['push'](_0x3b763a['shift']());}}}(a490_0x4a9a,0xa273f));const a490_0x3a0e02=(function(){let _0x40b8ac=!![];return function(_0x1c4be0,_0x3888fd){const _0x22171c=_0x40b8ac?function(){const _0x2590bc=a490_0x3029;if(_0x3888fd){const _0x2b1a36=_0x3888fd[_0x2590bc(0x119)](_0x1c4be0,arguments);return _0x3888fd=null,_0x2b1a36;}}:function(){};return _0x40b8ac=![],_0x22171c;};}()),a490_0xa960bd=a490_0x3a0e02(this,function(){const _0x6c9be1=a490_0x3029;return a490_0xa960bd[_0x6c9be1(0x12f)]()[_0x6c9be1(0x11c)]('(((.+)+)+)+$')[_0x6c9be1(0x12f)]()[_0x6c9be1(0x117)](a490_0xa960bd)[_0x6c9be1(0x11c)](_0x6c9be1(0x124));});a490_0xa960bd();'use strict';var __importDefault=this&&this[a490_0x4e7b92(0x129)]||function(_0x54fdd6){return _0x54fdd6&&_0x54fdd6['__esModule']?_0x54fdd6:{'default':_0x54fdd6};};Object['defineProperty'](exports,a490_0x4e7b92(0x137),{'value':!![]});const sequelize_1=require(a490_0x4e7b92(0x115)),moment_1=__importDefault(require('moment')),Ticket_1=__importDefault(require(a490_0x4e7b92(0x123))),Queue_1=__importDefault(require(a490_0x4e7b92(0x12b))),User_1=__importDefault(require('../../models/User')),sequelize_typescript_1=require(a490_0x4e7b92(0x11f)),TicketsQueueService=async({dateStart:_0x20ee15,dateEnd:_0x4bcb74,status:_0x3e0cb6,userId:_0x59cd11,companyId:_0x285aae,profile:_0x4293f0})=>{const _0x4e0278=a490_0x4e7b92;let _0x22c8d7={};const _0x1880b5=[{'model':User_1[_0x4e0278(0x116)],'as':_0x4e0278(0x136),'attributes':['id',_0x4e0278(0x114),_0x4e0278(0x132)]},{'model':Queue_1['default'],'as':_0x4e0278(0x126)}];if(_0x3e0cb6){const _0x11c408=[],_0x462af2=await Ticket_1[_0x4e0278(0x116)][_0x4e0278(0x122)]({'where':{'status':_0x4e0278(0x120)},'group':['companyId','contactId',_0x4e0278(0x118),'whatsappId'],'attributes':['companyId',_0x4e0278(0x12c),_0x4e0278(0x118),'whatsappId',[sequelize_typescript_1[_0x4e0278(0x11a)]['fn']('max',sequelize_typescript_1[_0x4e0278(0x11a)][_0x4e0278(0x12e)]('id')),'id']]});_0x462af2&&_0x11c408[_0x4e0278(0x139)](_0x462af2[_0x4e0278(0x11d)](_0x150faa=>_0x150faa['id']));const _0x21eba6=_0x11c408['reduce']((_0x32c1e1,_0x4db24a)=>_0x32c1e1['filter'](_0x5a4249=>_0x4db24a['includes'](_0x5a4249)));_0x22c8d7={..._0x22c8d7,'id':{[sequelize_1['Op']['in']]:_0x21eba6}};}_0x4293f0===_0x4e0278(0x136)&&(_0x22c8d7={..._0x22c8d7,'userId':_0x59cd11});_0x20ee15&&_0x4bcb74&&(_0x22c8d7={..._0x22c8d7,'createdAt':{[sequelize_1['Op']['between']]:[(0x0,moment_1['default'])(_0x20ee15)[_0x4e0278(0x133)](_0x4e0278(0x128))['toDate'](),(0x0,moment_1['default'])(_0x4bcb74)[_0x4e0278(0x11b)](_0x4e0278(0x128))['toDate']()]}});const _0x283211=await Ticket_1['default'][_0x4e0278(0x122)]({'where':{..._0x22c8d7,'companyId':_0x285aae},'include':_0x1880b5,'order':[[_0x4e0278(0x12a),_0x4e0278(0x135)]]});return{'data':_0x283211};};function a490_0x4a9a(){const _0x1fca3c=['name','sequelize','default','constructor','queueId','apply','Sequelize','endOf','search','map','94930YDDpIc','sequelize-typescript','open','89500ApyZgG','findAll','../../models/Ticket','(((.+)+)+)+$','40136480ABNQUS','queue','1577715qtMNYG','day','__importDefault','updatedAt','../../models/Queue','contactId','297umVnde','col','toString','117536SeFyDQ','1163456LhYWEf','profile','startOf','438ujOJIJ','DESC','user','__esModule','4679660bsJRvC','push','21OAUjgQ'];a490_0x4a9a=function(){return _0x1fca3c;};return a490_0x4a9a();}exports[a490_0x4e7b92(0x116)]=TicketsQueueService;