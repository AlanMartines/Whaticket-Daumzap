const a474_0x550a4d=a474_0x1188;(function(_0x3dbf6c,_0x1afede){const _0x17f6fd=a474_0x1188,_0x95dbea=_0x3dbf6c();while(!![]){try{const _0x58a72e=parseInt(_0x17f6fd(0xec))/0x1+parseInt(_0x17f6fd(0xf4))/0x2*(parseInt(_0x17f6fd(0x117))/0x3)+-parseInt(_0x17f6fd(0xee))/0x4*(parseInt(_0x17f6fd(0x10c))/0x5)+parseInt(_0x17f6fd(0x107))/0x6+parseInt(_0x17f6fd(0x110))/0x7+-parseInt(_0x17f6fd(0xf6))/0x8*(-parseInt(_0x17f6fd(0xf9))/0x9)+parseInt(_0x17f6fd(0xf0))/0xa*(-parseInt(_0x17f6fd(0x105))/0xb);if(_0x58a72e===_0x1afede)break;else _0x95dbea['push'](_0x95dbea['shift']());}catch(_0x220956){_0x95dbea['push'](_0x95dbea['shift']());}}}(a474_0x26b2,0xa3048));function a474_0x1188(_0x307421,_0x5ef87c){const _0x3d5b73=a474_0x26b2();return a474_0x1188=function(_0xe57454,_0x3c9bba){_0xe57454=_0xe57454-0xeb;let _0x26b2bc=_0x3d5b73[_0xe57454];return _0x26b2bc;},a474_0x1188(_0x307421,_0x5ef87c);}const a474_0x3c9bba=(function(){let _0x17352f=!![];return function(_0x3bbe32,_0x340b63){const _0x4ec539=_0x17352f?function(){const _0x583ef1=a474_0x1188;if(_0x340b63){const _0x1a6931=_0x340b63[_0x583ef1(0xeb)](_0x3bbe32,arguments);return _0x340b63=null,_0x1a6931;}}:function(){};return _0x17352f=![],_0x4ec539;};}()),a474_0xe57454=a474_0x3c9bba(this,function(){const _0x4cbb55=a474_0x1188;return a474_0xe57454['toString']()[_0x4cbb55(0x112)]('(((.+)+)+)+$')[_0x4cbb55(0xf5)]()[_0x4cbb55(0x113)](a474_0xe57454)[_0x4cbb55(0x112)]('(((.+)+)+)+$');});function a474_0x26b2(){const _0x2d7ac6=['ERR_QUEUE_COLOR_ALREADY_EXISTS','../../models/Plan','apply','103721wXBQDz','ERR_QUEUE_NAME_ALREADY_EXISTS','2693588nYpCyn','call','2419900VlDFrQ','default','__importDefault','__setModuleDefault','1403882HTjOKr','toString','8Bifzji','create','__esModule','11264364eJARXf','string','../../models/Queue','test','plan','hasOwnProperty','yup','defineProperty','required','findOne','message','shape','121xaqDDx','../../models/Company','6980760dmcTaP','__importStar','prototype','count','Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','5YPCDfI','Check-color-exists','object','configurable','5476023hxaJXS','../../errors/AppError','search','constructor','ERR_QUEUE_INVALID_NAME','get','ERR_QUEUE_INVALID_COLOR','3OzizNK','writable','validate'];a474_0x26b2=function(){return _0x2d7ac6;};return a474_0x26b2();}a474_0xe57454();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a474_0x550a4d(0xf7)]?function(_0x283b6f,_0x592055,_0x269a8b,_0x2fc44b){const _0x1f56ad=a474_0x550a4d;if(_0x2fc44b===undefined)_0x2fc44b=_0x269a8b;var _0xf3510a=Object['getOwnPropertyDescriptor'](_0x592055,_0x269a8b);(!_0xf3510a||(_0x1f56ad(0x115)in _0xf3510a?!_0x592055[_0x1f56ad(0xf8)]:_0xf3510a[_0x1f56ad(0x118)]||_0xf3510a[_0x1f56ad(0x10f)]))&&(_0xf3510a={'enumerable':!![],'get':function(){return _0x592055[_0x269a8b];}}),Object[_0x1f56ad(0x100)](_0x283b6f,_0x2fc44b,_0xf3510a);}:function(_0x3ea12d,_0x17cb32,_0xda1b68,_0x202a74){if(_0x202a74===undefined)_0x202a74=_0xda1b68;_0x3ea12d[_0x202a74]=_0x17cb32[_0xda1b68];}),__setModuleDefault=this&&this[a474_0x550a4d(0xf3)]||(Object[a474_0x550a4d(0xf7)]?function(_0x1876aa,_0x31dc85){const _0x1bbd6c=a474_0x550a4d;Object['defineProperty'](_0x1876aa,_0x1bbd6c(0xf1),{'enumerable':!![],'value':_0x31dc85});}:function(_0x36aa74,_0x1ba04e){_0x36aa74['default']=_0x1ba04e;}),__importStar=this&&this[a474_0x550a4d(0x108)]||function(_0x161a5a){const _0x3dedba=a474_0x550a4d;if(_0x161a5a&&_0x161a5a[_0x3dedba(0xf8)])return _0x161a5a;var _0x28e79f={};if(_0x161a5a!=null){for(var _0x256730 in _0x161a5a)if(_0x256730!=='default'&&Object[_0x3dedba(0x109)][_0x3dedba(0xfe)][_0x3dedba(0xef)](_0x161a5a,_0x256730))__createBinding(_0x28e79f,_0x161a5a,_0x256730);}return __setModuleDefault(_0x28e79f,_0x161a5a),_0x28e79f;},__importDefault=this&&this[a474_0x550a4d(0xf2)]||function(_0x23666b){const _0x1ae626=a474_0x550a4d;return _0x23666b&&_0x23666b[_0x1ae626(0xf8)]?_0x23666b:{'default':_0x23666b};};Object[a474_0x550a4d(0x100)](exports,a474_0x550a4d(0xf8),{'value':!![]});const Yup=__importStar(require(a474_0x550a4d(0xff))),AppError_1=__importDefault(require(a474_0x550a4d(0x111))),Queue_1=__importDefault(require(a474_0x550a4d(0xfb))),Company_1=__importDefault(require(a474_0x550a4d(0x106))),Plan_1=__importDefault(require(a474_0x550a4d(0x11b))),CreateQueueService=async _0x555fa9=>{const _0x5607f4=a474_0x550a4d,{color:_0x5eed81,name:_0x19b14f,companyId:_0x252c1c}=_0x555fa9,_0x3b5888=await Company_1[_0x5607f4(0xf1)][_0x5607f4(0x102)]({'where':{'id':_0x252c1c},'include':[{'model':Plan_1[_0x5607f4(0xf1)],'as':_0x5607f4(0xfd)}]});if(_0x3b5888!==null){const _0xa23373=await Queue_1[_0x5607f4(0xf1)][_0x5607f4(0x10a)]({'where':{'companyId':_0x252c1c}});if(_0xa23373>=_0x3b5888[_0x5607f4(0xfd)]['queues'])throw new AppError_1[(_0x5607f4(0xf1))](_0x5607f4(0x10b)+_0xa23373);}const _0x51bfc8=Yup[_0x5607f4(0x10e)]()[_0x5607f4(0x104)]({'name':Yup[_0x5607f4(0xfa)]()['min'](0x2,_0x5607f4(0x114))[_0x5607f4(0x101)](_0x5607f4(0x114))[_0x5607f4(0xfc)]('Check-unique-name',_0x5607f4(0xed),async _0x1dc148=>{const _0x4013ce=_0x5607f4;if(_0x1dc148){const _0x2abae4=await Queue_1[_0x4013ce(0xf1)]['findOne']({'where':{'name':_0x1dc148,'companyId':_0x252c1c}});return!_0x2abae4;}return![];}),'color':Yup[_0x5607f4(0xfa)]()[_0x5607f4(0x101)](_0x5607f4(0x116))[_0x5607f4(0xfc)]('Check-color',_0x5607f4(0x116),async _0x368b51=>{if(_0x368b51){const _0x58606e=/^#[0-9a-f]{3,6}$/i;return _0x58606e['test'](_0x368b51);}return![];})[_0x5607f4(0xfc)](_0x5607f4(0x10d),_0x5607f4(0x11a),async _0x293b1d=>{if(_0x293b1d){const _0x26f1f9=await Queue_1['default']['findOne']({'where':{'color':_0x293b1d,'companyId':_0x252c1c}});return!_0x26f1f9;}return![];})});try{await _0x51bfc8[_0x5607f4(0x119)]({'color':_0x5eed81,'name':_0x19b14f});}catch(_0x8aadd0){throw new AppError_1[(_0x5607f4(0xf1))](_0x8aadd0[_0x5607f4(0x103)]);}const _0x11b564=await Queue_1[_0x5607f4(0xf1)][_0x5607f4(0xf7)](_0x555fa9);return _0x11b564;};exports[a474_0x550a4d(0xf1)]=CreateQueueService;