const a474_0x556914=a474_0x570f;function a474_0x2e8d(){const _0x120da8=['__esModule','message','getOwnPropertyDescriptor','2FhOVsd','1387212LLHTFC','11435396bsuROH','string','ERR_QUEUE_COLOR_ALREADY_EXISTS','__createBinding','plan','prototype','call','(((.+)+)+)+$','create','20vkYCDN','queues','2636616aIueAm','search','356992zqXEBi','__importDefault','../../models/Plan','ERR_QUEUE_INVALID_COLOR','Check-color-exists','min','hasOwnProperty','toString','default','11140geviQS','writable','../../models/Queue','__importStar','__setModuleDefault','450601pesNVl','required','279hKJFoP','findOne','ERR_QUEUE_NAME_ALREADY_EXISTS','Check-color','count','configurable','../../models/Company','../../errors/AppError','apply','ERR_QUEUE_INVALID_NAME','Check-unique-name','object','yup','defineProperty','test','323634UOabhX'];a474_0x2e8d=function(){return _0x120da8;};return a474_0x2e8d();}(function(_0x15595a,_0x304a79){const _0x8eb5cc=a474_0x570f,_0x14508d=_0x15595a();while(!![]){try{const _0x37efa1=-parseInt(_0x8eb5cc(0x1cc))/0x1+parseInt(_0x8eb5cc(0x1e1))/0x2*(parseInt(_0x8eb5cc(0x1dd))/0x3)+parseInt(_0x8eb5cc(0x1e2))/0x4*(-parseInt(_0x8eb5cc(0x1ba))/0x5)+-parseInt(_0x8eb5cc(0x1bc))/0x6+parseInt(_0x8eb5cc(0x1e3))/0x7+-parseInt(_0x8eb5cc(0x1be))/0x8*(-parseInt(_0x8eb5cc(0x1ce))/0x9)+-parseInt(_0x8eb5cc(0x1c7))/0xa;if(_0x37efa1===_0x304a79)break;else _0x14508d['push'](_0x14508d['shift']());}catch(_0x36265f){_0x14508d['push'](_0x14508d['shift']());}}}(a474_0x2e8d,0xcea97));const a474_0x11715e=(function(){let _0x46dda0=!![];return function(_0x473232,_0x5db120){const _0x55d84c=_0x46dda0?function(){const _0x1518f9=a474_0x570f;if(_0x5db120){const _0x5b8658=_0x5db120[_0x1518f9(0x1d6)](_0x473232,arguments);return _0x5db120=null,_0x5b8658;}}:function(){};return _0x46dda0=![],_0x55d84c;};}()),a474_0x1395b9=a474_0x11715e(this,function(){const _0x3367e6=a474_0x570f;return a474_0x1395b9[_0x3367e6(0x1c5)]()[_0x3367e6(0x1bd)](_0x3367e6(0x1b8))[_0x3367e6(0x1c5)]()['constructor'](a474_0x1395b9)[_0x3367e6(0x1bd)](_0x3367e6(0x1b8));});function a474_0x570f(_0x705adf,_0x4cf74b){const _0x28e718=a474_0x2e8d();return a474_0x570f=function(_0x1395b9,_0x11715e){_0x1395b9=_0x1395b9-0x1b7;let _0x2e8d9c=_0x28e718[_0x1395b9];return _0x2e8d9c;},a474_0x570f(_0x705adf,_0x4cf74b);}a474_0x1395b9();'use strict';var __createBinding=this&&this[a474_0x556914(0x1e6)]||(Object['create']?function(_0x36d0dc,_0x547e4e,_0x46017c,_0x44013d){const _0xa26d73=a474_0x556914;if(_0x44013d===undefined)_0x44013d=_0x46017c;var _0x47c6c3=Object[_0xa26d73(0x1e0)](_0x547e4e,_0x46017c);(!_0x47c6c3||('get'in _0x47c6c3?!_0x547e4e[_0xa26d73(0x1de)]:_0x47c6c3[_0xa26d73(0x1c8)]||_0x47c6c3[_0xa26d73(0x1d3)]))&&(_0x47c6c3={'enumerable':!![],'get':function(){return _0x547e4e[_0x46017c];}}),Object[_0xa26d73(0x1db)](_0x36d0dc,_0x44013d,_0x47c6c3);}:function(_0x3ace87,_0x585ab6,_0xb94293,_0x5f0b9b){if(_0x5f0b9b===undefined)_0x5f0b9b=_0xb94293;_0x3ace87[_0x5f0b9b]=_0x585ab6[_0xb94293];}),__setModuleDefault=this&&this[a474_0x556914(0x1cb)]||(Object['create']?function(_0x450f79,_0x139d4e){const _0x18e2a5=a474_0x556914;Object[_0x18e2a5(0x1db)](_0x450f79,'default',{'enumerable':!![],'value':_0x139d4e});}:function(_0x154508,_0x1a29fa){const _0x428979=a474_0x556914;_0x154508[_0x428979(0x1c6)]=_0x1a29fa;}),__importStar=this&&this[a474_0x556914(0x1ca)]||function(_0x180596){const _0x4b00a5=a474_0x556914;if(_0x180596&&_0x180596[_0x4b00a5(0x1de)])return _0x180596;var _0x2e5aeb={};if(_0x180596!=null){for(var _0x5bc789 in _0x180596)if(_0x5bc789!==_0x4b00a5(0x1c6)&&Object[_0x4b00a5(0x1e8)][_0x4b00a5(0x1c4)][_0x4b00a5(0x1b7)](_0x180596,_0x5bc789))__createBinding(_0x2e5aeb,_0x180596,_0x5bc789);}return __setModuleDefault(_0x2e5aeb,_0x180596),_0x2e5aeb;},__importDefault=this&&this[a474_0x556914(0x1bf)]||function(_0x26fe0d){return _0x26fe0d&&_0x26fe0d['__esModule']?_0x26fe0d:{'default':_0x26fe0d};};Object[a474_0x556914(0x1db)](exports,a474_0x556914(0x1de),{'value':!![]});const Yup=__importStar(require(a474_0x556914(0x1da))),AppError_1=__importDefault(require(a474_0x556914(0x1d5))),Queue_1=__importDefault(require(a474_0x556914(0x1c9))),Company_1=__importDefault(require(a474_0x556914(0x1d4))),Plan_1=__importDefault(require(a474_0x556914(0x1c0))),CreateQueueService=async _0x457245=>{const _0x275e85=a474_0x556914,{color:_0x2fb1b4,name:_0x9df727,companyId:_0x2cea32}=_0x457245,_0x5ca753=await Company_1[_0x275e85(0x1c6)][_0x275e85(0x1cf)]({'where':{'id':_0x2cea32},'include':[{'model':Plan_1[_0x275e85(0x1c6)],'as':_0x275e85(0x1e7)}]});if(_0x5ca753!==null){const _0x3e966e=await Queue_1['default'][_0x275e85(0x1d2)]({'where':{'companyId':_0x2cea32}});if(_0x3e966e>=_0x5ca753['plan'][_0x275e85(0x1bb)])throw new AppError_1[(_0x275e85(0x1c6))]('Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20'+_0x3e966e);}const _0x4b9f54=Yup[_0x275e85(0x1d9)]()['shape']({'name':Yup[_0x275e85(0x1e4)]()[_0x275e85(0x1c3)](0x2,'ERR_QUEUE_INVALID_NAME')[_0x275e85(0x1cd)](_0x275e85(0x1d7))[_0x275e85(0x1dc)](_0x275e85(0x1d8),_0x275e85(0x1d0),async _0x1b56a7=>{const _0xb5c1b0=_0x275e85;if(_0x1b56a7){const _0x11d77a=await Queue_1[_0xb5c1b0(0x1c6)][_0xb5c1b0(0x1cf)]({'where':{'name':_0x1b56a7,'companyId':_0x2cea32}});return!_0x11d77a;}return![];}),'color':Yup[_0x275e85(0x1e4)]()[_0x275e85(0x1cd)](_0x275e85(0x1c1))[_0x275e85(0x1dc)](_0x275e85(0x1d1),_0x275e85(0x1c1),async _0x17c1c0=>{const _0x183c0b=_0x275e85;if(_0x17c1c0){const _0x3b3033=/^#[0-9a-f]{3,6}$/i;return _0x3b3033[_0x183c0b(0x1dc)](_0x17c1c0);}return![];})['test'](_0x275e85(0x1c2),_0x275e85(0x1e5),async _0x20837a=>{const _0x1032fa=_0x275e85;if(_0x20837a){const _0x2e3177=await Queue_1[_0x1032fa(0x1c6)][_0x1032fa(0x1cf)]({'where':{'color':_0x20837a,'companyId':_0x2cea32}});return!_0x2e3177;}return![];})});try{await _0x4b9f54['validate']({'color':_0x2fb1b4,'name':_0x9df727});}catch(_0x44f269){throw new AppError_1[(_0x275e85(0x1c6))](_0x44f269[_0x275e85(0x1df)]);}const _0x3c1254=await Queue_1[_0x275e85(0x1c6)][_0x275e85(0x1b9)](_0x457245);return _0x3c1254;};exports[a474_0x556914(0x1c6)]=CreateQueueService;