const a474_0x4d07d4=a474_0x1a45;function a474_0x1a45(_0x135a17,_0x1d1baf){const _0x33da1d=a474_0x380b();return a474_0x1a45=function(_0x4246df,_0xa80075){_0x4246df=_0x4246df-0x1ef;let _0x380bad=_0x33da1d[_0x4246df];return _0x380bad;},a474_0x1a45(_0x135a17,_0x1d1baf);}(function(_0xe98d0e,_0x222c0c){const _0x1da743=a474_0x1a45,_0x184077=_0xe98d0e();while(!![]){try{const _0x124897=parseInt(_0x1da743(0x210))/0x1+parseInt(_0x1da743(0x218))/0x2+-parseInt(_0x1da743(0x20f))/0x3*(-parseInt(_0x1da743(0x215))/0x4)+parseInt(_0x1da743(0x1f0))/0x5*(-parseInt(_0x1da743(0x1f3))/0x6)+-parseInt(_0x1da743(0x211))/0x7+-parseInt(_0x1da743(0x1f7))/0x8+parseInt(_0x1da743(0x216))/0x9;if(_0x124897===_0x222c0c)break;else _0x184077['push'](_0x184077['shift']());}catch(_0x537a06){_0x184077['push'](_0x184077['shift']());}}}(a474_0x380b,0xdfc29));const a474_0xa80075=(function(){let _0x1dfe79=!![];return function(_0x1d453c,_0x173a16){const _0x5482f1=_0x1dfe79?function(){if(_0x173a16){const _0x509e08=_0x173a16['apply'](_0x1d453c,arguments);return _0x173a16=null,_0x509e08;}}:function(){};return _0x1dfe79=![],_0x5482f1;};}()),a474_0x4246df=a474_0xa80075(this,function(){const _0x59ccb3=a474_0x1a45;return a474_0x4246df['toString']()[_0x59ccb3(0x214)]('(((.+)+)+)+$')[_0x59ccb3(0x1ff)]()[_0x59ccb3(0x213)](a474_0x4246df)[_0x59ccb3(0x214)]('(((.+)+)+)+$');});a474_0x4246df();'use strict';var __createBinding=this&&this[a474_0x4d07d4(0x1f6)]||(Object[a474_0x4d07d4(0x1fc)]?function(_0x1440a0,_0x4ec906,_0x38a17d,_0x48f0b2){const _0x4cda2a=a474_0x4d07d4;if(_0x48f0b2===undefined)_0x48f0b2=_0x38a17d;var _0x13b5ce=Object[_0x4cda2a(0x1f1)](_0x4ec906,_0x38a17d);(!_0x13b5ce||('get'in _0x13b5ce?!_0x4ec906['__esModule']:_0x13b5ce[_0x4cda2a(0x1f5)]||_0x13b5ce[_0x4cda2a(0x20a)]))&&(_0x13b5ce={'enumerable':!![],'get':function(){return _0x4ec906[_0x38a17d];}}),Object[_0x4cda2a(0x1f9)](_0x1440a0,_0x48f0b2,_0x13b5ce);}:function(_0x4454ed,_0x20de3a,_0x1447ba,_0x3783c8){if(_0x3783c8===undefined)_0x3783c8=_0x1447ba;_0x4454ed[_0x3783c8]=_0x20de3a[_0x1447ba];}),__setModuleDefault=this&&this[a474_0x4d07d4(0x1fa)]||(Object['create']?function(_0x5d80ce,_0x3c6125){const _0x2d6900=a474_0x4d07d4;Object[_0x2d6900(0x1f9)](_0x5d80ce,_0x2d6900(0x1fb),{'enumerable':!![],'value':_0x3c6125});}:function(_0x544e07,_0x2a89aa){const _0x400e59=a474_0x4d07d4;_0x544e07[_0x400e59(0x1fb)]=_0x2a89aa;}),__importStar=this&&this['__importStar']||function(_0x3635f3){const _0x470088=a474_0x4d07d4;if(_0x3635f3&&_0x3635f3['__esModule'])return _0x3635f3;var _0xa69065={};if(_0x3635f3!=null){for(var _0x24137d in _0x3635f3)if(_0x24137d!==_0x470088(0x1fb)&&Object['prototype'][_0x470088(0x1f4)][_0x470088(0x203)](_0x3635f3,_0x24137d))__createBinding(_0xa69065,_0x3635f3,_0x24137d);}return __setModuleDefault(_0xa69065,_0x3635f3),_0xa69065;},__importDefault=this&&this['__importDefault']||function(_0x35592a){const _0x216173=a474_0x4d07d4;return _0x35592a&&_0x35592a[_0x216173(0x1f8)]?_0x35592a:{'default':_0x35592a};};Object[a474_0x4d07d4(0x1f9)](exports,a474_0x4d07d4(0x1f8),{'value':!![]});const Yup=__importStar(require(a474_0x4d07d4(0x204))),AppError_1=__importDefault(require(a474_0x4d07d4(0x201))),Queue_1=__importDefault(require(a474_0x4d07d4(0x219))),Company_1=__importDefault(require(a474_0x4d07d4(0x1fd))),Plan_1=__importDefault(require('../../models/Plan')),CreateQueueService=async _0x1fe99f=>{const _0x4e1501=a474_0x4d07d4,{color:_0x204668,name:_0x36acb5,companyId:_0xa6be1d}=_0x1fe99f,_0x2914a3=await Company_1[_0x4e1501(0x1fb)][_0x4e1501(0x207)]({'where':{'id':_0xa6be1d},'include':[{'model':Plan_1[_0x4e1501(0x1fb)],'as':'plan'}]});if(_0x2914a3!==null){const _0x17db47=await Queue_1[_0x4e1501(0x1fb)][_0x4e1501(0x212)]({'where':{'companyId':_0xa6be1d}});if(_0x17db47>=_0x2914a3[_0x4e1501(0x20c)][_0x4e1501(0x1f2)])throw new AppError_1[(_0x4e1501(0x1fb))](_0x4e1501(0x20e)+_0x17db47);}const _0xe1b787=Yup['object']()[_0x4e1501(0x206)]({'name':Yup[_0x4e1501(0x1ef)]()[_0x4e1501(0x20b)](0x2,_0x4e1501(0x20d))[_0x4e1501(0x1fe)](_0x4e1501(0x20d))['test'](_0x4e1501(0x205),_0x4e1501(0x208),async _0x746e06=>{const _0x447e61=_0x4e1501;if(_0x746e06){const _0x34bf6b=await Queue_1['default'][_0x447e61(0x207)]({'where':{'name':_0x746e06,'companyId':_0xa6be1d}});return!_0x34bf6b;}return![];}),'color':Yup['string']()['required'](_0x4e1501(0x209))[_0x4e1501(0x202)]('Check-color','ERR_QUEUE_INVALID_COLOR',async _0x443150=>{const _0x5a0c5e=_0x4e1501;if(_0x443150){const _0x4a0e6a=/^#[0-9a-f]{3,6}$/i;return _0x4a0e6a[_0x5a0c5e(0x202)](_0x443150);}return![];})[_0x4e1501(0x202)](_0x4e1501(0x200),_0x4e1501(0x217),async _0x2bc27c=>{const _0x463fd1=_0x4e1501;if(_0x2bc27c){const _0x92fbbb=await Queue_1['default'][_0x463fd1(0x207)]({'where':{'color':_0x2bc27c,'companyId':_0xa6be1d}});return!_0x92fbbb;}return![];})});try{await _0xe1b787['validate']({'color':_0x204668,'name':_0x36acb5});}catch(_0x19079e){throw new AppError_1[(_0x4e1501(0x1fb))](_0x19079e['message']);}const _0x43264f=await Queue_1[_0x4e1501(0x1fb)][_0x4e1501(0x1fc)](_0x1fe99f);return _0x43264f;};exports['default']=CreateQueueService;function a474_0x380b(){const _0x5e67bf=['3025kYwrBW','getOwnPropertyDescriptor','queues','10182LoEcSv','hasOwnProperty','writable','__createBinding','5188312EJpNES','__esModule','defineProperty','__setModuleDefault','default','create','../../models/Company','required','toString','Check-color-exists','../../errors/AppError','test','call','yup','Check-unique-name','shape','findOne','ERR_QUEUE_NAME_ALREADY_EXISTS','ERR_QUEUE_INVALID_COLOR','configurable','min','plan','ERR_QUEUE_INVALID_NAME','Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','13164SBfSvB','912968lhhtkG','4020331KMTZoj','count','constructor','search','1344VvdYim','4333968gJXomN','ERR_QUEUE_COLOR_ALREADY_EXISTS','594380zqBLKP','../../models/Queue','string'];a474_0x380b=function(){return _0x5e67bf;};return a474_0x380b();}