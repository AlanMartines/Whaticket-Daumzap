const a474_0x16bcd2=a474_0x3404;(function(_0x2b091a,_0x59dcf5){const _0x1df06a=a474_0x3404,_0x38b4c3=_0x2b091a();while(!![]){try{const _0x52052b=parseInt(_0x1df06a(0x10e))/0x1+parseInt(_0x1df06a(0x11f))/0x2+-parseInt(_0x1df06a(0x10b))/0x3*(parseInt(_0x1df06a(0x128))/0x4)+parseInt(_0x1df06a(0xf8))/0x5*(-parseInt(_0x1df06a(0x114))/0x6)+parseInt(_0x1df06a(0x120))/0x7*(parseInt(_0x1df06a(0xf7))/0x8)+-parseInt(_0x1df06a(0x127))/0x9*(-parseInt(_0x1df06a(0x10a))/0xa)+-parseInt(_0x1df06a(0xff))/0xb;if(_0x52052b===_0x59dcf5)break;else _0x38b4c3['push'](_0x38b4c3['shift']());}catch(_0x350629){_0x38b4c3['push'](_0x38b4c3['shift']());}}}(a474_0x16c4,0xf2c95));function a474_0x3404(_0x1ee60e,_0x117cdf){const _0x49b75c=a474_0x16c4();return a474_0x3404=function(_0x54181e,_0xaf7ba3){_0x54181e=_0x54181e-0xf7;let _0x16c448=_0x49b75c[_0x54181e];return _0x16c448;},a474_0x3404(_0x1ee60e,_0x117cdf);}function a474_0x16c4(){const _0x3b4427=['defineProperty','8379YEwrKa','ERR_QUEUE_INVALID_COLOR','configurable','call','../../errors/AppError','string','5541678XXrjuv','Check-color','__importDefault','__setModuleDefault','min','count','create','validate','../../models/Queue','ERR_QUEUE_NAME_ALREADY_EXISTS','test','2095986LzsMJL','49JGprTs','getOwnPropertyDescriptor','(((.+)+)+)+$','yup','Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20','prototype','__esModule','9QiPLpq','20wXumIx','1294648QLzlqb','5vuDaMI','required','__importStar','queues','Check-color-exists','Check-unique-name','../../models/Company','6911740xSkfmo','writable','../../models/Plan','get','hasOwnProperty','toString','default','search','findOne','ERR_QUEUE_INVALID_NAME','apply','9706220hkLzWo','368043MxPKEZ','message'];a474_0x16c4=function(){return _0x3b4427;};return a474_0x16c4();}const a474_0xaf7ba3=(function(){let _0x4f2b66=!![];return function(_0x30f0b1,_0x5ca294){const _0x5a44d5=_0x4f2b66?function(){const _0x583b1e=a474_0x3404;if(_0x5ca294){const _0x26d843=_0x5ca294[_0x583b1e(0x109)](_0x30f0b1,arguments);return _0x5ca294=null,_0x26d843;}}:function(){};return _0x4f2b66=![],_0x5a44d5;};}()),a474_0x54181e=a474_0xaf7ba3(this,function(){const _0xa8a68a=a474_0x3404;return a474_0x54181e['toString']()[_0xa8a68a(0x106)]('(((.+)+)+)+$')[_0xa8a68a(0x104)]()['constructor'](a474_0x54181e)['search'](_0xa8a68a(0x122));});a474_0x54181e();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a474_0x16bcd2(0x11a)]?function(_0x257453,_0x5e9bb8,_0x5a3cd0,_0x1aad8a){const _0xeb183=a474_0x16bcd2;if(_0x1aad8a===undefined)_0x1aad8a=_0x5a3cd0;var _0x2d45dd=Object[_0xeb183(0x121)](_0x5e9bb8,_0x5a3cd0);(!_0x2d45dd||(_0xeb183(0x102)in _0x2d45dd?!_0x5e9bb8['__esModule']:_0x2d45dd[_0xeb183(0x100)]||_0x2d45dd[_0xeb183(0x110)]))&&(_0x2d45dd={'enumerable':!![],'get':function(){return _0x5e9bb8[_0x5a3cd0];}}),Object['defineProperty'](_0x257453,_0x1aad8a,_0x2d45dd);}:function(_0x2d7821,_0x211307,_0xea771,_0x25fb76){if(_0x25fb76===undefined)_0x25fb76=_0xea771;_0x2d7821[_0x25fb76]=_0x211307[_0xea771];}),__setModuleDefault=this&&this[a474_0x16bcd2(0x117)]||(Object[a474_0x16bcd2(0x11a)]?function(_0xd4ad06,_0x3a7e35){const _0x1801ac=a474_0x16bcd2;Object['defineProperty'](_0xd4ad06,_0x1801ac(0x105),{'enumerable':!![],'value':_0x3a7e35});}:function(_0xace5c1,_0x51e03f){const _0x1bd352=a474_0x16bcd2;_0xace5c1[_0x1bd352(0x105)]=_0x51e03f;}),__importStar=this&&this[a474_0x16bcd2(0xfa)]||function(_0x2ca761){const _0x56c391=a474_0x16bcd2;if(_0x2ca761&&_0x2ca761[_0x56c391(0x126)])return _0x2ca761;var _0x318cc3={};if(_0x2ca761!=null){for(var _0x416b13 in _0x2ca761)if(_0x416b13!==_0x56c391(0x105)&&Object[_0x56c391(0x125)][_0x56c391(0x103)][_0x56c391(0x111)](_0x2ca761,_0x416b13))__createBinding(_0x318cc3,_0x2ca761,_0x416b13);}return __setModuleDefault(_0x318cc3,_0x2ca761),_0x318cc3;},__importDefault=this&&this[a474_0x16bcd2(0x116)]||function(_0x490532){const _0xd7d915=a474_0x16bcd2;return _0x490532&&_0x490532[_0xd7d915(0x126)]?_0x490532:{'default':_0x490532};};Object[a474_0x16bcd2(0x10d)](exports,a474_0x16bcd2(0x126),{'value':!![]});const Yup=__importStar(require(a474_0x16bcd2(0x123))),AppError_1=__importDefault(require(a474_0x16bcd2(0x112))),Queue_1=__importDefault(require(a474_0x16bcd2(0x11c))),Company_1=__importDefault(require(a474_0x16bcd2(0xfe))),Plan_1=__importDefault(require(a474_0x16bcd2(0x101))),CreateQueueService=async _0x3f5a38=>{const _0x4edee8=a474_0x16bcd2,{color:_0x6b58ce,name:_0x89ec80,companyId:_0x1c513a}=_0x3f5a38,_0x4d22ec=await Company_1['default'][_0x4edee8(0x107)]({'where':{'id':_0x1c513a},'include':[{'model':Plan_1[_0x4edee8(0x105)],'as':'plan'}]});if(_0x4d22ec!==null){const _0x351aa1=await Queue_1[_0x4edee8(0x105)][_0x4edee8(0x119)]({'where':{'companyId':_0x1c513a}});if(_0x351aa1>=_0x4d22ec['plan'][_0x4edee8(0xfb)])throw new AppError_1[(_0x4edee8(0x105))](_0x4edee8(0x124)+_0x351aa1);}const _0xa8b82b=Yup['object']()['shape']({'name':Yup[_0x4edee8(0x113)]()[_0x4edee8(0x118)](0x2,_0x4edee8(0x108))[_0x4edee8(0xf9)](_0x4edee8(0x108))['test'](_0x4edee8(0xfd),_0x4edee8(0x11d),async _0x515db3=>{const _0x37deae=_0x4edee8;if(_0x515db3){const _0x452fc4=await Queue_1[_0x37deae(0x105)][_0x37deae(0x107)]({'where':{'name':_0x515db3,'companyId':_0x1c513a}});return!_0x452fc4;}return![];}),'color':Yup[_0x4edee8(0x113)]()['required'](_0x4edee8(0x10f))['test'](_0x4edee8(0x115),'ERR_QUEUE_INVALID_COLOR',async _0x33dd88=>{const _0xfa727d=_0x4edee8;if(_0x33dd88){const _0x15bad6=/^#[0-9a-f]{3,6}$/i;return _0x15bad6[_0xfa727d(0x11e)](_0x33dd88);}return![];})[_0x4edee8(0x11e)](_0x4edee8(0xfc),'ERR_QUEUE_COLOR_ALREADY_EXISTS',async _0x473e13=>{if(_0x473e13){const _0x4ad463=await Queue_1['default']['findOne']({'where':{'color':_0x473e13,'companyId':_0x1c513a}});return!_0x4ad463;}return![];})});try{await _0xa8b82b[_0x4edee8(0x11b)]({'color':_0x6b58ce,'name':_0x89ec80});}catch(_0x2e7010){throw new AppError_1[(_0x4edee8(0x105))](_0x2e7010[_0x4edee8(0x10c)]);}const _0x35e466=await Queue_1[_0x4edee8(0x105)][_0x4edee8(0x11a)](_0x3f5a38);return _0x35e466;};exports[a474_0x16bcd2(0x105)]=CreateQueueService;