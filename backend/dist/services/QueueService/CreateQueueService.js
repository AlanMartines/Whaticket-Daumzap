const a474_0x119a15=a474_0x5b74;(function(_0x4e24dc,_0x390ea0){const _0xacadd5=a474_0x5b74,_0x449cc7=_0x4e24dc();while(!![]){try{const _0x36b5d4=parseInt(_0xacadd5(0x8d))/0x1+parseInt(_0xacadd5(0x88))/0x2*(parseInt(_0xacadd5(0x7e))/0x3)+parseInt(_0xacadd5(0x81))/0x4+parseInt(_0xacadd5(0x91))/0x5+-parseInt(_0xacadd5(0x8a))/0x6*(-parseInt(_0xacadd5(0x7a))/0x7)+parseInt(_0xacadd5(0x7b))/0x8*(-parseInt(_0xacadd5(0xa1))/0x9)+-parseInt(_0xacadd5(0xa0))/0xa;if(_0x36b5d4===_0x390ea0)break;else _0x449cc7['push'](_0x449cc7['shift']());}catch(_0x584b2a){_0x449cc7['push'](_0x449cc7['shift']());}}}(a474_0x1f24,0x233b0));const a474_0x24f386=(function(){let _0xd202cd=!![];return function(_0x2a4625,_0x1b2657){const _0x20b7e3=_0xd202cd?function(){if(_0x1b2657){const _0x53c70a=_0x1b2657['apply'](_0x2a4625,arguments);return _0x1b2657=null,_0x53c70a;}}:function(){};return _0xd202cd=![],_0x20b7e3;};}()),a474_0x5b5dc0=a474_0x24f386(this,function(){const _0x270ed7=a474_0x5b74;return a474_0x5b5dc0['toString']()[_0x270ed7(0x8c)]('(((.+)+)+)+$')[_0x270ed7(0x90)]()[_0x270ed7(0x8f)](a474_0x5b5dc0)['search'](_0x270ed7(0x9a));});a474_0x5b5dc0();function a474_0x5b74(_0x28da38,_0x341cd9){const _0xa7420d=a474_0x1f24();return a474_0x5b74=function(_0x5b5dc0,_0x24f386){_0x5b5dc0=_0x5b5dc0-0x79;let _0x1f24fe=_0xa7420d[_0x5b5dc0];return _0x1f24fe;},a474_0x5b74(_0x28da38,_0x341cd9);}function a474_0x1f24(){const _0x1927f6=['__importStar','164759dYfUGw','152LYCyaV','hasOwnProperty','../../models/Company','6BHxHjL','ERR_QUEUE_COLOR_ALREADY_EXISTS','prototype','277752NTqRpx','__esModule','Check-unique-name','plan','default','test','string','714VvNkBX','writable','12BljeKi','findOne','search','82888TLfqzI','defineProperty','constructor','toString','1180100GljEAj','ERR_QUEUE_INVALID_COLOR','ERR_QUEUE_INVALID_NAME','required','../../models/Queue','Check-color','__setModuleDefault','min','../../errors/AppError','(((.+)+)+)+$','getOwnPropertyDescriptor','../../models/Plan','get','create','call','825830FUbIWk','99117kPpZlJ','__createBinding','validate','yup'];a474_0x1f24=function(){return _0x1927f6;};return a474_0x1f24();}'use strict';var __createBinding=this&&this[a474_0x119a15(0xa2)]||(Object[a474_0x119a15(0x9e)]?function(_0x3867ff,_0x531b44,_0x4768e3,_0x463762){const _0x42b642=a474_0x119a15;if(_0x463762===undefined)_0x463762=_0x4768e3;var _0x2ce818=Object[_0x42b642(0x9b)](_0x531b44,_0x4768e3);(!_0x2ce818||(_0x42b642(0x9d)in _0x2ce818?!_0x531b44[_0x42b642(0x82)]:_0x2ce818[_0x42b642(0x89)]||_0x2ce818['configurable']))&&(_0x2ce818={'enumerable':!![],'get':function(){return _0x531b44[_0x4768e3];}}),Object[_0x42b642(0x8e)](_0x3867ff,_0x463762,_0x2ce818);}:function(_0xe4c6ce,_0x562f8a,_0x30c5fc,_0x51f2a4){if(_0x51f2a4===undefined)_0x51f2a4=_0x30c5fc;_0xe4c6ce[_0x51f2a4]=_0x562f8a[_0x30c5fc];}),__setModuleDefault=this&&this[a474_0x119a15(0x97)]||(Object['create']?function(_0x187eff,_0x4b3935){Object['defineProperty'](_0x187eff,'default',{'enumerable':!![],'value':_0x4b3935});}:function(_0x2630ab,_0x13f005){const _0x513cf5=a474_0x119a15;_0x2630ab[_0x513cf5(0x85)]=_0x13f005;}),__importStar=this&&this[a474_0x119a15(0x79)]||function(_0x8f233){const _0x45e920=a474_0x119a15;if(_0x8f233&&_0x8f233[_0x45e920(0x82)])return _0x8f233;var _0x34728d={};if(_0x8f233!=null){for(var _0x536026 in _0x8f233)if(_0x536026!==_0x45e920(0x85)&&Object[_0x45e920(0x80)][_0x45e920(0x7c)][_0x45e920(0x9f)](_0x8f233,_0x536026))__createBinding(_0x34728d,_0x8f233,_0x536026);}return __setModuleDefault(_0x34728d,_0x8f233),_0x34728d;},__importDefault=this&&this['__importDefault']||function(_0x4472ea){const _0x301446=a474_0x119a15;return _0x4472ea&&_0x4472ea[_0x301446(0x82)]?_0x4472ea:{'default':_0x4472ea};};Object[a474_0x119a15(0x8e)](exports,a474_0x119a15(0x82),{'value':!![]});const Yup=__importStar(require(a474_0x119a15(0xa4))),AppError_1=__importDefault(require(a474_0x119a15(0x99))),Queue_1=__importDefault(require(a474_0x119a15(0x95))),Company_1=__importDefault(require(a474_0x119a15(0x7d))),Plan_1=__importDefault(require(a474_0x119a15(0x9c))),CreateQueueService=async _0x5abb68=>{const _0x4289a0=a474_0x119a15,{color:_0x2cc577,name:_0x8805ef,companyId:_0x3a72c0}=_0x5abb68,_0x4d9ecb=await Company_1[_0x4289a0(0x85)][_0x4289a0(0x8b)]({'where':{'id':_0x3a72c0},'include':[{'model':Plan_1['default'],'as':_0x4289a0(0x84)}]});if(_0x4d9ecb!==null){const _0x15052f=await Queue_1[_0x4289a0(0x85)]['count']({'where':{'companyId':_0x3a72c0}});if(_0x15052f>=_0x4d9ecb['plan']['queues'])throw new AppError_1[(_0x4289a0(0x85))]('Número\x20máximo\x20de\x20filas\x20já\x20alcançado:\x20'+_0x15052f);}const _0x1c5cf0=Yup['object']()['shape']({'name':Yup[_0x4289a0(0x87)]()[_0x4289a0(0x98)](0x2,_0x4289a0(0x93))[_0x4289a0(0x94)]('ERR_QUEUE_INVALID_NAME')[_0x4289a0(0x86)](_0x4289a0(0x83),'ERR_QUEUE_NAME_ALREADY_EXISTS',async _0x5cc41a=>{const _0x48e043=_0x4289a0;if(_0x5cc41a){const _0x429c4e=await Queue_1[_0x48e043(0x85)][_0x48e043(0x8b)]({'where':{'name':_0x5cc41a,'companyId':_0x3a72c0}});return!_0x429c4e;}return![];}),'color':Yup[_0x4289a0(0x87)]()[_0x4289a0(0x94)](_0x4289a0(0x92))[_0x4289a0(0x86)](_0x4289a0(0x96),_0x4289a0(0x92),async _0x4d93c9=>{if(_0x4d93c9){const _0x574394=/^#[0-9a-f]{3,6}$/i;return _0x574394['test'](_0x4d93c9);}return![];})[_0x4289a0(0x86)]('Check-color-exists',_0x4289a0(0x7f),async _0x4faa46=>{const _0x9e4bde=_0x4289a0;if(_0x4faa46){const _0x30f401=await Queue_1[_0x9e4bde(0x85)]['findOne']({'where':{'color':_0x4faa46,'companyId':_0x3a72c0}});return!_0x30f401;}return![];})});try{await _0x1c5cf0[_0x4289a0(0xa3)]({'color':_0x2cc577,'name':_0x8805ef});}catch(_0x46617f){throw new AppError_1[(_0x4289a0(0x85))](_0x46617f['message']);}const _0x3b355f=await Queue_1['default'][_0x4289a0(0x9e)](_0x5abb68);return _0x3b355f;};exports[a474_0x119a15(0x85)]=CreateQueueService;