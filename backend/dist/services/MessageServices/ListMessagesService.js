const a447_0x15d288=a447_0x236f;(function(_0x35660c,_0x2d4fca){const _0x127d85=a447_0x236f,_0x35abad=_0x35660c();while(!![]){try{const _0x1e94f9=parseInt(_0x127d85(0x1f1))/0x1*(-parseInt(_0x127d85(0x1ed))/0x2)+-parseInt(_0x127d85(0x204))/0x3*(parseInt(_0x127d85(0x1fa))/0x4)+parseInt(_0x127d85(0x1f3))/0x5*(-parseInt(_0x127d85(0x1eb))/0x6)+parseInt(_0x127d85(0x205))/0x7+parseInt(_0x127d85(0x1f9))/0x8*(parseInt(_0x127d85(0x1e8))/0x9)+-parseInt(_0x127d85(0x1ec))/0xa*(-parseInt(_0x127d85(0x201))/0xb)+parseInt(_0x127d85(0x1f0))/0xc*(parseInt(_0x127d85(0x207))/0xd);if(_0x1e94f9===_0x2d4fca)break;else _0x35abad['push'](_0x35abad['shift']());}catch(_0x529d26){_0x35abad['push'](_0x35abad['shift']());}}}(a447_0x5de1,0xc20d6));const a447_0x2a2556=(function(){let _0x157197=!![];return function(_0x3b2abc,_0x2eb99f){const _0x1224e0=_0x157197?function(){const _0x49f1bf=a447_0x236f;if(_0x2eb99f){const _0x1c03fb=_0x2eb99f[_0x49f1bf(0x1f6)](_0x3b2abc,arguments);return _0x2eb99f=null,_0x1c03fb;}}:function(){};return _0x157197=![],_0x1224e0;};}()),a447_0x2eead0=a447_0x2a2556(this,function(){const _0x5d7458=a447_0x236f;return a447_0x2eead0[_0x5d7458(0x203)]()['search'](_0x5d7458(0x202))[_0x5d7458(0x203)]()[_0x5d7458(0x1e4)](a447_0x2eead0)[_0x5d7458(0x1ff)]('(((.+)+)+)+$');});a447_0x2eead0();function a447_0x5de1(){const _0x213765=['findAndCountAll','constructor','queue','length','../TicketServices/ShowTicketService','265806afkpAO','quotedMsg','where','102cQiRZC','430HbBAFk','3022nFZSKV','createdAt','../../errors/AppError','10594056mDjCEz','363yfAekc','sequelize','365630CgEHKF','reverse','defineProperty','apply','default','../../models/OldMessage','88zKJHtl','74924nQAfhS','contact','DESC','queueId','ERR_NO_TICKET_FOUND','search','__importDefault','100441ivzYPk','(((.+)+)+)+$','toString','78Ldviel','4132072NckWrW','oldMessages','26DJYuCu','../../models/Queue','__esModule','../../models/Message'];a447_0x5de1=function(){return _0x213765;};return a447_0x5de1();}function a447_0x236f(_0x456af5,_0x2a097d){const _0x5c7e38=a447_0x5de1();return a447_0x236f=function(_0x2eead0,_0x2a2556){_0x2eead0=_0x2eead0-0x1e2;let _0x5de146=_0x5c7e38[_0x2eead0];return _0x5de146;},a447_0x236f(_0x456af5,_0x2a097d);}'use strict';var __importDefault=this&&this[a447_0x15d288(0x200)]||function(_0x29833a){const _0x47b36c=a447_0x15d288;return _0x29833a&&_0x29833a[_0x47b36c(0x209)]?_0x29833a:{'default':_0x29833a};};Object[a447_0x15d288(0x1f5)](exports,a447_0x15d288(0x209),{'value':!![]});const sequelize_1=require(a447_0x15d288(0x1f2)),AppError_1=__importDefault(require(a447_0x15d288(0x1ef))),Message_1=__importDefault(require(a447_0x15d288(0x1e2))),ShowTicketService_1=__importDefault(require(a447_0x15d288(0x1e7))),Queue_1=__importDefault(require(a447_0x15d288(0x208))),OldMessage_1=__importDefault(require(a447_0x15d288(0x1f8))),ListMessagesService=async({pageNumber:pageNumber='1',ticketId:_0x4fac06,companyId:_0x5daabf,queues:queues=[]})=>{const _0x2e6c6a=a447_0x15d288,_0x39e117=await(0x0,ShowTicketService_1['default'])(_0x4fac06,_0x5daabf);if(!_0x39e117)throw new AppError_1['default'](_0x2e6c6a(0x1fe),0x194);const _0x33f8ea=0x14,_0x30dbe4=_0x33f8ea*(+pageNumber-0x1),_0x4b4bab={'where':{'ticketId':_0x4fac06,'companyId':_0x5daabf}};queues[_0x2e6c6a(0x1e6)]>0x0&&(_0x4b4bab[_0x2e6c6a(0x1ea)][_0x2e6c6a(0x1fd)]={[sequelize_1['Op']['or']]:{[sequelize_1['Op']['in']]:queues,[sequelize_1['Op']['eq']]:null}});const {count:_0xa6d97a,rows:_0x4f1145}=await Message_1[_0x2e6c6a(0x1f7)][_0x2e6c6a(0x1e3)]({..._0x4b4bab,'limit':_0x33f8ea,'include':[_0x2e6c6a(0x1fb),{'model':Message_1[_0x2e6c6a(0x1f7)],'as':_0x2e6c6a(0x1e9),'include':['contact']},{'model':OldMessage_1[_0x2e6c6a(0x1f7)],'as':_0x2e6c6a(0x206)},{'model':Queue_1[_0x2e6c6a(0x1f7)],'as':_0x2e6c6a(0x1e5)}],'offset':_0x30dbe4,'order':[[_0x2e6c6a(0x1ee),_0x2e6c6a(0x1fc)]]}),_0x3e7241=_0xa6d97a>_0x30dbe4+_0x4f1145['length'];return{'messages':_0x4f1145[_0x2e6c6a(0x1f4)](),'ticket':_0x39e117,'count':_0xa6d97a,'hasMore':_0x3e7241};};exports[a447_0x15d288(0x1f7)]=ListMessagesService;