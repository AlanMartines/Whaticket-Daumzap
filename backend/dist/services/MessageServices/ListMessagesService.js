const a447_0x3ebee6=a447_0x1e0c;function a447_0x1e0c(_0x2b1444,_0x59e7aa){const _0x51bcea=a447_0x43ec();return a447_0x1e0c=function(_0x3a1fda,_0x154668){_0x3a1fda=_0x3a1fda-0x187;let _0x43ec73=_0x51bcea[_0x3a1fda];return _0x43ec73;},a447_0x1e0c(_0x2b1444,_0x59e7aa);}(function(_0x34d4d2,_0x27390d){const _0x36a62d=a447_0x1e0c,_0x4c8691=_0x34d4d2();while(!![]){try{const _0x4740c6=parseInt(_0x36a62d(0x189))/0x1+-parseInt(_0x36a62d(0x187))/0x2+-parseInt(_0x36a62d(0x195))/0x3*(parseInt(_0x36a62d(0x19f))/0x4)+parseInt(_0x36a62d(0x199))/0x5+-parseInt(_0x36a62d(0x19d))/0x6*(parseInt(_0x36a62d(0x197))/0x7)+-parseInt(_0x36a62d(0x196))/0x8*(parseInt(_0x36a62d(0x1a4))/0x9)+parseInt(_0x36a62d(0x190))/0xa*(parseInt(_0x36a62d(0x1a0))/0xb);if(_0x4740c6===_0x27390d)break;else _0x4c8691['push'](_0x4c8691['shift']());}catch(_0x34eaed){_0x4c8691['push'](_0x4c8691['shift']());}}}(a447_0x43ec,0xd36a5));const a447_0x154668=(function(){let _0x59508f=!![];return function(_0x4bd357,_0x6fd6f8){const _0x44b8d9=_0x59508f?function(){const _0x52b2c4=a447_0x1e0c;if(_0x6fd6f8){const _0x465b64=_0x6fd6f8[_0x52b2c4(0x193)](_0x4bd357,arguments);return _0x6fd6f8=null,_0x465b64;}}:function(){};return _0x59508f=![],_0x44b8d9;};}()),a447_0x3a1fda=a447_0x154668(this,function(){const _0x438cc3=a447_0x1e0c;return a447_0x3a1fda[_0x438cc3(0x1a6)]()['search'](_0x438cc3(0x1a2))['toString']()[_0x438cc3(0x1a1)](a447_0x3a1fda)['search'](_0x438cc3(0x1a2));});a447_0x3a1fda();'use strict';var __importDefault=this&&this[a447_0x3ebee6(0x19c)]||function(_0x17b5c6){const _0x12fcec=a447_0x3ebee6;return _0x17b5c6&&_0x17b5c6[_0x12fcec(0x18b)]?_0x17b5c6:{'default':_0x17b5c6};};Object[a447_0x3ebee6(0x18d)](exports,'__esModule',{'value':!![]});const sequelize_1=require(a447_0x3ebee6(0x194)),AppError_1=__importDefault(require(a447_0x3ebee6(0x19b))),Message_1=__importDefault(require(a447_0x3ebee6(0x1a3))),ShowTicketService_1=__importDefault(require(a447_0x3ebee6(0x198))),Queue_1=__importDefault(require(a447_0x3ebee6(0x192))),OldMessage_1=__importDefault(require(a447_0x3ebee6(0x18f))),ListMessagesService=async({pageNumber:pageNumber='1',ticketId:_0x2beaed,companyId:_0x15dc34,queues:queues=[]})=>{const _0x3e404f=a447_0x3ebee6,_0x3b0296=await(0x0,ShowTicketService_1[_0x3e404f(0x18c)])(_0x2beaed,_0x15dc34);if(!_0x3b0296)throw new AppError_1['default']('ERR_NO_TICKET_FOUND',0x194);const _0x4c9188=0x14,_0x3954fd=_0x4c9188*(+pageNumber-0x1),_0x57d5d4={'where':{'ticketId':_0x2beaed,'companyId':_0x15dc34}};queues['length']>0x0&&(_0x57d5d4[_0x3e404f(0x18a)][_0x3e404f(0x191)]={[sequelize_1['Op']['or']]:{[sequelize_1['Op']['in']]:queues,[sequelize_1['Op']['eq']]:null}});const {count:_0x3746bc,rows:_0x4c3cd6}=await Message_1['default'][_0x3e404f(0x18e)]({..._0x57d5d4,'limit':_0x4c9188,'include':[_0x3e404f(0x19e),{'model':Message_1[_0x3e404f(0x18c)],'as':'quotedMsg','include':[_0x3e404f(0x19e)]},{'model':OldMessage_1[_0x3e404f(0x18c)],'as':_0x3e404f(0x1a5)},{'model':Queue_1[_0x3e404f(0x18c)],'as':_0x3e404f(0x19a)}],'offset':_0x3954fd,'order':[['createdAt','DESC']]}),_0x28f3d6=_0x3746bc>_0x3954fd+_0x4c3cd6[_0x3e404f(0x188)];return{'messages':_0x4c3cd6['reverse'](),'ticket':_0x3b0296,'count':_0x3746bc,'hasMore':_0x28f3d6};};function a447_0x43ec(){const _0x4d60ae=['16pVhEvr','469FzwvuB','../TicketServices/ShowTicketService','4489700sHKcsH','queue','../../errors/AppError','__importDefault','81318bSCnen','contact','4UmZfDI','1791427iVQzgF','constructor','(((.+)+)+)+$','../../models/Message','7538517hzlkKw','oldMessages','toString','638456Xmrdje','length','1112350JQgfRM','where','__esModule','default','defineProperty','findAndCountAll','../../models/OldMessage','170TKWsLP','queueId','../../models/Queue','apply','sequelize','3031191Vjhmaj'];a447_0x43ec=function(){return _0x4d60ae;};return a447_0x43ec();}exports[a447_0x3ebee6(0x18c)]=ListMessagesService;