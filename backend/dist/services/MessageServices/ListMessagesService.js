const a447_0x515a93=a447_0x12f9;(function(_0x5b729e,_0x1a9bdf){const _0x5cc886=a447_0x12f9,_0x1a3777=_0x5b729e();while(!![]){try{const _0x497238=-parseInt(_0x5cc886(0x1bf))/0x1*(-parseInt(_0x5cc886(0x1a6))/0x2)+parseInt(_0x5cc886(0x1bb))/0x3+-parseInt(_0x5cc886(0x1a5))/0x4*(parseInt(_0x5cc886(0x1c0))/0x5)+parseInt(_0x5cc886(0x1b9))/0x6+-parseInt(_0x5cc886(0x1af))/0x7*(parseInt(_0x5cc886(0x1ba))/0x8)+-parseInt(_0x5cc886(0x1b7))/0x9*(-parseInt(_0x5cc886(0x1b0))/0xa)+parseInt(_0x5cc886(0x1b6))/0xb;if(_0x497238===_0x1a9bdf)break;else _0x1a3777['push'](_0x1a3777['shift']());}catch(_0x43e4d3){_0x1a3777['push'](_0x1a3777['shift']());}}}(a447_0x3dc4,0x242a8));const a447_0x32f9d2=(function(){let _0x5d7166=!![];return function(_0x24ceb0,_0x3de979){const _0x53ab9b=_0x5d7166?function(){if(_0x3de979){const _0x251afb=_0x3de979['apply'](_0x24ceb0,arguments);return _0x3de979=null,_0x251afb;}}:function(){};return _0x5d7166=![],_0x53ab9b;};}()),a447_0x1c9a02=a447_0x32f9d2(this,function(){const _0x122c0f=a447_0x12f9;return a447_0x1c9a02[_0x122c0f(0x1bc)]()[_0x122c0f(0x1b4)](_0x122c0f(0x1a8))[_0x122c0f(0x1bc)]()[_0x122c0f(0x1b5)](a447_0x1c9a02)[_0x122c0f(0x1b4)](_0x122c0f(0x1a8));});function a447_0x12f9(_0x5dd666,_0x514f5c){const _0x9732e8=a447_0x3dc4();return a447_0x12f9=function(_0x1c9a02,_0x32f9d2){_0x1c9a02=_0x1c9a02-0x1a3;let _0x3dc43d=_0x9732e8[_0x1c9a02];return _0x3dc43d;},a447_0x12f9(_0x5dd666,_0x514f5c);}a447_0x1c9a02();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4002b8){const _0xbbb81a=a447_0x12f9;return _0x4002b8&&_0x4002b8[_0xbbb81a(0x1ab)]?_0x4002b8:{'default':_0x4002b8};};Object[a447_0x515a93(0x1ad)](exports,a447_0x515a93(0x1ab),{'value':!![]});const sequelize_1=require(a447_0x515a93(0x1be)),AppError_1=__importDefault(require(a447_0x515a93(0x1a7))),Message_1=__importDefault(require(a447_0x515a93(0x1a3))),ShowTicketService_1=__importDefault(require('../TicketServices/ShowTicketService')),Queue_1=__importDefault(require('../../models/Queue')),OldMessage_1=__importDefault(require('../../models/OldMessage')),ListMessagesService=async({pageNumber:pageNumber='1',ticketId:_0x2cf39e,companyId:_0x56cc65,queues:queues=[]})=>{const _0xef7d88=a447_0x515a93,_0x135382=await(0x0,ShowTicketService_1[_0xef7d88(0x1a4)])(_0x2cf39e,_0x56cc65);if(!_0x135382)throw new AppError_1[(_0xef7d88(0x1a4))](_0xef7d88(0x1b1),0x194);const _0x7f2a81=0x14,_0x25fec1=_0x7f2a81*(+pageNumber-0x1),_0x2bad77={'where':{'ticketId':_0x2cf39e,'companyId':_0x56cc65}};queues[_0xef7d88(0x1b8)]>0x0&&(_0x2bad77[_0xef7d88(0x1b2)][_0xef7d88(0x1a9)]={[sequelize_1['Op']['or']]:{[sequelize_1['Op']['in']]:queues,[sequelize_1['Op']['eq']]:null}});const {count:_0x4d8e9f,rows:_0x3d4fe2}=await Message_1['default'][_0xef7d88(0x1aa)]({..._0x2bad77,'limit':_0x7f2a81,'include':[_0xef7d88(0x1bd),{'model':Message_1[_0xef7d88(0x1a4)],'as':_0xef7d88(0x1ac),'include':['contact']},{'model':OldMessage_1[_0xef7d88(0x1a4)],'as':'oldMessages'},{'model':Queue_1[_0xef7d88(0x1a4)],'as':_0xef7d88(0x1b3)}],'offset':_0x25fec1,'order':[[_0xef7d88(0x1ae),'DESC']]}),_0x13a29b=_0x4d8e9f>_0x25fec1+_0x3d4fe2[_0xef7d88(0x1b8)];return{'messages':_0x3d4fe2['reverse'](),'ticket':_0x135382,'count':_0x4d8e9f,'hasMore':_0x13a29b};};function a447_0x3dc4(){const _0x28ad0f=['queue','search','constructor','867163GKkOBP','2232eNQZXv','length','31434yTSpkc','1042264pUzMLA','488346CBYyFS','toString','contact','sequelize','40oNsKIt','1144295HRfWHO','../../models/Message','default','4RhEVcZ','5668TkTeTJ','../../errors/AppError','(((.+)+)+)+$','queueId','findAndCountAll','__esModule','quotedMsg','defineProperty','createdAt','7tZXgrk','5930rusxpv','ERR_NO_TICKET_FOUND','where'];a447_0x3dc4=function(){return _0x28ad0f;};return a447_0x3dc4();}exports[a447_0x515a93(0x1a4)]=ListMessagesService;