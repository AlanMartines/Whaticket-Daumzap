const a380_0x55fd41=a380_0x132e;(function(_0x4b1f1d,_0x5bc6fe){const _0x5f09cb=a380_0x132e,_0x1fc8a7=_0x4b1f1d();while(!![]){try{const _0x90344c=-parseInt(_0x5f09cb(0x87))/0x1*(-parseInt(_0x5f09cb(0x8d))/0x2)+-parseInt(_0x5f09cb(0x99))/0x3*(-parseInt(_0x5f09cb(0x8b))/0x4)+-parseInt(_0x5f09cb(0x8c))/0x5+parseInt(_0x5f09cb(0x88))/0x6+-parseInt(_0x5f09cb(0x94))/0x7+-parseInt(_0x5f09cb(0x89))/0x8*(-parseInt(_0x5f09cb(0xa0))/0x9)+-parseInt(_0x5f09cb(0x9e))/0xa;if(_0x90344c===_0x5bc6fe)break;else _0x1fc8a7['push'](_0x1fc8a7['shift']());}catch(_0x5ea2af){_0x1fc8a7['push'](_0x1fc8a7['shift']());}}}(a380_0x1405,0x3acd3));const a380_0x127523=(function(){let _0x50dcb2=!![];return function(_0x46f6ae,_0x257109){const _0x10cfb9=_0x50dcb2?function(){if(_0x257109){const _0x1596ff=_0x257109['apply'](_0x46f6ae,arguments);return _0x257109=null,_0x1596ff;}}:function(){};return _0x50dcb2=![],_0x10cfb9;};}()),a380_0x45c4fb=a380_0x127523(this,function(){const _0x19759a=a380_0x132e;return a380_0x45c4fb[_0x19759a(0x91)]()['search'](_0x19759a(0x97))[_0x19759a(0x91)]()[_0x19759a(0x8f)](a380_0x45c4fb)[_0x19759a(0x9d)](_0x19759a(0x97));});a380_0x45c4fb();function a380_0x132e(_0x151add,_0x30e947){const _0xd9eb0=a380_0x1405();return a380_0x132e=function(_0x45c4fb,_0x127523){_0x45c4fb=_0x45c4fb-0x87;let _0x140506=_0xd9eb0[_0x45c4fb];return _0x140506;},a380_0x132e(_0x151add,_0x30e947);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x39f1e9){const _0x144e94=a380_0x132e;return _0x39f1e9&&_0x39f1e9[_0x144e94(0x95)]?_0x39f1e9:{'default':_0x39f1e9};};Object[a380_0x55fd41(0x90)](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require('../../errors/AppError')),ChatMessage_1=__importDefault(require(a380_0x55fd41(0x9f))),ChatUser_1=__importDefault(require(a380_0x55fd41(0x9b))),User_1=__importDefault(require('../../models/User')),lodash_1=require(a380_0x55fd41(0x8e)),FindMessages=async({chatId:_0x2bcc74,ownerId:_0x39066d,pageNumber:pageNumber='1'})=>{const _0x5e8115=a380_0x55fd41,_0x5d7a12=await ChatUser_1['default'][_0x5e8115(0x96)]({'where':{'chatId':_0x2bcc74,'userId':_0x39066d}});if(_0x5d7a12===0x0)throw new AppError_1[(_0x5e8115(0xa1))](_0x5e8115(0x8a),0x190);const _0x5da1a7=0x14,_0x4ccf66=_0x5da1a7*(+pageNumber-0x1),{count:_0x3bf1f7,rows:_0x51b692}=await ChatMessage_1[_0x5e8115(0xa1)]['findAndCountAll']({'where':{'chatId':_0x2bcc74},'include':[{'model':User_1[_0x5e8115(0xa1)],'as':'sender','attributes':['id',_0x5e8115(0x98)]}],'limit':_0x5da1a7,'offset':_0x4ccf66,'order':[[_0x5e8115(0x9a),_0x5e8115(0x9c)]]}),_0xa8293c=_0x3bf1f7>_0x4ccf66+_0x51b692[_0x5e8115(0x93)],_0x43a09c=(0x0,lodash_1[_0x5e8115(0x92)])(_0x51b692,['id','ASC']);return{'records':_0x43a09c,'count':_0x3bf1f7,'hasMore':_0xa8293c};};function a380_0x1405(){const _0x1ef818=['790321xYJfUQ','__esModule','count','(((.+)+)+)+$','name','9xYUpeT','createdAt','../../models/ChatUser','DESC','search','122460kBOwMl','../../models/ChatMessage','412497BIdlUr','default','1xppjCv','127992BnujfS','8nMXqvs','UNAUTHORIZED','132452YdgwIp','196575nzuMWG','477622RJCiXW','lodash','constructor','defineProperty','toString','sortBy','length'];a380_0x1405=function(){return _0x1ef818;};return a380_0x1405();}exports[a380_0x55fd41(0xa1)]=FindMessages;