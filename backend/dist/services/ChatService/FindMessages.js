const a380_0x3931d1=a380_0x5401;(function(_0x1019d8,_0xd765a1){const _0x4fa7cd=a380_0x5401,_0x17d341=_0x1019d8();while(!![]){try{const _0x105a31=-parseInt(_0x4fa7cd(0xac))/0x1*(-parseInt(_0x4fa7cd(0xa0))/0x2)+-parseInt(_0x4fa7cd(0xb0))/0x3*(-parseInt(_0x4fa7cd(0x9d))/0x4)+-parseInt(_0x4fa7cd(0xa5))/0x5+-parseInt(_0x4fa7cd(0x9e))/0x6*(parseInt(_0x4fa7cd(0xa7))/0x7)+parseInt(_0x4fa7cd(0xab))/0x8+parseInt(_0x4fa7cd(0xa8))/0x9*(-parseInt(_0x4fa7cd(0xaa))/0xa)+parseInt(_0x4fa7cd(0x9a))/0xb;if(_0x105a31===_0xd765a1)break;else _0x17d341['push'](_0x17d341['shift']());}catch(_0x3816e4){_0x17d341['push'](_0x17d341['shift']());}}}(a380_0x1669,0x80109));const a380_0x392f00=(function(){let _0x1f9483=!![];return function(_0x58aafe,_0x4ebff3){const _0x5c276b=_0x1f9483?function(){const _0x252ef4=a380_0x5401;if(_0x4ebff3){const _0x7f9ba2=_0x4ebff3[_0x252ef4(0x98)](_0x58aafe,arguments);return _0x4ebff3=null,_0x7f9ba2;}}:function(){};return _0x1f9483=![],_0x5c276b;};}()),a380_0x21736f=a380_0x392f00(this,function(){const _0x2e52d3=a380_0x5401;return a380_0x21736f[_0x2e52d3(0xad)]()[_0x2e52d3(0x96)](_0x2e52d3(0x9f))[_0x2e52d3(0xad)]()[_0x2e52d3(0xa3)](a380_0x21736f)[_0x2e52d3(0x96)](_0x2e52d3(0x9f));});a380_0x21736f();'use strict';var __importDefault=this&&this[a380_0x3931d1(0x9c)]||function(_0x5a920f){return _0x5a920f&&_0x5a920f['__esModule']?_0x5a920f:{'default':_0x5a920f};};function a380_0x1669(){const _0x30a18b=['../../models/ChatMessage','10620iPFYcn','1741984cxnRAa','157yrvwYa','toString','../../models/ChatUser','default','3JIKyYo','../../errors/AppError','search','sender','apply','defineProperty','17334031iScELH','DESC','__importDefault','2091752onYoGw','6hboVFG','(((.+)+)+)+$','3698tcVvZw','name','__esModule','constructor','count','1292320JlwvmK','createdAt','6202259UWDPzM','7947gQYcRE'];a380_0x1669=function(){return _0x30a18b;};return a380_0x1669();}function a380_0x5401(_0x485b00,_0x43c1c6){const _0x4294ef=a380_0x1669();return a380_0x5401=function(_0x21736f,_0x392f00){_0x21736f=_0x21736f-0x95;let _0x1669e7=_0x4294ef[_0x21736f];return _0x1669e7;},a380_0x5401(_0x485b00,_0x43c1c6);}Object[a380_0x3931d1(0x99)](exports,a380_0x3931d1(0xa2),{'value':!![]});const AppError_1=__importDefault(require(a380_0x3931d1(0x95))),ChatMessage_1=__importDefault(require(a380_0x3931d1(0xa9))),ChatUser_1=__importDefault(require(a380_0x3931d1(0xae))),User_1=__importDefault(require('../../models/User')),lodash_1=require('lodash'),FindMessages=async({chatId:_0x3d8195,ownerId:_0x5b990e,pageNumber:pageNumber='1'})=>{const _0x3262ff=a380_0x3931d1,_0x2187bc=await ChatUser_1[_0x3262ff(0xaf)][_0x3262ff(0xa4)]({'where':{'chatId':_0x3d8195,'userId':_0x5b990e}});if(_0x2187bc===0x0)throw new AppError_1['default']('UNAUTHORIZED',0x190);const _0x27d58d=0x14,_0x4fc261=_0x27d58d*(+pageNumber-0x1),{count:_0x3dcf88,rows:_0x5b16f7}=await ChatMessage_1['default']['findAndCountAll']({'where':{'chatId':_0x3d8195},'include':[{'model':User_1[_0x3262ff(0xaf)],'as':_0x3262ff(0x97),'attributes':['id',_0x3262ff(0xa1)]}],'limit':_0x27d58d,'offset':_0x4fc261,'order':[[_0x3262ff(0xa6),_0x3262ff(0x9b)]]}),_0x540eec=_0x3dcf88>_0x4fc261+_0x5b16f7['length'],_0x5b4cce=(0x0,lodash_1['sortBy'])(_0x5b16f7,['id','ASC']);return{'records':_0x5b4cce,'count':_0x3dcf88,'hasMore':_0x540eec};};exports[a380_0x3931d1(0xaf)]=FindMessages;