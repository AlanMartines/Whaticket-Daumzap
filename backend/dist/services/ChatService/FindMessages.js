const a380_0x1bce4c=a380_0x3b56;(function(_0x57f5d9,_0x321f4e){const _0x2a725d=a380_0x3b56,_0x44d449=_0x57f5d9();while(!![]){try{const _0x3f7304=parseInt(_0x2a725d(0x159))/0x1+-parseInt(_0x2a725d(0x15e))/0x2+parseInt(_0x2a725d(0x15d))/0x3*(parseInt(_0x2a725d(0x15f))/0x4)+-parseInt(_0x2a725d(0x15c))/0x5+parseInt(_0x2a725d(0x147))/0x6+-parseInt(_0x2a725d(0x14b))/0x7+parseInt(_0x2a725d(0x155))/0x8*(parseInt(_0x2a725d(0x14f))/0x9);if(_0x3f7304===_0x321f4e)break;else _0x44d449['push'](_0x44d449['shift']());}catch(_0x25b105){_0x44d449['push'](_0x44d449['shift']());}}}(a380_0x548f,0xbc0db));const a380_0x34a93c=(function(){let _0x2d777a=!![];return function(_0x4cb292,_0x6f177d){const _0x406266=_0x2d777a?function(){const _0x3392e3=a380_0x3b56;if(_0x6f177d){const _0x132ff8=_0x6f177d[_0x3392e3(0x15b)](_0x4cb292,arguments);return _0x6f177d=null,_0x132ff8;}}:function(){};return _0x2d777a=![],_0x406266;};}()),a380_0x409752=a380_0x34a93c(this,function(){const _0x35f62a=a380_0x3b56;return a380_0x409752[_0x35f62a(0x149)]()[_0x35f62a(0x160)]('(((.+)+)+)+$')['toString']()[_0x35f62a(0x161)](a380_0x409752)[_0x35f62a(0x160)](_0x35f62a(0x14a));});a380_0x409752();'use strict';function a380_0x3b56(_0x8982c7,_0x9acc1b){const _0x44a26d=a380_0x548f();return a380_0x3b56=function(_0x409752,_0x34a93c){_0x409752=_0x409752-0x147;let _0x548f72=_0x44a26d[_0x409752];return _0x548f72;},a380_0x3b56(_0x8982c7,_0x9acc1b);}function a380_0x548f(){const _0x44b122=['defineProperty','../../models/ChatMessage','18936KLYzbl','../../errors/AppError','lodash','length','findAndCountAll','UNAUTHORIZED','936wcGaxG','count','sortBy','../../models/ChatUser','950813xbNzLd','name','apply','6382955RcNIZu','807EnvoTQ','1364788ztceAV','6840hjCBar','search','constructor','7685646BjansV','default','toString','(((.+)+)+)+$','1460620hQPPwx','__importDefault'];a380_0x548f=function(){return _0x44b122;};return a380_0x548f();}var __importDefault=this&&this[a380_0x1bce4c(0x14c)]||function(_0x4cee3c){return _0x4cee3c&&_0x4cee3c['__esModule']?_0x4cee3c:{'default':_0x4cee3c};};Object[a380_0x1bce4c(0x14d)](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require(a380_0x1bce4c(0x150))),ChatMessage_1=__importDefault(require(a380_0x1bce4c(0x14e))),ChatUser_1=__importDefault(require(a380_0x1bce4c(0x158))),User_1=__importDefault(require('../../models/User')),lodash_1=require(a380_0x1bce4c(0x151)),FindMessages=async({chatId:_0x4ea035,ownerId:_0x8b4b8,pageNumber:pageNumber='1'})=>{const _0x1de97c=a380_0x1bce4c,_0x43dc7c=await ChatUser_1[_0x1de97c(0x148)][_0x1de97c(0x156)]({'where':{'chatId':_0x4ea035,'userId':_0x8b4b8}});if(_0x43dc7c===0x0)throw new AppError_1[(_0x1de97c(0x148))](_0x1de97c(0x154),0x190);const _0x2e278b=0x14,_0x2ba7e6=_0x2e278b*(+pageNumber-0x1),{count:_0x4c7e40,rows:_0x456705}=await ChatMessage_1[_0x1de97c(0x148)][_0x1de97c(0x153)]({'where':{'chatId':_0x4ea035},'include':[{'model':User_1[_0x1de97c(0x148)],'as':'sender','attributes':['id',_0x1de97c(0x15a)]}],'limit':_0x2e278b,'offset':_0x2ba7e6,'order':[['createdAt','DESC']]}),_0x50fde8=_0x4c7e40>_0x2ba7e6+_0x456705[_0x1de97c(0x152)],_0x27d636=(0x0,lodash_1[_0x1de97c(0x157)])(_0x456705,['id','ASC']);return{'records':_0x27d636,'count':_0x4c7e40,'hasMore':_0x50fde8};};exports['default']=FindMessages;