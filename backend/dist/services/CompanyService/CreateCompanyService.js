const a387_0x3594d1=a387_0x195d;(function(_0x28579b,_0x58b987){const _0x3b084c=a387_0x195d,_0x5bdf7b=_0x28579b();while(!![]){try{const _0x194c94=parseInt(_0x3b084c(0x1b9))/0x1*(parseInt(_0x3b084c(0x1c7))/0x2)+parseInt(_0x3b084c(0x1cf))/0x3*(-parseInt(_0x3b084c(0x1b3))/0x4)+-parseInt(_0x3b084c(0x1a4))/0x5+parseInt(_0x3b084c(0x1bc))/0x6+parseInt(_0x3b084c(0x1b4))/0x7+-parseInt(_0x3b084c(0x1d6))/0x8*(-parseInt(_0x3b084c(0x1bd))/0x9)+-parseInt(_0x3b084c(0x1e0))/0xa;if(_0x194c94===_0x58b987)break;else _0x5bdf7b['push'](_0x5bdf7b['shift']());}catch(_0x507b00){_0x5bdf7b['push'](_0x5bdf7b['shift']());}}}(a387_0x3f74,0x2db6f));const a387_0x17ebf6=(function(){let _0x24bc4d=!![];return function(_0x81182b,_0x30d9b0){const _0x162631=_0x24bc4d?function(){const _0x23b12a=a387_0x195d;if(_0x30d9b0){const _0x49aa2f=_0x30d9b0[_0x23b12a(0x1b6)](_0x81182b,arguments);return _0x30d9b0=null,_0x49aa2f;}}:function(){};return _0x24bc4d=![],_0x162631;};}()),a387_0x15cac7=a387_0x17ebf6(this,function(){const _0x4703a5=a387_0x195d;return a387_0x15cac7[_0x4703a5(0x1da)]()[_0x4703a5(0x1af)](_0x4703a5(0x1de))[_0x4703a5(0x1da)]()['constructor'](a387_0x15cac7)[_0x4703a5(0x1af)](_0x4703a5(0x1de));});function a387_0x195d(_0x439197,_0x4bc95e){const _0x161d06=a387_0x3f74();return a387_0x195d=function(_0x15cac7,_0x17ebf6){_0x15cac7=_0x15cac7-0x1a3;let _0x3f7454=_0x161d06[_0x15cac7];return _0x3f7454;},a387_0x195d(_0x439197,_0x4bc95e);}function a387_0x3f74(){const _0xbf1496=['disabled','findOrCreate','appsgp','../../errors/AppError','yup','41898rTPRFW','ipmkauth','__importStar','test','required','update','sendGreetingAccepted','8HGgXYm','call','../../models/Company','enabled','toString','asaas','tokensgp','prototype','(((.+)+)+)+$','name','198760RJsbEC','sendMsgTransfTicket','defineProperty','default','min','1194490DmsebE','CheckMsgIsGroup','writable','__importDefault','tokenixc','get','validate','clientsecretmkauth','../../models/Setting','ipixc','userRating','search','ERR_COMPANY_INVALID_NAME','Check-unique-name','clientidmkauth','12ePNUEd','1483181CKrOpV','campaignsEnabled','apply','hasOwnProperty','create','1VCkAAZ','scheduleType','__setModuleDefault','420312vebSku','969516RGzwsq','findOne','configurable','chatBotType','../../models/User','__createBinding','__esModule','message','admin','email','196520hMGUrg','string','getOwnPropertyDescriptor'];a387_0x3f74=function(){return _0xbf1496;};return a387_0x3f74();}a387_0x15cac7();'use strict';var __createBinding=this&&this[a387_0x3594d1(0x1c2)]||(Object['create']?function(_0x2bf90c,_0x4f15a1,_0x11d5ca,_0x211842){const _0x4073ea=a387_0x3594d1;if(_0x211842===undefined)_0x211842=_0x11d5ca;var _0x584f55=Object[_0x4073ea(0x1c9)](_0x4f15a1,_0x11d5ca);(!_0x584f55||(_0x4073ea(0x1a9)in _0x584f55?!_0x4f15a1[_0x4073ea(0x1c3)]:_0x584f55[_0x4073ea(0x1a6)]||_0x584f55[_0x4073ea(0x1bf)]))&&(_0x584f55={'enumerable':!![],'get':function(){return _0x4f15a1[_0x11d5ca];}}),Object[_0x4073ea(0x1e2)](_0x2bf90c,_0x211842,_0x584f55);}:function(_0x3deea2,_0x1d1ff1,_0x4694cb,_0x2c5c9a){if(_0x2c5c9a===undefined)_0x2c5c9a=_0x4694cb;_0x3deea2[_0x2c5c9a]=_0x1d1ff1[_0x4694cb];}),__setModuleDefault=this&&this[a387_0x3594d1(0x1bb)]||(Object[a387_0x3594d1(0x1b8)]?function(_0x3ac80c,_0x3d1ba4){const _0x4f71b4=a387_0x3594d1;Object[_0x4f71b4(0x1e2)](_0x3ac80c,_0x4f71b4(0x1e3),{'enumerable':!![],'value':_0x3d1ba4});}:function(_0x219228,_0x3d4d7b){const _0x247b3b=a387_0x3594d1;_0x219228[_0x247b3b(0x1e3)]=_0x3d4d7b;}),__importStar=this&&this[a387_0x3594d1(0x1d1)]||function(_0x539628){const _0x597bca=a387_0x3594d1;if(_0x539628&&_0x539628[_0x597bca(0x1c3)])return _0x539628;var _0xd996fa={};if(_0x539628!=null){for(var _0x2e539c in _0x539628)if(_0x2e539c!==_0x597bca(0x1e3)&&Object[_0x597bca(0x1dd)][_0x597bca(0x1b7)][_0x597bca(0x1d7)](_0x539628,_0x2e539c))__createBinding(_0xd996fa,_0x539628,_0x2e539c);}return __setModuleDefault(_0xd996fa,_0x539628),_0xd996fa;},__importDefault=this&&this[a387_0x3594d1(0x1a7)]||function(_0x52d57c){const _0x30dcf3=a387_0x3594d1;return _0x52d57c&&_0x52d57c[_0x30dcf3(0x1c3)]?_0x52d57c:{'default':_0x52d57c};};Object[a387_0x3594d1(0x1e2)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a387_0x3594d1(0x1ce))),AppError_1=__importDefault(require(a387_0x3594d1(0x1cd))),Company_1=__importDefault(require(a387_0x3594d1(0x1d8))),User_1=__importDefault(require(a387_0x3594d1(0x1c1))),Setting_1=__importDefault(require(a387_0x3594d1(0x1ac))),CreateCompanyService=async _0x12959e=>{const _0x48610c=a387_0x3594d1,{name:_0x2693f6,phone:_0x37fff8,email:_0xe2f0b,status:_0x36b163,planId:_0x1057a2,password:_0x32ea46,campaignsEnabled:_0x20d545,dueDate:_0x431122,recurrence:_0x566fd9}=_0x12959e,_0xe4734d=Yup['object']()['shape']({'name':Yup[_0x48610c(0x1c8)]()[_0x48610c(0x1a3)](0x2,_0x48610c(0x1b0))[_0x48610c(0x1d3)](_0x48610c(0x1b0))[_0x48610c(0x1d2)](_0x48610c(0x1b1),'ERR_COMPANY_NAME_ALREADY_EXISTS',async _0x51afba=>{const _0x292e6f=_0x48610c;if(_0x51afba){const _0x445275=await Company_1[_0x292e6f(0x1e3)][_0x292e6f(0x1be)]({'where':{'name':_0x51afba}});return!_0x445275;}return![];})});try{await _0xe4734d[_0x48610c(0x1aa)]({'name':_0x2693f6});}catch(_0x347a7e){throw new AppError_1['default'](_0x347a7e[_0x48610c(0x1c4)]);}const _0x3d7dcb=await Company_1[_0x48610c(0x1e3)][_0x48610c(0x1b8)]({'name':_0x2693f6,'phone':_0x37fff8,'email':_0xe2f0b,'status':_0x36b163,'planId':_0x1057a2,'dueDate':_0x431122,'recurrence':_0x566fd9}),_0x3f1547=await User_1[_0x48610c(0x1e3)]['create']({'name':_0x3d7dcb[_0x48610c(0x1df)],'email':_0x3d7dcb[_0x48610c(0x1c6)],'password':_0x12959e['password']||'mudar@123','profile':_0x48610c(0x1c5),'companyId':_0x3d7dcb['id']});await Setting_1['default']['findOrCreate']({'where':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1db)},'defaults':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1db),'value':''}}),await Setting_1[_0x48610c(0x1e3)][_0x48610c(0x1cb)]({'where':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1a8)},'defaults':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1a8),'value':''}}),await Setting_1['default'][_0x48610c(0x1cb)]({'where':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1ad)},'defaults':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1ad),'value':''}}),await Setting_1[_0x48610c(0x1e3)][_0x48610c(0x1cb)]({'where':{'companyId':_0x3d7dcb['id'],'key':'ipmkauth'},'defaults':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1d0),'value':''}}),await Setting_1[_0x48610c(0x1e3)]['findOrCreate']({'where':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1ab)},'defaults':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1ab),'value':''}}),await Setting_1[_0x48610c(0x1e3)][_0x48610c(0x1cb)]({'where':{'companyId':_0x3d7dcb['id'],'key':'clientidmkauth'},'defaults':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1b2),'value':''}}),await Setting_1[_0x48610c(0x1e3)][_0x48610c(0x1cb)]({'where':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1a5)},'defaults':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1d9),'value':''}}),await Setting_1[_0x48610c(0x1e3)]['findOrCreate']({'where':{'companyId':_0x3d7dcb['id'],'key':''},'defaults':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1d7),'value':_0x48610c(0x1ca)}}),await Setting_1[_0x48610c(0x1e3)][_0x48610c(0x1cb)]({'where':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1ba)},'defaults':{'companyId':_0x3d7dcb['id'],'key':'scheduleType','value':_0x48610c(0x1ca)}}),await Setting_1[_0x48610c(0x1e3)]['findOrCreate']({'where':{'companyId':_0x3d7dcb['id'],'key':'sendGreetingAccepted'},'defaults':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1d5),'value':_0x48610c(0x1ca)}}),await Setting_1['default'][_0x48610c(0x1cb)]({'where':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1e1)},'defaults':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1e1),'value':_0x48610c(0x1ca)}}),await Setting_1[_0x48610c(0x1e3)][_0x48610c(0x1cb)]({'where':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1ae)},'defaults':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1ae),'value':_0x48610c(0x1ca)}}),await Setting_1[_0x48610c(0x1e3)]['findOrCreate']({'where':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1c0)},'defaults':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1c0),'value':'text'}}),await Setting_1[_0x48610c(0x1e3)][_0x48610c(0x1cb)]({'where':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1dc)},'defaults':{'companyId':_0x3d7dcb['id'],'key':'tokensgp','value':''}}),await Setting_1['default']['findOrCreate']({'where':{'companyId':_0x3d7dcb['id'],'key':'ipsgp'},'defaults':{'companyId':_0x3d7dcb['id'],'key':'ipsgp','value':''}}),await Setting_1[_0x48610c(0x1e3)][_0x48610c(0x1cb)]({'where':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1cc)},'defaults':{'companyId':_0x3d7dcb['id'],'key':'appsgp','value':''}});if(_0x12959e[_0x48610c(0x1b5)]!==undefined){const [_0x4866f2,_0x13e771]=await Setting_1[_0x48610c(0x1e3)]['findOrCreate']({'where':{'companyId':_0x3d7dcb['id'],'key':'campaignsEnabled'},'defaults':{'companyId':_0x3d7dcb['id'],'key':_0x48610c(0x1b5),'value':''+_0x20d545}});!_0x13e771&&await _0x4866f2[_0x48610c(0x1d4)]({'value':''+_0x20d545});}return _0x3d7dcb;};exports[a387_0x3594d1(0x1e3)]=CreateCompanyService;