function a387_0x52e1(_0x24e412,_0x31e17d){const _0x1ae604=a387_0xab83();return a387_0x52e1=function(_0x1e34f1,_0x3c9f65){_0x1e34f1=_0x1e34f1-0x158;let _0xab835a=_0x1ae604[_0x1e34f1];return _0xab835a;},a387_0x52e1(_0x24e412,_0x31e17d);}const a387_0x478090=a387_0x52e1;(function(_0x4525f8,_0x55dd11){const _0x5e195a=a387_0x52e1,_0x188573=_0x4525f8();while(!![]){try{const _0x4d6a45=-parseInt(_0x5e195a(0x165))/0x1+parseInt(_0x5e195a(0x18b))/0x2+-parseInt(_0x5e195a(0x16e))/0x3*(-parseInt(_0x5e195a(0x17a))/0x4)+-parseInt(_0x5e195a(0x183))/0x5*(parseInt(_0x5e195a(0x16c))/0x6)+parseInt(_0x5e195a(0x18c))/0x7*(-parseInt(_0x5e195a(0x160))/0x8)+parseInt(_0x5e195a(0x188))/0x9+parseInt(_0x5e195a(0x162))/0xa;if(_0x4d6a45===_0x55dd11)break;else _0x188573['push'](_0x188573['shift']());}catch(_0x40410f){_0x188573['push'](_0x188573['shift']());}}}(a387_0xab83,0x896aa));const a387_0x3c9f65=(function(){let _0x1052d1=!![];return function(_0x5a0de3,_0xe95c04){const _0x3b72dc=_0x1052d1?function(){const _0x589a33=a387_0x52e1;if(_0xe95c04){const _0x53af98=_0xe95c04[_0x589a33(0x184)](_0x5a0de3,arguments);return _0xe95c04=null,_0x53af98;}}:function(){};return _0x1052d1=![],_0x3b72dc;};}()),a387_0x1e34f1=a387_0x3c9f65(this,function(){const _0x5c442a=a387_0x52e1;return a387_0x1e34f1[_0x5c442a(0x15b)]()['search'](_0x5c442a(0x170))[_0x5c442a(0x15b)]()['constructor'](a387_0x1e34f1)['search'](_0x5c442a(0x170));});a387_0x1e34f1();function a387_0xab83(){const _0x25cef0=['defineProperty','min','admin','getOwnPropertyDescriptor','disabled','870dLcvjp','ERR_COMPANY_INVALID_NAME','2913QeifTl','__createBinding','(((.+)+)+)+$','update','findOrCreate','object','chatBotType','sendMsgTransfTicket','configurable','asaas','ipsgp','tokensgp','1372SYiwPc','yup','tokenixc','text','enabled','Check-unique-name','name','../../errors/AppError','validate','20195KMmldY','apply','appsgp','userRating','__importDefault','4930614mhINsm','message','clientidmkauth','1422898sYtZcL','1382087cYJNmm','__esModule','CheckMsgIsGroup','ipixc','__setModuleDefault','test','create','toString','string','call','hasOwnProperty','password','32BvxFER','campaignsEnabled','8778480Kbrqje','default','../../models/Setting','531919xiMjBj','ipmkauth'];a387_0xab83=function(){return _0x25cef0;};return a387_0xab83();}'use strict';var __createBinding=this&&this[a387_0x478090(0x16f)]||(Object['create']?function(_0xbf5f15,_0x3d1f80,_0x1e31c4,_0x1e9789){const _0x38fd66=a387_0x478090;if(_0x1e9789===undefined)_0x1e9789=_0x1e31c4;var _0x3c31a8=Object[_0x38fd66(0x16a)](_0x3d1f80,_0x1e31c4);(!_0x3c31a8||('get'in _0x3c31a8?!_0x3d1f80[_0x38fd66(0x18d)]:_0x3c31a8['writable']||_0x3c31a8[_0x38fd66(0x176)]))&&(_0x3c31a8={'enumerable':!![],'get':function(){return _0x3d1f80[_0x1e31c4];}}),Object[_0x38fd66(0x167)](_0xbf5f15,_0x1e9789,_0x3c31a8);}:function(_0x29e8b5,_0x24939b,_0x34c3f4,_0x2470cd){if(_0x2470cd===undefined)_0x2470cd=_0x34c3f4;_0x29e8b5[_0x2470cd]=_0x24939b[_0x34c3f4];}),__setModuleDefault=this&&this[a387_0x478090(0x158)]||(Object[a387_0x478090(0x15a)]?function(_0x4bcdd5,_0x395e2b){const _0x44975e=a387_0x478090;Object[_0x44975e(0x167)](_0x4bcdd5,'default',{'enumerable':!![],'value':_0x395e2b});}:function(_0x3730f4,_0x4f500f){const _0x3aee16=a387_0x478090;_0x3730f4[_0x3aee16(0x163)]=_0x4f500f;}),__importStar=this&&this['__importStar']||function(_0x20bd86){const _0x47b5c9=a387_0x478090;if(_0x20bd86&&_0x20bd86[_0x47b5c9(0x18d)])return _0x20bd86;var _0x53629b={};if(_0x20bd86!=null){for(var _0x292d41 in _0x20bd86)if(_0x292d41!==_0x47b5c9(0x163)&&Object['prototype'][_0x47b5c9(0x15e)][_0x47b5c9(0x15d)](_0x20bd86,_0x292d41))__createBinding(_0x53629b,_0x20bd86,_0x292d41);}return __setModuleDefault(_0x53629b,_0x20bd86),_0x53629b;},__importDefault=this&&this[a387_0x478090(0x187)]||function(_0x41f437){const _0x5efbcf=a387_0x478090;return _0x41f437&&_0x41f437[_0x5efbcf(0x18d)]?_0x41f437:{'default':_0x41f437};};Object[a387_0x478090(0x167)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require(a387_0x478090(0x17b))),AppError_1=__importDefault(require(a387_0x478090(0x181))),Company_1=__importDefault(require('../../models/Company')),User_1=__importDefault(require('../../models/User')),Setting_1=__importDefault(require(a387_0x478090(0x164))),CreateCompanyService=async _0x73c637=>{const _0x343275=a387_0x478090,{name:_0x46f631,phone:_0x55269f,email:_0x38611b,status:_0x5310ff,planId:_0x59ac2b,password:_0x211062,campaignsEnabled:_0x42c01a,dueDate:_0x1361aa,recurrence:_0x2e595f}=_0x73c637,_0x2d707d=Yup[_0x343275(0x173)]()['shape']({'name':Yup[_0x343275(0x15c)]()[_0x343275(0x168)](0x2,_0x343275(0x16d))['required'](_0x343275(0x16d))[_0x343275(0x159)](_0x343275(0x17f),'ERR_COMPANY_NAME_ALREADY_EXISTS',async _0x420b6f=>{const _0xaf86c2=_0x343275;if(_0x420b6f){const _0x2fe6ae=await Company_1[_0xaf86c2(0x163)]['findOne']({'where':{'name':_0x420b6f}});return!_0x2fe6ae;}return![];})});try{await _0x2d707d[_0x343275(0x182)]({'name':_0x46f631});}catch(_0x167e81){throw new AppError_1['default'](_0x167e81[_0x343275(0x189)]);}const _0x3d947a=await Company_1[_0x343275(0x163)]['create']({'name':_0x46f631,'phone':_0x55269f,'email':_0x38611b,'status':_0x5310ff,'planId':_0x59ac2b,'dueDate':_0x1361aa,'recurrence':_0x2e595f}),_0x57f01c=await User_1[_0x343275(0x163)][_0x343275(0x15a)]({'name':_0x3d947a[_0x343275(0x180)],'email':_0x3d947a['email'],'password':_0x73c637[_0x343275(0x15f)]||'mudar@123','profile':_0x343275(0x169),'companyId':_0x3d947a['id']});await Setting_1[_0x343275(0x163)]['findOrCreate']({'where':{'companyId':_0x3d947a['id'],'key':_0x343275(0x177)},'defaults':{'companyId':_0x3d947a['id'],'key':'asaas','value':''}}),await Setting_1[_0x343275(0x163)][_0x343275(0x172)]({'where':{'companyId':_0x3d947a['id'],'key':_0x343275(0x17c)},'defaults':{'companyId':_0x3d947a['id'],'key':_0x343275(0x17c),'value':''}}),await Setting_1[_0x343275(0x163)][_0x343275(0x172)]({'where':{'companyId':_0x3d947a['id'],'key':_0x343275(0x18f)},'defaults':{'companyId':_0x3d947a['id'],'key':_0x343275(0x18f),'value':''}}),await Setting_1[_0x343275(0x163)]['findOrCreate']({'where':{'companyId':_0x3d947a['id'],'key':_0x343275(0x166)},'defaults':{'companyId':_0x3d947a['id'],'key':_0x343275(0x166),'value':''}}),await Setting_1[_0x343275(0x163)][_0x343275(0x172)]({'where':{'companyId':_0x3d947a['id'],'key':'clientsecretmkauth'},'defaults':{'companyId':_0x3d947a['id'],'key':'clientsecretmkauth','value':''}}),await Setting_1[_0x343275(0x163)][_0x343275(0x172)]({'where':{'companyId':_0x3d947a['id'],'key':_0x343275(0x18a)},'defaults':{'companyId':_0x3d947a['id'],'key':_0x343275(0x18a),'value':''}}),await Setting_1[_0x343275(0x163)][_0x343275(0x172)]({'where':{'companyId':_0x3d947a['id'],'key':_0x343275(0x18e)},'defaults':{'companyId':_0x3d947a['id'],'key':_0x343275(0x17e),'value':''}}),await Setting_1[_0x343275(0x163)][_0x343275(0x172)]({'where':{'companyId':_0x3d947a['id'],'key':''},'defaults':{'companyId':_0x3d947a['id'],'key':_0x343275(0x15d),'value':_0x343275(0x16b)}}),await Setting_1[_0x343275(0x163)]['findOrCreate']({'where':{'companyId':_0x3d947a['id'],'key':'scheduleType'},'defaults':{'companyId':_0x3d947a['id'],'key':'scheduleType','value':_0x343275(0x16b)}}),await Setting_1[_0x343275(0x163)][_0x343275(0x172)]({'where':{'companyId':_0x3d947a['id'],'key':'sendGreetingAccepted'},'defaults':{'companyId':_0x3d947a['id'],'key':'sendGreetingAccepted','value':_0x343275(0x16b)}}),await Setting_1[_0x343275(0x163)][_0x343275(0x172)]({'where':{'companyId':_0x3d947a['id'],'key':_0x343275(0x175)},'defaults':{'companyId':_0x3d947a['id'],'key':_0x343275(0x175),'value':_0x343275(0x16b)}}),await Setting_1['default'][_0x343275(0x172)]({'where':{'companyId':_0x3d947a['id'],'key':_0x343275(0x186)},'defaults':{'companyId':_0x3d947a['id'],'key':_0x343275(0x186),'value':_0x343275(0x16b)}}),await Setting_1[_0x343275(0x163)][_0x343275(0x172)]({'where':{'companyId':_0x3d947a['id'],'key':_0x343275(0x174)},'defaults':{'companyId':_0x3d947a['id'],'key':_0x343275(0x174),'value':_0x343275(0x17d)}}),await Setting_1['default'][_0x343275(0x172)]({'where':{'companyId':_0x3d947a['id'],'key':_0x343275(0x179)},'defaults':{'companyId':_0x3d947a['id'],'key':'tokensgp','value':''}}),await Setting_1[_0x343275(0x163)][_0x343275(0x172)]({'where':{'companyId':_0x3d947a['id'],'key':_0x343275(0x178)},'defaults':{'companyId':_0x3d947a['id'],'key':_0x343275(0x178),'value':''}}),await Setting_1[_0x343275(0x163)][_0x343275(0x172)]({'where':{'companyId':_0x3d947a['id'],'key':_0x343275(0x185)},'defaults':{'companyId':_0x3d947a['id'],'key':_0x343275(0x185),'value':''}});if(_0x73c637[_0x343275(0x161)]!==undefined){const [_0x443d88,_0x3b9e5c]=await Setting_1[_0x343275(0x163)][_0x343275(0x172)]({'where':{'companyId':_0x3d947a['id'],'key':_0x343275(0x161)},'defaults':{'companyId':_0x3d947a['id'],'key':_0x343275(0x161),'value':''+_0x42c01a}});!_0x3b9e5c&&await _0x443d88[_0x343275(0x171)]({'value':''+_0x42c01a});}return _0x3d947a;};exports['default']=CreateCompanyService;