function a387_0x2d50(_0x50295f,_0x1e1e4e){const _0x3faf12=a387_0x30c6();return a387_0x2d50=function(_0x9ab2db,_0x4bda22){_0x9ab2db=_0x9ab2db-0xc6;let _0x30c60b=_0x3faf12[_0x9ab2db];return _0x30c60b;},a387_0x2d50(_0x50295f,_0x1e1e4e);}const a387_0x5e5afb=a387_0x2d50;(function(_0x498f1f,_0x155d4c){const _0x41788c=a387_0x2d50,_0x56e0d7=_0x498f1f();while(!![]){try{const _0xce4e44=-parseInt(_0x41788c(0xf8))/0x1+-parseInt(_0x41788c(0xe8))/0x2+parseInt(_0x41788c(0xdf))/0x3*(-parseInt(_0x41788c(0xd6))/0x4)+parseInt(_0x41788c(0xf7))/0x5*(parseInt(_0x41788c(0xec))/0x6)+parseInt(_0x41788c(0xde))/0x7+-parseInt(_0x41788c(0xcc))/0x8+parseInt(_0x41788c(0xf2))/0x9;if(_0xce4e44===_0x155d4c)break;else _0x56e0d7['push'](_0x56e0d7['shift']());}catch(_0x385a60){_0x56e0d7['push'](_0x56e0d7['shift']());}}}(a387_0x30c6,0x87447));const a387_0x4bda22=(function(){let _0x2fa22e=!![];return function(_0x5ba4b4,_0x4b406e){const _0x49d886=_0x2fa22e?function(){const _0xbe425b=a387_0x2d50;if(_0x4b406e){const _0x17310d=_0x4b406e[_0xbe425b(0xe6)](_0x5ba4b4,arguments);return _0x4b406e=null,_0x17310d;}}:function(){};return _0x2fa22e=![],_0x49d886;};}()),a387_0x9ab2db=a387_0x4bda22(this,function(){const _0x1c5fc6=a387_0x2d50;return a387_0x9ab2db[_0x1c5fc6(0xef)]()[_0x1c5fc6(0xdd)](_0x1c5fc6(0xd2))[_0x1c5fc6(0xef)]()['constructor'](a387_0x9ab2db)[_0x1c5fc6(0xdd)](_0x1c5fc6(0xd2));});a387_0x9ab2db();'use strict';var __createBinding=this&&this[a387_0x5e5afb(0xe7)]||(Object[a387_0x5e5afb(0xf5)]?function(_0xee39b6,_0x3876e5,_0x321880,_0x1a081c){const _0x3b296d=a387_0x5e5afb;if(_0x1a081c===undefined)_0x1a081c=_0x321880;var _0x33404d=Object[_0x3b296d(0xe2)](_0x3876e5,_0x321880);(!_0x33404d||(_0x3b296d(0xd0)in _0x33404d?!_0x3876e5[_0x3b296d(0xc8)]:_0x33404d['writable']||_0x33404d[_0x3b296d(0xc6)]))&&(_0x33404d={'enumerable':!![],'get':function(){return _0x3876e5[_0x321880];}}),Object[_0x3b296d(0xd1)](_0xee39b6,_0x1a081c,_0x33404d);}:function(_0x29f894,_0x1af373,_0x4a4adc,_0x190497){if(_0x190497===undefined)_0x190497=_0x4a4adc;_0x29f894[_0x190497]=_0x1af373[_0x4a4adc];}),__setModuleDefault=this&&this[a387_0x5e5afb(0xc9)]||(Object[a387_0x5e5afb(0xf5)]?function(_0x4610db,_0x28f849){const _0x24b774=a387_0x5e5afb;Object[_0x24b774(0xd1)](_0x4610db,_0x24b774(0xed),{'enumerable':!![],'value':_0x28f849});}:function(_0x3d3140,_0x9200b8){const _0x2940c0=a387_0x5e5afb;_0x3d3140[_0x2940c0(0xed)]=_0x9200b8;}),__importStar=this&&this[a387_0x5e5afb(0xea)]||function(_0x299a17){const _0x47cb63=a387_0x5e5afb;if(_0x299a17&&_0x299a17[_0x47cb63(0xc8)])return _0x299a17;var _0x25ec66={};if(_0x299a17!=null){for(var _0x363733 in _0x299a17)if(_0x363733!==_0x47cb63(0xed)&&Object[_0x47cb63(0xf1)][_0x47cb63(0x101)]['call'](_0x299a17,_0x363733))__createBinding(_0x25ec66,_0x299a17,_0x363733);}return __setModuleDefault(_0x25ec66,_0x299a17),_0x25ec66;},__importDefault=this&&this[a387_0x5e5afb(0xfa)]||function(_0x1d9d96){const _0x567c4f=a387_0x5e5afb;return _0x1d9d96&&_0x1d9d96[_0x567c4f(0xc8)]?_0x1d9d96:{'default':_0x1d9d96};};Object[a387_0x5e5afb(0xd1)](exports,'__esModule',{'value':!![]});const Yup=__importStar(require('yup')),AppError_1=__importDefault(require(a387_0x5e5afb(0xf3))),Company_1=__importDefault(require('../../models/Company')),User_1=__importDefault(require(a387_0x5e5afb(0xee))),Setting_1=__importDefault(require(a387_0x5e5afb(0xce))),CreateCompanyService=async _0x21a7b1=>{const _0x28f570=a387_0x5e5afb,{name:_0x57bf2f,phone:_0xa1733f,email:_0x562f8f,status:_0x4ba17c,planId:_0x50adf5,password:_0x19fbc3,campaignsEnabled:_0x22f4a7,dueDate:_0x4a076f,recurrence:_0x5e341c}=_0x21a7b1,_0x532a38=Yup['object']()[_0x28f570(0xcf)]({'name':Yup[_0x28f570(0xfd)]()[_0x28f570(0xc7)](0x2,'ERR_COMPANY_INVALID_NAME')[_0x28f570(0xdc)](_0x28f570(0xe5))['test']('Check-unique-name',_0x28f570(0xf9),async _0x29626a=>{const _0x8b0626=_0x28f570;if(_0x29626a){const _0x12ac3c=await Company_1[_0x8b0626(0xed)][_0x8b0626(0xcb)]({'where':{'name':_0x29626a}});return!_0x12ac3c;}return![];})});try{await _0x532a38[_0x28f570(0xe3)]({'name':_0x57bf2f});}catch(_0x20040d){throw new AppError_1[(_0x28f570(0xed))](_0x20040d[_0x28f570(0xd3)]);}const _0x14c401=await Company_1[_0x28f570(0xed)][_0x28f570(0xf5)]({'name':_0x57bf2f,'phone':_0xa1733f,'email':_0x562f8f,'status':_0x4ba17c,'planId':_0x50adf5,'dueDate':_0x4a076f,'recurrence':_0x5e341c}),_0x2ef4ee=await User_1[_0x28f570(0xed)][_0x28f570(0xf5)]({'name':_0x14c401[_0x28f570(0xe4)],'email':_0x14c401[_0x28f570(0xcd)],'password':_0x21a7b1[_0x28f570(0xf6)]||'mudar@123','profile':_0x28f570(0xfc),'companyId':_0x14c401['id']});await Setting_1['default'][_0x28f570(0x100)]({'where':{'companyId':_0x14c401['id'],'key':_0x28f570(0xfb)},'defaults':{'companyId':_0x14c401['id'],'key':'asaas','value':''}}),await Setting_1[_0x28f570(0xed)][_0x28f570(0x100)]({'where':{'companyId':_0x14c401['id'],'key':_0x28f570(0xeb)},'defaults':{'companyId':_0x14c401['id'],'key':_0x28f570(0xeb),'value':''}}),await Setting_1['default'][_0x28f570(0x100)]({'where':{'companyId':_0x14c401['id'],'key':_0x28f570(0xe1)},'defaults':{'companyId':_0x14c401['id'],'key':'ipixc','value':''}}),await Setting_1[_0x28f570(0xed)][_0x28f570(0x100)]({'where':{'companyId':_0x14c401['id'],'key':'ipmkauth'},'defaults':{'companyId':_0x14c401['id'],'key':_0x28f570(0xe9),'value':''}}),await Setting_1[_0x28f570(0xed)][_0x28f570(0x100)]({'where':{'companyId':_0x14c401['id'],'key':_0x28f570(0xca)},'defaults':{'companyId':_0x14c401['id'],'key':_0x28f570(0xca),'value':''}}),await Setting_1['default']['findOrCreate']({'where':{'companyId':_0x14c401['id'],'key':'clientidmkauth'},'defaults':{'companyId':_0x14c401['id'],'key':_0x28f570(0xd4),'value':''}}),await Setting_1['default'][_0x28f570(0x100)]({'where':{'companyId':_0x14c401['id'],'key':'CheckMsgIsGroup'},'defaults':{'companyId':_0x14c401['id'],'key':_0x28f570(0xd7),'value':''}}),await Setting_1['default'][_0x28f570(0x100)]({'where':{'companyId':_0x14c401['id'],'key':''},'defaults':{'companyId':_0x14c401['id'],'key':'call','value':_0x28f570(0xfe)}}),await Setting_1['default']['findOrCreate']({'where':{'companyId':_0x14c401['id'],'key':'scheduleType'},'defaults':{'companyId':_0x14c401['id'],'key':'scheduleType','value':'disabled'}}),await Setting_1['default'][_0x28f570(0x100)]({'where':{'companyId':_0x14c401['id'],'key':_0x28f570(0xff)},'defaults':{'companyId':_0x14c401['id'],'key':'sendGreetingAccepted','value':'disabled'}}),await Setting_1[_0x28f570(0xed)][_0x28f570(0x100)]({'where':{'companyId':_0x14c401['id'],'key':_0x28f570(0xf0)},'defaults':{'companyId':_0x14c401['id'],'key':_0x28f570(0xf0),'value':'disabled'}}),await Setting_1['default'][_0x28f570(0x100)]({'where':{'companyId':_0x14c401['id'],'key':'userRating'},'defaults':{'companyId':_0x14c401['id'],'key':_0x28f570(0xf4),'value':_0x28f570(0xfe)}}),await Setting_1['default'][_0x28f570(0x100)]({'where':{'companyId':_0x14c401['id'],'key':'chatBotType'},'defaults':{'companyId':_0x14c401['id'],'key':'chatBotType','value':_0x28f570(0xda)}}),await Setting_1[_0x28f570(0xed)]['findOrCreate']({'where':{'companyId':_0x14c401['id'],'key':_0x28f570(0xe0)},'defaults':{'companyId':_0x14c401['id'],'key':_0x28f570(0xe0),'value':''}}),await Setting_1['default']['findOrCreate']({'where':{'companyId':_0x14c401['id'],'key':_0x28f570(0xdb)},'defaults':{'companyId':_0x14c401['id'],'key':'ipsgp','value':''}}),await Setting_1[_0x28f570(0xed)]['findOrCreate']({'where':{'companyId':_0x14c401['id'],'key':_0x28f570(0xd9)},'defaults':{'companyId':_0x14c401['id'],'key':_0x28f570(0xd9),'value':''}});if(_0x21a7b1[_0x28f570(0xd5)]!==undefined){const [_0x29935f,_0x3087a5]=await Setting_1[_0x28f570(0xed)][_0x28f570(0x100)]({'where':{'companyId':_0x14c401['id'],'key':_0x28f570(0xd5)},'defaults':{'companyId':_0x14c401['id'],'key':_0x28f570(0xd5),'value':''+_0x22f4a7}});!_0x3087a5&&await _0x29935f[_0x28f570(0xd8)]({'value':''+_0x22f4a7});}return _0x14c401;};exports[a387_0x5e5afb(0xed)]=CreateCompanyService;function a387_0x30c6(){const _0x877fc9=['__createBinding','1901448qvjLTa','ipmkauth','__importStar','tokenixc','6rLMyHZ','default','../../models/User','toString','sendMsgTransfTicket','prototype','15579675GaZINA','../../errors/AppError','userRating','create','password','4347185uuaVNE','490039SiQSZf','ERR_COMPANY_NAME_ALREADY_EXISTS','__importDefault','asaas','admin','string','disabled','sendGreetingAccepted','findOrCreate','hasOwnProperty','configurable','min','__esModule','__setModuleDefault','clientsecretmkauth','findOne','3510488RlnreP','email','../../models/Setting','shape','get','defineProperty','(((.+)+)+)+$','message','clientidmkauth','campaignsEnabled','836jkzjyg','enabled','update','appsgp','text','ipsgp','required','search','5554304nWuNHT','13785ybJfdM','tokensgp','ipixc','getOwnPropertyDescriptor','validate','name','ERR_COMPANY_INVALID_NAME','apply'];a387_0x30c6=function(){return _0x877fc9;};return a387_0x30c6();}