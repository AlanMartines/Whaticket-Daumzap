function a525_0x4877(_0x4bede5,_0x1675eb){const _0x148dc8=a525_0x1920();return a525_0x4877=function(_0x15c78c,_0x26022f){_0x15c78c=_0x15c78c-0x1cb;let _0x1920d8=_0x148dc8[_0x15c78c];return _0x1920d8;},a525_0x4877(_0x4bede5,_0x1675eb);}const a525_0x36fae8=a525_0x4877;(function(_0x31071e,_0x2ef969){const _0x58a12d=a525_0x4877,_0x39057c=_0x31071e();while(!![]){try{const _0x3032fe=parseInt(_0x58a12d(0x1d9))/0x1+parseInt(_0x58a12d(0x1fc))/0x2*(-parseInt(_0x58a12d(0x200))/0x3)+-parseInt(_0x58a12d(0x1ed))/0x4+-parseInt(_0x58a12d(0x1e6))/0x5+-parseInt(_0x58a12d(0x1de))/0x6+-parseInt(_0x58a12d(0x1f5))/0x7*(parseInt(_0x58a12d(0x1f4))/0x8)+parseInt(_0x58a12d(0x1e3))/0x9*(parseInt(_0x58a12d(0x1cf))/0xa);if(_0x3032fe===_0x2ef969)break;else _0x39057c['push'](_0x39057c['shift']());}catch(_0x67f97a){_0x39057c['push'](_0x39057c['shift']());}}}(a525_0x1920,0xba5e7));const a525_0x26022f=(function(){let _0x21bd7e=!![];return function(_0x574867,_0x4d73a3){const _0x25be77=_0x21bd7e?function(){const _0x54c44c=a525_0x4877;if(_0x4d73a3){const _0xb6419=_0x4d73a3[_0x54c44c(0x1e4)](_0x574867,arguments);return _0x4d73a3=null,_0xb6419;}}:function(){};return _0x21bd7e=![],_0x25be77;};}()),a525_0x15c78c=a525_0x26022f(this,function(){const _0x1a0854=a525_0x4877;return a525_0x15c78c['toString']()[_0x1a0854(0x1fa)]('(((.+)+)+)+$')['toString']()['constructor'](a525_0x15c78c)[_0x1a0854(0x1fa)]('(((.+)+)+)+$');});a525_0x15c78c();'use strict';var __importDefault=this&&this[a525_0x36fae8(0x1f1)]||function(_0x4832bd){const _0x3b294f=a525_0x36fae8;return _0x4832bd&&_0x4832bd[_0x3b294f(0x1d7)]?_0x4832bd:{'default':_0x4832bd};};Object[a525_0x36fae8(0x1f6)](exports,a525_0x36fae8(0x1d7),{'value':!![]});const sequelize_1=require(a525_0x36fae8(0x1e7)),date_fns_1=require('date-fns'),Ticket_1=__importDefault(require(a525_0x36fae8(0x1fb))),Contact_1=__importDefault(require(a525_0x36fae8(0x1f9))),Message_1=__importDefault(require(a525_0x36fae8(0x1d3))),Queue_1=__importDefault(require('../../models/Queue')),User_1=__importDefault(require(a525_0x36fae8(0x1ff))),ShowUserService_1=__importDefault(require(a525_0x36fae8(0x1e2))),Tag_1=__importDefault(require('../../models/Tag')),TicketTag_1=__importDefault(require(a525_0x36fae8(0x1db))),lodash_1=require('lodash'),Whatsapp_1=__importDefault(require(a525_0x36fae8(0x1ea))),ListTicketsServiceKanban=async({searchParam:searchParam='',pageNumber:pageNumber='1',queueIds:_0x4dff00,tags:_0xf44ea9,users:_0x2dddd5,status:_0x45406b,date:_0x2393e8,updatedAt:_0x5e970d,showAll:_0x15ac18,userId:_0x2b2625,withUnreadMessages:_0x2b5e51,companyId:_0x55cbb4})=>{const _0x226e35=a525_0x36fae8;let _0x50ad2b={[sequelize_1['Op']['or']]:[{'userId':_0x2b2625},{'status':_0x226e35(0x204)}],'queueId':{[sequelize_1['Op']['or']]:[_0x4dff00,null]}},_0x11a4e4;_0x11a4e4=[{'model':Contact_1['default'],'as':_0x226e35(0x1e9),'attributes':['id',_0x226e35(0x201),_0x226e35(0x1f7),_0x226e35(0x1d1),_0x226e35(0x1d8)]},{'model':Queue_1[_0x226e35(0x1fd)],'as':_0x226e35(0x1e0),'attributes':['id',_0x226e35(0x201),_0x226e35(0x1dd)]},{'model':User_1['default'],'as':_0x226e35(0x1f3),'attributes':['id',_0x226e35(0x201)]},{'model':Tag_1['default'],'as':_0x226e35(0x1cd),'attributes':['id',_0x226e35(0x201),_0x226e35(0x1dd)]},{'model':Whatsapp_1[_0x226e35(0x1fd)],'as':_0x226e35(0x1d6),'attributes':[_0x226e35(0x201)]}];_0x15ac18===_0x226e35(0x203)&&(_0x50ad2b={'queueId':{[sequelize_1['Op']['or']]:[_0x4dff00,null]},'userId':_0x2b2625});_0x50ad2b={..._0x50ad2b,'status':{[sequelize_1['Op']['or']]:[_0x226e35(0x204),_0x226e35(0x1cb)]}};if(searchParam){const _0x3f029a=searchParam[_0x226e35(0x1f0)]()['trim']();_0x11a4e4=[..._0x11a4e4,{'model':Message_1[_0x226e35(0x1fd)],'as':_0x226e35(0x1fe),'attributes':['id',_0x226e35(0x1e5)],'where':{'body':(0x0,sequelize_1[_0x226e35(0x1d2)])((0x0,sequelize_1['fn'])(_0x226e35(0x1ec),(0x0,sequelize_1['col'])('body')),_0x226e35(0x1d5),'%'+_0x3f029a+'%')},'required':![],'duplicating':![]}],_0x50ad2b={..._0x50ad2b,[sequelize_1['Op']['or']]:[{'$contact.name$':(0x0,sequelize_1[_0x226e35(0x1d2)])((0x0,sequelize_1['fn'])(_0x226e35(0x1ec),(0x0,sequelize_1[_0x226e35(0x1ce)])(_0x226e35(0x1ef))),_0x226e35(0x1d5),'%'+_0x3f029a+'%')},{'$contact.number$':{[sequelize_1['Op'][_0x226e35(0x1dc)]]:'%'+_0x3f029a+'%'}},{'$message.body$':(0x0,sequelize_1[_0x226e35(0x1d2)])((0x0,sequelize_1['fn'])(_0x226e35(0x1ec),(0x0,sequelize_1[_0x226e35(0x1ce)])('body')),_0x226e35(0x1d5),'%'+_0x3f029a+'%')}]};}_0x2393e8&&(_0x50ad2b={'createdAt':{[sequelize_1['Op'][_0x226e35(0x1e1)]]:[+(0x0,date_fns_1[_0x226e35(0x1f8)])((0x0,date_fns_1[_0x226e35(0x1df)])(_0x2393e8)),+(0x0,date_fns_1['endOfDay'])((0x0,date_fns_1[_0x226e35(0x1df)])(_0x2393e8))]}});_0x5e970d&&(_0x50ad2b={'updatedAt':{[sequelize_1['Op'][_0x226e35(0x1e1)]]:[+(0x0,date_fns_1[_0x226e35(0x1f8)])((0x0,date_fns_1[_0x226e35(0x1df)])(_0x5e970d)),+(0x0,date_fns_1[_0x226e35(0x1eb)])((0x0,date_fns_1[_0x226e35(0x1df)])(_0x5e970d))]}});if(_0x2b5e51===_0x226e35(0x203)){const _0x4956b8=await(0x0,ShowUserService_1[_0x226e35(0x1fd)])(_0x2b2625),_0x5d2aef=_0x4956b8[_0x226e35(0x1e8)][_0x226e35(0x1cc)](_0xf3a200=>_0xf3a200['id']);_0x50ad2b={[sequelize_1['Op']['or']]:[{'userId':_0x2b2625},{'status':_0x226e35(0x204)}],'queueId':{[sequelize_1['Op']['or']]:[_0x5d2aef,null]},'unreadMessages':{[sequelize_1['Op']['gt']]:0x0}};}if(Array['isArray'](_0xf44ea9)&&_0xf44ea9['length']>0x0){const _0x27e565=[];for(let _0x90d293 of _0xf44ea9){const _0x1ca012=await TicketTag_1['default'][_0x226e35(0x205)]({'where':{'tagId':_0x90d293}});_0x1ca012&&_0x27e565[_0x226e35(0x1d4)](_0x1ca012[_0x226e35(0x1cc)](_0x585b14=>_0x585b14[_0x226e35(0x1ee)]));}const _0x315618=(0x0,lodash_1[_0x226e35(0x1da)])(..._0x27e565);_0x50ad2b={..._0x50ad2b,'id':{[sequelize_1['Op']['in']]:_0x315618}};}if(Array[_0x226e35(0x202)](_0x2dddd5)&&_0x2dddd5[_0x226e35(0x1d0)]>0x0){const _0x3b7135=[];for(let _0x1580e5 of _0x2dddd5){const _0x2ea3eb=await Ticket_1[_0x226e35(0x1fd)][_0x226e35(0x205)]({'where':{'userId':_0x1580e5}});_0x2ea3eb&&_0x3b7135['push'](_0x2ea3eb[_0x226e35(0x1cc)](_0x1f7e6e=>_0x1f7e6e['id']));}const _0x508d77=(0x0,lodash_1[_0x226e35(0x1da)])(..._0x3b7135);_0x50ad2b={..._0x50ad2b,'id':{[sequelize_1['Op']['in']]:_0x508d77}};}const _0xaf896a=0x28,_0x456b9d=_0xaf896a*(+pageNumber-0x1);_0x50ad2b={..._0x50ad2b,'companyId':_0x55cbb4};const {count:_0x5da28e,rows:_0x3cf37e}=await Ticket_1[_0x226e35(0x1fd)][_0x226e35(0x1f2)]({'where':_0x50ad2b,'include':_0x11a4e4,'distinct':!![],'limit':_0xaf896a,'offset':_0x456b9d,'order':[['updatedAt','DESC']],'subQuery':![]}),_0x3028ec=_0x5da28e>_0x456b9d+_0x3cf37e[_0x226e35(0x1d0)];return{'tickets':_0x3cf37e,'count':_0x5da28e,'hasMore':_0x3028ec};};exports[a525_0x36fae8(0x1fd)]=ListTicketsServiceKanban;function a525_0x1920(){const _0x4ed3cd=['../../models/User','27RvgPrX','name','isArray','true','pending','findAll','open','map','tags','col','270ULoluA','length','email','where','../../models/Message','push','LIKE','whatsapp','__esModule','presence','1421553EuKNie','intersection','../../models/TicketTag','like','color','2394720ZCCSMk','parseISO','queue','between','../UserServices/ShowUserService','684729VhLDni','apply','body','908455gSztvu','sequelize','queues','contact','../../models/Whatsapp','endOfDay','LOWER','9088FIpJOo','ticketId','contact.name','toLocaleLowerCase','__importDefault','findAndCountAll','user','7400648LDaXmd','7FUwMAX','defineProperty','number','startOfDay','../../models/Contact','search','../../models/Ticket','267602GdRGvV','default','messages'];a525_0x1920=function(){return _0x4ed3cd;};return a525_0x1920();}