function a525_0x4e58(_0x5d53d2,_0xf13de9){const _0xc2233c=a525_0x4fd3();return a525_0x4e58=function(_0x16ab39,_0x187cbc){_0x16ab39=_0x16ab39-0x7f;let _0x4fd3b6=_0xc2233c[_0x16ab39];return _0x4fd3b6;},a525_0x4e58(_0x5d53d2,_0xf13de9);}const a525_0x2a624d=a525_0x4e58;(function(_0x554df6,_0x438da2){const _0x1f008f=a525_0x4e58,_0x51510f=_0x554df6();while(!![]){try{const _0x75bbb7=parseInt(_0x1f008f(0xa1))/0x1+parseInt(_0x1f008f(0xa0))/0x2+-parseInt(_0x1f008f(0x82))/0x3*(-parseInt(_0x1f008f(0x7f))/0x4)+-parseInt(_0x1f008f(0x9b))/0x5+-parseInt(_0x1f008f(0xb2))/0x6*(-parseInt(_0x1f008f(0xb0))/0x7)+parseInt(_0x1f008f(0x93))/0x8+-parseInt(_0x1f008f(0x97))/0x9;if(_0x75bbb7===_0x438da2)break;else _0x51510f['push'](_0x51510f['shift']());}catch(_0x4df540){_0x51510f['push'](_0x51510f['shift']());}}}(a525_0x4fd3,0x6f925));const a525_0x187cbc=(function(){let _0x299add=!![];return function(_0x30c42d,_0x5a215b){const _0x30513d=_0x299add?function(){const _0x122955=a525_0x4e58;if(_0x5a215b){const _0x4b4a59=_0x5a215b[_0x122955(0x83)](_0x30c42d,arguments);return _0x5a215b=null,_0x4b4a59;}}:function(){};return _0x299add=![],_0x30513d;};}()),a525_0x16ab39=a525_0x187cbc(this,function(){const _0x44b499=a525_0x4e58;return a525_0x16ab39['toString']()[_0x44b499(0x98)](_0x44b499(0x8d))[_0x44b499(0xaa)]()['constructor'](a525_0x16ab39)[_0x44b499(0x98)](_0x44b499(0x8d));});a525_0x16ab39();'use strict';var __importDefault=this&&this[a525_0x2a624d(0x9c)]||function(_0x5d3414){const _0x1c7d10=a525_0x2a624d;return _0x5d3414&&_0x5d3414[_0x1c7d10(0x84)]?_0x5d3414:{'default':_0x5d3414};};Object[a525_0x2a624d(0xab)](exports,'__esModule',{'value':!![]});const sequelize_1=require('sequelize'),date_fns_1=require(a525_0x2a624d(0xa2)),Ticket_1=__importDefault(require('../../models/Ticket')),Contact_1=__importDefault(require(a525_0x2a624d(0xac))),Message_1=__importDefault(require('../../models/Message')),Queue_1=__importDefault(require(a525_0x2a624d(0x95))),User_1=__importDefault(require(a525_0x2a624d(0x80))),ShowUserService_1=__importDefault(require(a525_0x2a624d(0x94))),Tag_1=__importDefault(require(a525_0x2a624d(0x8f))),TicketTag_1=__importDefault(require(a525_0x2a624d(0x87))),lodash_1=require(a525_0x2a624d(0x91)),Whatsapp_1=__importDefault(require('../../models/Whatsapp')),ListTicketsServiceKanban=async({searchParam:searchParam='',pageNumber:pageNumber='1',queueIds:_0x1ee9df,tags:_0x20f23d,users:_0x2426fe,status:_0x6a6e4,date:_0x3226ba,updatedAt:_0x21a2c3,showAll:_0x32d4a4,userId:_0x1bba8b,withUnreadMessages:_0x4ec9ab,companyId:_0x169b04})=>{const _0x1d9e71=a525_0x2a624d;let _0x3653dc={[sequelize_1['Op']['or']]:[{'userId':_0x1bba8b},{'status':_0x1d9e71(0x90)}],'queueId':{[sequelize_1['Op']['or']]:[_0x1ee9df,null]}},_0x5da667;_0x5da667=[{'model':Contact_1[_0x1d9e71(0xa8)],'as':_0x1d9e71(0xa9),'attributes':['id',_0x1d9e71(0x9d),_0x1d9e71(0xa7),_0x1d9e71(0x88),_0x1d9e71(0x9f)]},{'model':Queue_1[_0x1d9e71(0xa8)],'as':_0x1d9e71(0xad),'attributes':['id','name',_0x1d9e71(0xb7)]},{'model':User_1[_0x1d9e71(0xa8)],'as':_0x1d9e71(0x92),'attributes':['id','name']},{'model':Tag_1[_0x1d9e71(0xa8)],'as':'tags','attributes':['id',_0x1d9e71(0x9d),'color']},{'model':Whatsapp_1[_0x1d9e71(0xa8)],'as':_0x1d9e71(0xa6),'attributes':[_0x1d9e71(0x9d)]}];_0x32d4a4===_0x1d9e71(0xb6)&&(_0x3653dc={'queueId':{[sequelize_1['Op']['or']]:[_0x1ee9df,null]},'userId':_0x1bba8b});_0x3653dc={..._0x3653dc,'status':{[sequelize_1['Op']['or']]:[_0x1d9e71(0x90),'open']}};if(searchParam){const _0x14b781=searchParam[_0x1d9e71(0x85)]()[_0x1d9e71(0x86)]();_0x5da667=[..._0x5da667,{'model':Message_1[_0x1d9e71(0xa8)],'as':_0x1d9e71(0x8e),'attributes':['id','body'],'where':{'body':(0x0,sequelize_1[_0x1d9e71(0x9e)])((0x0,sequelize_1['fn'])(_0x1d9e71(0xa5),(0x0,sequelize_1[_0x1d9e71(0x96)])('body')),'LIKE','%'+_0x14b781+'%')},'required':![],'duplicating':![]}],_0x3653dc={..._0x3653dc,[sequelize_1['Op']['or']]:[{'$contact.name$':(0x0,sequelize_1[_0x1d9e71(0x9e)])((0x0,sequelize_1['fn'])(_0x1d9e71(0xa5),(0x0,sequelize_1[_0x1d9e71(0x96)])(_0x1d9e71(0xae))),_0x1d9e71(0xb1),'%'+_0x14b781+'%')},{'$contact.number$':{[sequelize_1['Op'][_0x1d9e71(0xa4)]]:'%'+_0x14b781+'%'}},{'$message.body$':(0x0,sequelize_1[_0x1d9e71(0x9e)])((0x0,sequelize_1['fn'])(_0x1d9e71(0xa5),(0x0,sequelize_1[_0x1d9e71(0x96)])('body')),_0x1d9e71(0xb1),'%'+_0x14b781+'%')}]};}_0x3226ba&&(_0x3653dc={'createdAt':{[sequelize_1['Op']['between']]:[+(0x0,date_fns_1[_0x1d9e71(0xaf)])((0x0,date_fns_1['parseISO'])(_0x3226ba)),+(0x0,date_fns_1[_0x1d9e71(0xb5)])((0x0,date_fns_1['parseISO'])(_0x3226ba))]}});_0x21a2c3&&(_0x3653dc={'updatedAt':{[sequelize_1['Op'][_0x1d9e71(0x99)]]:[+(0x0,date_fns_1[_0x1d9e71(0xaf)])((0x0,date_fns_1[_0x1d9e71(0x81)])(_0x21a2c3)),+(0x0,date_fns_1[_0x1d9e71(0xb5)])((0x0,date_fns_1[_0x1d9e71(0x81)])(_0x21a2c3))]}});if(_0x4ec9ab===_0x1d9e71(0xb6)){const _0x4f594d=await(0x0,ShowUserService_1[_0x1d9e71(0xa8)])(_0x1bba8b),_0x46cbb6=_0x4f594d[_0x1d9e71(0x89)][_0x1d9e71(0xb4)](_0x3542b5=>_0x3542b5['id']);_0x3653dc={[sequelize_1['Op']['or']]:[{'userId':_0x1bba8b},{'status':_0x1d9e71(0x90)}],'queueId':{[sequelize_1['Op']['or']]:[_0x46cbb6,null]},'unreadMessages':{[sequelize_1['Op']['gt']]:0x0}};}if(Array['isArray'](_0x20f23d)&&_0x20f23d[_0x1d9e71(0x8c)]>0x0){const _0x152061=[];for(let _0x3d4919 of _0x20f23d){const _0x44a25a=await TicketTag_1['default'][_0x1d9e71(0x8b)]({'where':{'tagId':_0x3d4919}});_0x44a25a&&_0x152061[_0x1d9e71(0x9a)](_0x44a25a[_0x1d9e71(0xb4)](_0x5c565e=>_0x5c565e['ticketId']));}const _0x3bfe4f=(0x0,lodash_1['intersection'])(..._0x152061);_0x3653dc={..._0x3653dc,'id':{[sequelize_1['Op']['in']]:_0x3bfe4f}};}if(Array[_0x1d9e71(0xa3)](_0x2426fe)&&_0x2426fe[_0x1d9e71(0x8c)]>0x0){const _0x540798=[];for(let _0x12e902 of _0x2426fe){const _0x116754=await Ticket_1[_0x1d9e71(0xa8)][_0x1d9e71(0x8b)]({'where':{'userId':_0x12e902}});_0x116754&&_0x540798['push'](_0x116754[_0x1d9e71(0xb4)](_0x190e86=>_0x190e86['id']));}const _0x4cf6ff=(0x0,lodash_1['intersection'])(..._0x540798);_0x3653dc={..._0x3653dc,'id':{[sequelize_1['Op']['in']]:_0x4cf6ff}};}const _0x2c4f51=0x28,_0x12e419=_0x2c4f51*(+pageNumber-0x1);_0x3653dc={..._0x3653dc,'companyId':_0x169b04};const {count:_0x12d308,rows:_0x531e2c}=await Ticket_1[_0x1d9e71(0xa8)][_0x1d9e71(0xb3)]({'where':_0x3653dc,'include':_0x5da667,'distinct':!![],'limit':_0x2c4f51,'offset':_0x12e419,'order':[['updatedAt',_0x1d9e71(0x8a)]],'subQuery':![]}),_0x1c6d27=_0x12d308>_0x12e419+_0x531e2c['length'];return{'tickets':_0x531e2c,'count':_0x12d308,'hasMore':_0x1c6d27};};exports[a525_0x2a624d(0xa8)]=ListTicketsServiceKanban;function a525_0x4fd3(){const _0x26dce9=['push','4277645WBHVHo','__importDefault','name','where','presence','1716666VfGDwy','381037FwsbzA','date-fns','isArray','like','LOWER','whatsapp','number','default','contact','toString','defineProperty','../../models/Contact','queue','contact.name','startOfDay','756OAVlQg','LIKE','15534GhjFwH','findAndCountAll','map','endOfDay','true','color','1356wtqRjL','../../models/User','parseISO','6618jhiLEF','apply','__esModule','toLocaleLowerCase','trim','../../models/TicketTag','email','queues','DESC','findAll','length','(((.+)+)+)+$','messages','../../models/Tag','pending','lodash','user','7158272yVwDKC','../UserServices/ShowUserService','../../models/Queue','col','16641666XGdYpO','search','between'];a525_0x4fd3=function(){return _0x26dce9;};return a525_0x4fd3();}