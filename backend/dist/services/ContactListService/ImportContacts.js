const a408_0x1fed93=a408_0x1b3a;(function(_0x1264b5,_0x1430f9){const _0x323d36=a408_0x1b3a,_0x5c7dcb=_0x1264b5();while(!![]){try{const _0x179a6d=-parseInt(_0x323d36(0xc4))/0x1+-parseInt(_0x323d36(0xad))/0x2*(-parseInt(_0x323d36(0xb2))/0x3)+parseInt(_0x323d36(0xa0))/0x4+parseInt(_0x323d36(0xa8))/0x5*(parseInt(_0x323d36(0xbc))/0x6)+-parseInt(_0x323d36(0xab))/0x7*(parseInt(_0x323d36(0x99))/0x8)+-parseInt(_0x323d36(0xbb))/0x9*(parseInt(_0x323d36(0xa6))/0xa)+parseInt(_0x323d36(0xc3))/0xb;if(_0x179a6d===_0x1430f9)break;else _0x5c7dcb['push'](_0x5c7dcb['shift']());}catch(_0x5e2d82){_0x5c7dcb['push'](_0x5c7dcb['shift']());}}}(a408_0x2b09,0xa7931));const a408_0x40f3ed=(function(){let _0x143ada=!![];return function(_0x445b83,_0x16b53b){const _0x24c0f2=_0x143ada?function(){const _0x422e10=a408_0x1b3a;if(_0x16b53b){const _0x573205=_0x16b53b[_0x422e10(0xa2)](_0x445b83,arguments);return _0x16b53b=null,_0x573205;}}:function(){};return _0x143ada=![],_0x24c0f2;};}()),a408_0x12cbb4=a408_0x40f3ed(this,function(){const _0x2e2393=a408_0x1b3a;return a408_0x12cbb4[_0x2e2393(0xc6)]()[_0x2e2393(0xa5)](_0x2e2393(0xb4))[_0x2e2393(0xc6)]()[_0x2e2393(0xae)](a408_0x12cbb4)[_0x2e2393(0xa5)](_0x2e2393(0xb4));});function a408_0x1b3a(_0x24eb87,_0x121b17){const _0x18b320=a408_0x2b09();return a408_0x1b3a=function(_0x12cbb4,_0x40f3ed){_0x12cbb4=_0x12cbb4-0x98;let _0x2b097f=_0x18b320[_0x12cbb4];return _0x2b097f;},a408_0x1b3a(_0x24eb87,_0x121b17);}a408_0x12cbb4();'use strict';var __importDefault=this&&this[a408_0x1fed93(0xbd)]||function(_0x1dea1b){return _0x1dea1b&&_0x1dea1b['__esModule']?_0x1dea1b:{'default':_0x1dea1b};};Object['defineProperty'](exports,a408_0x1fed93(0xc0),{'value':!![]}),exports['ImportContacts']=void 0x0;function a408_0x2b09(){const _0x37b70a=['../WbotServices/CheckNumber','default','__esModule','lodash','e-mail','15492114ImjwVT','1079593sqBSyr','sheet_to_json','toString','head','24URyqDN','../../models/ContactListItem','push','readFile','numero','Número\x20de\x20contato\x20inválido:\x20','exists','5342540kDcvMa','Numero','apply','nome','Sheets','search','20UPzKvl','jid','3159190ypNCeX','has','number','2860739ZQlZdW','values','960970TzCfbW','constructor','E-mail','replace','número','6UqIIgP','findOrCreate','(((.+)+)+)+$','logger','Nome','xlsx','error','path','ImportContacts','6051636JViyou','6rYHusj','__importDefault'];a408_0x2b09=function(){return _0x37b70a;};return a408_0x2b09();}const lodash_1=require(a408_0x1fed93(0xc1)),xlsx_1=__importDefault(require(a408_0x1fed93(0xb7))),lodash_2=require(a408_0x1fed93(0xc1)),ContactListItem_1=__importDefault(require(a408_0x1fed93(0x9a))),CheckNumber_1=__importDefault(require(a408_0x1fed93(0xbe))),logger_1=require('../../utils/logger');async function ImportContacts(_0x44eb37,_0x54ddce,_0x23fa0e){const _0x5b0de5=a408_0x1fed93,_0x5baa98=xlsx_1[_0x5b0de5(0xbf)][_0x5b0de5(0x9c)](_0x23fa0e?.[_0x5b0de5(0xb9)]),_0xa273ea=(0x0,lodash_1[_0x5b0de5(0x98)])(Object[_0x5b0de5(0xac)](_0x5baa98[_0x5b0de5(0xa4)])),_0x3f4177=xlsx_1['default']['utils'][_0x5b0de5(0xc5)](_0xa273ea,{'header':0x0}),_0x3813b7=_0x3f4177['map'](_0x21a0e9=>{const _0x3cbe42=_0x5b0de5;let _0x2c7755='',_0x561d62='',_0x3a5ccb='';return((0x0,lodash_2[_0x3cbe42(0xa9)])(_0x21a0e9,_0x3cbe42(0xa3))||(0x0,lodash_2['has'])(_0x21a0e9,_0x3cbe42(0xb6)))&&(_0x2c7755=_0x21a0e9[_0x3cbe42(0xa3)]||_0x21a0e9['Nome']),((0x0,lodash_2[_0x3cbe42(0xa9)])(_0x21a0e9,_0x3cbe42(0x9d))||(0x0,lodash_2[_0x3cbe42(0xa9)])(_0x21a0e9,_0x3cbe42(0xb1))||(0x0,lodash_2[_0x3cbe42(0xa9)])(_0x21a0e9,_0x3cbe42(0xa1))||(0x0,lodash_2[_0x3cbe42(0xa9)])(_0x21a0e9,'Número'))&&(_0x561d62=_0x21a0e9['numero']||_0x21a0e9[_0x3cbe42(0xb1)]||_0x21a0e9[_0x3cbe42(0xa1)]||_0x21a0e9['Número'],_0x561d62=(''+_0x561d62)[_0x3cbe42(0xb0)](/\D/g,'')),((0x0,lodash_2[_0x3cbe42(0xa9)])(_0x21a0e9,'email')||(0x0,lodash_2[_0x3cbe42(0xa9)])(_0x21a0e9,_0x3cbe42(0xc2))||(0x0,lodash_2[_0x3cbe42(0xa9)])(_0x21a0e9,'Email')||(0x0,lodash_2[_0x3cbe42(0xa9)])(_0x21a0e9,_0x3cbe42(0xaf)))&&(_0x3a5ccb=_0x21a0e9['email']||_0x21a0e9['e-mail']||_0x21a0e9['Email']||_0x21a0e9[_0x3cbe42(0xaf)]),{'name':_0x2c7755,'number':_0x561d62,'email':_0x3a5ccb,'contactListId':_0x44eb37,'companyId':_0x54ddce};}),_0x416920=[];for(const _0xecceff of _0x3813b7){const [_0x214c28,_0x567858]=await ContactListItem_1['default'][_0x5b0de5(0xb3)]({'where':{'number':''+_0xecceff[_0x5b0de5(0xaa)],'contactListId':_0xecceff['contactListId'],'companyId':_0xecceff['companyId']},'defaults':_0xecceff});_0x567858&&_0x416920[_0x5b0de5(0x9b)](_0x214c28);}if(_0x416920)for(let _0x3037ba of _0x416920){try{const _0x279bc5=await(0x0,CheckNumber_1[_0x5b0de5(0xbf)])(_0x3037ba[_0x5b0de5(0xaa)],_0x54ddce);_0x3037ba['isWhatsappValid']=_0x279bc5[_0x5b0de5(0x9f)];const _0x36f97a=_0x279bc5[_0x5b0de5(0xa7)]['replace'](/\D/g,'');_0x3037ba[_0x5b0de5(0xaa)]=_0x36f97a,await _0x3037ba['save']();}catch(_0x3129f1){logger_1[_0x5b0de5(0xb5)][_0x5b0de5(0xb8)](_0x5b0de5(0x9e)+_0x3037ba[_0x5b0de5(0xaa)]);}}return _0x416920;}exports[a408_0x1fed93(0xba)]=ImportContacts;