const a408_0x30a129=a408_0x4d9f;(function(_0x1c9aba,_0x38326e){const _0x1be572=a408_0x4d9f,_0x43c243=_0x1c9aba();while(!![]){try{const _0x1df2d2=-parseInt(_0x1be572(0x1df))/0x1*(-parseInt(_0x1be572(0x1ed))/0x2)+-parseInt(_0x1be572(0x1d3))/0x3+parseInt(_0x1be572(0x1da))/0x4*(parseInt(_0x1be572(0x1fc))/0x5)+-parseInt(_0x1be572(0x1db))/0x6*(-parseInt(_0x1be572(0x1e9))/0x7)+parseInt(_0x1be572(0x1e3))/0x8*(-parseInt(_0x1be572(0x1f4))/0x9)+-parseInt(_0x1be572(0x201))/0xa+parseInt(_0x1be572(0x1ec))/0xb;if(_0x1df2d2===_0x38326e)break;else _0x43c243['push'](_0x43c243['shift']());}catch(_0xf6766c){_0x43c243['push'](_0x43c243['shift']());}}}(a408_0x2089,0x6e376));function a408_0x2089(){const _0x5902b4=['sheet_to_json','número','85533PqiPAN','lodash','map','15380937yAlizD','344KxinPp','values','apply','readFile','../../models/ContactListItem','path','numero','9ihRUoT','search','head','default','save','has','constructor','(((.+)+)+)+$','598065hwApIi','defineProperty','jid','Número\x20de\x20contato\x20inválido:\x20','E-mail','6981860jiOrET','Email','__importDefault','2195652eiudEU','toString','email','nome','push','logger','__esModule','12rTomCA','186zpOmBz','number','e-mail','companyId','1039XKwRnJ','Numero','utils','Nome','3464696DygYXH','Número','isWhatsappValid','xlsx'];a408_0x2089=function(){return _0x5902b4;};return a408_0x2089();}const a408_0x5f30fa=(function(){let _0x486781=!![];return function(_0x29255d,_0x5fa016){const _0x58c890=_0x486781?function(){const _0x2c91e6=a408_0x4d9f;if(_0x5fa016){const _0x346086=_0x5fa016[_0x2c91e6(0x1ef)](_0x29255d,arguments);return _0x5fa016=null,_0x346086;}}:function(){};return _0x486781=![],_0x58c890;};}()),a408_0x1fa1bf=a408_0x5f30fa(this,function(){const _0x94ace1=a408_0x4d9f;return a408_0x1fa1bf[_0x94ace1(0x1d4)]()[_0x94ace1(0x1f5)](_0x94ace1(0x1fb))[_0x94ace1(0x1d4)]()[_0x94ace1(0x1fa)](a408_0x1fa1bf)[_0x94ace1(0x1f5)](_0x94ace1(0x1fb));});a408_0x1fa1bf();'use strict';function a408_0x4d9f(_0x377915,_0x4207c4){const _0x4dcd92=a408_0x2089();return a408_0x4d9f=function(_0x1fa1bf,_0x5f30fa){_0x1fa1bf=_0x1fa1bf-0x1d2;let _0x2089fa=_0x4dcd92[_0x1fa1bf];return _0x2089fa;},a408_0x4d9f(_0x377915,_0x4207c4);}var __importDefault=this&&this[a408_0x30a129(0x1d2)]||function(_0x1db111){const _0x1430d9=a408_0x30a129;return _0x1db111&&_0x1db111[_0x1430d9(0x1d9)]?_0x1db111:{'default':_0x1db111};};Object[a408_0x30a129(0x1fd)](exports,a408_0x30a129(0x1d9),{'value':!![]}),exports['ImportContacts']=void 0x0;const lodash_1=require('lodash'),xlsx_1=__importDefault(require(a408_0x30a129(0x1e6))),lodash_2=require(a408_0x30a129(0x1ea)),ContactListItem_1=__importDefault(require(a408_0x30a129(0x1f1))),CheckNumber_1=__importDefault(require('../WbotServices/CheckNumber')),logger_1=require('../../utils/logger');async function ImportContacts(_0x49339b,_0x58364a,_0x1d1cb8){const _0x5ad76e=a408_0x30a129,_0x16d9d5=xlsx_1[_0x5ad76e(0x1f7)][_0x5ad76e(0x1f0)](_0x1d1cb8?.[_0x5ad76e(0x1f2)]),_0xc19b76=(0x0,lodash_1[_0x5ad76e(0x1f6)])(Object[_0x5ad76e(0x1ee)](_0x16d9d5['Sheets'])),_0x33ccc8=xlsx_1[_0x5ad76e(0x1f7)][_0x5ad76e(0x1e1)][_0x5ad76e(0x1e7)](_0xc19b76,{'header':0x0}),_0x1889cf=_0x33ccc8[_0x5ad76e(0x1eb)](_0x1e90a8=>{const _0x160ebc=_0x5ad76e;let _0x28b977='',_0x2b109c='',_0x2ee361='';return((0x0,lodash_2[_0x160ebc(0x1f9)])(_0x1e90a8,_0x160ebc(0x1d6))||(0x0,lodash_2[_0x160ebc(0x1f9)])(_0x1e90a8,_0x160ebc(0x1e2)))&&(_0x28b977=_0x1e90a8[_0x160ebc(0x1d6)]||_0x1e90a8[_0x160ebc(0x1e2)]),((0x0,lodash_2[_0x160ebc(0x1f9)])(_0x1e90a8,_0x160ebc(0x1f3))||(0x0,lodash_2[_0x160ebc(0x1f9)])(_0x1e90a8,_0x160ebc(0x1e8))||(0x0,lodash_2[_0x160ebc(0x1f9)])(_0x1e90a8,_0x160ebc(0x1e0))||(0x0,lodash_2['has'])(_0x1e90a8,_0x160ebc(0x1e4)))&&(_0x2b109c=_0x1e90a8[_0x160ebc(0x1f3)]||_0x1e90a8[_0x160ebc(0x1e8)]||_0x1e90a8[_0x160ebc(0x1e0)]||_0x1e90a8[_0x160ebc(0x1e4)],_0x2b109c=(''+_0x2b109c)['replace'](/\D/g,'')),((0x0,lodash_2[_0x160ebc(0x1f9)])(_0x1e90a8,'email')||(0x0,lodash_2[_0x160ebc(0x1f9)])(_0x1e90a8,_0x160ebc(0x1dd))||(0x0,lodash_2['has'])(_0x1e90a8,_0x160ebc(0x202))||(0x0,lodash_2[_0x160ebc(0x1f9)])(_0x1e90a8,_0x160ebc(0x200)))&&(_0x2ee361=_0x1e90a8[_0x160ebc(0x1d5)]||_0x1e90a8[_0x160ebc(0x1dd)]||_0x1e90a8[_0x160ebc(0x202)]||_0x1e90a8[_0x160ebc(0x200)]),{'name':_0x28b977,'number':_0x2b109c,'email':_0x2ee361,'contactListId':_0x49339b,'companyId':_0x58364a};}),_0x10420a=[];for(const _0x584859 of _0x1889cf){const [_0x2ef755,_0x4f6de1]=await ContactListItem_1['default']['findOrCreate']({'where':{'number':''+_0x584859[_0x5ad76e(0x1dc)],'contactListId':_0x584859['contactListId'],'companyId':_0x584859[_0x5ad76e(0x1de)]},'defaults':_0x584859});_0x4f6de1&&_0x10420a[_0x5ad76e(0x1d7)](_0x2ef755);}if(_0x10420a)for(let _0x45c735 of _0x10420a){try{const _0x1dd097=await(0x0,CheckNumber_1[_0x5ad76e(0x1f7)])(_0x45c735[_0x5ad76e(0x1dc)],_0x58364a);_0x45c735[_0x5ad76e(0x1e5)]=_0x1dd097['exists'];const _0x4d1843=_0x1dd097[_0x5ad76e(0x1fe)]['replace'](/\D/g,'');_0x45c735[_0x5ad76e(0x1dc)]=_0x4d1843,await _0x45c735[_0x5ad76e(0x1f8)]();}catch(_0x3458f8){logger_1[_0x5ad76e(0x1d8)]['error'](_0x5ad76e(0x1ff)+_0x45c735[_0x5ad76e(0x1dc)]);}}return _0x10420a;}exports['ImportContacts']=ImportContacts;