const a29_0x26865c=a29_0x2368;(function(_0x1ddbe2,_0x1f0484){const _0x24e1fb=a29_0x2368,_0x4abaf9=_0x1ddbe2();while(!![]){try{const _0x412b80=parseInt(_0x24e1fb(0xe0))/0x1+parseInt(_0x24e1fb(0xc8))/0x2+parseInt(_0x24e1fb(0xcf))/0x3+-parseInt(_0x24e1fb(0xbb))/0x4*(parseInt(_0x24e1fb(0xbc))/0x5)+parseInt(_0x24e1fb(0xc2))/0x6*(-parseInt(_0x24e1fb(0xd9))/0x7)+parseInt(_0x24e1fb(0xae))/0x8+-parseInt(_0x24e1fb(0xb1))/0x9;if(_0x412b80===_0x1f0484)break;else _0x4abaf9['push'](_0x4abaf9['shift']());}catch(_0x4cd940){_0x4abaf9['push'](_0x4abaf9['shift']());}}}(a29_0x10fc,0x980fa));const a29_0x53a1ad=(function(){let _0x3947f4=!![];return function(_0x17f251,_0x466ac1){const _0x41ab9a=_0x3947f4?function(){const _0x58474d=a29_0x2368;if(_0x466ac1){const _0xdf0f40=_0x466ac1[_0x58474d(0xd6)](_0x17f251,arguments);return _0x466ac1=null,_0xdf0f40;}}:function(){};return _0x3947f4=![],_0x41ab9a;};}()),a29_0x57b9b6=a29_0x53a1ad(this,function(){const _0x3ad698=a29_0x2368;return a29_0x57b9b6['toString']()[_0x3ad698(0xb8)]('(((.+)+)+)+$')[_0x3ad698(0xda)]()[_0x3ad698(0xc5)](a29_0x57b9b6)[_0x3ad698(0xb8)](_0x3ad698(0xc4));});a29_0x57b9b6();'use strict';var __importDefault=this&&this[a29_0x26865c(0xc6)]||function(_0x45f9fd){const _0x43ffb5=a29_0x26865c;return _0x45f9fd&&_0x45f9fd[_0x43ffb5(0xba)]?_0x45f9fd:{'default':_0x45f9fd};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a29_0x26865c(0xac)]=exports[a29_0x26865c(0xb7)]=exports[a29_0x26865c(0xb9)]=exports[a29_0x26865c(0xca)]=exports[a29_0x26865c(0xdd)]=exports[a29_0x26865c(0xcd)]=exports[a29_0x26865c(0xd8)]=void 0x0;const socket_1=require(a29_0x26865c(0xce)),CreateQueueService_1=__importDefault(require(a29_0x26865c(0xd7))),DeleteQueueService_1=__importDefault(require(a29_0x26865c(0xc1))),ListQueuesService_1=__importDefault(require('../services/QueueService/ListQueuesService')),ShowQueueService_1=__importDefault(require(a29_0x26865c(0xc3))),UpdateQueueService_1=__importDefault(require(a29_0x26865c(0xc0))),lodash_1=require(a29_0x26865c(0xb2)),Queue_1=__importDefault(require('../models/Queue')),lodash_2=require('lodash'),fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path')),AppError_1=__importDefault(require(a29_0x26865c(0xb0))),index=async(_0x59ced5,_0x2b1ce6)=>{const _0x65782c=a29_0x26865c,{companyId:_0x46a2d2}=_0x59ced5[_0x65782c(0xb3)],{companyId:_0x4e9e3e}=_0x59ced5[_0x65782c(0xc7)];let _0x530af6=_0x46a2d2;!(0x0,lodash_1['isNil'])(_0x4e9e3e)&&(_0x530af6=+_0x4e9e3e);const _0x1590ae=await(0x0,ListQueuesService_1[_0x65782c(0xdf)])({'companyId':_0x530af6});return _0x2b1ce6[_0x65782c(0xab)](0xc8)[_0x65782c(0xde)](_0x1590ae);};exports['index']=index;const store=async(_0x239548,_0x34cf6)=>{const _0x57a7d2=a29_0x26865c,{name:_0x118b78,color:_0x7339ec,greetingMessage:_0x44ae0d,outOfHoursMessage:_0x1988eb,keywords:_0x3d439a,schedules:_0x44446a,orderQueue:_0x39cd34,integrationId:_0x2c9641,promptId:_0x59c6f8}=_0x239548[_0x57a7d2(0xdc)],{companyId:_0x422a70}=_0x239548[_0x57a7d2(0xb3)],_0x3c21ec=await(0x0,CreateQueueService_1[_0x57a7d2(0xdf)])({'name':_0x118b78,'color':_0x7339ec,'greetingMessage':_0x44ae0d,'companyId':_0x422a70,'outOfHoursMessage':_0x1988eb,'keywords':_0x3d439a,'schedules':_0x44446a,'orderQueue':_0x39cd34===''?null:_0x39cd34,'integrationId':_0x2c9641===''?null:_0x2c9641,'promptId':_0x59c6f8===''?null:_0x59c6f8}),_0x2cca52=(0x0,socket_1[_0x57a7d2(0xad)])();return _0x2cca52['to'](_0x57a7d2(0xd3)+_0x422a70+_0x57a7d2(0xa9))['emit'](_0x57a7d2(0xd3)+_0x422a70+_0x57a7d2(0xaf),{'action':'update','queue':_0x3c21ec}),_0x34cf6[_0x57a7d2(0xab)](0xc8)[_0x57a7d2(0xde)](_0x3c21ec);};exports[a29_0x26865c(0xcd)]=store;const show=async(_0x5783b7,_0xe0f8b6)=>{const _0xc79718=a29_0x26865c,{queueId:_0x258a9f}=_0x5783b7[_0xc79718(0xb4)],{companyId:_0x174292}=_0x5783b7['user'],_0x148e48=await(0x0,ShowQueueService_1['default'])(_0x258a9f,_0x174292);return _0xe0f8b6[_0xc79718(0xab)](0xc8)[_0xc79718(0xde)](_0x148e48);};exports[a29_0x26865c(0xdd)]=show;const update=async(_0x2f3c6f,_0x23284b)=>{const _0x3f27ca=a29_0x26865c,{queueId:_0xe99069}=_0x2f3c6f['params'],{companyId:_0x5ab575}=_0x2f3c6f['user'],{name:_0x3d6103,color:_0x44bbe6,greetingMessage:_0x2eb917,outOfHoursMessage:_0x43e0c4,keywords:_0xb08bf7,newTicketOnTransfer:_0x1c0859,schedules:_0x2341a9,orderQueue:_0x606083,integrationId:_0x59bfcf,promptId:_0x13788a}=_0x2f3c6f[_0x3f27ca(0xdc)],_0x2d8f65=await(0x0,UpdateQueueService_1['default'])(_0xe99069,{'name':_0x3d6103,'color':_0x44bbe6,'greetingMessage':_0x2eb917,'outOfHoursMessage':_0x43e0c4,'keywords':_0xb08bf7,'newTicketOnTransfer':_0x1c0859,'schedules':_0x2341a9,'orderQueue':_0x606083===''?null:_0x606083,'integrationId':_0x59bfcf===''?null:_0x59bfcf,'promptId':_0x13788a===''?null:_0x13788a},_0x5ab575),_0x4a0f6e=(0x0,socket_1[_0x3f27ca(0xad)])();return _0x4a0f6e['to'](_0x3f27ca(0xd3)+_0x5ab575+_0x3f27ca(0xa9))[_0x3f27ca(0xcc)]('company-'+_0x5ab575+_0x3f27ca(0xaf),{'action':_0x3f27ca(0xca),'queue':_0x2d8f65}),_0x23284b['status'](0xc9)[_0x3f27ca(0xde)](_0x2d8f65);};function a29_0x2368(_0xfa5382,_0x3aed71){const _0x5c0906=a29_0x10fc();return a29_0x2368=function(_0x57b9b6,_0x53a1ad){_0x57b9b6=_0x57b9b6-0xa8;let _0x10fc47=_0x5c0906[_0x57b9b6];return _0x10fc47;},a29_0x2368(_0xfa5382,_0x3aed71);}function a29_0x10fc(){const _0x3ab024=['lodash','user','params','unlinkSync','head','mediaUpload','search','remove','__esModule','16844gzQbGm','445rcsSGX','companyId','filename','findByPk','../services/QueueService/UpdateQueueService','../services/QueueService/DeleteQueueService','144138OhOXSF','../services/QueueService/ShowQueueService','(((.+)+)+)+$','constructor','__importDefault','query','528236wSqdbe','Arquivo\x20excluÃ­do','update','send','emit','store','../libs/socket','3111177qxVEsc','Arquivo\x20Salvo','message','mediaName','company-','mediaPath','company','apply','../services/QueueService/CreateQueueService','index','91sfQvLn','toString','resolve','body','show','json','default','1096709IkGoef','delete','originalname','-mainchannel','files','status','deleteMedia','getIO','7481064UxbxqX','-queue','../errors/AppError','18207891cNGhsj'];a29_0x10fc=function(){return _0x3ab024;};return a29_0x10fc();}exports[a29_0x26865c(0xca)]=update;const remove=async(_0x3efb72,_0x5e3ca4)=>{const _0x13de36=a29_0x26865c,{queueId:_0x3d204f}=_0x3efb72['params'],{companyId:_0x44b8c8}=_0x3efb72[_0x13de36(0xb3)];await(0x0,DeleteQueueService_1[_0x13de36(0xdf)])(_0x3d204f,_0x44b8c8);const _0x47be6d=(0x0,socket_1[_0x13de36(0xad)])();return _0x47be6d['to'](_0x13de36(0xd3)+_0x44b8c8+_0x13de36(0xa9))[_0x13de36(0xcc)](_0x13de36(0xd3)+_0x44b8c8+_0x13de36(0xaf),{'action':_0x13de36(0xe1),'queueId':+_0x3d204f}),_0x5e3ca4[_0x13de36(0xab)](0xc8)['send']();};exports[a29_0x26865c(0xb9)]=remove;const mediaUpload=async(_0x49291c,_0x2db47b)=>{const _0xfea276=a29_0x26865c,{queueId:_0x57174a}=_0x49291c[_0xfea276(0xb4)],_0x50f305=_0x49291c[_0xfea276(0xaa)],_0x1ff010=(0x0,lodash_2[_0xfea276(0xb6)])(_0x50f305);try{const _0x1151ff=await Queue_1[_0xfea276(0xdf)][_0xfea276(0xbf)](_0x57174a);return _0x1151ff[_0xfea276(0xca)]({'mediaPath':_0x1ff010[_0xfea276(0xbe)],'mediaName':_0x1ff010[_0xfea276(0xa8)]}),_0x2db47b['send']({'mensagem':_0xfea276(0xd0)});}catch(_0x133581){throw new AppError_1[(_0xfea276(0xdf))](_0x133581[_0xfea276(0xd1)]);}};exports['mediaUpload']=mediaUpload;const deleteMedia=async(_0x214b6c,_0x1d7dcf)=>{const _0x121e10=a29_0x26865c,{queueId:_0x5ce29c}=_0x214b6c[_0x121e10(0xb4)];try{const _0x1d4535=await Queue_1[_0x121e10(0xdf)][_0x121e10(0xbf)](_0x5ce29c),_0x2bdd7a=path_1['default'][_0x121e10(0xdb)]('public',_0x121e10(0xd5)+_0x1d4535[_0x121e10(0xbd)],_0x1d4535[_0x121e10(0xd4)]),_0x454acf=fs_1[_0x121e10(0xdf)]['existsSync'](_0x2bdd7a);return _0x454acf&&fs_1[_0x121e10(0xdf)][_0x121e10(0xb5)](_0x2bdd7a),_0x1d4535[_0x121e10(0xd4)]=null,_0x1d4535[_0x121e10(0xd2)]=null,await _0x1d4535['save'](),_0x1d7dcf[_0x121e10(0xcb)]({'mensagem':_0x121e10(0xc9)});}catch(_0x297558){throw new AppError_1[(_0x121e10(0xdf))](_0x297558[_0x121e10(0xd1)]);}};exports[a29_0x26865c(0xac)]=deleteMedia;