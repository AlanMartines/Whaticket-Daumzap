const a29_0x3eedbf=a29_0x404f;(function(_0x25f3ba,_0x19acbe){const _0x480a9c=a29_0x404f,_0x133f3c=_0x25f3ba();while(!![]){try{const _0x222b13=-parseInt(_0x480a9c(0xf2))/0x1*(-parseInt(_0x480a9c(0x110))/0x2)+parseInt(_0x480a9c(0x10c))/0x3+-parseInt(_0x480a9c(0xef))/0x4+-parseInt(_0x480a9c(0xf3))/0x5*(-parseInt(_0x480a9c(0xfc))/0x6)+-parseInt(_0x480a9c(0x109))/0x7*(-parseInt(_0x480a9c(0xed))/0x8)+-parseInt(_0x480a9c(0x119))/0x9*(-parseInt(_0x480a9c(0xe8))/0xa)+parseInt(_0x480a9c(0xe2))/0xb*(-parseInt(_0x480a9c(0x106))/0xc);if(_0x222b13===_0x19acbe)break;else _0x133f3c['push'](_0x133f3c['shift']());}catch(_0x368c12){_0x133f3c['push'](_0x133f3c['shift']());}}}(a29_0x3442,0xcfd11));const a29_0x358e81=(function(){let _0x454455=!![];return function(_0x588768,_0x19c7bc){const _0x41d565=_0x454455?function(){const _0x101f13=a29_0x404f;if(_0x19c7bc){const _0x218ac0=_0x19c7bc[_0x101f13(0xe4)](_0x588768,arguments);return _0x19c7bc=null,_0x218ac0;}}:function(){};return _0x454455=![],_0x41d565;};}()),a29_0x3edb7c=a29_0x358e81(this,function(){const _0x4b4e80=a29_0x404f;return a29_0x3edb7c['toString']()['search'](_0x4b4e80(0x108))[_0x4b4e80(0x117)]()[_0x4b4e80(0x100)](a29_0x3edb7c)[_0x4b4e80(0xf9)](_0x4b4e80(0x108));});a29_0x3edb7c();'use strict';var __importDefault=this&&this[a29_0x3eedbf(0x113)]||function(_0x529046){const _0x4c49bb=a29_0x3eedbf;return _0x529046&&_0x529046[_0x4c49bb(0xe5)]?_0x529046:{'default':_0x529046};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a29_0x3eedbf(0xfa)]=exports['mediaUpload']=exports['remove']=exports[a29_0x3eedbf(0x107)]=exports['show']=exports['store']=exports[a29_0x3eedbf(0x101)]=void 0x0;const socket_1=require(a29_0x3eedbf(0x115)),CreateQueueService_1=__importDefault(require(a29_0x3eedbf(0xe3))),DeleteQueueService_1=__importDefault(require(a29_0x3eedbf(0xea))),ListQueuesService_1=__importDefault(require(a29_0x3eedbf(0xec))),ShowQueueService_1=__importDefault(require(a29_0x3eedbf(0x114))),UpdateQueueService_1=__importDefault(require(a29_0x3eedbf(0xf1))),lodash_1=require(a29_0x3eedbf(0x10a)),Queue_1=__importDefault(require(a29_0x3eedbf(0xf4))),lodash_2=require(a29_0x3eedbf(0x10a)),fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path')),AppError_1=__importDefault(require('../errors/AppError')),index=async(_0x5bfd2b,_0x2b692b)=>{const _0x4e5c0f=a29_0x3eedbf,{companyId:_0x1a67b0}=_0x5bfd2b[_0x4e5c0f(0x11b)],{companyId:_0x330800}=_0x5bfd2b[_0x4e5c0f(0x104)];let _0x3230e1=_0x1a67b0;!(0x0,lodash_1[_0x4e5c0f(0xfd)])(_0x330800)&&(_0x3230e1=+_0x330800);const _0x360c45=await(0x0,ListQueuesService_1[_0x4e5c0f(0x103)])({'companyId':_0x3230e1});return _0x2b692b[_0x4e5c0f(0x102)](0xc8)[_0x4e5c0f(0xf7)](_0x360c45);};exports[a29_0x3eedbf(0x101)]=index;const store=async(_0x52750d,_0x1afab5)=>{const _0x48967=a29_0x3eedbf,{name:_0x5648c8,color:_0x54d1f4,greetingMessage:_0xbf5eab,outOfHoursMessage:_0x4a6eb7,keywords:_0x456884,schedules:_0x1b4a86,orderQueue:_0x3dc888,integrationId:_0x488237,promptId:_0x11391e}=_0x52750d[_0x48967(0x116)],{companyId:_0x288fec}=_0x52750d[_0x48967(0x11b)],_0x286bd1=await(0x0,CreateQueueService_1[_0x48967(0x103)])({'name':_0x5648c8,'color':_0x54d1f4,'greetingMessage':_0xbf5eab,'companyId':_0x288fec,'outOfHoursMessage':_0x4a6eb7,'keywords':_0x456884,'schedules':_0x1b4a86,'orderQueue':_0x3dc888===''?null:_0x3dc888,'integrationId':_0x488237===''?null:_0x488237,'promptId':_0x11391e===''?null:_0x11391e}),_0x49da1e=(0x0,socket_1[_0x48967(0x11d)])();return _0x49da1e['to'](_0x48967(0xee)+_0x288fec+_0x48967(0xe6))[_0x48967(0xfe)]('company-'+_0x288fec+_0x48967(0xe0),{'action':_0x48967(0x107),'queue':_0x286bd1}),_0x1afab5[_0x48967(0x102)](0xc8)[_0x48967(0xf7)](_0x286bd1);};exports[a29_0x3eedbf(0xe1)]=store;const show=async(_0x5e4898,_0x33a26c)=>{const _0xa410df=a29_0x3eedbf,{queueId:_0x7f5aed}=_0x5e4898[_0xa410df(0x11a)],{companyId:_0x255458}=_0x5e4898[_0xa410df(0x11b)],_0x167bf1=await(0x0,ShowQueueService_1[_0xa410df(0x103)])(_0x7f5aed,_0x255458);return _0x33a26c[_0xa410df(0x102)](0xc8)[_0xa410df(0xf7)](_0x167bf1);};exports[a29_0x3eedbf(0xfb)]=show;const update=async(_0x220597,_0x1bc159)=>{const _0xd5a3bf=a29_0x3eedbf,{queueId:_0x1ca420}=_0x220597[_0xd5a3bf(0x11a)],{companyId:_0x78c514}=_0x220597['user'],{name:_0x39a935,color:_0x554077,greetingMessage:_0x5615e9,outOfHoursMessage:_0x2f7655,keywords:_0x1c0ce4,newTicketOnTransfer:_0x12c3ee,schedules:_0x4dbf4a,orderQueue:_0x3929f2,integrationId:_0x2e833f,promptId:_0x40fb98}=_0x220597[_0xd5a3bf(0x116)],_0x445c79=await(0x0,UpdateQueueService_1[_0xd5a3bf(0x103)])(_0x1ca420,{'name':_0x39a935,'color':_0x554077,'greetingMessage':_0x5615e9,'outOfHoursMessage':_0x2f7655,'keywords':_0x1c0ce4,'newTicketOnTransfer':_0x12c3ee,'schedules':_0x4dbf4a,'orderQueue':_0x3929f2===''?null:_0x3929f2,'integrationId':_0x2e833f===''?null:_0x2e833f,'promptId':_0x40fb98===''?null:_0x40fb98},_0x78c514),_0x33f3b2=(0x0,socket_1['getIO'])();return _0x33f3b2['to'](_0xd5a3bf(0xee)+_0x78c514+_0xd5a3bf(0xe6))[_0xd5a3bf(0xfe)](_0xd5a3bf(0xee)+_0x78c514+_0xd5a3bf(0xe0),{'action':_0xd5a3bf(0x107),'queue':_0x445c79}),_0x1bc159[_0xd5a3bf(0x102)](0xc9)[_0xd5a3bf(0xf7)](_0x445c79);};function a29_0x404f(_0x548802,_0x3b0a88){const _0x564bc8=a29_0x3442();return a29_0x404f=function(_0x3edb7c,_0x358e81){_0x3edb7c=_0x3edb7c-0xdf;let _0x344273=_0x564bc8[_0x3edb7c];return _0x344273;},a29_0x404f(_0x548802,_0x3b0a88);}exports[a29_0x3eedbf(0x107)]=update;const remove=async(_0x14e3c7,_0x2b903e)=>{const _0x3722be=a29_0x3eedbf,{queueId:_0x8dc933}=_0x14e3c7[_0x3722be(0x11a)],{companyId:_0x37bb23}=_0x14e3c7['user'];await(0x0,DeleteQueueService_1[_0x3722be(0x103)])(_0x8dc933,_0x37bb23);const _0x228051=(0x0,socket_1[_0x3722be(0x11d)])();return _0x228051['to'](_0x3722be(0xee)+_0x37bb23+_0x3722be(0xe6))[_0x3722be(0xfe)]('company-'+_0x37bb23+_0x3722be(0xe0),{'action':_0x3722be(0x11e),'queueId':+_0x8dc933}),_0x2b903e[_0x3722be(0x102)](0xc8)[_0x3722be(0x118)]();};exports[a29_0x3eedbf(0xdf)]=remove;const mediaUpload=async(_0x9a519b,_0x47a411)=>{const _0x51991a=a29_0x3eedbf,{queueId:_0x4e1185}=_0x9a519b[_0x51991a(0x11a)],_0x3914ed=_0x9a519b[_0x51991a(0xff)],_0xebe808=(0x0,lodash_2[_0x51991a(0xf6)])(_0x3914ed);try{const _0x35370d=await Queue_1[_0x51991a(0x103)][_0x51991a(0xf8)](_0x4e1185);return _0x35370d['update']({'mediaPath':_0xebe808[_0x51991a(0x10e)],'mediaName':_0xebe808[_0x51991a(0x111)]}),_0x47a411[_0x51991a(0x118)]({'mensagem':_0x51991a(0x10d)});}catch(_0x45deaf){throw new AppError_1[(_0x51991a(0x103))](_0x45deaf['message']);}};function a29_0x3442(){const _0x393f91=['195481MsyzQn','../services/QueueService/CreateQueueService','apply','__esModule','-mainchannel','mediaPath','256210kiDmLU','Arquivo\x20excluÃ­do','../services/QueueService/DeleteQueueService','existsSync','../services/QueueService/ListQueuesService','796520KnHQsQ','company-','4693152WaTWRl','resolve','../services/QueueService/UpdateQueueService','1103014POMRgX','27035UNAHTQ','../models/Queue','mediaName','head','json','findByPk','search','deleteMedia','show','318oqhiGn','isNil','emit','files','constructor','index','status','default','query','mediaUpload','492QMCaqu','update','(((.+)+)+)+$','77Snenbm','lodash','save','728085yCSshC','Arquivo\x20Salvo','filename','unlinkSync','2GjVebi','originalname','message','__importDefault','../services/QueueService/ShowQueueService','../libs/socket','body','toString','send','9GwHmgR','params','user','company','getIO','delete','remove','-queue','store'];a29_0x3442=function(){return _0x393f91;};return a29_0x3442();}exports[a29_0x3eedbf(0x105)]=mediaUpload;const deleteMedia=async(_0xd75729,_0x331492)=>{const _0x424471=a29_0x3eedbf,{queueId:_0x3cf3b3}=_0xd75729[_0x424471(0x11a)];try{const _0x176074=await Queue_1[_0x424471(0x103)][_0x424471(0xf8)](_0x3cf3b3),_0x471573=path_1[_0x424471(0x103)][_0x424471(0xf0)]('public',_0x424471(0x11c)+_0x176074['companyId'],_0x176074['mediaPath']),_0x54703b=fs_1['default'][_0x424471(0xeb)](_0x471573);return _0x54703b&&fs_1[_0x424471(0x103)][_0x424471(0x10f)](_0x471573),_0x176074[_0x424471(0xe7)]=null,_0x176074[_0x424471(0xf5)]=null,await _0x176074[_0x424471(0x10b)](),_0x331492[_0x424471(0x118)]({'mensagem':_0x424471(0xe9)});}catch(_0x4bd076){throw new AppError_1[(_0x424471(0x103))](_0x4bd076[_0x424471(0x112)]);}};exports[a29_0x3eedbf(0xfa)]=deleteMedia;