function a29_0x34fb(){const _0x43a6df=['head','body','../services/QueueService/DeleteQueueService','store','280luHymw','mediaPath','mediaUpload','remove','update','json','public','show','user','12555UFkIso','message','status','getIO','Arquivo\x20Salvo','path','unlinkSync','save','520pLohyA','default','../services/QueueService/CreateQueueService','../services/QueueService/ListQueuesService','constructor','64250659lWPRgT','emit','lodash','search','-queue','../errors/AppError','3782pRokPj','../services/QueueService/ShowQueueService','869fikkkA','params','-mainchannel','resolve','3zEuAaT','isNil','delete','files','send','findByPk','companyId','defineProperty','toString','existsSync','6496108Smjrhx','../libs/socket','129941hmbjqH','filename','company-','__esModule','4577690IAymJk','index','226554HGCaBy','deleteMedia'];a29_0x34fb=function(){return _0x43a6df;};return a29_0x34fb();}const a29_0x117507=a29_0x4298;(function(_0x1ce1d6,_0x1f67ee){const _0x202b46=a29_0x4298,_0x2e5e3b=_0x1ce1d6();while(!![]){try{const _0x558bf0=-parseInt(_0x202b46(0xdf))/0x1*(parseInt(_0x202b46(0xdd))/0x2)+parseInt(_0x202b46(0xe3))/0x3*(-parseInt(_0x202b46(0xed))/0x4)+-parseInt(_0x202b46(0xf3))/0x5+parseInt(_0x202b46(0xf5))/0x6+-parseInt(_0x202b46(0xef))/0x7*(parseInt(_0x202b46(0xfb))/0x8)+parseInt(_0x202b46(0x104))/0x9*(-parseInt(_0x202b46(0x10c))/0xa)+parseInt(_0x202b46(0xd7))/0xb;if(_0x558bf0===_0x1f67ee)break;else _0x2e5e3b['push'](_0x2e5e3b['shift']());}catch(_0x1803a6){_0x2e5e3b['push'](_0x2e5e3b['shift']());}}}(a29_0x34fb,0xedb47));const a29_0x52a801=(function(){let _0x5ef765=!![];return function(_0x34c78d,_0x26233b){const _0x1c5685=_0x5ef765?function(){if(_0x26233b){const _0x1d27cf=_0x26233b['apply'](_0x34c78d,arguments);return _0x26233b=null,_0x1d27cf;}}:function(){};return _0x5ef765=![],_0x1c5685;};}()),a29_0x5216a0=a29_0x52a801(this,function(){const _0xec237a=a29_0x4298;return a29_0x5216a0[_0xec237a(0xeb)]()[_0xec237a(0xda)]('(((.+)+)+)+$')[_0xec237a(0xeb)]()[_0xec237a(0x110)](a29_0x5216a0)['search']('(((.+)+)+)+$');});a29_0x5216a0();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x113112){const _0x18a7d2=a29_0x4298;return _0x113112&&_0x113112[_0x18a7d2(0xf2)]?_0x113112:{'default':_0x113112};};Object[a29_0x117507(0xea)](exports,'__esModule',{'value':!![]}),exports['deleteMedia']=exports[a29_0x117507(0xfd)]=exports['remove']=exports[a29_0x117507(0xff)]=exports['show']=exports[a29_0x117507(0xfa)]=exports[a29_0x117507(0xf4)]=void 0x0;function a29_0x4298(_0x2031f0,_0x26bb2b){const _0x33ab98=a29_0x34fb();return a29_0x4298=function(_0x5216a0,_0x52a801){_0x5216a0=_0x5216a0-0xd7;let _0x34fbb2=_0x33ab98[_0x5216a0];return _0x34fbb2;},a29_0x4298(_0x2031f0,_0x26bb2b);}const socket_1=require(a29_0x117507(0xee)),CreateQueueService_1=__importDefault(require(a29_0x117507(0x10e))),DeleteQueueService_1=__importDefault(require(a29_0x117507(0xf9))),ListQueuesService_1=__importDefault(require(a29_0x117507(0x10f))),ShowQueueService_1=__importDefault(require(a29_0x117507(0xde))),UpdateQueueService_1=__importDefault(require('../services/QueueService/UpdateQueueService')),lodash_1=require(a29_0x117507(0xd9)),Queue_1=__importDefault(require('../models/Queue')),lodash_2=require(a29_0x117507(0xd9)),fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a29_0x117507(0x109))),AppError_1=__importDefault(require(a29_0x117507(0xdc))),index=async(_0x4b7b5a,_0x1b688f)=>{const _0xc30c54=a29_0x117507,{companyId:_0x58230e}=_0x4b7b5a['user'],{companyId:_0x58a460}=_0x4b7b5a['query'];let _0x193cd4=_0x58230e;!(0x0,lodash_1[_0xc30c54(0xe4)])(_0x58a460)&&(_0x193cd4=+_0x58a460);const _0x33f82a=await(0x0,ListQueuesService_1['default'])({'companyId':_0x193cd4});return _0x1b688f['status'](0xc8)['json'](_0x33f82a);};exports[a29_0x117507(0xf4)]=index;const store=async(_0x2ed474,_0x302be9)=>{const _0x11102e=a29_0x117507,{name:_0x1db18e,color:_0x37a0c7,greetingMessage:_0x27aec5,outOfHoursMessage:_0x56c2e8,keywords:_0x59fb6f,schedules:_0xfbac18,orderQueue:_0x52064b,integrationId:_0x435148,promptId:_0x54bd1f}=_0x2ed474[_0x11102e(0xf8)],{companyId:_0x12453c}=_0x2ed474[_0x11102e(0x103)],_0x186f0a=await(0x0,CreateQueueService_1['default'])({'name':_0x1db18e,'color':_0x37a0c7,'greetingMessage':_0x27aec5,'companyId':_0x12453c,'outOfHoursMessage':_0x56c2e8,'keywords':_0x59fb6f,'schedules':_0xfbac18,'orderQueue':_0x52064b===''?null:_0x52064b,'integrationId':_0x435148===''?null:_0x435148,'promptId':_0x54bd1f===''?null:_0x54bd1f}),_0x27ff7f=(0x0,socket_1['getIO'])();return _0x27ff7f['to'](_0x11102e(0xf1)+_0x12453c+_0x11102e(0xe1))[_0x11102e(0xd8)]('company-'+_0x12453c+_0x11102e(0xdb),{'action':_0x11102e(0xff),'queue':_0x186f0a}),_0x302be9['status'](0xc8)['json'](_0x186f0a);};exports[a29_0x117507(0xfa)]=store;const show=async(_0x2b1243,_0x2a86ef)=>{const _0x4a2ccc=a29_0x117507,{queueId:_0x34baa7}=_0x2b1243[_0x4a2ccc(0xe0)],{companyId:_0x158d86}=_0x2b1243[_0x4a2ccc(0x103)],_0x2ea21a=await(0x0,ShowQueueService_1[_0x4a2ccc(0x10d)])(_0x34baa7,_0x158d86);return _0x2a86ef['status'](0xc8)[_0x4a2ccc(0x100)](_0x2ea21a);};exports[a29_0x117507(0x102)]=show;const update=async(_0x234716,_0x427cc7)=>{const _0x651f62=a29_0x117507,{queueId:_0x38ee2d}=_0x234716[_0x651f62(0xe0)],{companyId:_0x348195}=_0x234716[_0x651f62(0x103)],{name:_0x17fa37,color:_0x5f515f,greetingMessage:_0x5d4d1f,outOfHoursMessage:_0x287e1a,keywords:_0x58c10d,newTicketOnTransfer:_0x95d2a1,schedules:_0x44d020,orderQueue:_0x41fe8d,integrationId:_0x1a6827,promptId:_0x2f6d88}=_0x234716['body'],_0x34e25a=await(0x0,UpdateQueueService_1[_0x651f62(0x10d)])(_0x38ee2d,{'name':_0x17fa37,'color':_0x5f515f,'greetingMessage':_0x5d4d1f,'outOfHoursMessage':_0x287e1a,'keywords':_0x58c10d,'newTicketOnTransfer':_0x95d2a1,'schedules':_0x44d020,'orderQueue':_0x41fe8d===''?null:_0x41fe8d,'integrationId':_0x1a6827===''?null:_0x1a6827,'promptId':_0x2f6d88===''?null:_0x2f6d88},_0x348195),_0xe9094a=(0x0,socket_1[_0x651f62(0x107)])();return _0xe9094a['to'](_0x651f62(0xf1)+_0x348195+'-mainchannel')[_0x651f62(0xd8)](_0x651f62(0xf1)+_0x348195+_0x651f62(0xdb),{'action':_0x651f62(0xff),'queue':_0x34e25a}),_0x427cc7[_0x651f62(0x106)](0xc9)[_0x651f62(0x100)](_0x34e25a);};exports[a29_0x117507(0xff)]=update;const remove=async(_0x2c5a01,_0x447ed8)=>{const _0x421104=a29_0x117507,{queueId:_0x4074b9}=_0x2c5a01[_0x421104(0xe0)],{companyId:_0x7271a2}=_0x2c5a01[_0x421104(0x103)];await(0x0,DeleteQueueService_1['default'])(_0x4074b9,_0x7271a2);const _0x110a5c=(0x0,socket_1[_0x421104(0x107)])();return _0x110a5c['to'](_0x421104(0xf1)+_0x7271a2+_0x421104(0xe1))[_0x421104(0xd8)](_0x421104(0xf1)+_0x7271a2+_0x421104(0xdb),{'action':_0x421104(0xe5),'queueId':+_0x4074b9}),_0x447ed8[_0x421104(0x106)](0xc8)[_0x421104(0xe7)]();};exports[a29_0x117507(0xfe)]=remove;const mediaUpload=async(_0x290ac3,_0x37ce93)=>{const _0x36cf2e=a29_0x117507,{queueId:_0x9d626b}=_0x290ac3[_0x36cf2e(0xe0)],_0x527028=_0x290ac3[_0x36cf2e(0xe6)],_0x157748=(0x0,lodash_2[_0x36cf2e(0xf7)])(_0x527028);try{const _0x59bdab=await Queue_1['default']['findByPk'](_0x9d626b);return _0x59bdab['update']({'mediaPath':_0x157748[_0x36cf2e(0xf0)],'mediaName':_0x157748['originalname']}),_0x37ce93['send']({'mensagem':_0x36cf2e(0x108)});}catch(_0x2b871b){throw new AppError_1['default'](_0x2b871b[_0x36cf2e(0x105)]);}};exports[a29_0x117507(0xfd)]=mediaUpload;const deleteMedia=async(_0x151104,_0x32277f)=>{const _0x42b4a5=a29_0x117507,{queueId:_0x180234}=_0x151104['params'];try{const _0xed354d=await Queue_1[_0x42b4a5(0x10d)][_0x42b4a5(0xe8)](_0x180234),_0x25eef9=path_1[_0x42b4a5(0x10d)][_0x42b4a5(0xe2)](_0x42b4a5(0x101),'company'+_0xed354d[_0x42b4a5(0xe9)],_0xed354d[_0x42b4a5(0xfc)]),_0x8f8aeb=fs_1[_0x42b4a5(0x10d)][_0x42b4a5(0xec)](_0x25eef9);return _0x8f8aeb&&fs_1[_0x42b4a5(0x10d)][_0x42b4a5(0x10a)](_0x25eef9),_0xed354d[_0x42b4a5(0xfc)]=null,_0xed354d['mediaName']=null,await _0xed354d[_0x42b4a5(0x10b)](),_0x32277f['send']({'mensagem':'Arquivo\x20exclu√≠do'});}catch(_0x130619){throw new AppError_1[(_0x42b4a5(0x10d))](_0x130619['message']);}};exports[a29_0x117507(0xf6)]=deleteMedia;