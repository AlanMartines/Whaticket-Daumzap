const a38_0x1b8268=a38_0x5d13;(function(_0xba56f,_0x400f23){const _0x25dd44=a38_0x5d13,_0x2d9a41=_0xba56f();while(!![]){try{const _0x1edb73=-parseInt(_0x25dd44(0x1cf))/0x1+parseInt(_0x25dd44(0x1be))/0x2*(parseInt(_0x25dd44(0x1c0))/0x3)+-parseInt(_0x25dd44(0x1e9))/0x4+parseInt(_0x25dd44(0x1ec))/0x5+parseInt(_0x25dd44(0x1eb))/0x6*(-parseInt(_0x25dd44(0x1c8))/0x7)+parseInt(_0x25dd44(0x1d2))/0x8+-parseInt(_0x25dd44(0x1d1))/0x9*(parseInt(_0x25dd44(0x1de))/0xa);if(_0x1edb73===_0x400f23)break;else _0x2d9a41['push'](_0x2d9a41['shift']());}catch(_0x1cdb46){_0x2d9a41['push'](_0x2d9a41['shift']());}}}(a38_0x1418,0x3bcc3));const a38_0x4fa572=(function(){let _0x52530d=!![];return function(_0x522104,_0x6d4146){const _0x224de0=_0x52530d?function(){const _0x1ebe34=a38_0x5d13;if(_0x6d4146){const _0x92deea=_0x6d4146[_0x1ebe34(0x1e1)](_0x522104,arguments);return _0x6d4146=null,_0x92deea;}}:function(){};return _0x52530d=![],_0x224de0;};}()),a38_0x1c143f=a38_0x4fa572(this,function(){const _0xa1375e=a38_0x5d13;return a38_0x1c143f[_0xa1375e(0x1c4)]()[_0xa1375e(0x1d9)]('(((.+)+)+)+$')[_0xa1375e(0x1c4)]()[_0xa1375e(0x1cb)](a38_0x1c143f)[_0xa1375e(0x1d9)](_0xa1375e(0x1dd));});a38_0x1c143f();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2d2c8b){const _0x166466=a38_0x5d13;return _0x2d2c8b&&_0x2d2c8b[_0x166466(0x1c9)]?_0x2d2c8b:{'default':_0x2d2c8b};};Object[a38_0x1b8268(0x1d0)](exports,'__esModule',{'value':!![]}),exports['syncTags']=exports[a38_0x1b8268(0x1ce)]=exports[a38_0x1b8268(0x1df)]=exports['remove']=exports[a38_0x1b8268(0x1e5)]=exports[a38_0x1b8268(0x1e7)]=exports[a38_0x1b8268(0x1d3)]=exports[a38_0x1b8268(0x1e2)]=exports[a38_0x1b8268(0x1e4)]=void 0x0;const socket_1=require('../libs/socket'),AppError_1=__importDefault(require(a38_0x1b8268(0x1e6))),CreateService_1=__importDefault(require(a38_0x1b8268(0x1e0))),ListService_1=__importDefault(require('../services/TagServices/ListService')),UpdateService_1=__importDefault(require(a38_0x1b8268(0x1dc))),ShowService_1=__importDefault(require(a38_0x1b8268(0x1d4))),DeleteService_1=__importDefault(require(a38_0x1b8268(0x1c6))),DeleteAllTagService_1=__importDefault(require(a38_0x1b8268(0x1c3))),SimpleListService_1=__importDefault(require('../services/TagServices/SimpleListService')),SyncTagsService_1=__importDefault(require(a38_0x1b8268(0x1da))),KanbanListService_1=__importDefault(require(a38_0x1b8268(0x1cc))),index=async(_0x12a1a8,_0x2f9f3c)=>{const _0x2d41cb=a38_0x1b8268,{pageNumber:_0x14a004,searchParam:_0x5a8eb4}=_0x12a1a8[_0x2d41cb(0x1c1)],{companyId:_0x1b9a78}=_0x12a1a8[_0x2d41cb(0x1ca)],{tags:_0x17dbfd,count:_0x58e01a,hasMore:_0x227efa}=await(0x0,ListService_1[_0x2d41cb(0x1c5)])({'searchParam':_0x5a8eb4,'pageNumber':_0x14a004,'companyId':_0x1b9a78});return _0x2f9f3c['json']({'tags':_0x17dbfd,'count':_0x58e01a,'hasMore':_0x227efa});};exports['index']=index;const store=async(_0x2bcde1,_0x231352)=>{const _0x583b38=a38_0x1b8268,{name:_0x16ff05,color:_0x4df1d1,kanban:_0x1f3e41}=_0x2bcde1['body'],{companyId:_0x89bfa9}=_0x2bcde1[_0x583b38(0x1ca)],_0x1c1f99=await(0x0,CreateService_1[_0x583b38(0x1c5)])({'name':_0x16ff05,'color':_0x4df1d1,'kanban':_0x1f3e41||null,'companyId':_0x89bfa9}),_0x1dbe3c=(0x0,socket_1['getIO'])();return _0x1dbe3c['to']('company-'+_0x89bfa9+_0x583b38(0x1d6))[_0x583b38(0x1c2)]('tag',{'action':_0x583b38(0x1d8),'tag':_0x1c1f99}),_0x231352[_0x583b38(0x1db)](0xc8)[_0x583b38(0x1d5)](_0x1c1f99);};exports[a38_0x1b8268(0x1e2)]=store;const kanban=async(_0x47eab9,_0x123323)=>{const _0x224d5d=a38_0x1b8268,{companyId:_0xd27c38}=_0x47eab9[_0x224d5d(0x1ca)],_0x47f5cd=await(0x0,KanbanListService_1[_0x224d5d(0x1c5)])({'companyId':_0xd27c38});return _0x123323[_0x224d5d(0x1d5)]({'lista':_0x47f5cd});};exports['kanban']=kanban;const show=async(_0xbb60b3,_0x51ba3e)=>{const _0x1ae7ab=a38_0x1b8268,{tagId:_0xb4ae2f}=_0xbb60b3[_0x1ae7ab(0x1bd)],_0x38e02b=await(0x0,ShowService_1[_0x1ae7ab(0x1c5)])(_0xb4ae2f);return _0x51ba3e[_0x1ae7ab(0x1db)](0xc8)['json'](_0x38e02b);};exports[a38_0x1b8268(0x1e7)]=show;const update=async(_0x15fce7,_0x308c53)=>{const _0xcc5430=a38_0x1b8268;if(_0x15fce7[_0xcc5430(0x1ca)]['profile']!=='admin')throw new AppError_1[(_0xcc5430(0x1c5))]('ERR_NO_PERMISSION',0x193);const {tagId:_0xaa4cdc}=_0x15fce7[_0xcc5430(0x1bd)],_0x311378=_0x15fce7['body'],_0xd5dfdf=await(0x0,UpdateService_1[_0xcc5430(0x1c5)])({'tagData':_0x311378,'id':_0xaa4cdc}),_0x355b5b=(0x0,socket_1[_0xcc5430(0x1c7)])();return _0x355b5b[_0xcc5430(0x1c2)]('tag',{'action':'update','tag':_0xd5dfdf}),_0x308c53[_0xcc5430(0x1db)](0xc8)[_0xcc5430(0x1d5)](_0xd5dfdf);};exports[a38_0x1b8268(0x1e5)]=update;const remove=async(_0x2b9eb9,_0x504cbb)=>{const _0x5a6b50=a38_0x1b8268,{tagId:_0x3e33d6}=_0x2b9eb9[_0x5a6b50(0x1bd)];await(0x0,DeleteService_1[_0x5a6b50(0x1c5)])(_0x3e33d6);const _0x5334a5=(0x0,socket_1['getIO'])();return _0x5334a5[_0x5a6b50(0x1c2)]('tag',{'action':_0x5a6b50(0x1ea),'tagId':_0x3e33d6}),_0x504cbb['status'](0xc8)[_0x5a6b50(0x1d5)]({'message':_0x5a6b50(0x1e8)});};exports[a38_0x1b8268(0x1e3)]=remove;const removeAll=async(_0x192371,_0x463398)=>{const _0x18ab91=a38_0x1b8268,{companyId:_0x323f20}=_0x192371[_0x18ab91(0x1ca)];try{return await(0x0,DeleteAllTagService_1['default'])(_0x323f20),_0x463398[_0x18ab91(0x1db)](0xc8)[_0x18ab91(0x1d7)]({'message':_0x18ab91(0x1cd)});}catch(_0x476fef){return console['error'](_0x476fef),_0x463398[_0x18ab91(0x1db)](0x1f4)['send']({'message':'Error\x20deleting\x20all\x20tags'});}};function a38_0x1418(){const _0x58730b=['../services/TagServices/KanbanListService','All\x20tags\x20deleted\x20successfully','list','147423AguFRh','defineProperty','2452257nUdrTL','2718880gqUkvL','kanban','../services/TagServices/ShowService','json','-mainchannel','send','create','search','../services/TagServices/SyncTagsService','status','../services/TagServices/UpdateService','(((.+)+)+)+$','10GGsTgu','removeAll','../services/TagServices/CreateService','apply','store','remove','index','update','../errors/AppError','show','Tag\x20deleted','728060bXpOcQ','delete','6uGBdyk','2266685MWoQLM','params','204718nPLPke','syncTags','3IBWZfI','query','emit','../services/TagServices/DeleteAllTagService','toString','default','../services/TagServices/DeleteService','getIO','340998bLklvs','__esModule','user','constructor'];a38_0x1418=function(){return _0x58730b;};return a38_0x1418();}exports[a38_0x1b8268(0x1df)]=removeAll;const list=async(_0x51d50a,_0x571ad8)=>{const _0x1f9d74=a38_0x1b8268,{searchParam:_0x54d027}=_0x51d50a['query'],{companyId:_0x244cc5}=_0x51d50a['user'],_0x28a6c5=await(0x0,SimpleListService_1[_0x1f9d74(0x1c5)])({'searchParam':_0x54d027,'companyId':_0x244cc5});return _0x571ad8[_0x1f9d74(0x1d5)](_0x28a6c5);};exports[a38_0x1b8268(0x1ce)]=list;const syncTags=async(_0x372656,_0x4c1afa)=>{const _0x5e96f4=a38_0x1b8268,_0x2fdd5d=_0x372656['body'],{companyId:_0x499105}=_0x372656[_0x5e96f4(0x1ca)],_0x46f24c=await(0x0,SyncTagsService_1['default'])({..._0x2fdd5d,'companyId':_0x499105});return _0x4c1afa[_0x5e96f4(0x1d5)](_0x46f24c);};function a38_0x5d13(_0x564cbe,_0x30781e){const _0x4a9828=a38_0x1418();return a38_0x5d13=function(_0x1c143f,_0x4fa572){_0x1c143f=_0x1c143f-0x1bd;let _0x141846=_0x4a9828[_0x1c143f];return _0x141846;},a38_0x5d13(_0x564cbe,_0x30781e);}exports[a38_0x1b8268(0x1bf)]=syncTags;