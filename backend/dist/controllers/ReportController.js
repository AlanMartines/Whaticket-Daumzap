function a33_0x5efe(){const _0x29a803=['../models/Tag','toDate','__esModule','subtract','11bLgJDw','defineProperty','search','userId','json','(((.+)+)+)+$','queuedAt','default','N/A','status','5169654jznVWU','19044djJVSc','rated','minute','../models/TicketTag','contactId','../models/TicketTraking','../models/Ticket','1350558qsAcTH','name','createdAt','between','findOne','../models/User','5296tcBYqU','78534tUKOLP','user','constructor','startOf','profile','findAll','moment/moment','add','number','39628rJOQlO','../models/Whatsapp','queueId','771647jJWqIr','finishedAt','sequelize','DESC','join','isBetween','565HxJYog','../models/Contact','525BBSnwp','push','startedAt','43099540iuxRzG','endOf','map','toString','queue'];a33_0x5efe=function(){return _0x29a803;};return a33_0x5efe();}const a33_0x7fee94=a33_0x536d;(function(_0xae6b01,_0xdf3646){const _0x33c69a=a33_0x536d,_0x1f51d3=_0xae6b01();while(!![]){try{const _0x45eb19=-parseInt(_0x33c69a(0x9e))/0x1+parseInt(_0x33c69a(0x8b))/0x2+-parseInt(_0x33c69a(0x83))/0x3+-parseInt(_0x33c69a(0x9b))/0x4*(parseInt(_0x33c69a(0xa4))/0x5)+parseInt(_0x33c69a(0x92))/0x6*(parseInt(_0x33c69a(0xa6))/0x7)+-parseInt(_0x33c69a(0x91))/0x8*(parseInt(_0x33c69a(0x84))/0x9)+-parseInt(_0x33c69a(0xa9))/0xa*(-parseInt(_0x33c69a(0xb2))/0xb);if(_0x45eb19===_0xdf3646)break;else _0x1f51d3['push'](_0x1f51d3['shift']());}catch(_0x5b38de){_0x1f51d3['push'](_0x1f51d3['shift']());}}}(a33_0x5efe,0xe85d0));const a33_0x34f3d7=(function(){let _0x38a81d=!![];return function(_0x30091e,_0x3c1ddc){const _0x5d07f3=_0x38a81d?function(){if(_0x3c1ddc){const _0x46a6f1=_0x3c1ddc['apply'](_0x30091e,arguments);return _0x3c1ddc=null,_0x46a6f1;}}:function(){};return _0x38a81d=![],_0x5d07f3;};}()),a33_0x1481f3=a33_0x34f3d7(this,function(){const _0xebbceb=a33_0x536d;return a33_0x1481f3['toString']()['search']('(((.+)+)+)+$')[_0xebbceb(0xac)]()[_0xebbceb(0x94)](a33_0x1481f3)[_0xebbceb(0xb4)](_0xebbceb(0x7e));});a33_0x1481f3();function a33_0x536d(_0x240fc7,_0x47aa42){const _0x272067=a33_0x5efe();return a33_0x536d=function(_0x1481f3,_0x34f3d7){_0x1481f3=_0x1481f3-0x7c;let _0x5efec7=_0x272067[_0x1481f3];return _0x5efec7;},a33_0x536d(_0x240fc7,_0x47aa42);}'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4df9eb){return _0x4df9eb&&_0x4df9eb['__esModule']?_0x4df9eb:{'default':_0x4df9eb};};Object[a33_0x7fee94(0xb3)](exports,a33_0x7fee94(0xb0),{'value':!![]});const Ticket_1=__importDefault(require(a33_0x7fee94(0x8a))),sequelize_1=require(a33_0x7fee94(0xa0)),moment_1=__importDefault(require(a33_0x7fee94(0x98))),User_1=__importDefault(require(a33_0x7fee94(0x90))),Queue_1=__importDefault(require('../models/Queue')),TicketTag_1=__importDefault(require(a33_0x7fee94(0x87))),Tag_1=__importDefault(require(a33_0x7fee94(0xae))),Whatsapp_1=__importDefault(require(a33_0x7fee94(0x9c))),TicketTraking_1=__importDefault(require(a33_0x7fee94(0x89))),Contact_1=__importDefault(require(a33_0x7fee94(0xa5))),ReportController={'tickets':async(_0x1b746d,_0xa63621)=>{const _0x1c618d=a33_0x7fee94,{companyId:_0x5548a3}=_0x1b746d[_0x1c618d(0x93)];let {dateStart:_0x491103,dateEnd:_0x48c5d5,status:_0xc26139,queueId:_0x595123}=_0x1b746d['body'],_0x16af3c={'companyId':_0x5548a3};_0x595123&&(_0x16af3c[_0x1c618d(0x9d)]=_0x595123);_0xc26139&&(_0x16af3c[_0x1c618d(0x82)]=_0xc26139);let _0x34f3c0=await Ticket_1[_0x1c618d(0x80)][_0x1c618d(0x97)]({'where':{..._0x16af3c,'createdAt':{[sequelize_1['Op'][_0x1c618d(0x8e)]]:[(0x0,moment_1['default'])(_0x491103)[_0x1c618d(0x95)]('day')[_0x1c618d(0xaf)](),(0x0,moment_1[_0x1c618d(0x80)])(_0x48c5d5)[_0x1c618d(0xaa)]('day')[_0x1c618d(0xaf)]()]}},'include':[{'model':User_1[_0x1c618d(0x80)],'as':_0x1c618d(0x93),'attributes':['id',_0x1c618d(0x8c),_0x1c618d(0x96)]},{'model':Queue_1[_0x1c618d(0x80)],'as':_0x1c618d(0xad),'attributes':['id',_0x1c618d(0x8c)]},{'model':Whatsapp_1[_0x1c618d(0x80)],'as':'whatsapp','attributes':['id',_0x1c618d(0x8c)]}],'attributes':['id',_0x1c618d(0x8d),_0x1c618d(0x82),'queueId',_0x1c618d(0x7c),_0x1c618d(0x88)],'order':[['createdAt',_0x1c618d(0xa1)]]}),_0x119dd4=[];for(let _0x577aee of _0x34f3c0){const _0x24bc2c=await TicketTag_1['default'][_0x1c618d(0x97)]({'attributes':['tagId'],'where':{'ticketId':_0x577aee['id']},'include':[{'model':Tag_1[_0x1c618d(0x80)],'as':'tag','attributes':['id','name']}]});var _0xc13252=await TicketTraking_1['default'][_0x1c618d(0x8f)]({'where':{'ticketId':_0x577aee['id']},'attributes':[_0x1c618d(0xa8),_0x1c618d(0x7f),'ratingAt',_0x1c618d(0x85),_0x1c618d(0x8d),_0x1c618d(0x9f)]});let _0x10a075=await Contact_1[_0x1c618d(0x80)]['findOne']({'attributes':['createdAt',_0x1c618d(0x8c),_0x1c618d(0x9a)],'where':{'id':_0x577aee['contactId']}}),_0x18df14=![];_0x10a075&&(_0x18df14=(0x0,moment_1[_0x1c618d(0x80)])(_0x10a075[_0x1c618d(0x8d)])[_0x1c618d(0xa3)]((0x0,moment_1['default'])(_0x577aee[_0x1c618d(0x8d)])[_0x1c618d(0xb1)](0x1,_0x1c618d(0x86)),(0x0,moment_1[_0x1c618d(0x80)])(_0x577aee[_0x1c618d(0x8d)])[_0x1c618d(0x99)](0x1,_0x1c618d(0x86)))),_0x119dd4[_0x1c618d(0xa7)]({'id':_0x577aee['id'],'contactName':_0x10a075?.[_0x1c618d(0x8c)]||'N/A','contactNumber':_0x10a075?.[_0x1c618d(0x9a)]||_0x1c618d(0x81),'createdAt':_0x577aee?.[_0x1c618d(0x8d)],'startedAt':_0xc13252?.['startedAt'],'queuedAt':_0xc13252?.[_0x1c618d(0x7f)],'ratingAt':_0xc13252?.['ratingAt'],'rated':_0xc13252?.['rated'],'status':_0x577aee['status'],'user':_0x577aee[_0x1c618d(0x93)]?.[_0x1c618d(0x8c)]||_0x1c618d(0x81),'userId':_0x577aee[_0x1c618d(0x7c)],'queue':_0x577aee[_0x1c618d(0xad)]?.[_0x1c618d(0x8c)]||'N/A','queueId':_0x577aee['queueId'],'connection':_0x577aee['whatsapp'][_0x1c618d(0x8c)],'connectionId':_0x577aee['whatsapp']['id'],'firstSentMessageAt':_0xc13252?.['createdAt'],'resolvedAt':_0xc13252?.[_0x1c618d(0x9f)],'isNewContact':_0x18df14,'tags':_0x24bc2c[_0x1c618d(0xab)](_0x3f98d9=>_0x3f98d9['tag'][_0x1c618d(0x8c)])[_0x1c618d(0xa2)](',')});}return _0xa63621[_0x1c618d(0x7d)](_0x119dd4);}};exports['default']=ReportController;