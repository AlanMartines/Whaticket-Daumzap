function a33_0x103e(){const _0x2d206d=['constructor','222112hEOpXM','queueId','601842wktOhr','tagId','../models/Whatsapp','../models/TicketTag','json','rated','number','../models/Ticket','toDate','tag','status','9OipawR','day','3640230YnPLka','search','map','../models/Queue','minute','between','findAll','name','N/A','2030616plOnxT','finishedAt','DESC','whatsapp','contactId','body','../models/User','createdAt','default','profile','(((.+)+)+)+$','user','moment/moment','../models/Tag','3yGcdmr','sequelize','185388MmfHnu','7IrHQCE','ratingAt','subtract','startOf','754945XhVzDA','join','296196YTEnJT','toString','userId','startedAt','isBetween','push','findOne','queue','../models/TicketTraking','__esModule'];a33_0x103e=function(){return _0x2d206d;};return a33_0x103e();}const a33_0x528072=a33_0x3f90;(function(_0x49d4dc,_0x3fe58b){const _0x1a08d9=a33_0x3f90,_0x308543=_0x49d4dc();while(!![]){try{const _0x2883e4=parseInt(_0x1a08d9(0xe6))/0x1+parseInt(_0x1a08d9(0xe8))/0x2*(parseInt(_0x1a08d9(0x10c))/0x3)+parseInt(_0x1a08d9(0x115))/0x4+parseInt(_0x1a08d9(0x113))/0x5+-parseInt(_0x1a08d9(0x10e))/0x6*(-parseInt(_0x1a08d9(0x10f))/0x7)+-parseInt(_0x1a08d9(0xfe))/0x8*(parseInt(_0x1a08d9(0xf3))/0x9)+-parseInt(_0x1a08d9(0xf5))/0xa;if(_0x2883e4===_0x3fe58b)break;else _0x308543['push'](_0x308543['shift']());}catch(_0x54bc03){_0x308543['push'](_0x308543['shift']());}}}(a33_0x103e,0x2755f));const a33_0x438c3a=(function(){let _0x30aac4=!![];return function(_0x94f838,_0x3b17cf){const _0x51e38b=_0x30aac4?function(){if(_0x3b17cf){const _0x39dcdc=_0x3b17cf['apply'](_0x94f838,arguments);return _0x3b17cf=null,_0x39dcdc;}}:function(){};return _0x30aac4=![],_0x51e38b;};}()),a33_0x54197f=a33_0x438c3a(this,function(){const _0x21830e=a33_0x3f90;return a33_0x54197f[_0x21830e(0x116)]()['search'](_0x21830e(0x108))[_0x21830e(0x116)]()[_0x21830e(0xe5)](a33_0x54197f)[_0x21830e(0xf6)](_0x21830e(0x108));});a33_0x54197f();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x425569){return _0x425569&&_0x425569['__esModule']?_0x425569:{'default':_0x425569};};Object['defineProperty'](exports,a33_0x528072(0xe4),{'value':!![]});const Ticket_1=__importDefault(require(a33_0x528072(0xef))),sequelize_1=require(a33_0x528072(0x10d)),moment_1=__importDefault(require(a33_0x528072(0x10a))),User_1=__importDefault(require(a33_0x528072(0x104))),Queue_1=__importDefault(require(a33_0x528072(0xf8))),TicketTag_1=__importDefault(require(a33_0x528072(0xeb))),Tag_1=__importDefault(require(a33_0x528072(0x10b))),Whatsapp_1=__importDefault(require(a33_0x528072(0xea))),TicketTraking_1=__importDefault(require(a33_0x528072(0x11d))),Contact_1=__importDefault(require('../models/Contact')),ReportController={'tickets':async(_0x4c4976,_0x271e78)=>{const _0x3093dd=a33_0x528072,{companyId:_0xacdf19}=_0x4c4976['user'];let {dateStart:_0x5b0829,dateEnd:_0x4a47f0,status:_0x2366d0,queueId:_0x1d17ad}=_0x4c4976[_0x3093dd(0x103)],_0x22416b={'companyId':_0xacdf19};_0x1d17ad&&(_0x22416b[_0x3093dd(0xe7)]=_0x1d17ad);_0x2366d0&&(_0x22416b[_0x3093dd(0xf2)]=_0x2366d0);let _0x429336=await Ticket_1['default'][_0x3093dd(0xfb)]({'where':{..._0x22416b,'createdAt':{[sequelize_1['Op'][_0x3093dd(0xfa)]]:[(0x0,moment_1[_0x3093dd(0x106)])(_0x5b0829)[_0x3093dd(0x112)](_0x3093dd(0xf4))['toDate'](),(0x0,moment_1[_0x3093dd(0x106)])(_0x4a47f0)['endOf']('day')[_0x3093dd(0xf0)]()]}},'include':[{'model':User_1[_0x3093dd(0x106)],'as':_0x3093dd(0x109),'attributes':['id',_0x3093dd(0xfc),_0x3093dd(0x107)]},{'model':Queue_1[_0x3093dd(0x106)],'as':_0x3093dd(0x11c),'attributes':['id',_0x3093dd(0xfc)]},{'model':Whatsapp_1[_0x3093dd(0x106)],'as':_0x3093dd(0x101),'attributes':['id',_0x3093dd(0xfc)]}],'attributes':['id','createdAt',_0x3093dd(0xf2),_0x3093dd(0xe7),_0x3093dd(0x117),_0x3093dd(0x102)],'order':[['createdAt',_0x3093dd(0x100)]]}),_0x395613=[];for(let _0x14da99 of _0x429336){const _0x56411e=await TicketTag_1['default'][_0x3093dd(0xfb)]({'attributes':[_0x3093dd(0xe9)],'where':{'ticketId':_0x14da99['id']},'include':[{'model':Tag_1['default'],'as':_0x3093dd(0xf1),'attributes':['id',_0x3093dd(0xfc)]}]});var _0x511429=await TicketTraking_1[_0x3093dd(0x106)][_0x3093dd(0x11b)]({'where':{'ticketId':_0x14da99['id']},'attributes':[_0x3093dd(0x118),'queuedAt',_0x3093dd(0x110),_0x3093dd(0xed),_0x3093dd(0x105),_0x3093dd(0xff)]});let _0x3440ed=await Contact_1['default'][_0x3093dd(0x11b)]({'attributes':[_0x3093dd(0x105),_0x3093dd(0xfc),'number'],'where':{'id':_0x14da99[_0x3093dd(0x102)]}}),_0x2f2a20=![];_0x3440ed&&(_0x2f2a20=(0x0,moment_1[_0x3093dd(0x106)])(_0x3440ed[_0x3093dd(0x105)])[_0x3093dd(0x119)]((0x0,moment_1[_0x3093dd(0x106)])(_0x14da99[_0x3093dd(0x105)])[_0x3093dd(0x111)](0x1,_0x3093dd(0xf9)),(0x0,moment_1['default'])(_0x14da99[_0x3093dd(0x105)])['add'](0x1,'minute'))),_0x395613[_0x3093dd(0x11a)]({'id':_0x14da99['id'],'contactName':_0x3440ed?.[_0x3093dd(0xfc)]||'N/A','contactNumber':_0x3440ed?.[_0x3093dd(0xee)]||_0x3093dd(0xfd),'createdAt':_0x14da99?.[_0x3093dd(0x105)],'startedAt':_0x511429?.[_0x3093dd(0x118)],'queuedAt':_0x511429?.['queuedAt'],'ratingAt':_0x511429?.['ratingAt'],'rated':_0x511429?.[_0x3093dd(0xed)],'status':_0x14da99['status'],'user':_0x14da99['user']?.['name']||_0x3093dd(0xfd),'userId':_0x14da99[_0x3093dd(0x117)],'queue':_0x14da99[_0x3093dd(0x11c)]?.[_0x3093dd(0xfc)]||_0x3093dd(0xfd),'queueId':_0x14da99[_0x3093dd(0xe7)],'connection':_0x14da99['whatsapp'][_0x3093dd(0xfc)],'connectionId':_0x14da99['whatsapp']['id'],'firstSentMessageAt':_0x511429?.[_0x3093dd(0x105)],'resolvedAt':_0x511429?.[_0x3093dd(0xff)],'isNewContact':_0x2f2a20,'tags':_0x56411e[_0x3093dd(0xf7)](_0x103a5f=>_0x103a5f[_0x3093dd(0xf1)]['name'])[_0x3093dd(0x114)](',')});}return _0x271e78[_0x3093dd(0xec)](_0x395613);}};function a33_0x3f90(_0x489bc4,_0x44c919){const _0x154f42=a33_0x103e();return a33_0x3f90=function(_0x54197f,_0x438c3a){_0x54197f=_0x54197f-0xe4;let _0x103e9c=_0x154f42[_0x54197f];return _0x103e9c;},a33_0x3f90(_0x489bc4,_0x44c919);}exports[a33_0x528072(0x106)]=ReportController;