const a33_0x3b3289=a33_0x3806;(function(_0x36c268,_0x5c2777){const _0x3024ca=a33_0x3806,_0xf81315=_0x36c268();while(!![]){try{const _0x3518bb=-parseInt(_0x3024ca(0x114))/0x1+-parseInt(_0x3024ca(0x12d))/0x2+-parseInt(_0x3024ca(0x128))/0x3+-parseInt(_0x3024ca(0x117))/0x4*(parseInt(_0x3024ca(0x107))/0x5)+-parseInt(_0x3024ca(0x136))/0x6+-parseInt(_0x3024ca(0x13d))/0x7*(parseInt(_0x3024ca(0x11c))/0x8)+parseInt(_0x3024ca(0x139))/0x9*(parseInt(_0x3024ca(0x11e))/0xa);if(_0x3518bb===_0x5c2777)break;else _0xf81315['push'](_0xf81315['shift']());}catch(_0x3bc7ea){_0xf81315['push'](_0xf81315['shift']());}}}(a33_0x444f,0x9a2d5));const a33_0x1c22b7=(function(){let _0x3407c2=!![];return function(_0x17fa20,_0x33709a){const _0x391bb1=_0x3407c2?function(){const _0x50f116=a33_0x3806;if(_0x33709a){const _0x9a4ec=_0x33709a[_0x50f116(0x137)](_0x17fa20,arguments);return _0x33709a=null,_0x9a4ec;}}:function(){};return _0x3407c2=![],_0x391bb1;};}()),a33_0x3102ea=a33_0x1c22b7(this,function(){const _0x421b79=a33_0x3806;return a33_0x3102ea[_0x421b79(0x121)]()[_0x421b79(0x129)]('(((.+)+)+)+$')[_0x421b79(0x121)]()[_0x421b79(0x115)](a33_0x3102ea)[_0x421b79(0x129)](_0x421b79(0x110));});a33_0x3102ea();'use strict';var __importDefault=this&&this[a33_0x3b3289(0x132)]||function(_0x391559){const _0x5a816f=a33_0x3b3289;return _0x391559&&_0x391559[_0x5a816f(0x12f)]?_0x391559:{'default':_0x391559};};function a33_0x3806(_0x9675c5,_0x2bcb46){const _0xe52db3=a33_0x444f();return a33_0x3806=function(_0x3102ea,_0x1c22b7){_0x3102ea=_0x3102ea-0x107;let _0x444f7c=_0xe52db3[_0x3102ea];return _0x444f7c;},a33_0x3806(_0x9675c5,_0x2bcb46);}Object[a33_0x3b3289(0x133)](exports,a33_0x3b3289(0x12f),{'value':!![]});const Ticket_1=__importDefault(require(a33_0x3b3289(0x108))),sequelize_1=require('sequelize'),moment_1=__importDefault(require(a33_0x3b3289(0x109))),User_1=__importDefault(require('../models/User')),Queue_1=__importDefault(require(a33_0x3b3289(0x11f))),TicketTag_1=__importDefault(require(a33_0x3b3289(0x12e))),Tag_1=__importDefault(require(a33_0x3b3289(0x13f))),Whatsapp_1=__importDefault(require('../models/Whatsapp')),TicketTraking_1=__importDefault(require(a33_0x3b3289(0x123))),Contact_1=__importDefault(require('../models/Contact')),ReportController={'tickets':async(_0x168062,_0x37ed94)=>{const _0xc0b9d0=a33_0x3b3289,{companyId:_0x124105}=_0x168062[_0xc0b9d0(0x119)];let {dateStart:_0x2edb4d,dateEnd:_0x1c5de8,status:_0x417116,queueId:_0x2dee4d}=_0x168062[_0xc0b9d0(0x116)],_0x16e4c2={'companyId':_0x124105};_0x2dee4d&&(_0x16e4c2[_0xc0b9d0(0x13e)]=_0x2dee4d);_0x417116&&(_0x16e4c2[_0xc0b9d0(0x125)]=_0x417116);let _0x19aa61=await Ticket_1[_0xc0b9d0(0x138)]['findAll']({'where':{..._0x16e4c2,'createdAt':{[sequelize_1['Op'][_0xc0b9d0(0x11b)]]:[(0x0,moment_1[_0xc0b9d0(0x138)])(_0x2edb4d)[_0xc0b9d0(0x11d)](_0xc0b9d0(0x12c))[_0xc0b9d0(0x130)](),(0x0,moment_1[_0xc0b9d0(0x138)])(_0x1c5de8)[_0xc0b9d0(0x13c)](_0xc0b9d0(0x12c))[_0xc0b9d0(0x130)]()]}},'include':[{'model':User_1[_0xc0b9d0(0x138)],'as':_0xc0b9d0(0x119),'attributes':['id',_0xc0b9d0(0x10e),'profile']},{'model':Queue_1[_0xc0b9d0(0x138)],'as':_0xc0b9d0(0x127),'attributes':['id',_0xc0b9d0(0x10e)]},{'model':Whatsapp_1[_0xc0b9d0(0x138)],'as':_0xc0b9d0(0x10c),'attributes':['id',_0xc0b9d0(0x10e)]}],'attributes':['id',_0xc0b9d0(0x12a),_0xc0b9d0(0x125),_0xc0b9d0(0x13e),_0xc0b9d0(0x111),'contactId'],'order':[[_0xc0b9d0(0x12a),_0xc0b9d0(0x124)]]}),_0x2ed7c3=[];for(let _0x553bd3 of _0x19aa61){const _0x400bdb=await TicketTag_1[_0xc0b9d0(0x138)][_0xc0b9d0(0x13a)]({'attributes':['tagId'],'where':{'ticketId':_0x553bd3['id']},'include':[{'model':Tag_1['default'],'as':'tag','attributes':['id',_0xc0b9d0(0x10e)]}]});var _0x10890f=await TicketTraking_1[_0xc0b9d0(0x138)][_0xc0b9d0(0x10b)]({'where':{'ticketId':_0x553bd3['id']},'attributes':[_0xc0b9d0(0x126),_0xc0b9d0(0x10d),_0xc0b9d0(0x131),_0xc0b9d0(0x13b),_0xc0b9d0(0x12a),_0xc0b9d0(0x10a)]});let _0x517ccc=await Contact_1[_0xc0b9d0(0x138)]['findOne']({'attributes':['createdAt','name','number'],'where':{'id':_0x553bd3[_0xc0b9d0(0x12b)]}}),_0x2d560c=![];_0x517ccc&&(_0x2d560c=(0x0,moment_1[_0xc0b9d0(0x138)])(_0x517ccc[_0xc0b9d0(0x12a)])[_0xc0b9d0(0x11a)]((0x0,moment_1['default'])(_0x553bd3['createdAt'])[_0xc0b9d0(0x122)](0x1,_0xc0b9d0(0x134)),(0x0,moment_1[_0xc0b9d0(0x138)])(_0x553bd3[_0xc0b9d0(0x12a)])['add'](0x1,_0xc0b9d0(0x134)))),_0x2ed7c3[_0xc0b9d0(0x120)]({'id':_0x553bd3['id'],'contactName':_0x517ccc?.[_0xc0b9d0(0x10e)]||_0xc0b9d0(0x113),'contactNumber':_0x517ccc?.[_0xc0b9d0(0x112)]||_0xc0b9d0(0x113),'createdAt':_0x553bd3?.['createdAt'],'startedAt':_0x10890f?.[_0xc0b9d0(0x126)],'queuedAt':_0x10890f?.['queuedAt'],'ratingAt':_0x10890f?.[_0xc0b9d0(0x131)],'rated':_0x10890f?.[_0xc0b9d0(0x13b)],'status':_0x553bd3[_0xc0b9d0(0x125)],'user':_0x553bd3[_0xc0b9d0(0x119)]?.['name']||'N/A','userId':_0x553bd3[_0xc0b9d0(0x111)],'queue':_0x553bd3['queue']?.['name']||'N/A','queueId':_0x553bd3['queueId'],'connection':_0x553bd3[_0xc0b9d0(0x10c)][_0xc0b9d0(0x10e)],'connectionId':_0x553bd3['whatsapp']['id'],'firstSentMessageAt':_0x10890f?.[_0xc0b9d0(0x12a)],'resolvedAt':_0x10890f?.[_0xc0b9d0(0x10a)],'isNewContact':_0x2d560c,'tags':_0x400bdb[_0xc0b9d0(0x135)](_0x43c9ee=>_0x43c9ee[_0xc0b9d0(0x10f)][_0xc0b9d0(0x10e)])[_0xc0b9d0(0x118)](',')});}return _0x37ed94[_0xc0b9d0(0x140)](_0x2ed7c3);}};function a33_0x444f(){const _0x46c02f=['search','createdAt','contactId','day','1048810XjTPcx','../models/TicketTag','__esModule','toDate','ratingAt','__importDefault','defineProperty','minute','map','3592590BSciOK','apply','default','22319127UYVBYZ','findAll','rated','endOf','38766CBeifl','queueId','../models/Tag','json','5tgKUIg','../models/Ticket','moment/moment','finishedAt','findOne','whatsapp','queuedAt','name','tag','(((.+)+)+)+$','userId','number','N/A','1097180nxSukC','constructor','body','218676CTawEo','join','user','isBetween','between','1384QBmzZB','startOf','20UDWLRP','../models/Queue','push','toString','subtract','../models/TicketTraking','DESC','status','startedAt','queue','3285612nqZzGy'];a33_0x444f=function(){return _0x46c02f;};return a33_0x444f();}exports['default']=ReportController;