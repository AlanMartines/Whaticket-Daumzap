const a28_0x4eeec9=a28_0x5d00;(function(_0xe87be4,_0x1409c0){const _0x4b3463=a28_0x5d00,_0x53a73a=_0xe87be4();while(!![]){try{const _0x7ab3f1=-parseInt(_0x4b3463(0x1c2))/0x1+-parseInt(_0x4b3463(0x1bc))/0x2+parseInt(_0x4b3463(0x1ce))/0x3*(-parseInt(_0x4b3463(0x1b6))/0x4)+parseInt(_0x4b3463(0x1b1))/0x5*(parseInt(_0x4b3463(0x1a8))/0x6)+parseInt(_0x4b3463(0x1b7))/0x7*(parseInt(_0x4b3463(0x1c9))/0x8)+-parseInt(_0x4b3463(0x1b3))/0x9+-parseInt(_0x4b3463(0x1ad))/0xa*(-parseInt(_0x4b3463(0x1aa))/0xb);if(_0x7ab3f1===_0x1409c0)break;else _0x53a73a['push'](_0x53a73a['shift']());}catch(_0x4cabfd){_0x53a73a['push'](_0x53a73a['shift']());}}}(a28_0x39ed,0xb9453));const a28_0x123111=(function(){let _0x219d24=!![];return function(_0x513b65,_0x17abde){const _0x11a3a9=_0x219d24?function(){const _0x4e8032=a28_0x5d00;if(_0x17abde){const _0x3632d2=_0x17abde[_0x4e8032(0x1a4)](_0x513b65,arguments);return _0x17abde=null,_0x3632d2;}}:function(){};return _0x219d24=![],_0x11a3a9;};}()),a28_0x54521f=a28_0x123111(this,function(){const _0x33b0c4=a28_0x5d00;return a28_0x54521f[_0x33b0c4(0x1a7)]()['search'](_0x33b0c4(0x1cc))['toString']()[_0x33b0c4(0x1c1)](a28_0x54521f)[_0x33b0c4(0x1c5)](_0x33b0c4(0x1cc));});a28_0x54521f();'use strict';function a28_0x5d00(_0x2df8d4,_0x1d3229){const _0x46088c=a28_0x39ed();return a28_0x5d00=function(_0x54521f,_0x123111){_0x54521f=_0x54521f-0x1a0;let _0x39eda1=_0x46088c[_0x54521f];return _0x39eda1;},a28_0x5d00(_0x2df8d4,_0x1d3229);}var __importDefault=this&&this[a28_0x4eeec9(0x1ab)]||function(_0x246475){return _0x246475&&_0x246475['__esModule']?_0x246475:{'default':_0x246475};};Object[a28_0x4eeec9(0x1a0)](exports,'__esModule',{'value':!![]}),exports[a28_0x4eeec9(0x1ac)]=exports[a28_0x4eeec9(0x1be)]=exports[a28_0x4eeec9(0x1ca)]=exports[a28_0x4eeec9(0x1b0)]=exports[a28_0x4eeec9(0x1a9)]=void 0x0;function a28_0x39ed(){const _0x1d1174=['company-','emit','jsonwebtoken','153304MZhYkB','show','secret','(((.+)+)+)+$','../services/PromptServices/CreatePromptService','201390MGFVnq','defineProperty','default','status','Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado!','apply','-mainchannel','findAndCountAll','toString','78KTxouw','index','1710005mgBDLj','__importDefault','remove','190ltnnjz','../services/PromptServices/DeletePromptService','../config/auth','store','205005Awmxvm','verify','9263187sLKCDL','authorization','../models/Whatsapp','40RmmMkn','448CvVTUu','Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado\x20nas\x20conexões\x20Whatsapp!','split','json','delete','2117670lKHIWP','params','update','getIO','query','constructor','1194845ATCuVE','headers','prompt','search'];a28_0x39ed=function(){return _0x1d1174;};return a28_0x39ed();}const socket_1=require('../libs/socket'),CreatePromptService_1=__importDefault(require(a28_0x4eeec9(0x1cd))),DeletePromptService_1=__importDefault(require(a28_0x4eeec9(0x1ae))),ListPromptsService_1=__importDefault(require('../services/PromptServices/ListPromptsService')),ShowPromptService_1=__importDefault(require('../services/PromptServices/ShowPromptService')),UpdatePromptService_1=__importDefault(require('../services/PromptServices/UpdatePromptService')),Whatsapp_1=__importDefault(require(a28_0x4eeec9(0x1b5))),jsonwebtoken_1=require(a28_0x4eeec9(0x1c8)),auth_1=__importDefault(require(a28_0x4eeec9(0x1af))),index=async(_0x37b47a,_0x400905)=>{const _0x22fc4f=a28_0x4eeec9,{pageNumber:_0x25af20,searchParam:_0x3c2160}=_0x37b47a[_0x22fc4f(0x1c0)],_0x31bb32=_0x37b47a[_0x22fc4f(0x1c3)][_0x22fc4f(0x1b4)],[,_0x3cddd7]=_0x31bb32['split']('\x20'),_0x58887b=(0x0,jsonwebtoken_1[_0x22fc4f(0x1b2)])(_0x3cddd7,auth_1['default']['secret']),{companyId:_0x21eb32}=_0x58887b,{prompts:_0x185b56,count:_0x315305,hasMore:_0x4d998c}=await(0x0,ListPromptsService_1[_0x22fc4f(0x1a1)])({'searchParam':_0x3c2160,'pageNumber':_0x25af20,'companyId':_0x21eb32});return _0x400905['status'](0xc8)[_0x22fc4f(0x1ba)]({'prompts':_0x185b56,'count':_0x315305,'hasMore':_0x4d998c});};exports[a28_0x4eeec9(0x1a9)]=index;const store=async(_0x1b513e,_0xa96f6d)=>{const _0x4d2e11=a28_0x4eeec9,_0x1643f6=_0x1b513e[_0x4d2e11(0x1c3)][_0x4d2e11(0x1b4)],[,_0x47bcbf]=_0x1643f6[_0x4d2e11(0x1b9)]('\x20'),_0x3663d7=(0x0,jsonwebtoken_1[_0x4d2e11(0x1b2)])(_0x47bcbf,auth_1['default']['secret']),{companyId:_0x1cd6a8}=_0x3663d7,{name:_0x32847b,apiKey:_0x5e05af,prompt:_0x4ce2d7,maxTokens:_0x7b12ce,temperature:_0x41b081,promptTokens:_0xf43453,completionTokens:_0x247437,totalTokens:_0x14a464,queueId:_0xc7286d,maxMessages:_0x4124c9,voice:_0x1099c1,voiceKey:_0x5d6782,voiceRegion:_0x26a9a0}=_0x1b513e['body'],_0x36333c=await(0x0,CreatePromptService_1[_0x4d2e11(0x1a1)])({'name':_0x32847b,'apiKey':_0x5e05af,'prompt':_0x4ce2d7,'maxTokens':_0x7b12ce,'temperature':_0x41b081,'promptTokens':_0xf43453,'completionTokens':_0x247437,'totalTokens':_0x14a464,'queueId':_0xc7286d,'maxMessages':_0x4124c9,'companyId':_0x1cd6a8,'voice':_0x1099c1,'voiceKey':_0x5d6782,'voiceRegion':_0x26a9a0}),_0x1efaf7=(0x0,socket_1['getIO'])();return _0x1efaf7['to'](_0x4d2e11(0x1c6)+_0x1cd6a8+_0x4d2e11(0x1a5))[_0x4d2e11(0x1c7)](_0x4d2e11(0x1c4),{'action':_0x4d2e11(0x1be),'prompt':_0x36333c}),_0xa96f6d[_0x4d2e11(0x1a2)](0xc8)['json'](_0x36333c);};exports[a28_0x4eeec9(0x1b0)]=store;const show=async(_0x132833,_0x58c46b)=>{const _0x31a452=a28_0x4eeec9,{promptId:_0x4b4c17}=_0x132833['params'],_0x259e5b=_0x132833[_0x31a452(0x1c3)][_0x31a452(0x1b4)],[,_0x1a4961]=_0x259e5b[_0x31a452(0x1b9)]('\x20'),_0x4d02ec=(0x0,jsonwebtoken_1[_0x31a452(0x1b2)])(_0x1a4961,auth_1[_0x31a452(0x1a1)][_0x31a452(0x1cb)]),{companyId:_0xc9d9bd}=_0x4d02ec,_0x2bbf00=await(0x0,ShowPromptService_1[_0x31a452(0x1a1)])({'promptId':_0x4b4c17,'companyId':_0xc9d9bd});return _0x58c46b[_0x31a452(0x1a2)](0xc8)[_0x31a452(0x1ba)](_0x2bbf00);};exports[a28_0x4eeec9(0x1ca)]=show;const update=async(_0x597a79,_0x340119)=>{const _0x3287a4=a28_0x4eeec9,{promptId:_0x21cbee}=_0x597a79[_0x3287a4(0x1bd)],_0x4693e2=_0x597a79['body'],_0x44e4fb=_0x597a79['headers'][_0x3287a4(0x1b4)],[,_0x4057b0]=_0x44e4fb[_0x3287a4(0x1b9)]('\x20'),_0x27b781=(0x0,jsonwebtoken_1[_0x3287a4(0x1b2)])(_0x4057b0,auth_1['default'][_0x3287a4(0x1cb)]),{companyId:_0x1c9098}=_0x27b781,_0x2c4965=await(0x0,UpdatePromptService_1[_0x3287a4(0x1a1)])({'promptData':_0x4693e2,'promptId':_0x21cbee,'companyId':_0x1c9098}),_0x28de3c=(0x0,socket_1['getIO'])();return _0x28de3c[_0x3287a4(0x1c7)](_0x3287a4(0x1c4),{'action':'update','prompt':_0x2c4965}),_0x340119[_0x3287a4(0x1a2)](0xc8)[_0x3287a4(0x1ba)](_0x2c4965);};exports['update']=update;const remove=async(_0x50c72d,_0x203521)=>{const _0x353907=a28_0x4eeec9,{promptId:_0x8c59c3}=_0x50c72d[_0x353907(0x1bd)],_0x204904=_0x50c72d[_0x353907(0x1c3)]['authorization'],[,_0xc8b7c4]=_0x204904[_0x353907(0x1b9)]('\x20'),_0x48f268=(0x0,jsonwebtoken_1[_0x353907(0x1b2)])(_0xc8b7c4,auth_1[_0x353907(0x1a1)][_0x353907(0x1cb)]),{companyId:_0x204c5f}=_0x48f268;try{const {count:_0x19c3b2}=await Whatsapp_1[_0x353907(0x1a1)][_0x353907(0x1a6)]({'where':{'promptId':+_0x8c59c3,'companyId':_0x204c5f}});if(_0x19c3b2>0x0)return _0x203521[_0x353907(0x1a2)](0xc8)['json']({'message':_0x353907(0x1b8)});await(0x0,DeletePromptService_1[_0x353907(0x1a1)])(_0x8c59c3,_0x204c5f);const _0x3a92dd=(0x0,socket_1[_0x353907(0x1bf)])();return _0x3a92dd[_0x353907(0x1c7)](_0x353907(0x1c4),{'action':_0x353907(0x1bb),'intelligenceId':+_0x8c59c3}),_0x203521['status'](0xc8)['json']({'message':'Prompt\x20deleted'});}catch(_0x1e205f){return _0x203521[_0x353907(0x1a2)](0x1f4)[_0x353907(0x1ba)]({'message':_0x353907(0x1a3)});}};exports[a28_0x4eeec9(0x1ac)]=remove;