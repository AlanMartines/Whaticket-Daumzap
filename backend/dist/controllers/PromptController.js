const a28_0x3f1f45=a28_0x2cfa;(function(_0x45c3d5,_0x39f54f){const _0x2110d0=a28_0x2cfa,_0x2ceb8d=_0x45c3d5();while(!![]){try{const _0x37f7a2=parseInt(_0x2110d0(0x1ef))/0x1*(-parseInt(_0x2110d0(0x1ec))/0x2)+parseInt(_0x2110d0(0x1f9))/0x3*(parseInt(_0x2110d0(0x1dd))/0x4)+parseInt(_0x2110d0(0x1d0))/0x5*(parseInt(_0x2110d0(0x1e1))/0x6)+-parseInt(_0x2110d0(0x1f1))/0x7+-parseInt(_0x2110d0(0x1e3))/0x8+parseInt(_0x2110d0(0x1d8))/0x9*(-parseInt(_0x2110d0(0x1f4))/0xa)+parseInt(_0x2110d0(0x1d4))/0xb*(parseInt(_0x2110d0(0x1e0))/0xc);if(_0x37f7a2===_0x39f54f)break;else _0x2ceb8d['push'](_0x2ceb8d['shift']());}catch(_0x50312e){_0x2ceb8d['push'](_0x2ceb8d['shift']());}}}(a28_0xe3ca,0xd16f6));const a28_0x22880d=(function(){let _0x3676a3=!![];return function(_0x5d47f7,_0x525f88){const _0x2d4024=_0x3676a3?function(){if(_0x525f88){const _0x5eb412=_0x525f88['apply'](_0x5d47f7,arguments);return _0x525f88=null,_0x5eb412;}}:function(){};return _0x3676a3=![],_0x2d4024;};}()),a28_0x3653ff=a28_0x22880d(this,function(){const _0x46975e=a28_0x2cfa;return a28_0x3653ff['toString']()[_0x46975e(0x1f8)](_0x46975e(0x1fb))[_0x46975e(0x1d1)]()['constructor'](a28_0x3653ff)[_0x46975e(0x1f8)](_0x46975e(0x1fb));});a28_0x3653ff();'use strict';var __importDefault=this&&this[a28_0x3f1f45(0x1df)]||function(_0x4f4d09){return _0x4f4d09&&_0x4f4d09['__esModule']?_0x4f4d09:{'default':_0x4f4d09};};Object[a28_0x3f1f45(0x1f5)](exports,a28_0x3f1f45(0x1d6),{'value':!![]}),exports['remove']=exports['update']=exports['show']=exports[a28_0x3f1f45(0x1f3)]=exports[a28_0x3f1f45(0x1d9)]=void 0x0;const socket_1=require(a28_0x3f1f45(0x1d5)),CreatePromptService_1=__importDefault(require(a28_0x3f1f45(0x1cf))),DeletePromptService_1=__importDefault(require('../services/PromptServices/DeletePromptService')),ListPromptsService_1=__importDefault(require(a28_0x3f1f45(0x1eb))),ShowPromptService_1=__importDefault(require(a28_0x3f1f45(0x1fc))),UpdatePromptService_1=__importDefault(require(a28_0x3f1f45(0x1f2))),Whatsapp_1=__importDefault(require(a28_0x3f1f45(0x1e7))),jsonwebtoken_1=require('jsonwebtoken'),auth_1=__importDefault(require(a28_0x3f1f45(0x1ce))),index=async(_0x20967c,_0x3854b9)=>{const _0x592182=a28_0x3f1f45,{pageNumber:_0x3284d5,searchParam:_0x42a4b0}=_0x20967c[_0x592182(0x1ea)],_0x682404=_0x20967c[_0x592182(0x1e8)][_0x592182(0x1f7)],[,_0x2d9d71]=_0x682404['split']('\x20'),_0x222467=(0x0,jsonwebtoken_1['verify'])(_0x2d9d71,auth_1[_0x592182(0x1e9)][_0x592182(0x1e2)]),{companyId:_0x12a24f}=_0x222467,{prompts:_0x32bcfa,count:_0x65b953,hasMore:_0x2d101d}=await(0x0,ListPromptsService_1[_0x592182(0x1e9)])({'searchParam':_0x42a4b0,'pageNumber':_0x3284d5,'companyId':_0x12a24f});return _0x3854b9['status'](0xc8)[_0x592182(0x1d3)]({'prompts':_0x32bcfa,'count':_0x65b953,'hasMore':_0x2d101d});};exports[a28_0x3f1f45(0x1d9)]=index;function a28_0xe3ca(){const _0x5c3431=['secret','5854944REKHuz','update','prompt','params','../models/Whatsapp','headers','default','query','../services/PromptServices/ListPromptsService','1761894JKagdD','Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado!','body','1WtLBIR','remove','3962294XgvEGt','../services/PromptServices/UpdatePromptService','store','20ojYrKh','defineProperty','emit','authorization','search','185793HckpHA','findAndCountAll','(((.+)+)+)+$','../services/PromptServices/ShowPromptService','Não\x20foi\x20possível\x20excluir!\x20Verifique\x20se\x20este\x20prompt\x20está\x20sendo\x20usado\x20nas\x20conexões\x20Whatsapp!','../config/auth','../services/PromptServices/CreatePromptService','106435AcQByv','toString','split','json','11XiTyqK','../libs/socket','__esModule','-mainchannel','6606108NXYeSF','index','company-','getIO','status','4lTmCot','verify','__importDefault','53058108lqdyRx','6xcQYwc'];a28_0xe3ca=function(){return _0x5c3431;};return a28_0xe3ca();}function a28_0x2cfa(_0x232c89,_0x455804){const _0x19f9be=a28_0xe3ca();return a28_0x2cfa=function(_0x3653ff,_0x22880d){_0x3653ff=_0x3653ff-0x1cd;let _0xe3ca47=_0x19f9be[_0x3653ff];return _0xe3ca47;},a28_0x2cfa(_0x232c89,_0x455804);}const store=async(_0x4a6032,_0x54fce4)=>{const _0x34c53d=a28_0x3f1f45,_0x167d94=_0x4a6032[_0x34c53d(0x1e8)][_0x34c53d(0x1f7)],[,_0x3bb71b]=_0x167d94['split']('\x20'),_0x1133ef=(0x0,jsonwebtoken_1[_0x34c53d(0x1de)])(_0x3bb71b,auth_1[_0x34c53d(0x1e9)][_0x34c53d(0x1e2)]),{companyId:_0x4cbcc1}=_0x1133ef,{name:_0x3c5c6e,apiKey:_0x462884,prompt:_0x4fb5d6,maxTokens:_0x57a38d,temperature:_0x1500ff,promptTokens:_0x3d325b,completionTokens:_0x48cc97,totalTokens:_0x4ae204,queueId:_0x2e4b8e,maxMessages:_0x3e670a,voice:_0x1de4ed,voiceKey:_0x1d9bd6,voiceRegion:_0x5be1f9}=_0x4a6032[_0x34c53d(0x1ee)],_0x37aa42=await(0x0,CreatePromptService_1[_0x34c53d(0x1e9)])({'name':_0x3c5c6e,'apiKey':_0x462884,'prompt':_0x4fb5d6,'maxTokens':_0x57a38d,'temperature':_0x1500ff,'promptTokens':_0x3d325b,'completionTokens':_0x48cc97,'totalTokens':_0x4ae204,'queueId':_0x2e4b8e,'maxMessages':_0x3e670a,'companyId':_0x4cbcc1,'voice':_0x1de4ed,'voiceKey':_0x1d9bd6,'voiceRegion':_0x5be1f9}),_0x5363c9=(0x0,socket_1['getIO'])();return _0x5363c9['to'](_0x34c53d(0x1da)+_0x4cbcc1+_0x34c53d(0x1d7))[_0x34c53d(0x1f6)](_0x34c53d(0x1e5),{'action':_0x34c53d(0x1e4),'prompt':_0x37aa42}),_0x54fce4['status'](0xc8)['json'](_0x37aa42);};exports[a28_0x3f1f45(0x1f3)]=store;const show=async(_0x3285c4,_0x3d2fe7)=>{const _0x24473c=a28_0x3f1f45,{promptId:_0x10fd9a}=_0x3285c4[_0x24473c(0x1e6)],_0x293afe=_0x3285c4['headers']['authorization'],[,_0x335b08]=_0x293afe[_0x24473c(0x1d2)]('\x20'),_0x5663d3=(0x0,jsonwebtoken_1[_0x24473c(0x1de)])(_0x335b08,auth_1['default'][_0x24473c(0x1e2)]),{companyId:_0x5a7d0b}=_0x5663d3,_0x3ba7ea=await(0x0,ShowPromptService_1[_0x24473c(0x1e9)])({'promptId':_0x10fd9a,'companyId':_0x5a7d0b});return _0x3d2fe7[_0x24473c(0x1dc)](0xc8)[_0x24473c(0x1d3)](_0x3ba7ea);};exports['show']=show;const update=async(_0x5f2311,_0x26f928)=>{const _0x400975=a28_0x3f1f45,{promptId:_0x4040a1}=_0x5f2311[_0x400975(0x1e6)],_0x15b268=_0x5f2311['body'],_0x342aa9=_0x5f2311[_0x400975(0x1e8)][_0x400975(0x1f7)],[,_0x1796ed]=_0x342aa9[_0x400975(0x1d2)]('\x20'),_0x27bd47=(0x0,jsonwebtoken_1[_0x400975(0x1de)])(_0x1796ed,auth_1[_0x400975(0x1e9)]['secret']),{companyId:_0x44db1b}=_0x27bd47,_0x48bda1=await(0x0,UpdatePromptService_1['default'])({'promptData':_0x15b268,'promptId':_0x4040a1,'companyId':_0x44db1b}),_0x533f30=(0x0,socket_1['getIO'])();return _0x533f30[_0x400975(0x1f6)](_0x400975(0x1e5),{'action':'update','prompt':_0x48bda1}),_0x26f928['status'](0xc8)[_0x400975(0x1d3)](_0x48bda1);};exports[a28_0x3f1f45(0x1e4)]=update;const remove=async(_0xa50728,_0x186243)=>{const _0x2721cd=a28_0x3f1f45,{promptId:_0x1de214}=_0xa50728[_0x2721cd(0x1e6)],_0x485a06=_0xa50728[_0x2721cd(0x1e8)][_0x2721cd(0x1f7)],[,_0xdde9a1]=_0x485a06[_0x2721cd(0x1d2)]('\x20'),_0x33dbfb=(0x0,jsonwebtoken_1['verify'])(_0xdde9a1,auth_1[_0x2721cd(0x1e9)]['secret']),{companyId:_0x5bf561}=_0x33dbfb;try{const {count:_0x73f510}=await Whatsapp_1[_0x2721cd(0x1e9)][_0x2721cd(0x1fa)]({'where':{'promptId':+_0x1de214,'companyId':_0x5bf561}});if(_0x73f510>0x0)return _0x186243[_0x2721cd(0x1dc)](0xc8)[_0x2721cd(0x1d3)]({'message':_0x2721cd(0x1cd)});await(0x0,DeletePromptService_1[_0x2721cd(0x1e9)])(_0x1de214,_0x5bf561);const _0x5265a5=(0x0,socket_1[_0x2721cd(0x1db)])();return _0x5265a5[_0x2721cd(0x1f6)]('prompt',{'action':'delete','intelligenceId':+_0x1de214}),_0x186243[_0x2721cd(0x1dc)](0xc8)['json']({'message':'Prompt\x20deleted'});}catch(_0x53a79e){return _0x186243['status'](0x1f4)[_0x2721cd(0x1d3)]({'message':_0x2721cd(0x1ed)});}};exports[a28_0x3f1f45(0x1f0)]=remove;