const a44_0x1a9039=a44_0x5eba;(function(_0x13db31,_0x4a0ab8){const _0x93e336=a44_0x5eba,_0x140ca0=_0x13db31();while(!![]){try{const _0x39a73a=-parseInt(_0x93e336(0xfc))/0x1+-parseInt(_0x93e336(0xfa))/0x2+-parseInt(_0x93e336(0xde))/0x3*(parseInt(_0x93e336(0x10f))/0x4)+parseInt(_0x93e336(0xf4))/0x5+parseInt(_0x93e336(0x114))/0x6+-parseInt(_0x93e336(0x109))/0x7*(-parseInt(_0x93e336(0x10a))/0x8)+-parseInt(_0x93e336(0x103))/0x9*(parseInt(_0x93e336(0x104))/0xa);if(_0x39a73a===_0x4a0ab8)break;else _0x140ca0['push'](_0x140ca0['shift']());}catch(_0x1e1420){_0x140ca0['push'](_0x140ca0['shift']());}}}(a44_0x11e0,0x4972d));const a44_0x28af07=(function(){let _0x3d3a19=!![];return function(_0x47a10e,_0x5f1b79){const _0x34de00=_0x3d3a19?function(){const _0x2f3020=a44_0x5eba;if(_0x5f1b79){const _0x26a7a1=_0x5f1b79[_0x2f3020(0x10e)](_0x47a10e,arguments);return _0x5f1b79=null,_0x26a7a1;}}:function(){};return _0x3d3a19=![],_0x34de00;};}()),a44_0x1330ca=a44_0x28af07(this,function(){const _0x20ddbf=a44_0x5eba;return a44_0x1330ca['toString']()[_0x20ddbf(0xe3)](_0x20ddbf(0xdc))['toString']()[_0x20ddbf(0x111)](a44_0x1330ca)[_0x20ddbf(0xe3)]('(((.+)+)+)+$');});a44_0x1330ca();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x52ecc8){return _0x52ecc8&&_0x52ecc8['__esModule']?_0x52ecc8:{'default':_0x52ecc8};};function a44_0x5eba(_0xf2a336,_0x59444c){const _0x159395=a44_0x11e0();return a44_0x5eba=function(_0x1330ca,_0x28af07){_0x1330ca=_0x1330ca-0xdc;let _0x11e0d2=_0x159395[_0x1330ca];return _0x11e0d2;},a44_0x5eba(_0xf2a336,_0x59444c);}Object[a44_0x1a9039(0xf1)](exports,a44_0x1a9039(0xec),{'value':!![]}),exports[a44_0x1a9039(0xf3)]=exports[a44_0x1a9039(0x108)]=exports['update']=exports[a44_0x1a9039(0x112)]=exports['storeFromCompanySettings']=exports[a44_0x1a9039(0xed)]=exports['index']=void 0x0;const socket_1=require(a44_0x1a9039(0x107)),CheckSettings_1=__importDefault(require(a44_0x1a9039(0x10b))),AppError_1=__importDefault(require(a44_0x1a9039(0x10c))),CreateUserService_1=__importDefault(require(a44_0x1a9039(0xe8))),ListUsersService_1=__importDefault(require(a44_0x1a9039(0xdd))),UpdateUserService_1=__importDefault(require(a44_0x1a9039(0xea))),ShowUserService_1=__importDefault(require(a44_0x1a9039(0xdf))),DeleteUserService_1=__importDefault(require(a44_0x1a9039(0xf0))),SimpleListService_1=__importDefault(require(a44_0x1a9039(0x101))),index=async(_0x4e3cdf,_0x3cc22a)=>{const _0x35609f=a44_0x1a9039,{searchParam:_0x4e3cfe,pageNumber:_0x371a9d}=_0x4e3cdf['query'],{companyId:_0x58a522,profile:_0x1bc955}=_0x4e3cdf[_0x35609f(0xfb)],{users:_0x29e506,onlineCount:_0x2a1540,offlineCount:_0x340f0d,count:_0x445be4,hasMore:_0x409c72}=await(0x0,ListUsersService_1['default'])({'searchParam':_0x4e3cfe,'pageNumber':_0x371a9d,'companyId':_0x58a522,'profile':_0x1bc955});return _0x3cc22a[_0x35609f(0xf8)]({'users':_0x29e506,'onlineCount':_0x2a1540,'offlineCount':_0x340f0d,'count':_0x445be4,'hasMore':_0x409c72});};function a44_0x11e0(){const _0x25b18a=['profile','constructor','show','-user','2890968pKkAPs','(((.+)+)+)+$','../services/UserServices/ListUsersService','54xDCteT','../services/UserServices/ShowUserService','isSuper','disabled','emit','search','default','delete','body','User\x20deleted','../services/UserServices/CreateUserService','company-','../services/UserServices/UpdateUserService','companyId','__esModule','store','ERR_USER_CREATION_DISABLED','status','../services/UserServices/DeleteUserService','defineProperty','/signup','list','2900410tRFBPe','ERR_NO_PERMISSION','query','url','json','getIO','1011598qlyLUe','user','380352DvEPMD','Acesso\x20negado.','index','-mainchannel','params','../services/UserServices/SimpleListService','admin','1629pguBvi','2570BKliRT','O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa','userCreation','../libs/socket','remove','815955ekCxdN','24rHmSuG','../helpers/CheckSettings','../errors/AppError','update','apply','39576BkUjkf'];a44_0x11e0=function(){return _0x25b18a;};return a44_0x11e0();}exports[a44_0x1a9039(0xfe)]=index;const store=async(_0x139ff7,_0xe87fb0)=>{const _0x1a2bc3=a44_0x1a9039,{email:_0x323cca,password:_0xac26,name:_0x261e43,profile:_0x60decf,isTricked:_0xcfb32c,super:_0x474489,companyId:_0x425943,queueIds:_0x3fb58c,allTicket:_0x5604ff,whatsappId:_0x1f24ae,startWork:_0x87a72e,endWork:_0x4007a2,profileState:_0x2dd00a,defaultMenu:_0x50268e}=_0x139ff7[_0x1a2bc3(0xe6)];let _0x3c453f=null;if(_0x139ff7[_0x1a2bc3(0xfb)]!==undefined){const {companyId:_0x50bfcd}=_0x139ff7[_0x1a2bc3(0xfb)];_0x3c453f=_0x50bfcd;}if(_0x139ff7[_0x1a2bc3(0xe6)][_0x1a2bc3(0xeb)]&&_0x139ff7[_0x1a2bc3(0xfb)][_0x1a2bc3(0xeb)]!==_0x139ff7[_0x1a2bc3(0xe6)][_0x1a2bc3(0xeb)])throw new AppError_1[(_0x1a2bc3(0xe4))](_0x1a2bc3(0x105));if(!_0x139ff7[_0x1a2bc3(0xfb)][_0x1a2bc3(0xe0)]&&_0x474489)throw new AppError_1[(_0x1a2bc3(0xe4))]('Acesso\x20negado.');if(_0x139ff7[_0x1a2bc3(0xf7)]===_0x1a2bc3(0xf2)&&await(0x0,CheckSettings_1[_0x1a2bc3(0xe4)])(_0x1a2bc3(0x106))===_0x1a2bc3(0xe1))throw new AppError_1[(_0x1a2bc3(0xe4))]('ERR_USER_CREATION_DISABLED',0x193);else{if(_0x139ff7[_0x1a2bc3(0xf7)]!=='/signup'&&_0x139ff7[_0x1a2bc3(0xfb)][_0x1a2bc3(0x110)]!==_0x1a2bc3(0x102))throw new AppError_1[(_0x1a2bc3(0xe4))](_0x1a2bc3(0xf5),0x193);}const _0x49d925=await(0x0,CreateUserService_1['default'])({'email':_0x323cca,'password':_0xac26,'name':_0x261e43,'profile':_0x60decf,'isTricked':_0xcfb32c,'super':_0x474489,'companyId':_0x425943||_0x3c453f,'queueIds':_0x3fb58c,'allTicket':_0x5604ff,'whatsappId':_0x1f24ae,'startWork':_0x87a72e,'endWork':_0x4007a2,'defaultMenu':_0x50268e}),_0x43191c=(0x0,socket_1[_0x1a2bc3(0xf9)])();return _0x43191c[_0x1a2bc3(0xe2)](_0x1a2bc3(0xe9)+_0x3c453f+_0x1a2bc3(0x113),{'action':'create','user':_0x49d925}),_0xe87fb0[_0x1a2bc3(0xef)](0xc8)[_0x1a2bc3(0xf8)](_0x49d925);};exports[a44_0x1a9039(0xed)]=store;const storeFromCompanySettings=async(_0x16d463,_0x5aecb6)=>{const _0x10d380=a44_0x1a9039,{email:_0x24a957,password:_0x16903a,name:_0x1cd27b,profile:_0x3617ec,isTricked:_0x4fb32c,super:_0x394ead,companyId:_0x32f79b,queueIds:_0x2f1f67,allTicket:_0xcf6bd4,whatsappId:_0x4f2b87,startWork:_0x11263f,endWork:_0x143df7,profileState:_0xb185da,defaultMenu:_0x36c344}=_0x16d463[_0x10d380(0xe6)];let _0x5043e2=null;if(_0x16d463[_0x10d380(0xfb)]!==undefined){const {companyId:_0x347a3f}=_0x16d463[_0x10d380(0xfb)];_0x5043e2=_0x347a3f;}if(_0x16d463[_0x10d380(0xe6)]['companyId']&&_0x16d463[_0x10d380(0xfb)][_0x10d380(0xeb)]!==_0x16d463[_0x10d380(0xe6)][_0x10d380(0xeb)])throw new AppError_1[(_0x10d380(0xe4))]('O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa');if(!_0x16d463[_0x10d380(0xfb)][_0x10d380(0xe0)]&&_0x394ead)throw new AppError_1[(_0x10d380(0xe4))](_0x10d380(0xfd));if(_0x16d463[_0x10d380(0xf7)]===_0x10d380(0xf2)&&await(0x0,CheckSettings_1[_0x10d380(0xe4)])(_0x10d380(0x106))==='disabled')throw new AppError_1[(_0x10d380(0xe4))](_0x10d380(0xee),0x193);else{if(_0x16d463['url']!==_0x10d380(0xf2)&&_0x16d463[_0x10d380(0xfb)]['profile']!==_0x10d380(0x102))throw new AppError_1[(_0x10d380(0xe4))](_0x10d380(0xf5),0x193);}const _0x31e143=await(0x0,CreateUserService_1[_0x10d380(0xe4)])({'email':_0x24a957,'password':_0x16903a,'name':_0x1cd27b,'profile':_0x3617ec,'isTricked':_0x4fb32c,'super':_0x394ead,'companyId':_0x32f79b||_0x5043e2,'queueIds':_0x2f1f67,'allTicket':_0xcf6bd4,'whatsappId':_0x4f2b87,'startWork':_0x11263f,'endWork':_0x143df7,'defaultMenu':_0x36c344}),_0x574a60=(0x0,socket_1['getIO'])();return _0x574a60['to'](_0x10d380(0xe9)+_0x5043e2+_0x10d380(0xff))['emit'](_0x10d380(0xe9)+_0x5043e2+'-user',{'action':'create','user':_0x31e143}),_0x5aecb6[_0x10d380(0xef)](0xc8)[_0x10d380(0xf8)](_0x31e143);};exports['storeFromCompanySettings']=storeFromCompanySettings;const show=async(_0x4357f1,_0x5bece7)=>{const _0x58fd20=a44_0x1a9039,{userId:_0x23e6e1}=_0x4357f1[_0x58fd20(0x100)],_0x2d1981=await(0x0,ShowUserService_1['default'])(_0x23e6e1,_0x4357f1['user']['id']);return _0x5bece7['status'](0xc8)[_0x58fd20(0xf8)](_0x2d1981);};exports[a44_0x1a9039(0x112)]=show;const update=async(_0x5920a9,_0x42f5e9)=>{const _0x375788=a44_0x1a9039,{id:_0x299db4,companyId:_0x265d2f}=_0x5920a9['user'],{userId:_0x3483a9}=_0x5920a9[_0x375788(0x100)],_0x406699=_0x5920a9['body'],_0x346459=await(0x0,UpdateUserService_1[_0x375788(0xe4)])({'userData':_0x406699,'userId':_0x3483a9,'requestUserId':+_0x299db4}),_0x5de421=(0x0,socket_1[_0x375788(0xf9)])();return _0x5de421['to'](_0x375788(0xe9)+_0x265d2f+'-mainchannel')[_0x375788(0xe2)](_0x375788(0xe9)+_0x265d2f+_0x375788(0x113),{'action':'update','user':_0x346459}),_0x42f5e9[_0x375788(0xef)](0xc8)[_0x375788(0xf8)](_0x346459);};exports[a44_0x1a9039(0x10d)]=update;const remove=async(_0x38bc7e,_0x2dee6c)=>{const _0x215d1b=a44_0x1a9039,{userId:_0x3db6dd}=_0x38bc7e[_0x215d1b(0x100)],{companyId:_0x47b948}=_0x38bc7e[_0x215d1b(0xfb)];if(_0x38bc7e[_0x215d1b(0xfb)][_0x215d1b(0x110)]!=='admin')throw new AppError_1[(_0x215d1b(0xe4))](_0x215d1b(0xf5),0x193);await(0x0,DeleteUserService_1[_0x215d1b(0xe4)])(_0x3db6dd,_0x38bc7e[_0x215d1b(0xfb)]['id']);const _0x22263b=(0x0,socket_1[_0x215d1b(0xf9)])();return _0x22263b['to']('company-'+_0x47b948+_0x215d1b(0xff))[_0x215d1b(0xe2)](_0x215d1b(0xe9)+_0x47b948+'-user',{'action':_0x215d1b(0xe5),'userId':_0x3db6dd}),_0x2dee6c[_0x215d1b(0xef)](0xc8)[_0x215d1b(0xf8)]({'message':_0x215d1b(0xe7)});};exports[a44_0x1a9039(0x108)]=remove;const list=async(_0x1154c2,_0x2ffd80)=>{const _0x43f1ca=a44_0x1a9039,{companyId:_0x36891b}=_0x1154c2[_0x43f1ca(0xf6)],{companyId:_0x4b064e}=_0x1154c2[_0x43f1ca(0xfb)],_0x45a94c=await(0x0,SimpleListService_1[_0x43f1ca(0xe4)])({'companyId':_0x36891b?+_0x36891b:_0x4b064e});return _0x2ffd80[_0x43f1ca(0xef)](0xc8)[_0x43f1ca(0xf8)](_0x45a94c);};exports['list']=list;