const a44_0x168d61=a44_0x23fd;function a44_0x392e(){const _0x35b73a=['update','constructor','profile','../services/UserServices/ListUsersService','body','getIO','isSuper','url','toString','admin','../services/UserServices/CreateUserService','storeFromCompanySettings','-user','(((.+)+)+)+$','disabled','660sASatI','json','../services/UserServices/ShowUserService','../errors/AppError','store','emit','query','search','__esModule','/signup','__importDefault','ERR_NO_PERMISSION','show','1476fcjKle','23370FUnCtq','default','O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa','create','469884DfTGly','1055YRVHbG','userCreation','remove','../services/UserServices/UpdateUserService','10840AkTUzC','../helpers/CheckSettings','ERR_USER_CREATION_DISABLED','status','581rdhWTA','companyId','73390GYfqij','apply','delete','3CjJUyQ','index','defineProperty','company-','2552236yOldKP','172082JXvKLv','user','1167035uXVuAT','list','-mainchannel','../services/UserServices/SimpleListService','Acesso\x20negado.'];a44_0x392e=function(){return _0x35b73a;};return a44_0x392e();}(function(_0x5734cd,_0x2c45d8){const _0x292ca3=a44_0x23fd,_0x3e4232=_0x5734cd();while(!![]){try{const _0x550967=parseInt(_0x292ca3(0xfa))/0x1+parseInt(_0x292ca3(0xf8))/0x2+parseInt(_0x292ca3(0xf3))/0x3*(-parseInt(_0x292ca3(0xf7))/0x4)+-parseInt(_0x292ca3(0xe6))/0x5*(parseInt(_0x292ca3(0x11c))/0x6)+parseInt(_0x292ca3(0xee))/0x7*(-parseInt(_0x292ca3(0xea))/0x8)+-parseInt(_0x292ca3(0x11b))/0x9*(parseInt(_0x292ca3(0xf0))/0xa)+-parseInt(_0x292ca3(0x10e))/0xb*(-parseInt(_0x292ca3(0x120))/0xc);if(_0x550967===_0x2c45d8)break;else _0x3e4232['push'](_0x3e4232['shift']());}catch(_0x5913ea){_0x3e4232['push'](_0x3e4232['shift']());}}}(a44_0x392e,0xc9ca3));const a44_0x36903d=(function(){let _0x4a2190=!![];return function(_0x1b7257,_0x3a552c){const _0x5f4148=_0x4a2190?function(){const _0x5a8d67=a44_0x23fd;if(_0x3a552c){const _0x5d4bf3=_0x3a552c[_0x5a8d67(0xf1)](_0x1b7257,arguments);return _0x3a552c=null,_0x5d4bf3;}}:function(){};return _0x4a2190=![],_0x5f4148;};}()),a44_0x1158a0=a44_0x36903d(this,function(){const _0x66aa04=a44_0x23fd;return a44_0x1158a0[_0x66aa04(0x107)]()['search'](_0x66aa04(0x10c))[_0x66aa04(0x107)]()[_0x66aa04(0x100)](a44_0x1158a0)[_0x66aa04(0x115)](_0x66aa04(0x10c));});a44_0x1158a0();'use strict';var __importDefault=this&&this[a44_0x168d61(0x118)]||function(_0x1b8254){return _0x1b8254&&_0x1b8254['__esModule']?_0x1b8254:{'default':_0x1b8254};};Object[a44_0x168d61(0xf5)](exports,a44_0x168d61(0x116),{'value':!![]}),exports[a44_0x168d61(0xfb)]=exports[a44_0x168d61(0xe8)]=exports[a44_0x168d61(0xff)]=exports['show']=exports['storeFromCompanySettings']=exports[a44_0x168d61(0x112)]=exports[a44_0x168d61(0xf4)]=void 0x0;const socket_1=require('../libs/socket'),CheckSettings_1=__importDefault(require(a44_0x168d61(0xeb))),AppError_1=__importDefault(require(a44_0x168d61(0x111))),CreateUserService_1=__importDefault(require(a44_0x168d61(0x109))),ListUsersService_1=__importDefault(require(a44_0x168d61(0x102))),UpdateUserService_1=__importDefault(require(a44_0x168d61(0xe9))),ShowUserService_1=__importDefault(require(a44_0x168d61(0x110))),DeleteUserService_1=__importDefault(require('../services/UserServices/DeleteUserService')),SimpleListService_1=__importDefault(require(a44_0x168d61(0xfd))),index=async(_0x382385,_0x1dc8fc)=>{const _0xf01444=a44_0x168d61,{searchParam:_0x2535c5,pageNumber:_0x5dd0c7}=_0x382385[_0xf01444(0x114)],{companyId:_0x2d35fe,profile:_0xd9f7b4}=_0x382385[_0xf01444(0xf9)],{users:_0x109abb,onlineCount:_0x100203,offlineCount:_0x327e1f,count:_0x5805ce,hasMore:_0x568f1b}=await(0x0,ListUsersService_1[_0xf01444(0x11d)])({'searchParam':_0x2535c5,'pageNumber':_0x5dd0c7,'companyId':_0x2d35fe,'profile':_0xd9f7b4});return _0x1dc8fc[_0xf01444(0x10f)]({'users':_0x109abb,'onlineCount':_0x100203,'offlineCount':_0x327e1f,'count':_0x5805ce,'hasMore':_0x568f1b});};exports['index']=index;const store=async(_0x32734f,_0x37edb9)=>{const _0x334c07=a44_0x168d61,{email:_0x19fa9e,password:_0x3d1eed,name:_0x4a3ab9,profile:_0x34e0f6,isTricked:_0x23885b,super:_0x49a588,companyId:_0x345592,queueIds:_0x4fa37d,allTicket:_0x250c6f,whatsappId:_0x547cb1,startWork:_0x41b407,endWork:_0x2e1f70,profileState:_0x59bb7b,defaultMenu:_0x21648b}=_0x32734f[_0x334c07(0x103)];let _0x30e262=null;if(_0x32734f[_0x334c07(0xf9)]!==undefined){const {companyId:_0x476c16}=_0x32734f['user'];_0x30e262=_0x476c16;}if(_0x32734f[_0x334c07(0x103)][_0x334c07(0xef)]&&_0x32734f[_0x334c07(0xf9)][_0x334c07(0xef)]!==_0x32734f[_0x334c07(0x103)]['companyId'])throw new AppError_1[(_0x334c07(0x11d))](_0x334c07(0x11e));if(!_0x32734f[_0x334c07(0xf9)][_0x334c07(0x105)]&&_0x49a588)throw new AppError_1[(_0x334c07(0x11d))](_0x334c07(0xfe));if(_0x32734f[_0x334c07(0x106)]===_0x334c07(0x117)&&await(0x0,CheckSettings_1['default'])(_0x334c07(0xe7))===_0x334c07(0x10d))throw new AppError_1[(_0x334c07(0x11d))]('ERR_USER_CREATION_DISABLED',0x193);else{if(_0x32734f[_0x334c07(0x106)]!=='/signup'&&_0x32734f[_0x334c07(0xf9)][_0x334c07(0x101)]!==_0x334c07(0x108))throw new AppError_1[(_0x334c07(0x11d))](_0x334c07(0x119),0x193);}const _0x504cf2=await(0x0,CreateUserService_1[_0x334c07(0x11d)])({'email':_0x19fa9e,'password':_0x3d1eed,'name':_0x4a3ab9,'profile':_0x34e0f6,'isTricked':_0x23885b,'super':_0x49a588,'companyId':_0x345592||_0x30e262,'queueIds':_0x4fa37d,'allTicket':_0x250c6f,'whatsappId':_0x547cb1,'startWork':_0x41b407,'endWork':_0x2e1f70,'defaultMenu':_0x21648b}),_0x30afc2=(0x0,socket_1['getIO'])();return _0x30afc2['emit']('company-'+_0x30e262+_0x334c07(0x10b),{'action':_0x334c07(0x11f),'user':_0x504cf2}),_0x37edb9[_0x334c07(0xed)](0xc8)[_0x334c07(0x10f)](_0x504cf2);};exports['store']=store;const storeFromCompanySettings=async(_0x101375,_0x3455a7)=>{const _0x141acf=a44_0x168d61,{email:_0x2bb492,password:_0x5bfad1,name:_0x4332bb,profile:_0x259493,isTricked:_0x42600b,super:_0x1982ec,companyId:_0x5cc2d4,queueIds:_0x561888,allTicket:_0x42dbfe,whatsappId:_0x27cb37,startWork:_0x34ebf4,endWork:_0x251500,profileState:_0x56c0ea,defaultMenu:_0x5b6a75}=_0x101375['body'];let _0x16564c=null;if(_0x101375['user']!==undefined){const {companyId:_0x4e0d1b}=_0x101375['user'];_0x16564c=_0x4e0d1b;}if(_0x101375['body']['companyId']&&_0x101375['user'][_0x141acf(0xef)]!==_0x101375['body']['companyId'])throw new AppError_1[(_0x141acf(0x11d))](_0x141acf(0x11e));if(!_0x101375[_0x141acf(0xf9)][_0x141acf(0x105)]&&_0x1982ec)throw new AppError_1[(_0x141acf(0x11d))]('Acesso\x20negado.');if(_0x101375[_0x141acf(0x106)]===_0x141acf(0x117)&&await(0x0,CheckSettings_1[_0x141acf(0x11d)])(_0x141acf(0xe7))===_0x141acf(0x10d))throw new AppError_1['default'](_0x141acf(0xec),0x193);else{if(_0x101375[_0x141acf(0x106)]!==_0x141acf(0x117)&&_0x101375[_0x141acf(0xf9)]['profile']!=='admin')throw new AppError_1[(_0x141acf(0x11d))](_0x141acf(0x119),0x193);}const _0x43c2d0=await(0x0,CreateUserService_1[_0x141acf(0x11d)])({'email':_0x2bb492,'password':_0x5bfad1,'name':_0x4332bb,'profile':_0x259493,'isTricked':_0x42600b,'super':_0x1982ec,'companyId':_0x5cc2d4||_0x16564c,'queueIds':_0x561888,'allTicket':_0x42dbfe,'whatsappId':_0x27cb37,'startWork':_0x34ebf4,'endWork':_0x251500,'defaultMenu':_0x5b6a75}),_0x3c9dfb=(0x0,socket_1[_0x141acf(0x104)])();return _0x3c9dfb['to'](_0x141acf(0xf6)+_0x16564c+_0x141acf(0xfc))[_0x141acf(0x113)](_0x141acf(0xf6)+_0x16564c+_0x141acf(0x10b),{'action':_0x141acf(0x11f),'user':_0x43c2d0}),_0x3455a7[_0x141acf(0xed)](0xc8)[_0x141acf(0x10f)](_0x43c2d0);};exports[a44_0x168d61(0x10a)]=storeFromCompanySettings;const show=async(_0x9f58c9,_0x14f0aa)=>{const _0x3f59b9=a44_0x168d61,{userId:_0x55c986}=_0x9f58c9['params'],_0x47f888=await(0x0,ShowUserService_1[_0x3f59b9(0x11d)])(_0x55c986,_0x9f58c9[_0x3f59b9(0xf9)]['id']);return _0x14f0aa[_0x3f59b9(0xed)](0xc8)[_0x3f59b9(0x10f)](_0x47f888);};function a44_0x23fd(_0x15b15c,_0x1c4de8){const _0x3269b5=a44_0x392e();return a44_0x23fd=function(_0x1158a0,_0x36903d){_0x1158a0=_0x1158a0-0xe6;let _0x392e17=_0x3269b5[_0x1158a0];return _0x392e17;},a44_0x23fd(_0x15b15c,_0x1c4de8);}exports[a44_0x168d61(0x11a)]=show;const update=async(_0x29df22,_0x4b2943)=>{const _0x2dfbbb=a44_0x168d61,{id:_0x490b90,companyId:_0x5d9730}=_0x29df22['user'],{userId:_0x7c1bed}=_0x29df22['params'],_0x4af952=_0x29df22[_0x2dfbbb(0x103)],_0x21e647=await(0x0,UpdateUserService_1[_0x2dfbbb(0x11d)])({'userData':_0x4af952,'userId':_0x7c1bed,'requestUserId':+_0x490b90}),_0x5ab9ca=(0x0,socket_1[_0x2dfbbb(0x104)])();return _0x5ab9ca['to'](_0x2dfbbb(0xf6)+_0x5d9730+'-mainchannel')[_0x2dfbbb(0x113)](_0x2dfbbb(0xf6)+_0x5d9730+'-user',{'action':'update','user':_0x21e647}),_0x4b2943[_0x2dfbbb(0xed)](0xc8)['json'](_0x21e647);};exports[a44_0x168d61(0xff)]=update;const remove=async(_0x2e2c1c,_0x209c1a)=>{const _0x899078=a44_0x168d61,{userId:_0xf71e6a}=_0x2e2c1c['params'],{companyId:_0x423894}=_0x2e2c1c['user'];if(_0x2e2c1c[_0x899078(0xf9)]['profile']!==_0x899078(0x108))throw new AppError_1[(_0x899078(0x11d))](_0x899078(0x119),0x193);await(0x0,DeleteUserService_1['default'])(_0xf71e6a,_0x2e2c1c['user']['id']);const _0xb5087d=(0x0,socket_1[_0x899078(0x104)])();return _0xb5087d['to'](_0x899078(0xf6)+_0x423894+_0x899078(0xfc))[_0x899078(0x113)](_0x899078(0xf6)+_0x423894+_0x899078(0x10b),{'action':_0x899078(0xf2),'userId':_0xf71e6a}),_0x209c1a[_0x899078(0xed)](0xc8)[_0x899078(0x10f)]({'message':'User\x20deleted'});};exports[a44_0x168d61(0xe8)]=remove;const list=async(_0x3afd75,_0x44af09)=>{const _0x3e11d4=a44_0x168d61,{companyId:_0x82ac2f}=_0x3afd75[_0x3e11d4(0x114)],{companyId:_0xc661b3}=_0x3afd75[_0x3e11d4(0xf9)],_0x34ecb4=await(0x0,SimpleListService_1[_0x3e11d4(0x11d)])({'companyId':_0x82ac2f?+_0x82ac2f:_0xc661b3});return _0x44af09[_0x3e11d4(0xed)](0xc8)[_0x3e11d4(0x10f)](_0x34ecb4);};exports[a44_0x168d61(0xfb)]=list;