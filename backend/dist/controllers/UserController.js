const a44_0x5c3f83=a44_0x3593;(function(_0x5ebf0d,_0x301896){const _0x2429a0=a44_0x3593,_0x2c1322=_0x5ebf0d();while(!![]){try{const _0x10c973=parseInt(_0x2429a0(0x1ee))/0x1+parseInt(_0x2429a0(0x20d))/0x2*(-parseInt(_0x2429a0(0x1e4))/0x3)+parseInt(_0x2429a0(0x1f6))/0x4+-parseInt(_0x2429a0(0x1e3))/0x5+parseInt(_0x2429a0(0x1db))/0x6*(parseInt(_0x2429a0(0x200))/0x7)+-parseInt(_0x2429a0(0x20e))/0x8+parseInt(_0x2429a0(0x1f2))/0x9;if(_0x10c973===_0x301896)break;else _0x2c1322['push'](_0x2c1322['shift']());}catch(_0x245d88){_0x2c1322['push'](_0x2c1322['shift']());}}}(a44_0xf662,0x95e5f));const a44_0x387332=(function(){let _0x271fc1=!![];return function(_0x1d8307,_0x1c266e){const _0x17e006=_0x271fc1?function(){const _0xb8624=a44_0x3593;if(_0x1c266e){const _0x3ad631=_0x1c266e[_0xb8624(0x1e1)](_0x1d8307,arguments);return _0x1c266e=null,_0x3ad631;}}:function(){};return _0x271fc1=![],_0x17e006;};}()),a44_0x17c046=a44_0x387332(this,function(){const _0x5956fd=a44_0x3593;return a44_0x17c046[_0x5956fd(0x202)]()[_0x5956fd(0x205)]('(((.+)+)+)+$')[_0x5956fd(0x202)]()[_0x5956fd(0x210)](a44_0x17c046)[_0x5956fd(0x205)](_0x5956fd(0x1ec));});function a44_0xf662(){const _0x2e5051=['userCreation','../services/UserServices/CreateUserService','list','7439508UBkcQa','storeFromCompanySettings','__esModule','User\x20deleted','645028MgCKsX','/signup','Acesso\x20negado.','create','../services/UserServices/UpdateUserService','json','emit','-mainchannel','disabled','admin','141442XfQycM','update','toString','__importDefault','index','search','body','query','isSuper','user','O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa','show','../libs/socket','2dcrFbA','8112792jjtWSW','status','constructor','../errors/AppError','ERR_NO_PERMISSION','360vkjhJe','company-','../services/UserServices/DeleteUserService','-user','remove','store','apply','url','3481845cTSLnk','1996494JqtGyL','params','defineProperty','ERR_USER_CREATION_DISABLED','getIO','profile','companyId','default','(((.+)+)+)+$','../services/UserServices/ListUsersService','789720EydwHf'];a44_0xf662=function(){return _0x2e5051;};return a44_0xf662();}a44_0x17c046();'use strict';var __importDefault=this&&this[a44_0x5c3f83(0x203)]||function(_0x4d022b){const _0x211896=a44_0x5c3f83;return _0x4d022b&&_0x4d022b[_0x211896(0x1f4)]?_0x4d022b:{'default':_0x4d022b};};Object[a44_0x5c3f83(0x1e6)](exports,a44_0x5c3f83(0x1f4),{'value':!![]}),exports[a44_0x5c3f83(0x1f1)]=exports[a44_0x5c3f83(0x1df)]=exports[a44_0x5c3f83(0x201)]=exports[a44_0x5c3f83(0x20b)]=exports['storeFromCompanySettings']=exports[a44_0x5c3f83(0x1e0)]=exports[a44_0x5c3f83(0x204)]=void 0x0;const socket_1=require(a44_0x5c3f83(0x20c)),CheckSettings_1=__importDefault(require('../helpers/CheckSettings')),AppError_1=__importDefault(require(a44_0x5c3f83(0x211))),CreateUserService_1=__importDefault(require(a44_0x5c3f83(0x1f0))),ListUsersService_1=__importDefault(require(a44_0x5c3f83(0x1ed))),UpdateUserService_1=__importDefault(require(a44_0x5c3f83(0x1fa))),ShowUserService_1=__importDefault(require('../services/UserServices/ShowUserService')),DeleteUserService_1=__importDefault(require(a44_0x5c3f83(0x1dd))),SimpleListService_1=__importDefault(require('../services/UserServices/SimpleListService')),index=async(_0x233573,_0x3ce0ba)=>{const _0x43f218=a44_0x5c3f83,{searchParam:_0x5839b5,pageNumber:_0x1b2bd8}=_0x233573['query'],{companyId:_0x35654f,profile:_0x17e2f7}=_0x233573[_0x43f218(0x209)],{users:_0x1cf4bd,onlineCount:_0x35a7c1,offlineCount:_0x40bb8e,count:_0x21cd5d,hasMore:_0x532389}=await(0x0,ListUsersService_1[_0x43f218(0x1eb)])({'searchParam':_0x5839b5,'pageNumber':_0x1b2bd8,'companyId':_0x35654f,'profile':_0x17e2f7});return _0x3ce0ba[_0x43f218(0x1fb)]({'users':_0x1cf4bd,'onlineCount':_0x35a7c1,'offlineCount':_0x40bb8e,'count':_0x21cd5d,'hasMore':_0x532389});};exports[a44_0x5c3f83(0x204)]=index;const store=async(_0x2b171d,_0x25d8c5)=>{const _0x3c9e8f=a44_0x5c3f83,{email:_0x403d83,password:_0x55cdbc,name:_0x40e088,profile:_0x568417,isTricked:_0x32b98a,super:_0x11be27,companyId:_0x4aff9e,queueIds:_0x1ab721,allTicket:_0x51a951,whatsappId:_0x4a287d,startWork:_0x544787,endWork:_0x335244,profileState:_0x117038,defaultMenu:_0x48581b}=_0x2b171d[_0x3c9e8f(0x206)];let _0x2fe3e9=null;if(_0x2b171d[_0x3c9e8f(0x209)]!==undefined){const {companyId:_0x21063c}=_0x2b171d[_0x3c9e8f(0x209)];_0x2fe3e9=_0x21063c;}if(_0x2b171d['body']['companyId']&&_0x2b171d[_0x3c9e8f(0x209)]['companyId']!==_0x2b171d[_0x3c9e8f(0x206)]['companyId'])throw new AppError_1[(_0x3c9e8f(0x1eb))](_0x3c9e8f(0x20a));if(!_0x2b171d['user'][_0x3c9e8f(0x208)]&&_0x11be27)throw new AppError_1[(_0x3c9e8f(0x1eb))](_0x3c9e8f(0x1f8));if(_0x2b171d['url']===_0x3c9e8f(0x1f7)&&await(0x0,CheckSettings_1[_0x3c9e8f(0x1eb)])(_0x3c9e8f(0x1ef))===_0x3c9e8f(0x1fe))throw new AppError_1[(_0x3c9e8f(0x1eb))](_0x3c9e8f(0x1e7),0x193);else{if(_0x2b171d[_0x3c9e8f(0x1e2)]!==_0x3c9e8f(0x1f7)&&_0x2b171d[_0x3c9e8f(0x209)][_0x3c9e8f(0x1e9)]!=='admin')throw new AppError_1[(_0x3c9e8f(0x1eb))](_0x3c9e8f(0x1da),0x193);}const _0x1e47d6=await(0x0,CreateUserService_1[_0x3c9e8f(0x1eb)])({'email':_0x403d83,'password':_0x55cdbc,'name':_0x40e088,'profile':_0x568417,'isTricked':_0x32b98a,'super':_0x11be27,'companyId':_0x4aff9e||_0x2fe3e9,'queueIds':_0x1ab721,'allTicket':_0x51a951,'whatsappId':_0x4a287d,'startWork':_0x544787,'endWork':_0x335244,'defaultMenu':_0x48581b}),_0x376ba8=(0x0,socket_1['getIO'])();return _0x376ba8['emit'](_0x3c9e8f(0x1dc)+_0x2fe3e9+_0x3c9e8f(0x1de),{'action':_0x3c9e8f(0x1f9),'user':_0x1e47d6}),_0x25d8c5[_0x3c9e8f(0x20f)](0xc8)[_0x3c9e8f(0x1fb)](_0x1e47d6);};exports[a44_0x5c3f83(0x1e0)]=store;const storeFromCompanySettings=async(_0x3f6390,_0x37dd22)=>{const _0x3bc914=a44_0x5c3f83,{email:_0x157a0a,password:_0x1a1c97,name:_0xefd375,profile:_0x8ed1c7,isTricked:_0x4ae99d,super:_0x4ec999,companyId:_0x37464b,queueIds:_0x569dff,allTicket:_0x49e5e7,whatsappId:_0x453d30,startWork:_0x4dee2d,endWork:_0x3d04a0,profileState:_0x528924,defaultMenu:_0x224cb7}=_0x3f6390['body'];let _0x5cef7a=null;if(_0x3f6390[_0x3bc914(0x209)]!==undefined){const {companyId:_0x57dd69}=_0x3f6390[_0x3bc914(0x209)];_0x5cef7a=_0x57dd69;}if(_0x3f6390[_0x3bc914(0x206)][_0x3bc914(0x1ea)]&&_0x3f6390[_0x3bc914(0x209)][_0x3bc914(0x1ea)]!==_0x3f6390[_0x3bc914(0x206)][_0x3bc914(0x1ea)])throw new AppError_1[(_0x3bc914(0x1eb))](_0x3bc914(0x20a));if(!_0x3f6390['user'][_0x3bc914(0x208)]&&_0x4ec999)throw new AppError_1['default'](_0x3bc914(0x1f8));if(_0x3f6390[_0x3bc914(0x1e2)]===_0x3bc914(0x1f7)&&await(0x0,CheckSettings_1[_0x3bc914(0x1eb)])(_0x3bc914(0x1ef))===_0x3bc914(0x1fe))throw new AppError_1[(_0x3bc914(0x1eb))](_0x3bc914(0x1e7),0x193);else{if(_0x3f6390[_0x3bc914(0x1e2)]!=='/signup'&&_0x3f6390[_0x3bc914(0x209)][_0x3bc914(0x1e9)]!==_0x3bc914(0x1ff))throw new AppError_1[(_0x3bc914(0x1eb))](_0x3bc914(0x1da),0x193);}const _0x36b684=await(0x0,CreateUserService_1[_0x3bc914(0x1eb)])({'email':_0x157a0a,'password':_0x1a1c97,'name':_0xefd375,'profile':_0x8ed1c7,'isTricked':_0x4ae99d,'super':_0x4ec999,'companyId':_0x37464b||_0x5cef7a,'queueIds':_0x569dff,'allTicket':_0x49e5e7,'whatsappId':_0x453d30,'startWork':_0x4dee2d,'endWork':_0x3d04a0,'defaultMenu':_0x224cb7}),_0x51117d=(0x0,socket_1['getIO'])();return _0x51117d['to'](_0x3bc914(0x1dc)+_0x5cef7a+_0x3bc914(0x1fd))['emit'](_0x3bc914(0x1dc)+_0x5cef7a+'-user',{'action':_0x3bc914(0x1f9),'user':_0x36b684}),_0x37dd22[_0x3bc914(0x20f)](0xc8)[_0x3bc914(0x1fb)](_0x36b684);};exports[a44_0x5c3f83(0x1f3)]=storeFromCompanySettings;const show=async(_0x167dd6,_0x2954c5)=>{const _0x4cdcd1=a44_0x5c3f83,{userId:_0x233865}=_0x167dd6[_0x4cdcd1(0x1e5)],_0x1abab8=await(0x0,ShowUserService_1[_0x4cdcd1(0x1eb)])(_0x233865,_0x167dd6[_0x4cdcd1(0x209)]['id']);return _0x2954c5['status'](0xc8)['json'](_0x1abab8);};exports[a44_0x5c3f83(0x20b)]=show;const update=async(_0x20addb,_0x3058db)=>{const _0x5b1407=a44_0x5c3f83,{id:_0x5e511d,companyId:_0x5be43c}=_0x20addb[_0x5b1407(0x209)],{userId:_0x5c682a}=_0x20addb['params'],_0x38cd29=_0x20addb[_0x5b1407(0x206)],_0x93ef77=await(0x0,UpdateUserService_1['default'])({'userData':_0x38cd29,'userId':_0x5c682a,'requestUserId':+_0x5e511d}),_0x1c977f=(0x0,socket_1['getIO'])();return _0x1c977f['to'](_0x5b1407(0x1dc)+_0x5be43c+_0x5b1407(0x1fd))[_0x5b1407(0x1fc)](_0x5b1407(0x1dc)+_0x5be43c+_0x5b1407(0x1de),{'action':_0x5b1407(0x201),'user':_0x93ef77}),_0x3058db[_0x5b1407(0x20f)](0xc8)[_0x5b1407(0x1fb)](_0x93ef77);};exports[a44_0x5c3f83(0x201)]=update;const remove=async(_0x55cafb,_0x204cdc)=>{const _0x138a2b=a44_0x5c3f83,{userId:_0x281fab}=_0x55cafb[_0x138a2b(0x1e5)],{companyId:_0x83f2e}=_0x55cafb[_0x138a2b(0x209)];if(_0x55cafb[_0x138a2b(0x209)][_0x138a2b(0x1e9)]!==_0x138a2b(0x1ff))throw new AppError_1[(_0x138a2b(0x1eb))]('ERR_NO_PERMISSION',0x193);await(0x0,DeleteUserService_1[_0x138a2b(0x1eb)])(_0x281fab,_0x55cafb[_0x138a2b(0x209)]['id']);const _0x3e5a37=(0x0,socket_1[_0x138a2b(0x1e8)])();return _0x3e5a37['to']('company-'+_0x83f2e+_0x138a2b(0x1fd))[_0x138a2b(0x1fc)](_0x138a2b(0x1dc)+_0x83f2e+_0x138a2b(0x1de),{'action':'delete','userId':_0x281fab}),_0x204cdc['status'](0xc8)[_0x138a2b(0x1fb)]({'message':_0x138a2b(0x1f5)});};function a44_0x3593(_0x150913,_0x432e40){const _0x1c5003=a44_0xf662();return a44_0x3593=function(_0x17c046,_0x387332){_0x17c046=_0x17c046-0x1da;let _0xf6627a=_0x1c5003[_0x17c046];return _0xf6627a;},a44_0x3593(_0x150913,_0x432e40);}exports[a44_0x5c3f83(0x1df)]=remove;const list=async(_0x154b23,_0x1c6ecb)=>{const _0x1ed590=a44_0x5c3f83,{companyId:_0x5a212f}=_0x154b23[_0x1ed590(0x207)],{companyId:_0x4baa58}=_0x154b23[_0x1ed590(0x209)],_0x33941c=await(0x0,SimpleListService_1[_0x1ed590(0x1eb)])({'companyId':_0x5a212f?+_0x5a212f:_0x4baa58});return _0x1c6ecb['status'](0xc8)['json'](_0x33941c);};exports[a44_0x5c3f83(0x1f1)]=list;