const a44_0xf52bbf=a44_0x13ae;(function(_0x253d0b,_0x596eeb){const _0x3e7a3f=a44_0x13ae,_0x5b8d03=_0x253d0b();while(!![]){try{const _0x1ca273=parseInt(_0x3e7a3f(0x1b1))/0x1+-parseInt(_0x3e7a3f(0x1a8))/0x2*(-parseInt(_0x3e7a3f(0x1a6))/0x3)+-parseInt(_0x3e7a3f(0x19a))/0x4+parseInt(_0x3e7a3f(0x19c))/0x5+parseInt(_0x3e7a3f(0x191))/0x6*(-parseInt(_0x3e7a3f(0x1af))/0x7)+-parseInt(_0x3e7a3f(0x1bf))/0x8+-parseInt(_0x3e7a3f(0x190))/0x9;if(_0x1ca273===_0x596eeb)break;else _0x5b8d03['push'](_0x5b8d03['shift']());}catch(_0x4d1a4b){_0x5b8d03['push'](_0x5b8d03['shift']());}}}(a44_0x5b4b,0x87cb5));const a44_0x59471e=(function(){let _0xcf7f7a=!![];return function(_0x2491bf,_0x54e44d){const _0x1db9f6=_0xcf7f7a?function(){if(_0x54e44d){const _0x25af3b=_0x54e44d['apply'](_0x2491bf,arguments);return _0x54e44d=null,_0x25af3b;}}:function(){};return _0xcf7f7a=![],_0x1db9f6;};}()),a44_0x707278=a44_0x59471e(this,function(){const _0xc8b8ff=a44_0x13ae;return a44_0x707278['toString']()['search'](_0xc8b8ff(0x1a7))[_0xc8b8ff(0x19f)]()['constructor'](a44_0x707278)[_0xc8b8ff(0x1b3)](_0xc8b8ff(0x1a7));});a44_0x707278();'use strict';var __importDefault=this&&this[a44_0xf52bbf(0x1ab)]||function(_0x26f108){const _0x20da7d=a44_0xf52bbf;return _0x26f108&&_0x26f108[_0x20da7d(0x193)]?_0x26f108:{'default':_0x26f108};};Object['defineProperty'](exports,a44_0xf52bbf(0x193),{'value':!![]}),exports['list']=exports['remove']=exports[a44_0xf52bbf(0x1ba)]=exports[a44_0xf52bbf(0x1c3)]=exports[a44_0xf52bbf(0x1be)]=exports[a44_0xf52bbf(0x1b2)]=exports['index']=void 0x0;const socket_1=require('../libs/socket'),CheckSettings_1=__importDefault(require(a44_0xf52bbf(0x1a3))),AppError_1=__importDefault(require('../errors/AppError')),CreateUserService_1=__importDefault(require(a44_0xf52bbf(0x1a2))),ListUsersService_1=__importDefault(require('../services/UserServices/ListUsersService')),UpdateUserService_1=__importDefault(require(a44_0xf52bbf(0x1b0))),ShowUserService_1=__importDefault(require(a44_0xf52bbf(0x1b9))),DeleteUserService_1=__importDefault(require(a44_0xf52bbf(0x195))),SimpleListService_1=__importDefault(require(a44_0xf52bbf(0x1ac))),index=async(_0x3e3424,_0x564645)=>{const _0x37f9f8=a44_0xf52bbf,{searchParam:_0x55b6c1,pageNumber:_0x253453}=_0x3e3424[_0x37f9f8(0x1b6)],{companyId:_0x215a63,profile:_0x4e6e06}=_0x3e3424[_0x37f9f8(0x199)],{users:_0x4a6b9a,onlineCount:_0x3e5c53,offlineCount:_0x45989f,count:_0x2ad44f,hasMore:_0x578c20}=await(0x0,ListUsersService_1['default'])({'searchParam':_0x55b6c1,'pageNumber':_0x253453,'companyId':_0x215a63,'profile':_0x4e6e06});return _0x564645[_0x37f9f8(0x1a5)]({'users':_0x4a6b9a,'onlineCount':_0x3e5c53,'offlineCount':_0x45989f,'count':_0x2ad44f,'hasMore':_0x578c20});};exports[a44_0xf52bbf(0x19b)]=index;const store=async(_0x176834,_0x1356f1)=>{const _0x4f518c=a44_0xf52bbf,{email:_0x476d4a,password:_0xd92559,name:_0x3a2f95,profile:_0x4efc87,isTricked:_0x3e086b,super:_0x591d09,companyId:_0x596a6c,queueIds:_0x3a823c,allTicket:_0x411977,whatsappId:_0x55838f,startWork:_0x5b60d1,endWork:_0x298a3d,profileState:_0x1b1a33,defaultMenu:_0x4c4c9e}=_0x176834[_0x4f518c(0x19e)];let _0x4b8e9a=null;if(_0x176834[_0x4f518c(0x199)]!==undefined){const {companyId:_0x487c88}=_0x176834[_0x4f518c(0x199)];_0x4b8e9a=_0x487c88;}if(_0x176834[_0x4f518c(0x19e)][_0x4f518c(0x1b5)]&&_0x176834[_0x4f518c(0x199)][_0x4f518c(0x1b5)]!==_0x176834['body'][_0x4f518c(0x1b5)])throw new AppError_1[(_0x4f518c(0x1aa))]('O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa');if(!_0x176834[_0x4f518c(0x199)][_0x4f518c(0x198)]&&_0x591d09)throw new AppError_1['default'](_0x4f518c(0x1bd));if(_0x176834[_0x4f518c(0x1ae)]===_0x4f518c(0x194)&&await(0x0,CheckSettings_1[_0x4f518c(0x1aa)])(_0x4f518c(0x1ad))===_0x4f518c(0x1b8))throw new AppError_1['default'](_0x4f518c(0x1bb),0x193);else{if(_0x176834[_0x4f518c(0x1ae)]!=='/signup'&&_0x176834[_0x4f518c(0x199)][_0x4f518c(0x1bc)]!=='admin')throw new AppError_1[(_0x4f518c(0x1aa))]('ERR_NO_PERMISSION',0x193);}const _0x454043=await(0x0,CreateUserService_1[_0x4f518c(0x1aa)])({'email':_0x476d4a,'password':_0xd92559,'name':_0x3a2f95,'profile':_0x4efc87,'isTricked':_0x3e086b,'super':_0x591d09,'companyId':_0x596a6c||_0x4b8e9a,'queueIds':_0x3a823c,'allTicket':_0x411977,'whatsappId':_0x55838f,'startWork':_0x5b60d1,'endWork':_0x298a3d,'defaultMenu':_0x4c4c9e}),_0x29ea1d=(0x0,socket_1[_0x4f518c(0x1b4)])();return _0x29ea1d[_0x4f518c(0x1c1)](_0x4f518c(0x1a1)+_0x4b8e9a+_0x4f518c(0x1b7),{'action':'create','user':_0x454043}),_0x1356f1['status'](0xc8)[_0x4f518c(0x1a5)](_0x454043);};exports[a44_0xf52bbf(0x1b2)]=store;const storeFromCompanySettings=async(_0x169b59,_0x16c676)=>{const _0x34c946=a44_0xf52bbf,{email:_0x22d6ac,password:_0x188d5c,name:_0x13375e,profile:_0x273630,isTricked:_0x2629c2,super:_0x46539b,companyId:_0x587555,queueIds:_0x5b1227,allTicket:_0x688f14,whatsappId:_0x2e08a0,startWork:_0x38cb5a,endWork:_0x23761d,profileState:_0xc76ec1,defaultMenu:_0x2d1257}=_0x169b59[_0x34c946(0x19e)];let _0x183f7d=null;if(_0x169b59['user']!==undefined){const {companyId:_0x3ee2e8}=_0x169b59[_0x34c946(0x199)];_0x183f7d=_0x3ee2e8;}if(_0x169b59[_0x34c946(0x19e)][_0x34c946(0x1b5)]&&_0x169b59[_0x34c946(0x199)][_0x34c946(0x1b5)]!==_0x169b59['body'][_0x34c946(0x1b5)])throw new AppError_1['default'](_0x34c946(0x192));if(!_0x169b59[_0x34c946(0x199)][_0x34c946(0x198)]&&_0x46539b)throw new AppError_1['default']('Acesso\x20negado.');if(_0x169b59[_0x34c946(0x1ae)]==='/signup'&&await(0x0,CheckSettings_1[_0x34c946(0x1aa)])(_0x34c946(0x1ad))===_0x34c946(0x1b8))throw new AppError_1[(_0x34c946(0x1aa))](_0x34c946(0x1bb),0x193);else{if(_0x169b59[_0x34c946(0x1ae)]!==_0x34c946(0x194)&&_0x169b59[_0x34c946(0x199)][_0x34c946(0x1bc)]!==_0x34c946(0x1c2))throw new AppError_1[(_0x34c946(0x1aa))](_0x34c946(0x1a0),0x193);}const _0xeaaffc=await(0x0,CreateUserService_1[_0x34c946(0x1aa)])({'email':_0x22d6ac,'password':_0x188d5c,'name':_0x13375e,'profile':_0x273630,'isTricked':_0x2629c2,'super':_0x46539b,'companyId':_0x587555||_0x183f7d,'queueIds':_0x5b1227,'allTicket':_0x688f14,'whatsappId':_0x2e08a0,'startWork':_0x38cb5a,'endWork':_0x23761d,'defaultMenu':_0x2d1257}),_0x223d17=(0x0,socket_1[_0x34c946(0x1b4)])();return _0x223d17['to']('company-'+_0x183f7d+_0x34c946(0x1a9))[_0x34c946(0x1c1)](_0x34c946(0x1a1)+_0x183f7d+'-user',{'action':_0x34c946(0x19d),'user':_0xeaaffc}),_0x16c676[_0x34c946(0x196)](0xc8)[_0x34c946(0x1a5)](_0xeaaffc);};exports['storeFromCompanySettings']=storeFromCompanySettings;function a44_0x5b4b(){const _0x18525f=['Acesso\x20negado.','storeFromCompanySettings','3316720VstkKo','remove','emit','admin','show','5219253vlrZQT','84924BrUhtX','O\x20usuário\x20não\x20pertence\x20à\x20esta\x20empresa','__esModule','/signup','../services/UserServices/DeleteUserService','status','User\x20deleted','isSuper','user','1839920fTfRMF','index','5297950qQSnsf','create','body','toString','ERR_NO_PERMISSION','company-','../services/UserServices/CreateUserService','../helpers/CheckSettings','params','json','12JXnGRC','(((.+)+)+)+$','274204bRsBkW','-mainchannel','default','__importDefault','../services/UserServices/SimpleListService','userCreation','url','7PmzmXN','../services/UserServices/UpdateUserService','416856zlHcPs','store','search','getIO','companyId','query','-user','disabled','../services/UserServices/ShowUserService','update','ERR_USER_CREATION_DISABLED','profile'];a44_0x5b4b=function(){return _0x18525f;};return a44_0x5b4b();}const show=async(_0x15c184,_0x28ed2a)=>{const _0x4cef25=a44_0xf52bbf,{userId:_0x372f6e}=_0x15c184['params'],_0x6c3faa=await(0x0,ShowUserService_1[_0x4cef25(0x1aa)])(_0x372f6e,_0x15c184[_0x4cef25(0x199)]['id']);return _0x28ed2a[_0x4cef25(0x196)](0xc8)[_0x4cef25(0x1a5)](_0x6c3faa);};exports[a44_0xf52bbf(0x1c3)]=show;const update=async(_0x15bb98,_0x17a33c)=>{const _0x36dc97=a44_0xf52bbf,{id:_0x119cb2,companyId:_0x2b8c9b}=_0x15bb98[_0x36dc97(0x199)],{userId:_0x4e3eac}=_0x15bb98[_0x36dc97(0x1a4)],_0x4a0d2d=_0x15bb98[_0x36dc97(0x19e)],_0x251455=await(0x0,UpdateUserService_1[_0x36dc97(0x1aa)])({'userData':_0x4a0d2d,'userId':_0x4e3eac,'requestUserId':+_0x119cb2}),_0x57facc=(0x0,socket_1[_0x36dc97(0x1b4)])();return _0x57facc['to'](_0x36dc97(0x1a1)+_0x2b8c9b+_0x36dc97(0x1a9))[_0x36dc97(0x1c1)]('company-'+_0x2b8c9b+_0x36dc97(0x1b7),{'action':'update','user':_0x251455}),_0x17a33c[_0x36dc97(0x196)](0xc8)['json'](_0x251455);};exports[a44_0xf52bbf(0x1ba)]=update;function a44_0x13ae(_0x5bb0c3,_0x1e373d){const _0x38e202=a44_0x5b4b();return a44_0x13ae=function(_0x707278,_0x59471e){_0x707278=_0x707278-0x190;let _0x5b4bad=_0x38e202[_0x707278];return _0x5b4bad;},a44_0x13ae(_0x5bb0c3,_0x1e373d);}const remove=async(_0x3af1ea,_0x5efd96)=>{const _0x567ee0=a44_0xf52bbf,{userId:_0x1865a1}=_0x3af1ea['params'],{companyId:_0x4a53d9}=_0x3af1ea[_0x567ee0(0x199)];if(_0x3af1ea[_0x567ee0(0x199)][_0x567ee0(0x1bc)]!==_0x567ee0(0x1c2))throw new AppError_1[(_0x567ee0(0x1aa))]('ERR_NO_PERMISSION',0x193);await(0x0,DeleteUserService_1[_0x567ee0(0x1aa)])(_0x1865a1,_0x3af1ea[_0x567ee0(0x199)]['id']);const _0x1cf6ae=(0x0,socket_1[_0x567ee0(0x1b4)])();return _0x1cf6ae['to']('company-'+_0x4a53d9+_0x567ee0(0x1a9))[_0x567ee0(0x1c1)](_0x567ee0(0x1a1)+_0x4a53d9+'-user',{'action':'delete','userId':_0x1865a1}),_0x5efd96[_0x567ee0(0x196)](0xc8)[_0x567ee0(0x1a5)]({'message':_0x567ee0(0x197)});};exports[a44_0xf52bbf(0x1c0)]=remove;const list=async(_0x2bd8b4,_0x458c90)=>{const _0x21caf0=a44_0xf52bbf,{companyId:_0x360ade}=_0x2bd8b4[_0x21caf0(0x1b6)],{companyId:_0x11d458}=_0x2bd8b4[_0x21caf0(0x199)],_0x3c695c=await(0x0,SimpleListService_1[_0x21caf0(0x1aa)])({'companyId':_0x360ade?+_0x360ade:_0x11d458});return _0x458c90[_0x21caf0(0x196)](0xc8)[_0x21caf0(0x1a5)](_0x3c695c);};exports['list']=list;