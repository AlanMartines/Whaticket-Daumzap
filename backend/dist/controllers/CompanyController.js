const a13_0x41055c=a13_0xe714;(function(_0x6be284,_0x3e4832){const _0x5b3911=a13_0xe714,_0x42349c=_0x6be284();while(!![]){try{const _0x5dd223=parseInt(_0x5b3911(0x92))/0x1+parseInt(_0x5b3911(0xa0))/0x2+-parseInt(_0x5b3911(0x76))/0x3*(-parseInt(_0x5b3911(0xa1))/0x4)+-parseInt(_0x5b3911(0x80))/0x5+parseInt(_0x5b3911(0x8b))/0x6+parseInt(_0x5b3911(0xa2))/0x7+-parseInt(_0x5b3911(0x8c))/0x8*(parseInt(_0x5b3911(0x7d))/0x9);if(_0x5dd223===_0x3e4832)break;else _0x42349c['push'](_0x42349c['shift']());}catch(_0x1fb07d){_0x42349c['push'](_0x42349c['shift']());}}}(a13_0x8625,0xd0d5a));const a13_0x3cb6a7=(function(){let _0x1d82ac=!![];return function(_0x3544fd,_0x12a325){const _0x306ebb=_0x1d82ac?function(){const _0x11fd03=a13_0xe714;if(_0x12a325){const _0x1593c1=_0x12a325[_0x11fd03(0x79)](_0x3544fd,arguments);return _0x12a325=null,_0x1593c1;}}:function(){};return _0x1d82ac=![],_0x306ebb;};}()),a13_0x5396b3=a13_0x3cb6a7(this,function(){const _0x4e9052=a13_0xe714;return a13_0x5396b3[_0x4e9052(0xa3)]()[_0x4e9052(0x9d)](_0x4e9052(0xc3))[_0x4e9052(0xa3)]()[_0x4e9052(0xa9)](a13_0x5396b3)[_0x4e9052(0x9d)](_0x4e9052(0xc3));});a13_0x5396b3();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a13_0x41055c(0xc7)]?function(_0x41a84b,_0x4b6ca0,_0x550434,_0x17002a){const _0x4214ef=a13_0x41055c;if(_0x17002a===undefined)_0x17002a=_0x550434;var _0x1f7508=Object[_0x4214ef(0xad)](_0x4b6ca0,_0x550434);(!_0x1f7508||(_0x4214ef(0xbc)in _0x1f7508?!_0x4b6ca0[_0x4214ef(0x9a)]:_0x1f7508[_0x4214ef(0x9c)]||_0x1f7508[_0x4214ef(0xc2)]))&&(_0x1f7508={'enumerable':!![],'get':function(){return _0x4b6ca0[_0x550434];}}),Object[_0x4214ef(0x93)](_0x41a84b,_0x17002a,_0x1f7508);}:function(_0x1692de,_0x13804c,_0x58c03d,_0x25d6d0){if(_0x25d6d0===undefined)_0x25d6d0=_0x58c03d;_0x1692de[_0x25d6d0]=_0x13804c[_0x58c03d];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a13_0x41055c(0xc7)]?function(_0x334caf,_0x285dbb){const _0x24f1f6=a13_0x41055c;Object[_0x24f1f6(0x93)](_0x334caf,'default',{'enumerable':!![],'value':_0x285dbb});}:function(_0x4c8ffe,_0x1c8fdc){const _0x5d6a1a=a13_0x41055c;_0x4c8ffe[_0x5d6a1a(0x95)]=_0x1c8fdc;}),__importStar=this&&this[a13_0x41055c(0xc1)]||function(_0x3ebd8c){const _0x54bf77=a13_0x41055c;if(_0x3ebd8c&&_0x3ebd8c['__esModule'])return _0x3ebd8c;var _0x4caed4={};if(_0x3ebd8c!=null){for(var _0x33fd63 in _0x3ebd8c)if(_0x33fd63!==_0x54bf77(0x95)&&Object['prototype']['hasOwnProperty'][_0x54bf77(0x8d)](_0x3ebd8c,_0x33fd63))__createBinding(_0x4caed4,_0x3ebd8c,_0x33fd63);}return __setModuleDefault(_0x4caed4,_0x3ebd8c),_0x4caed4;},__importDefault=this&&this['__importDefault']||function(_0x2149ca){const _0x1c7140=a13_0x41055c;return _0x2149ca&&_0x2149ca[_0x1c7140(0x9a)]?_0x2149ca:{'default':_0x2149ca};};Object[a13_0x41055c(0x93)](exports,'__esModule',{'value':!![]}),exports[a13_0x41055c(0xab)]=exports[a13_0x41055c(0x7a)]=exports[a13_0x41055c(0x77)]=exports['updateSchedules']=exports[a13_0x41055c(0x87)]=exports['list']=exports[a13_0x41055c(0x82)]=exports[a13_0x41055c(0xb7)]=exports[a13_0x41055c(0x78)]=exports['index']=void 0x0;const Yup=__importStar(require(a13_0x41055c(0xb2))),AppError_1=__importDefault(require(a13_0x41055c(0x96))),auth_1=__importDefault(require(a13_0x41055c(0x7b))),ListCompaniesService_1=__importDefault(require(a13_0x41055c(0xc8))),CreateCompanyService_1=__importDefault(require(a13_0x41055c(0x83))),UpdateCompanyService_1=__importDefault(require('../services/CompanyService/UpdateCompanyService')),ShowCompanyService_1=__importDefault(require('../services/CompanyService/ShowCompanyService')),UpdateSchedulesService_1=__importDefault(require(a13_0x41055c(0x90))),DeleteCompanyService_1=__importDefault(require(a13_0x41055c(0xbe))),FindAllCompaniesService_1=__importDefault(require(a13_0x41055c(0xb1))),jsonwebtoken_1=require(a13_0x41055c(0x99)),User_1=__importDefault(require(a13_0x41055c(0x91))),ShowPlanCompanyService_1=__importDefault(require(a13_0x41055c(0xa6))),ListCompaniesPlanService_1=__importDefault(require('../services/CompanyService/ListCompaniesPlanService')),CheckSettings_1=__importDefault(require('../helpers/CheckSettings')),moment_1=__importDefault(require('moment')),fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a13_0x41055c(0x8e))),publicFolder=path_1[a13_0x41055c(0x95)][a13_0x41055c(0x8f)](__dirname,'..','..',a13_0x41055c(0xaf)),index=async(_0x419099,_0x1ad7ee)=>{const _0x4567c3=a13_0x41055c,{searchParam:_0x236be5,pageNumber:_0x1fc5ca}=_0x419099[_0x4567c3(0xb5)],{companies:_0x2a5b45,count:_0x398cec,hasMore:_0x3f818e}=await(0x0,ListCompaniesService_1[_0x4567c3(0x95)])({'searchParam':_0x236be5,'pageNumber':_0x1fc5ca});return _0x1ad7ee[_0x4567c3(0xba)]({'companies':_0x2a5b45,'count':_0x398cec,'hasMore':_0x3f818e});};exports[a13_0x41055c(0xc6)]=index;const signup=async(_0x27ffcf,_0x31e953)=>{const _0x1f1940=a13_0x41055c;if(await(0x0,CheckSettings_1[_0x1f1940(0x95)])(_0x1f1940(0xc5))!==_0x1f1940(0xbb))return _0x31e953[_0x1f1940(0x86)](0x191)['json'](_0x1f1940(0xc4));return await(0x0,exports[_0x1f1940(0xb7)])(_0x27ffcf,_0x31e953);};exports[a13_0x41055c(0x78)]=signup;const store=async(_0x2a83e6,_0x50a409)=>{const _0x5033de=a13_0x41055c,_0x5bf874=_0x2a83e6[_0x5033de(0x89)];try{const _0x182154=await(0x0,CheckSettings_1[_0x5033de(0x95)])('trialExpiration'),_0x106654=parseInt(_0x182154,0xa);isNaN(_0x106654)||_0x106654<=0x0?_0x5bf874[_0x5033de(0xac)]=(0x0,moment_1[_0x5033de(0x95)])()[_0x5033de(0x85)](0x7,_0x5033de(0xb6))[_0x5033de(0xb8)]():_0x5bf874[_0x5033de(0xac)]=(0x0,moment_1[_0x5033de(0x95)])()['add'](_0x106654,_0x5033de(0xb6))[_0x5033de(0xb8)]();const _0x1f694c=await(0x0,CreateCompanyService_1['default'])(_0x5bf874);return _0x50a409['status'](0xc9)[_0x5033de(0xba)](_0x1f694c);}catch(_0x5aab52){return _0x50a409[_0x5033de(0x86)](0x1f4)['json']({'message':_0x5033de(0xa5),'error':_0x5aab52});}};exports[a13_0x41055c(0xb7)]=store;function a13_0x8625(){const _0xd12d55=['3729971zNIUPu','toString','findByPk','Error\x20creating\x20company','../services/CompanyService/ShowPlanCompanyService','super','message','constructor','string','indexPlan','dueDate','getOwnPropertyDescriptor','parseInt','public','number','../services/CompanyService/FindAllCompaniesService','yup','email','user','query','days','store','toDate','object','json','enabled','get','existsSync','../services/CompanyService/DeleteCompanyService','secret','boolean','__importStar','configurable','(((.+)+)+)+$','🙎🏻‍♂️\x20Signup\x20disabled','allowSignup','index','create','../services/CompanyService/ListCompaniesService','698307sTIfSd','remove','signup','apply','listPlan','../config/auth','required','8226BUDcAf','authorization','params','763610AoMVMd','/company','show','../services/CompanyService/CreateCompanyService','rmdirSync','add','status','update','ERR_FORBIDDEN','body','Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!','946362nWkQhG','20752mFtFXK','call','path','resolve','../services/CompanyService/UpdateSchedulesService','../models/User','1092744reCvOE','defineProperty','list','default','../errors/AppError','companyId','split','jsonwebtoken','__esModule','headers','writable','search','verify','nullable','2260324VhirxE','8XqZGeX'];a13_0x8625=function(){return _0xd12d55;};return a13_0x8625();}const show=async(_0x4e1a1e,_0x447588)=>{const _0x5c9716=a13_0x41055c,{id:_0x15f37d}=_0x4e1a1e['params'],_0x332e40=await User_1[_0x5c9716(0x95)][_0x5c9716(0xa4)](_0x4e1a1e[_0x5c9716(0xb4)]['id']);if(!_0x332e40['super']&&Number[_0x5c9716(0xae)](_0x15f37d,0xa)!==_0x332e40['companyId'])throw new AppError_1['default'](_0x5c9716(0x88),0x193);const _0x59c81e=await(0x0,ShowCompanyService_1[_0x5c9716(0x95)])(_0x15f37d);return _0x447588[_0x5c9716(0x86)](0xc8)['json'](_0x59c81e);};exports[a13_0x41055c(0x82)]=show;const list=async(_0x250fa4,_0x37d711)=>{const _0x392d2c=a13_0x41055c,_0x364d02=await(0x0,FindAllCompaniesService_1['default'])();return _0x37d711[_0x392d2c(0x86)](0xc8)[_0x392d2c(0xba)](_0x364d02);};function a13_0xe714(_0x17342b,_0xd7ab27){const _0xd9c000=a13_0x8625();return a13_0xe714=function(_0x5396b3,_0x3cb6a7){_0x5396b3=_0x5396b3-0x76;let _0x862532=_0xd9c000[_0x5396b3];return _0x862532;},a13_0xe714(_0x17342b,_0xd7ab27);}exports[a13_0x41055c(0x94)]=list;const update=async(_0x3b7cf5,_0x3d9b8d)=>{const _0x57e37e=a13_0x41055c,_0x4a71d5=_0x3b7cf5[_0x57e37e(0x89)],_0xa21d70=Yup[_0x57e37e(0xb9)]()['shape']({'name':Yup[_0x57e37e(0xaa)]()[_0x57e37e(0x7c)](),'email':Yup[_0x57e37e(0xaa)]()[_0x57e37e(0xb3)]()[_0x57e37e(0x9f)](),'phone':Yup[_0x57e37e(0xaa)]()[_0x57e37e(0x9f)](),'status':Yup[_0x57e37e(0xc0)]()[_0x57e37e(0x9f)](),'planId':Yup[_0x57e37e(0xb0)]()[_0x57e37e(0x9f)](),'campaignsEnabled':Yup['boolean']()[_0x57e37e(0x9f)](),'dueDate':Yup['date']()['nullable'](),'recurrence':Yup[_0x57e37e(0xaa)]()[_0x57e37e(0x9f)]()});try{await _0xa21d70['validate'](_0x4a71d5);}catch(_0x3f1841){throw new AppError_1['default'](_0x3f1841[_0x57e37e(0xa8)]);}const {id:_0x383748}=_0x3b7cf5[_0x57e37e(0x7f)],_0x476f9c=await(0x0,UpdateCompanyService_1[_0x57e37e(0x95)])({'id':_0x383748,..._0x4a71d5});return _0x3d9b8d['status'](0xc8)[_0x57e37e(0xba)](_0x476f9c);};exports[a13_0x41055c(0x87)]=update;const updateSchedules=async(_0x3988da,_0xd1615b)=>{const _0x1705dd=a13_0x41055c,{schedules:_0x4138b3}=_0x3988da['body'],{id:_0x2567cd}=_0x3988da[_0x1705dd(0x7f)],_0x39f4db=await User_1[_0x1705dd(0x95)][_0x1705dd(0xa4)](_0x3988da[_0x1705dd(0xb4)]['id']);if(!_0x39f4db[_0x1705dd(0xa7)]&&Number[_0x1705dd(0xae)](_0x2567cd,0xa)!==_0x39f4db[_0x1705dd(0x97)])throw new AppError_1[(_0x1705dd(0x95))](_0x1705dd(0x88),0x193);const _0x1f029a=await(0x0,UpdateSchedulesService_1[_0x1705dd(0x95)])({'id':_0x2567cd,'schedules':_0x4138b3});return _0xd1615b[_0x1705dd(0x86)](0xc8)[_0x1705dd(0xba)](_0x1f029a);};exports['updateSchedules']=updateSchedules;const remove=async(_0x4938e8,_0x2f1db0)=>{const _0x3f2bac=a13_0x41055c,{id:_0x5035dc}=_0x4938e8['params'];fs_1[_0x3f2bac(0x95)][_0x3f2bac(0xbd)](publicFolder+'/company'+_0x5035dc+'/')&&fs_1['default'][_0x3f2bac(0x84)](publicFolder+_0x3f2bac(0x81)+_0x5035dc+'/',{'recursive':!![]});const _0x37585f=await(0x0,DeleteCompanyService_1[_0x3f2bac(0x95)])(_0x5035dc);return _0x2f1db0[_0x3f2bac(0x86)](0xc8)[_0x3f2bac(0xba)](_0x37585f);};exports[a13_0x41055c(0x77)]=remove;const listPlan=async(_0x5cbdeb,_0x53a470)=>{const _0x1a2fa7=a13_0x41055c,{id:_0x3ee17e}=_0x5cbdeb[_0x1a2fa7(0x7f)],_0x1ae6e8=_0x5cbdeb[_0x1a2fa7(0x9b)]['authorization'],[,_0x6f7ca]=_0x1ae6e8[_0x1a2fa7(0x98)]('\x20'),_0x515e2c=(0x0,jsonwebtoken_1[_0x1a2fa7(0x9e)])(_0x6f7ca,auth_1[_0x1a2fa7(0x95)]['secret']),{id:_0x161213,profile:_0x11ccfc,companyId:_0x72d8b}=_0x515e2c,_0x1f9d5b=await User_1['default'][_0x1a2fa7(0xa4)](_0x161213);if(_0x1f9d5b[_0x1a2fa7(0xa7)]===!![]||_0x72d8b['toString']()===_0x3ee17e){const _0x473585=await(0x0,ShowPlanCompanyService_1['default'])(_0x3ee17e);return _0x53a470[_0x1a2fa7(0x86)](0xc8)[_0x1a2fa7(0xba)](_0x473585);}else return _0x53a470[_0x1a2fa7(0x86)](0x190)[_0x1a2fa7(0xba)]({'error':'Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!'});};exports['listPlan']=listPlan;const indexPlan=async(_0x4a6996,_0x2a62ea)=>{const _0x5250a7=a13_0x41055c,{searchParam:_0x20f710,pageNumber:_0x58c427}=_0x4a6996[_0x5250a7(0xb5)],_0xbca3b8=_0x4a6996['headers'][_0x5250a7(0x7e)],[,_0x48f957]=_0xbca3b8[_0x5250a7(0x98)]('\x20'),_0xff26f7=(0x0,jsonwebtoken_1['verify'])(_0x48f957,auth_1[_0x5250a7(0x95)][_0x5250a7(0xbf)]),{id:_0x210a35,profile:_0x3770ac,companyId:_0x54ccb7}=_0xff26f7,_0x52544e=await User_1[_0x5250a7(0x95)][_0x5250a7(0xa4)](_0x210a35);if(_0x52544e[_0x5250a7(0xa7)]===!![]){const _0x40ac52=await(0x0,ListCompaniesPlanService_1['default'])();return _0x2a62ea['json']({'companies':_0x40ac52});}else return _0x2a62ea[_0x5250a7(0x86)](0x190)[_0x5250a7(0xba)]({'error':_0x5250a7(0x8a)});};exports[a13_0x41055c(0xab)]=indexPlan;