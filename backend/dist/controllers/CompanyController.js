const a13_0x22069c=a13_0x5f2a;(function(_0x58d356,_0x33e27d){const _0x49ae04=a13_0x5f2a,_0x1ed9e9=_0x58d356();while(!![]){try{const _0x45fd00=-parseInt(_0x49ae04(0x114))/0x1+parseInt(_0x49ae04(0xee))/0x2+-parseInt(_0x49ae04(0xcb))/0x3*(parseInt(_0x49ae04(0xe0))/0x4)+parseInt(_0x49ae04(0x106))/0x5*(parseInt(_0x49ae04(0xe6))/0x6)+parseInt(_0x49ae04(0xd7))/0x7+-parseInt(_0x49ae04(0xe9))/0x8*(parseInt(_0x49ae04(0xd9))/0x9)+parseInt(_0x49ae04(0xde))/0xa*(parseInt(_0x49ae04(0x108))/0xb);if(_0x45fd00===_0x33e27d)break;else _0x1ed9e9['push'](_0x1ed9e9['shift']());}catch(_0x39e94f){_0x1ed9e9['push'](_0x1ed9e9['shift']());}}}(a13_0x5327,0x2e0f2));const a13_0x205e55=(function(){let _0x1e2f1c=!![];return function(_0x1e0f8b,_0x2fc86a){const _0x4f4b5c=_0x1e2f1c?function(){const _0x43b501=a13_0x5f2a;if(_0x2fc86a){const _0x566fd2=_0x2fc86a[_0x43b501(0xdc)](_0x1e0f8b,arguments);return _0x2fc86a=null,_0x566fd2;}}:function(){};return _0x1e2f1c=![],_0x4f4b5c;};}()),a13_0x1c9a19=a13_0x205e55(this,function(){const _0x1ee7c8=a13_0x5f2a;return a13_0x1c9a19[_0x1ee7c8(0xd8)]()[_0x1ee7c8(0xc9)](_0x1ee7c8(0xca))[_0x1ee7c8(0xd8)]()[_0x1ee7c8(0x103)](a13_0x1c9a19)['search']('(((.+)+)+)+$');});a13_0x1c9a19();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a13_0x22069c(0x10f)]?function(_0x53a546,_0xdc6577,_0x26420e,_0x2b5228){const _0x1b9c72=a13_0x22069c;if(_0x2b5228===undefined)_0x2b5228=_0x26420e;var _0x233cf6=Object[_0x1b9c72(0xd6)](_0xdc6577,_0x26420e);(!_0x233cf6||(_0x1b9c72(0x118)in _0x233cf6?!_0xdc6577[_0x1b9c72(0xf6)]:_0x233cf6[_0x1b9c72(0xfb)]||_0x233cf6[_0x1b9c72(0xf9)]))&&(_0x233cf6={'enumerable':!![],'get':function(){return _0xdc6577[_0x26420e];}}),Object[_0x1b9c72(0xeb)](_0x53a546,_0x2b5228,_0x233cf6);}:function(_0x3df858,_0x5621be,_0x406f0f,_0x23338d){if(_0x23338d===undefined)_0x23338d=_0x406f0f;_0x3df858[_0x23338d]=_0x5621be[_0x406f0f];}),__setModuleDefault=this&&this[a13_0x22069c(0x111)]||(Object[a13_0x22069c(0x10f)]?function(_0x50a3f6,_0x2a58c){const _0x5e2324=a13_0x22069c;Object[_0x5e2324(0xeb)](_0x50a3f6,_0x5e2324(0xd2),{'enumerable':!![],'value':_0x2a58c});}:function(_0xffb5c6,_0x21724b){const _0x1be863=a13_0x22069c;_0xffb5c6[_0x1be863(0xd2)]=_0x21724b;}),__importStar=this&&this[a13_0x22069c(0xf5)]||function(_0x9f4edd){const _0x39632a=a13_0x22069c;if(_0x9f4edd&&_0x9f4edd[_0x39632a(0xf6)])return _0x9f4edd;var _0xb9d943={};if(_0x9f4edd!=null){for(var _0x3e4b59 in _0x9f4edd)if(_0x3e4b59!=='default'&&Object[_0x39632a(0xd1)]['hasOwnProperty'][_0x39632a(0xf2)](_0x9f4edd,_0x3e4b59))__createBinding(_0xb9d943,_0x9f4edd,_0x3e4b59);}return __setModuleDefault(_0xb9d943,_0x9f4edd),_0xb9d943;},__importDefault=this&&this[a13_0x22069c(0xd5)]||function(_0x3fb670){const _0x459cf5=a13_0x22069c;return _0x3fb670&&_0x3fb670[_0x459cf5(0xf6)]?_0x3fb670:{'default':_0x3fb670};};Object['defineProperty'](exports,a13_0x22069c(0xf6),{'value':!![]}),exports[a13_0x22069c(0xcd)]=exports[a13_0x22069c(0xcc)]=exports[a13_0x22069c(0xf3)]=exports['updateSchedules']=exports[a13_0x22069c(0xcf)]=exports[a13_0x22069c(0xe1)]=exports[a13_0x22069c(0xf7)]=exports[a13_0x22069c(0xf0)]=exports['signup']=exports[a13_0x22069c(0xff)]=void 0x0;const Yup=__importStar(require('yup')),AppError_1=__importDefault(require('../errors/AppError')),auth_1=__importDefault(require('../config/auth')),ListCompaniesService_1=__importDefault(require('../services/CompanyService/ListCompaniesService')),CreateCompanyService_1=__importDefault(require(a13_0x22069c(0x107))),UpdateCompanyService_1=__importDefault(require('../services/CompanyService/UpdateCompanyService')),ShowCompanyService_1=__importDefault(require(a13_0x22069c(0xed))),UpdateSchedulesService_1=__importDefault(require(a13_0x22069c(0xe2))),DeleteCompanyService_1=__importDefault(require(a13_0x22069c(0x101))),FindAllCompaniesService_1=__importDefault(require('../services/CompanyService/FindAllCompaniesService')),jsonwebtoken_1=require(a13_0x22069c(0x105)),User_1=__importDefault(require('../models/User')),ShowPlanCompanyService_1=__importDefault(require(a13_0x22069c(0xfa))),ListCompaniesPlanService_1=__importDefault(require(a13_0x22069c(0xdf))),CheckSettings_1=__importDefault(require(a13_0x22069c(0xe3))),moment_1=__importDefault(require('moment')),fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a13_0x22069c(0xef))),publicFolder=path_1[a13_0x22069c(0xd2)][a13_0x22069c(0x112)](__dirname,'..','..','public'),index=async(_0x95c139,_0x4db54f)=>{const _0x5f4735=a13_0x22069c,{searchParam:_0x3531b4,pageNumber:_0x3192ce}=_0x95c139['query'],{companies:_0x392020,count:_0x4648b5,hasMore:_0x2e4a07}=await(0x0,ListCompaniesService_1[_0x5f4735(0xd2)])({'searchParam':_0x3531b4,'pageNumber':_0x3192ce});return _0x4db54f[_0x5f4735(0x109)]({'companies':_0x392020,'count':_0x4648b5,'hasMore':_0x2e4a07});};exports[a13_0x22069c(0xff)]=index;function a13_0x5327(){const _0x15c01c=['2800guchEY','signup','defineProperty','body','../services/CompanyService/ShowCompanyService','376922qSrZFv','path','store','date','call','remove','🙎🏻‍♂️\x20Signup\x20disabled','__importStar','__esModule','show','/company','configurable','../services/CompanyService/ShowPlanCompanyService','writable','companyId','Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!','user','index','string','../services/CompanyService/DeleteCompanyService','updateSchedules','constructor','ERR_FORBIDDEN','jsonwebtoken','1222805sZjwrA','../services/CompanyService/CreateCompanyService','7766nNZoCZ','json','Error\x20creating\x20company','nullable','secret','params','boolean','create','split','__setModuleDefault','resolve','toDate','161633RantgV','verify','super','parseInt','get','required','findByPk','search','(((.+)+)+)+$','3bRBtJF','listPlan','indexPlan','validate','update','status','prototype','default','trialExpiration','days','__importDefault','getOwnPropertyDescriptor','669200MIgCbg','toString','9567rDCRIB','query','authorization','apply','object','3750HhsvSg','../services/CompanyService/ListCompaniesPlanService','284124jUpGPf','list','../services/CompanyService/UpdateSchedulesService','../helpers/CheckSettings','add','enabled','6OYUHiD','existsSync','email'];a13_0x5327=function(){return _0x15c01c;};return a13_0x5327();}const signup=async(_0x451350,_0x416a41)=>{const _0x447330=a13_0x22069c;if(await(0x0,CheckSettings_1[_0x447330(0xd2)])('allowSignup')!==_0x447330(0xe5))return _0x416a41[_0x447330(0xd0)](0x191)[_0x447330(0x109)](_0x447330(0xf4));return await(0x0,exports[_0x447330(0xf0)])(_0x451350,_0x416a41);};exports[a13_0x22069c(0xea)]=signup;const store=async(_0x37439e,_0x4c7fbd)=>{const _0x3eb4e4=a13_0x22069c,_0xa7d54e=_0x37439e[_0x3eb4e4(0xec)];try{const _0x5a4504=await(0x0,CheckSettings_1[_0x3eb4e4(0xd2)])(_0x3eb4e4(0xd3)),_0x1afdc4=parseInt(_0x5a4504,0xa);isNaN(_0x1afdc4)||_0x1afdc4<=0x0?_0xa7d54e['dueDate']=(0x0,moment_1['default'])()[_0x3eb4e4(0xe4)](0x7,'days')[_0x3eb4e4(0x113)]():_0xa7d54e['dueDate']=(0x0,moment_1[_0x3eb4e4(0xd2)])()[_0x3eb4e4(0xe4)](_0x1afdc4,_0x3eb4e4(0xd4))[_0x3eb4e4(0x113)]();const _0x46b61c=await(0x0,CreateCompanyService_1[_0x3eb4e4(0xd2)])(_0xa7d54e);return _0x4c7fbd['status'](0xc9)[_0x3eb4e4(0x109)](_0x46b61c);}catch(_0x326ada){return _0x4c7fbd['status'](0x1f4)[_0x3eb4e4(0x109)]({'message':_0x3eb4e4(0x10a),'error':_0x326ada});}};exports[a13_0x22069c(0xf0)]=store;const show=async(_0x4d2c71,_0x97769c)=>{const _0x111267=a13_0x22069c,{id:_0x377da3}=_0x4d2c71[_0x111267(0x10d)],_0x370b4b=await User_1[_0x111267(0xd2)]['findByPk'](_0x4d2c71[_0x111267(0xfe)]['id']);if(!_0x370b4b[_0x111267(0x116)]&&Number['parseInt'](_0x377da3,0xa)!==_0x370b4b[_0x111267(0xfc)])throw new AppError_1['default'](_0x111267(0x104),0x193);const _0x3d57ac=await(0x0,ShowCompanyService_1[_0x111267(0xd2)])(_0x377da3);return _0x97769c['status'](0xc8)['json'](_0x3d57ac);};exports[a13_0x22069c(0xf7)]=show;const list=async(_0x2ca0af,_0x1f7695)=>{const _0xcac59a=await(0x0,FindAllCompaniesService_1['default'])();return _0x1f7695['status'](0xc8)['json'](_0xcac59a);};exports[a13_0x22069c(0xe1)]=list;const update=async(_0x4ff06a,_0x2e79b9)=>{const _0x468405=a13_0x22069c,_0x53dba1=_0x4ff06a[_0x468405(0xec)],_0x3e94c4=Yup[_0x468405(0xdd)]()['shape']({'name':Yup[_0x468405(0x100)]()[_0x468405(0x119)](),'email':Yup[_0x468405(0x100)]()[_0x468405(0xe8)]()[_0x468405(0x10b)](),'phone':Yup[_0x468405(0x100)]()['nullable'](),'status':Yup[_0x468405(0x10e)]()[_0x468405(0x10b)](),'planId':Yup['number']()[_0x468405(0x10b)](),'campaignsEnabled':Yup[_0x468405(0x10e)]()['nullable'](),'dueDate':Yup[_0x468405(0xf1)]()[_0x468405(0x10b)](),'recurrence':Yup[_0x468405(0x100)]()['nullable']()});try{await _0x3e94c4[_0x468405(0xce)](_0x53dba1);}catch(_0x28981e){throw new AppError_1[(_0x468405(0xd2))](_0x28981e['message']);}const {id:_0x5d2685}=_0x4ff06a[_0x468405(0x10d)],_0x53bcfa=await(0x0,UpdateCompanyService_1[_0x468405(0xd2)])({'id':_0x5d2685,..._0x53dba1});return _0x2e79b9['status'](0xc8)[_0x468405(0x109)](_0x53bcfa);};exports[a13_0x22069c(0xcf)]=update;const updateSchedules=async(_0x431c4a,_0x47781a)=>{const _0x1421fa=a13_0x22069c,{schedules:_0x3bbe0e}=_0x431c4a[_0x1421fa(0xec)],{id:_0x542f83}=_0x431c4a[_0x1421fa(0x10d)],_0x98bb78=await User_1[_0x1421fa(0xd2)]['findByPk'](_0x431c4a[_0x1421fa(0xfe)]['id']);if(!_0x98bb78[_0x1421fa(0x116)]&&Number[_0x1421fa(0x117)](_0x542f83,0xa)!==_0x98bb78[_0x1421fa(0xfc)])throw new AppError_1['default'](_0x1421fa(0x104),0x193);const _0x34932a=await(0x0,UpdateSchedulesService_1[_0x1421fa(0xd2)])({'id':_0x542f83,'schedules':_0x3bbe0e});return _0x47781a['status'](0xc8)[_0x1421fa(0x109)](_0x34932a);};exports[a13_0x22069c(0x102)]=updateSchedules;const remove=async(_0x453071,_0x61e519)=>{const _0x1fd201=a13_0x22069c,{id:_0x30d8c6}=_0x453071[_0x1fd201(0x10d)];fs_1[_0x1fd201(0xd2)][_0x1fd201(0xe7)](publicFolder+_0x1fd201(0xf8)+_0x30d8c6+'/')&&fs_1[_0x1fd201(0xd2)]['rmdirSync'](publicFolder+_0x1fd201(0xf8)+_0x30d8c6+'/',{'recursive':!![]});const _0x5c2773=await(0x0,DeleteCompanyService_1['default'])(_0x30d8c6);return _0x61e519[_0x1fd201(0xd0)](0xc8)[_0x1fd201(0x109)](_0x5c2773);};function a13_0x5f2a(_0x2cedc5,_0x4e5d3f){const _0x170dda=a13_0x5327();return a13_0x5f2a=function(_0x1c9a19,_0x205e55){_0x1c9a19=_0x1c9a19-0xc8;let _0x532750=_0x170dda[_0x1c9a19];return _0x532750;},a13_0x5f2a(_0x2cedc5,_0x4e5d3f);}exports[a13_0x22069c(0xf3)]=remove;const listPlan=async(_0x5f270b,_0x16334c)=>{const _0x30f102=a13_0x22069c,{id:_0x16a254}=_0x5f270b[_0x30f102(0x10d)],_0x3cc941=_0x5f270b['headers'][_0x30f102(0xdb)],[,_0x314824]=_0x3cc941[_0x30f102(0x110)]('\x20'),_0x3b2d5e=(0x0,jsonwebtoken_1['verify'])(_0x314824,auth_1['default'][_0x30f102(0x10c)]),{id:_0x176597,profile:_0x3c6831,companyId:_0x2e6ba5}=_0x3b2d5e,_0x419a8e=await User_1[_0x30f102(0xd2)][_0x30f102(0xc8)](_0x176597);if(_0x419a8e[_0x30f102(0x116)]===!![]||_0x2e6ba5[_0x30f102(0xd8)]()===_0x16a254){const _0x444d60=await(0x0,ShowPlanCompanyService_1[_0x30f102(0xd2)])(_0x16a254);return _0x16334c['status'](0xc8)[_0x30f102(0x109)](_0x444d60);}else return _0x16334c[_0x30f102(0xd0)](0x190)['json']({'error':_0x30f102(0xfd)});};exports[a13_0x22069c(0xcc)]=listPlan;const indexPlan=async(_0x5ed4ec,_0x5144ac)=>{const _0x13434e=a13_0x22069c,{searchParam:_0x518bc2,pageNumber:_0x1aa3ad}=_0x5ed4ec[_0x13434e(0xda)],_0x3e3909=_0x5ed4ec['headers'][_0x13434e(0xdb)],[,_0x5069d5]=_0x3e3909['split']('\x20'),_0x41354d=(0x0,jsonwebtoken_1[_0x13434e(0x115)])(_0x5069d5,auth_1[_0x13434e(0xd2)]['secret']),{id:_0x4e6949,profile:_0x2c72d7,companyId:_0x48a9e8}=_0x41354d,_0x2cfd80=await User_1['default']['findByPk'](_0x4e6949);if(_0x2cfd80['super']===!![]){const _0x26621e=await(0x0,ListCompaniesPlanService_1[_0x13434e(0xd2)])();return _0x5144ac[_0x13434e(0x109)]({'companies':_0x26621e});}else return _0x5144ac['status'](0x190)[_0x13434e(0x109)]({'error':_0x13434e(0xfd)});};exports[a13_0x22069c(0xcd)]=indexPlan;