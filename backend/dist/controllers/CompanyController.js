const a13_0x2770f2=a13_0xdc46;(function(_0x159b36,_0x112376){const _0x5b603c=a13_0xdc46,_0x58d1bb=_0x159b36();while(!![]){try{const _0x2f4afa=parseInt(_0x5b603c(0x15b))/0x1*(-parseInt(_0x5b603c(0x15c))/0x2)+-parseInt(_0x5b603c(0x18b))/0x3*(-parseInt(_0x5b603c(0x18d))/0x4)+parseInt(_0x5b603c(0x193))/0x5*(parseInt(_0x5b603c(0x17f))/0x6)+parseInt(_0x5b603c(0x14a))/0x7+-parseInt(_0x5b603c(0x15f))/0x8*(-parseInt(_0x5b603c(0x15e))/0x9)+-parseInt(_0x5b603c(0x175))/0xa*(parseInt(_0x5b603c(0x14c))/0xb)+parseInt(_0x5b603c(0x162))/0xc*(-parseInt(_0x5b603c(0x145))/0xd);if(_0x2f4afa===_0x112376)break;else _0x58d1bb['push'](_0x58d1bb['shift']());}catch(_0x44cbb9){_0x58d1bb['push'](_0x58d1bb['shift']());}}}(a13_0x29c9,0xcbb91));const a13_0x398bcf=(function(){let _0x291b35=!![];return function(_0x10db5c,_0x3e93ed){const _0x3a9c71=_0x291b35?function(){const _0x5b2263=a13_0xdc46;if(_0x3e93ed){const _0x309408=_0x3e93ed[_0x5b2263(0x188)](_0x10db5c,arguments);return _0x3e93ed=null,_0x309408;}}:function(){};return _0x291b35=![],_0x3a9c71;};}()),a13_0x3d585d=a13_0x398bcf(this,function(){const _0x5d9e39=a13_0xdc46;return a13_0x3d585d[_0x5d9e39(0x181)]()['search'](_0x5d9e39(0x17e))[_0x5d9e39(0x181)]()['constructor'](a13_0x3d585d)['search'](_0x5d9e39(0x17e));});a13_0x3d585d();'use strict';var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x133ad2,_0x5ea266,_0xb611ac,_0x39fa87){const _0x420c87=a13_0xdc46;if(_0x39fa87===undefined)_0x39fa87=_0xb611ac;var _0x1139e9=Object[_0x420c87(0x189)](_0x5ea266,_0xb611ac);(!_0x1139e9||(_0x420c87(0x157)in _0x1139e9?!_0x5ea266['__esModule']:_0x1139e9[_0x420c87(0x197)]||_0x1139e9[_0x420c87(0x18f)]))&&(_0x1139e9={'enumerable':!![],'get':function(){return _0x5ea266[_0xb611ac];}}),Object[_0x420c87(0x164)](_0x133ad2,_0x39fa87,_0x1139e9);}:function(_0x3b6ca3,_0x2798ec,_0x57d7f7,_0x37a6e2){if(_0x37a6e2===undefined)_0x37a6e2=_0x57d7f7;_0x3b6ca3[_0x37a6e2]=_0x2798ec[_0x57d7f7];}),__setModuleDefault=this&&this[a13_0x2770f2(0x16f)]||(Object[a13_0x2770f2(0x15d)]?function(_0x2947e6,_0x279a20){const _0x1d5880=a13_0x2770f2;Object[_0x1d5880(0x164)](_0x2947e6,'default',{'enumerable':!![],'value':_0x279a20});}:function(_0x406cf1,_0xb5e751){const _0x35ee56=a13_0x2770f2;_0x406cf1[_0x35ee56(0x158)]=_0xb5e751;}),__importStar=this&&this[a13_0x2770f2(0x182)]||function(_0x25fcf7){const _0xb41c8a=a13_0x2770f2;if(_0x25fcf7&&_0x25fcf7['__esModule'])return _0x25fcf7;var _0x5b5726={};if(_0x25fcf7!=null){for(var _0x24e338 in _0x25fcf7)if(_0x24e338!==_0xb41c8a(0x158)&&Object[_0xb41c8a(0x154)][_0xb41c8a(0x155)][_0xb41c8a(0x146)](_0x25fcf7,_0x24e338))__createBinding(_0x5b5726,_0x25fcf7,_0x24e338);}return __setModuleDefault(_0x5b5726,_0x25fcf7),_0x5b5726;},__importDefault=this&&this[a13_0x2770f2(0x14b)]||function(_0xf6b15d){const _0x49ba36=a13_0x2770f2;return _0xf6b15d&&_0xf6b15d[_0x49ba36(0x177)]?_0xf6b15d:{'default':_0xf6b15d};};Object[a13_0x2770f2(0x164)](exports,a13_0x2770f2(0x177),{'value':!![]}),exports['indexPlan']=exports[a13_0x2770f2(0x169)]=exports[a13_0x2770f2(0x14f)]=exports['updateSchedules']=exports[a13_0x2770f2(0x17b)]=exports[a13_0x2770f2(0x170)]=exports[a13_0x2770f2(0x195)]=exports[a13_0x2770f2(0x17c)]=exports[a13_0x2770f2(0x173)]=exports['index']=void 0x0;const Yup=__importStar(require(a13_0x2770f2(0x160))),AppError_1=__importDefault(require(a13_0x2770f2(0x18c))),auth_1=__importDefault(require(a13_0x2770f2(0x14d))),ListCompaniesService_1=__importDefault(require('../services/CompanyService/ListCompaniesService')),CreateCompanyService_1=__importDefault(require(a13_0x2770f2(0x16d))),UpdateCompanyService_1=__importDefault(require(a13_0x2770f2(0x171))),ShowCompanyService_1=__importDefault(require(a13_0x2770f2(0x16a))),UpdateSchedulesService_1=__importDefault(require(a13_0x2770f2(0x194))),DeleteCompanyService_1=__importDefault(require('../services/CompanyService/DeleteCompanyService')),FindAllCompaniesService_1=__importDefault(require('../services/CompanyService/FindAllCompaniesService')),jsonwebtoken_1=require('jsonwebtoken'),User_1=__importDefault(require(a13_0x2770f2(0x149))),ShowPlanCompanyService_1=__importDefault(require(a13_0x2770f2(0x147))),ListCompaniesPlanService_1=__importDefault(require(a13_0x2770f2(0x153))),CheckSettings_1=__importDefault(require('../helpers/CheckSettings')),moment_1=__importDefault(require(a13_0x2770f2(0x19a))),fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path')),publicFolder=path_1[a13_0x2770f2(0x158)][a13_0x2770f2(0x152)](__dirname,'..','..','public'),index=async(_0x5a46c1,_0x3729cb)=>{const _0x339aae=a13_0x2770f2,{searchParam:_0x2b94a6,pageNumber:_0x133501}=_0x5a46c1[_0x339aae(0x150)],{companies:_0x490a53,count:_0x259457,hasMore:_0x84e0f3}=await(0x0,ListCompaniesService_1[_0x339aae(0x158)])({'searchParam':_0x2b94a6,'pageNumber':_0x133501});return _0x3729cb[_0x339aae(0x191)]({'companies':_0x490a53,'count':_0x259457,'hasMore':_0x84e0f3});};function a13_0x29c9(){const _0x3b0f83=['rmdirSync','Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!','../services/CompanyService/CreateCompanyService','enabled','__setModuleDefault','list','../services/CompanyService/UpdateCompanyService','toDate','signup','ERR_FORBIDDEN','74050BYMcnf','email','__esModule','updateSchedules','days','index','update','store','Error\x20creating\x20company','(((.+)+)+)+$','1266LGCnRp','parseInt','toString','__importStar','date','user','object','super','authorization','apply','getOwnPropertyDescriptor','shape','1341rmGakj','../errors/AppError','7472lGFWuq','boolean','configurable','verify','json','/company','21415IbAAQe','../services/CompanyService/UpdateSchedulesService','show','nullable','writable','required','allowSignup','moment','121420rcLqpP','call','../services/CompanyService/ShowPlanCompanyService','validate','../models/User','8344658kmUwOH','__importDefault','2024KGESRd','../config/auth','findByPk','remove','query','add','resolve','../services/CompanyService/ListCompaniesPlanService','prototype','hasOwnProperty','params','get','default','string','existsSync','1oHIlKI','683366VScUzv','create','117cSmGpB','436904BBToQG','yup','secret','1416ozPcyx','🙎🏻‍♂️\x20Signup\x20disabled','defineProperty','body','companyId','status','dueDate','listPlan','../services/CompanyService/ShowCompanyService'];a13_0x29c9=function(){return _0x3b0f83;};return a13_0x29c9();}exports[a13_0x2770f2(0x17a)]=index;const signup=async(_0x4f52df,_0x2800eb)=>{const _0x360a2c=a13_0x2770f2;if(await(0x0,CheckSettings_1['default'])(_0x360a2c(0x199))!==_0x360a2c(0x16e))return _0x2800eb[_0x360a2c(0x167)](0x191)[_0x360a2c(0x191)](_0x360a2c(0x163));return await(0x0,exports[_0x360a2c(0x17c)])(_0x4f52df,_0x2800eb);};exports[a13_0x2770f2(0x173)]=signup;const store=async(_0x469c7e,_0x4eba14)=>{const _0x4cfa6e=a13_0x2770f2,_0x5a8020=_0x469c7e['body'];try{const _0x22e06c=await(0x0,CheckSettings_1['default'])('trialExpiration'),_0x18ea3a=parseInt(_0x22e06c,0xa);isNaN(_0x18ea3a)||_0x18ea3a<=0x0?_0x5a8020[_0x4cfa6e(0x168)]=(0x0,moment_1['default'])()[_0x4cfa6e(0x151)](0x7,_0x4cfa6e(0x179))[_0x4cfa6e(0x172)]():_0x5a8020['dueDate']=(0x0,moment_1['default'])()[_0x4cfa6e(0x151)](_0x18ea3a,_0x4cfa6e(0x179))['toDate']();const _0x4ad6e0=await(0x0,CreateCompanyService_1[_0x4cfa6e(0x158)])(_0x5a8020);return _0x4eba14[_0x4cfa6e(0x167)](0xc9)[_0x4cfa6e(0x191)](_0x4ad6e0);}catch(_0x27576c){return _0x4eba14[_0x4cfa6e(0x167)](0x1f4)[_0x4cfa6e(0x191)]({'message':_0x4cfa6e(0x17d),'error':_0x27576c});}};exports[a13_0x2770f2(0x17c)]=store;const show=async(_0x3b93d1,_0x390006)=>{const _0x40a07e=a13_0x2770f2,{id:_0x307715}=_0x3b93d1[_0x40a07e(0x156)],_0xab5ac9=await User_1[_0x40a07e(0x158)][_0x40a07e(0x14e)](_0x3b93d1[_0x40a07e(0x184)]['id']);if(!_0xab5ac9[_0x40a07e(0x186)]&&Number[_0x40a07e(0x180)](_0x307715,0xa)!==_0xab5ac9[_0x40a07e(0x166)])throw new AppError_1[(_0x40a07e(0x158))](_0x40a07e(0x174),0x193);const _0x18a2cb=await(0x0,ShowCompanyService_1[_0x40a07e(0x158)])(_0x307715);return _0x390006['status'](0xc8)[_0x40a07e(0x191)](_0x18a2cb);};exports[a13_0x2770f2(0x195)]=show;const list=async(_0x143733,_0x440400)=>{const _0x32e1cf=a13_0x2770f2,_0x4f0fc9=await(0x0,FindAllCompaniesService_1[_0x32e1cf(0x158)])();return _0x440400[_0x32e1cf(0x167)](0xc8)[_0x32e1cf(0x191)](_0x4f0fc9);};exports[a13_0x2770f2(0x170)]=list;const update=async(_0x2ea9b6,_0x1a8ac1)=>{const _0x556e37=a13_0x2770f2,_0x569843=_0x2ea9b6[_0x556e37(0x165)],_0x61c191=Yup[_0x556e37(0x185)]()[_0x556e37(0x18a)]({'name':Yup[_0x556e37(0x159)]()[_0x556e37(0x198)](),'email':Yup['string']()[_0x556e37(0x176)]()['nullable'](),'phone':Yup['string']()[_0x556e37(0x196)](),'status':Yup[_0x556e37(0x18e)]()[_0x556e37(0x196)](),'planId':Yup['number']()['nullable'](),'campaignsEnabled':Yup[_0x556e37(0x18e)]()['nullable'](),'dueDate':Yup[_0x556e37(0x183)]()[_0x556e37(0x196)](),'recurrence':Yup['string']()[_0x556e37(0x196)]()});try{await _0x61c191[_0x556e37(0x148)](_0x569843);}catch(_0x3544c1){throw new AppError_1['default'](_0x3544c1['message']);}const {id:_0x525d85}=_0x2ea9b6['params'],_0x2797c7=await(0x0,UpdateCompanyService_1[_0x556e37(0x158)])({'id':_0x525d85,..._0x569843});return _0x1a8ac1[_0x556e37(0x167)](0xc8)['json'](_0x2797c7);};exports[a13_0x2770f2(0x17b)]=update;const updateSchedules=async(_0x2dccad,_0x42fb72)=>{const _0x1c9ebc=a13_0x2770f2,{schedules:_0x4650fb}=_0x2dccad[_0x1c9ebc(0x165)],{id:_0x366f74}=_0x2dccad[_0x1c9ebc(0x156)],_0x3d48d5=await User_1[_0x1c9ebc(0x158)][_0x1c9ebc(0x14e)](_0x2dccad[_0x1c9ebc(0x184)]['id']);if(!_0x3d48d5[_0x1c9ebc(0x186)]&&Number[_0x1c9ebc(0x180)](_0x366f74,0xa)!==_0x3d48d5[_0x1c9ebc(0x166)])throw new AppError_1['default']('ERR_FORBIDDEN',0x193);const _0x5237ce=await(0x0,UpdateSchedulesService_1[_0x1c9ebc(0x158)])({'id':_0x366f74,'schedules':_0x4650fb});return _0x42fb72['status'](0xc8)[_0x1c9ebc(0x191)](_0x5237ce);};exports[a13_0x2770f2(0x178)]=updateSchedules;const remove=async(_0x1c6874,_0x48f694)=>{const _0x37f2f7=a13_0x2770f2,{id:_0x33e489}=_0x1c6874[_0x37f2f7(0x156)];fs_1[_0x37f2f7(0x158)][_0x37f2f7(0x15a)](publicFolder+_0x37f2f7(0x192)+_0x33e489+'/')&&fs_1['default'][_0x37f2f7(0x16b)](publicFolder+_0x37f2f7(0x192)+_0x33e489+'/',{'recursive':!![]});const _0x23b46b=await(0x0,DeleteCompanyService_1['default'])(_0x33e489);return _0x48f694[_0x37f2f7(0x167)](0xc8)['json'](_0x23b46b);};exports[a13_0x2770f2(0x14f)]=remove;const listPlan=async(_0x253f1a,_0x35f65e)=>{const _0x2b2452=a13_0x2770f2,{id:_0xd4f97}=_0x253f1a['params'],_0x5b7ddd=_0x253f1a['headers'][_0x2b2452(0x187)],[,_0x46954a]=_0x5b7ddd['split']('\x20'),_0x149c9b=(0x0,jsonwebtoken_1['verify'])(_0x46954a,auth_1[_0x2b2452(0x158)][_0x2b2452(0x161)]),{id:_0x43997f,profile:_0xac7fe,companyId:_0x5a5925}=_0x149c9b,_0x13867c=await User_1[_0x2b2452(0x158)][_0x2b2452(0x14e)](_0x43997f);if(_0x13867c[_0x2b2452(0x186)]===!![]||_0x5a5925[_0x2b2452(0x181)]()===_0xd4f97){const _0x5a6aea=await(0x0,ShowPlanCompanyService_1[_0x2b2452(0x158)])(_0xd4f97);return _0x35f65e[_0x2b2452(0x167)](0xc8)['json'](_0x5a6aea);}else return _0x35f65e[_0x2b2452(0x167)](0x190)[_0x2b2452(0x191)]({'error':'Você\x20não\x20possui\x20permissão\x20para\x20acessar\x20este\x20recurso!'});};exports[a13_0x2770f2(0x169)]=listPlan;function a13_0xdc46(_0x10ac81,_0x1aa66f){const _0x2b6395=a13_0x29c9();return a13_0xdc46=function(_0x3d585d,_0x398bcf){_0x3d585d=_0x3d585d-0x145;let _0x29c91e=_0x2b6395[_0x3d585d];return _0x29c91e;},a13_0xdc46(_0x10ac81,_0x1aa66f);}const indexPlan=async(_0x3cd7d5,_0x1dd505)=>{const _0x3caed2=a13_0x2770f2,{searchParam:_0x1e1c23,pageNumber:_0x133838}=_0x3cd7d5[_0x3caed2(0x150)],_0x3aafae=_0x3cd7d5['headers']['authorization'],[,_0x591a77]=_0x3aafae['split']('\x20'),_0x36657e=(0x0,jsonwebtoken_1[_0x3caed2(0x190)])(_0x591a77,auth_1[_0x3caed2(0x158)][_0x3caed2(0x161)]),{id:_0x3b5f52,profile:_0x471e63,companyId:_0x44372a}=_0x36657e,_0x4f5bb7=await User_1[_0x3caed2(0x158)]['findByPk'](_0x3b5f52);if(_0x4f5bb7[_0x3caed2(0x186)]===!![]){const _0x77b531=await(0x0,ListCompaniesPlanService_1[_0x3caed2(0x158)])();return _0x1dd505[_0x3caed2(0x191)]({'companies':_0x77b531});}else return _0x1dd505[_0x3caed2(0x167)](0x190)[_0x3caed2(0x191)]({'error':_0x3caed2(0x16c)});};exports['indexPlan']=indexPlan;