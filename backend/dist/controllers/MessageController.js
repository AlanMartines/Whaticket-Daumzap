const a26_0x33941e=a26_0x239a;(function(_0x284f16,_0x14420f){const _0x2c9bf5=a26_0x239a,_0x38ff0e=_0x284f16();while(!![]){try{const _0x379f56=parseInt(_0x2c9bf5(0x136))/0x1*(-parseInt(_0x2c9bf5(0x16d))/0x2)+-parseInt(_0x2c9bf5(0x18f))/0x3*(parseInt(_0x2c9bf5(0x12b))/0x4)+parseInt(_0x2c9bf5(0x15d))/0x5+-parseInt(_0x2c9bf5(0x190))/0x6+parseInt(_0x2c9bf5(0x181))/0x7*(parseInt(_0x2c9bf5(0x143))/0x8)+-parseInt(_0x2c9bf5(0x153))/0x9*(-parseInt(_0x2c9bf5(0x194))/0xa)+parseInt(_0x2c9bf5(0x174))/0xb*(-parseInt(_0x2c9bf5(0x1a9))/0xc);if(_0x379f56===_0x14420f)break;else _0x38ff0e['push'](_0x38ff0e['shift']());}catch(_0x2e3a1f){_0x38ff0e['push'](_0x38ff0e['shift']());}}}(a26_0xfbdc,0xc5a21));const a26_0x48fea3=(function(){let _0x4e995b=!![];return function(_0x2ccbed,_0x53aef8){const _0x1eb185=_0x4e995b?function(){const _0x450bc6=a26_0x239a;if(_0x53aef8){const _0x3b69e9=_0x53aef8[_0x450bc6(0x17d)](_0x2ccbed,arguments);return _0x53aef8=null,_0x3b69e9;}}:function(){};return _0x4e995b=![],_0x1eb185;};}()),a26_0x1ae0d7=a26_0x48fea3(this,function(){const _0x361a5a=a26_0x239a;return a26_0x1ae0d7[_0x361a5a(0x166)]()[_0x361a5a(0x187)](_0x361a5a(0x15e))[_0x361a5a(0x166)]()[_0x361a5a(0x188)](a26_0x1ae0d7)['search'](_0x361a5a(0x15e));});a26_0x1ae0d7();'use strict';var __createBinding=this&&this[a26_0x33941e(0x11d)]||(Object[a26_0x33941e(0x12f)]?function(_0x1c17ad,_0x9033f8,_0x4727a9,_0x29320c){const _0x2446e6=a26_0x33941e;if(_0x29320c===undefined)_0x29320c=_0x4727a9;var _0x220b20=Object[_0x2446e6(0x1ab)](_0x9033f8,_0x4727a9);(!_0x220b20||(_0x2446e6(0x191)in _0x220b20?!_0x9033f8['__esModule']:_0x220b20['writable']||_0x220b20[_0x2446e6(0x13e)]))&&(_0x220b20={'enumerable':!![],'get':function(){return _0x9033f8[_0x4727a9];}}),Object[_0x2446e6(0x13d)](_0x1c17ad,_0x29320c,_0x220b20);}:function(_0x2c1a4d,_0x33fc12,_0x1e49ab,_0x770a8e){if(_0x770a8e===undefined)_0x770a8e=_0x1e49ab;_0x2c1a4d[_0x770a8e]=_0x33fc12[_0x1e49ab];}),__setModuleDefault=this&&this[a26_0x33941e(0x1a8)]||(Object[a26_0x33941e(0x12f)]?function(_0x30cd02,_0x5b93f2){const _0x2588ea=a26_0x33941e;Object[_0x2588ea(0x13d)](_0x30cd02,_0x2588ea(0x127),{'enumerable':!![],'value':_0x5b93f2});}:function(_0xda73ed,_0x4b0436){const _0x4da0db=a26_0x33941e;_0xda73ed[_0x4da0db(0x127)]=_0x4b0436;}),__importStar=this&&this['__importStar']||function(_0x4d05db){const _0x7b0906=a26_0x33941e;if(_0x4d05db&&_0x4d05db['__esModule'])return _0x4d05db;var _0x3bfa81={};if(_0x4d05db!=null){for(var _0x3848f2 in _0x4d05db)if(_0x3848f2!==_0x7b0906(0x127)&&Object[_0x7b0906(0x1a2)][_0x7b0906(0x1ac)]['call'](_0x4d05db,_0x3848f2))__createBinding(_0x3bfa81,_0x4d05db,_0x3848f2);}return __setModuleDefault(_0x3bfa81,_0x4d05db),_0x3bfa81;},__importDefault=this&&this[a26_0x33941e(0x14f)]||function(_0x308f25){const _0x2e5fc5=a26_0x33941e;return _0x308f25&&_0x308f25[_0x2e5fc5(0x17f)]?_0x308f25:{'default':_0x308f25};};function a26_0xfbdc(){const _0x15169d=['open','../models/Ticket','forEach','defineProperty','configurable','remove','all','dateStart','user','32kshXwM','.mp3','message','jid','findByPk','params','path','unreadMessages','emit','conversation','validator','setFfmpegPath','__importDefault','messageId','closed','store','540747osqcDJ','GetWhatsAppFromMessage','replace','app','../services/ContactServices/CreateOrUpdateContactService','edit','userId','file','query','g.us','3549440YusuLs','(((.+)+)+)+$','files','includes','json','index','forwardMessage','MessageId\x20or\x20ContactId\x20not\x20found','../services/TicketServices/FindOrCreateTicketService','toString','../services/WbotServices/SendWhatsAppReaction','fluent-ffmpeg','Erro\x20ao\x20adicionar\x20reação','number','ffmpeg-static','../libs/wbot','1450tSWSfU','companyId','mediaUrl','getAll','keys','true','../errors/AppError','319aXMJyF','company-','Reação\x20adicionada\x20com\x20sucesso!','send','dateEnd','../services/WbotServices/CheckNumber','../services/TicketServices/ShowTicketService','log','storeAudio','apply','../services/MessageServices/TranslateAudioService','__esModule','length','1054396AvTfSw','ShowContactService1','SendTypingStatus','update','typing','Mensagem\x20enviada','search','constructor','whatsappId','@g.us','queueId','Status\x20','end','closeTicket','19548QmNnen','77178DBOElf','get','../services/MessageServices/ListMessagesService','../helpers/Mustache','140wQZlBo','isGroup','Transcrição\x20não\x20disponível','queues','originalname','addReaction','map','crypto','TicketId\x20is\x20required','push','contactId','SendPausedStatus','s.whatsapp.net','saveToFile','prototype','ticketId','randomBytes','../libs/socket','filename','../models/Message','__setModuleDefault','18348zzJaDN','status','getOwnPropertyDescriptor','hasOwnProperty','mediaType','__createBinding','../services/MessageServices/ListAllMessagesService','../helpers/SendPresenceStatus','firstQueueThisUser','toBoolean','admin','Whatsapp\x20from\x20message\x20not\x20found','add','../models/User','Contact\x20not\x20found','default','body','../services/ContactServices/ShowContactService','../models/Queue','332oPWXRc','reactions','contact','Não\x20foi\x20possível\x20realizar\x20a\x20operação','create','O\x20número\x20é\x20obrigatório','isArray','Não\x20foi\x20possível\x20enviar\x20a\x20mensagem,\x20tente\x20novamente\x20em\x20alguns\x20instantes','getIO','notifyUpdate','getWbot','1029Gmfnpv','save','Ticket\x20not\x20found','./public/company'];a26_0xfbdc=function(){return _0x15169d;};return a26_0xfbdc();}Object[a26_0x33941e(0x13d)](exports,a26_0x33941e(0x17f),{'value':!![]}),exports[a26_0x33941e(0x163)]=exports[a26_0x33941e(0x17c)]=exports[a26_0x33941e(0x199)]=exports[a26_0x33941e(0x177)]=exports[a26_0x33941e(0x185)]=exports[a26_0x33941e(0x13f)]=exports[a26_0x33941e(0x158)]=exports['getAll']=exports[a26_0x33941e(0x152)]=exports[a26_0x33941e(0x162)]=void 0x0;const AppError_1=__importDefault(require(a26_0x33941e(0x173))),SetTicketMessagesAsRead_1=__importDefault(require('../helpers/SetTicketMessagesAsRead')),socket_1=require(a26_0x33941e(0x1a5)),Message_1=__importDefault(require(a26_0x33941e(0x1a7))),Ticket_1=__importDefault(require(a26_0x33941e(0x13b))),Queue_1=__importDefault(require(a26_0x33941e(0x12a))),User_1=__importDefault(require(a26_0x33941e(0x125))),Whatsapp_1=__importDefault(require('../models/Whatsapp')),Mustache_1=__importDefault(require(a26_0x33941e(0x193))),ListMessagesService_1=__importDefault(require(a26_0x33941e(0x192))),ShowTicketService_1=__importDefault(require(a26_0x33941e(0x17a))),FindOrCreateTicketService_1=__importDefault(require(a26_0x33941e(0x165))),UpdateTicketService_1=__importDefault(require('../services/TicketServices/UpdateTicketService')),DeleteWhatsAppMessage_1=__importDefault(require('../services/WbotServices/DeleteWhatsAppMessage')),SendWhatsAppMedia_1=__importStar(require('../services/WbotServices/SendWhatsAppMedia')),SendWhatsAppMessage_1=__importDefault(require('../services/WbotServices/SendWhatsAppMessage')),SendWhatsAppReaction_1=__importDefault(require(a26_0x33941e(0x167))),CheckNumber_1=__importDefault(require(a26_0x33941e(0x179))),EditWhatsAppMessage_1=__importDefault(require('../services/WbotServices/EditWhatsAppMessage')),TranslateAudioService_1=__importDefault(require(a26_0x33941e(0x17e))),CreateOrUpdateContactService_1=__importDefault(require(a26_0x33941e(0x157))),ShowMessageService_1=__importStar(require('../services/MessageServices/ShowMessageService')),ShowContactService_1=require(a26_0x33941e(0x129)),ShowUserService_1=__importDefault(require('../services/UserServices/ShowUserService')),user_1=require('../utils/user'),UpdateTicketService_2=require('../services/TicketServices/UpdateTicketService'),ListAllMessagesService_1=__importDefault(require(a26_0x33941e(0x11e))),validator_1=require(a26_0x33941e(0x14d)),ffmpeg_static_1=__importDefault(require(a26_0x33941e(0x16b))),fluent_ffmpeg_1=__importDefault(require(a26_0x33941e(0x168))),crypto_1=__importDefault(require(a26_0x33941e(0x19b))),GetWhatsappWbot_1=__importDefault(require('../helpers/GetWhatsappWbot')),wbot_1=require(a26_0x33941e(0x16c)),SendPresenceStatus_1=require(a26_0x33941e(0x11f));fluent_ffmpeg_1[a26_0x33941e(0x127)][a26_0x33941e(0x14e)](ffmpeg_static_1[a26_0x33941e(0x127)]);const index=async(_0x19730e,_0x45b78e)=>{const _0x41762c=a26_0x33941e,{ticketId:_0x3c024d}=_0x19730e[_0x41762c(0x148)],{pageNumber:_0x28a88f}=_0x19730e[_0x41762c(0x15b)],{companyId:_0x1a6172,profile:_0x226dd0}=_0x19730e['user'],_0x35bc13=[];if(_0x226dd0!==_0x41762c(0x122)){const _0x3da0dc=await User_1['default']['findByPk'](_0x19730e[_0x41762c(0x142)]['id'],{'include':[{'model':Queue_1[_0x41762c(0x127)],'as':'queues'}]});_0x3da0dc[_0x41762c(0x197)][_0x41762c(0x13c)](_0xece5f9=>{const _0x16ee10=_0x41762c;_0x35bc13[_0x16ee10(0x19d)](_0xece5f9['id']);});}const {count:_0x3fb8cd,messages:_0x1ef87e,ticket:_0x5d6630,hasMore:_0x379a23}=await(0x0,ListMessagesService_1[_0x41762c(0x127)])({'pageNumber':_0x28a88f,'ticketId':_0x3c024d,'companyId':_0x1a6172,'queues':_0x35bc13});return(0x0,SetTicketMessagesAsRead_1['default'])(_0x5d6630),_0x45b78e[_0x41762c(0x161)]({'count':_0x3fb8cd,'messages':_0x1ef87e,'ticket':_0x5d6630,'hasMore':_0x379a23});};exports[a26_0x33941e(0x162)]=index;const store=async(_0x1f5625,_0x46ea50)=>{const _0x227b03=a26_0x33941e,{ticketId:_0x3a5c93}=_0x1f5625[_0x227b03(0x148)],{body:_0x34bb9e,quotedMsg:_0x29d35f,vCard:_0x167de3}=_0x1f5625[_0x227b03(0x128)],_0x3bae71=_0x1f5625[_0x227b03(0x15f)],{companyId:_0x170caa,id:_0x533ac8}=_0x1f5625[_0x227b03(0x142)],_0x506e57=await(0x0,ShowTicketService_1[_0x227b03(0x127)])(_0x3a5c93,_0x170caa);_0x506e57[_0x227b03(0x1aa)]!==_0x227b03(0x13a)&&await(0x0,UpdateTicketService_1[_0x227b03(0x127)])({'ticketId':_0x506e57['id'],'ticketData':{'status':_0x227b03(0x13a),'userId':parseInt(_0x533ac8)},'companyId':_0x170caa});if(_0x506e57[_0x227b03(0x14a)]>0x0)(0x0,SetTicketMessagesAsRead_1['default'])(_0x506e57);if(_0x3bae71)await Promise[_0x227b03(0x140)](_0x3bae71[_0x227b03(0x19a)](async(_0xf004d6,_0x3e8da7)=>{const _0x4a9e50=_0x227b03;return(0x0,SendWhatsAppMedia_1[_0x4a9e50(0x127)])({'media':_0xf004d6,'ticket':_0x506e57,'body':Array[_0x4a9e50(0x131)](_0x34bb9e)?_0x34bb9e[_0x3e8da7]:_0x34bb9e});}));else{const _0x2c2cbd=await(0x0,SendWhatsAppMessage_1[_0x227b03(0x127)])({'body':_0x34bb9e,'ticket':_0x506e57,'quotedMsg':_0x29d35f,'vCard':_0x167de3});}return _0x46ea50['send']();};exports[a26_0x33941e(0x152)]=store;const getAll=async(_0x293df1,_0xdb759b)=>{const _0x10ae1d=a26_0x33941e,_0x281005=_0x293df1[_0x10ae1d(0x15b)][_0x10ae1d(0x141)],_0x2ddf6e=_0x293df1[_0x10ae1d(0x15b)][_0x10ae1d(0x178)],_0x4f4d11=(0x0,validator_1[_0x10ae1d(0x121)])(_0x293df1[_0x10ae1d(0x15b)]['fromMe']),{companyId:_0x2695d8}=_0x293df1[_0x10ae1d(0x142)],{count:_0x299f68}=await(0x0,ListAllMessagesService_1['default'])({'companyId':_0x2695d8,'fromMe':_0x4f4d11,'dateStart':_0x281005,'dateEnd':_0x2ddf6e});return _0xdb759b[_0x10ae1d(0x161)]({'count':_0x299f68});};exports[a26_0x33941e(0x170)]=getAll;const edit=async(_0x53f3d1,_0x5bf22d)=>{const _0x5b95a9=a26_0x33941e,{messageId:_0x57ad5b}=_0x53f3d1[_0x5b95a9(0x148)],{companyId:_0x3428ac}=_0x53f3d1[_0x5b95a9(0x142)],{body:_0x4085aa}=_0x53f3d1[_0x5b95a9(0x128)],{ticketId:_0x1b3a0a,message:_0x322c83}=await(0x0,EditWhatsAppMessage_1[_0x5b95a9(0x127)])({'messageId':_0x57ad5b,'companyId':_0x3428ac,'body':_0x4085aa}),_0x2d6e92=(0x0,socket_1[_0x5b95a9(0x133)])();return _0x2d6e92['to'](_0x1b3a0a[_0x5b95a9(0x166)]())[_0x5b95a9(0x14b)](_0x5b95a9(0x175)+_0x3428ac+'-appMessage',{'action':_0x5b95a9(0x184),'message':_0x322c83}),_0x5bf22d[_0x5b95a9(0x177)]();};exports[a26_0x33941e(0x158)]=edit;const remove=async(_0x599bc6,_0x5acbd0)=>{const _0x1eca45=a26_0x33941e,{messageId:_0x1d85a4}=_0x599bc6['params'],{companyId:_0x1cb7d6}=_0x599bc6[_0x1eca45(0x142)],_0x28ecd4=await(0x0,DeleteWhatsAppMessage_1[_0x1eca45(0x127)])(_0x1d85a4),_0xe3e6cb=(0x0,socket_1[_0x1eca45(0x133)])();return _0xe3e6cb['to'](_0x28ecd4['ticketId']['toString']())[_0x1eca45(0x14b)](_0x1eca45(0x175)+_0x1cb7d6+'-appMessage',{'action':_0x1eca45(0x184),'message':_0x28ecd4}),_0x5acbd0[_0x1eca45(0x177)]();};exports[a26_0x33941e(0x13f)]=remove;const typing=async(_0x5eba6c,_0x50282d)=>{const _0x2484a1=a26_0x33941e,{ticketId:_0x3acff5}=_0x5eba6c[_0x2484a1(0x148)],{companyId:_0x35e522}=_0x5eba6c[_0x2484a1(0x142)],{status:_0x3ee9fe}=_0x5eba6c[_0x2484a1(0x15b)];if(!_0x3acff5)return _0x50282d[_0x2484a1(0x1aa)](0x190)['send'](_0x2484a1(0x19c));const _0x3285bd=await(0x0,ShowTicketService_1['default'])(_0x3acff5,_0x35e522);if(!_0x3285bd)return _0x50282d[_0x2484a1(0x1aa)](0x194)[_0x2484a1(0x177)](_0x2484a1(0x138));let _0x431819=(0x0,wbot_1[_0x2484a1(0x135)])(_0x3285bd[_0x2484a1(0x189)]);return _0x3ee9fe==_0x2484a1(0x172)?await(0x0,SendPresenceStatus_1[_0x2484a1(0x183)])(_0x431819,_0x3285bd[_0x2484a1(0x12d)][_0x2484a1(0x16a)]+'@'+(_0x3285bd[_0x2484a1(0x195)]?_0x2484a1(0x15c):'s.whatsapp.net')):await(0x0,SendPresenceStatus_1[_0x2484a1(0x19f)])(_0x431819,_0x3285bd[_0x2484a1(0x12d)][_0x2484a1(0x16a)]+'@'+(_0x3285bd[_0x2484a1(0x195)]?_0x2484a1(0x15c):_0x2484a1(0x1a0))),_0x50282d[_0x2484a1(0x1aa)](0xc8)[_0x2484a1(0x177)](_0x2484a1(0x18c)+_0x3ee9fe+'\x20enviado\x20com\x20sucesso');};exports['typing']=typing;const send=async(_0x3a2b73,_0x132715)=>{const _0x24b9fa=a26_0x33941e,{whatsappId:_0x57890a}=_0x3a2b73[_0x24b9fa(0x148)],_0x18d6e0=_0x3a2b73[_0x24b9fa(0x128)],_0x1619a4=_0x3a2b73[_0x24b9fa(0x15f)];try{const _0x3ff80b=await Whatsapp_1[_0x24b9fa(0x127)][_0x24b9fa(0x147)](_0x57890a);if(!_0x3ff80b)throw new Error(_0x24b9fa(0x12e));if(_0x18d6e0[_0x24b9fa(0x16a)]===undefined)throw new Error(_0x24b9fa(0x130));const _0x569ec4=_0x18d6e0[_0x24b9fa(0x16a)],_0x37b01f=_0x18d6e0[_0x24b9fa(0x128)],_0xa54e82=_0x3ff80b[_0x24b9fa(0x16e)],_0x3b3066=await(0x0,CheckNumber_1[_0x24b9fa(0x127)])(_0x569ec4,_0xa54e82);var _0x5be3a2=_0x3b3066[_0x24b9fa(0x146)][_0x24b9fa(0x160)](_0x24b9fa(0x18a));console[_0x24b9fa(0x17b)](_0x5be3a2);const _0x2334fc=_0x3b3066[_0x24b9fa(0x146)][_0x24b9fa(0x155)]('@s.whatsapp.net','')['replace'](_0x24b9fa(0x18a),''),_0x46649e={'name':''+_0x2334fc,'number':_0x2334fc,'isGroup':_0x5be3a2,'companyId':_0xa54e82},_0x5e6f3b=await(0x0,GetWhatsappWbot_1[_0x24b9fa(0x127)])(_0x3ff80b),_0x3af979=await(0x0,CreateOrUpdateContactService_1[_0x24b9fa(0x127)])(_0x46649e,_0x5e6f3b,_0x3b3066[_0x24b9fa(0x146)]),_0x1e9656=await(0x0,FindOrCreateTicketService_1[_0x24b9fa(0x127)])(_0x3af979,_0x3ff80b['id'],0x0,_0xa54e82);return _0x1619a4?await Promise['all'](_0x1619a4[_0x24b9fa(0x19a)](async _0x52cd4d=>{const _0x5e6e85=_0x24b9fa;await _0x3a2b73[_0x5e6e85(0x156)]['get']('queues')['messageQueue'][_0x5e6e85(0x124)]('SendMessage',{'whatsappId':_0x57890a,'data':{'number':_0x2334fc,'body':_0x37b01f?(0x0,Mustache_1['default'])(_0x37b01f,_0x1e9656):_0x52cd4d[_0x5e6e85(0x198)],'mediaPath':_0x52cd4d[_0x5e6e85(0x149)],'finalName':_0x52cd4d[_0x5e6e85(0x1a6)],'fileName':_0x52cd4d[_0x5e6e85(0x198)]}},{'removeOnComplete':!![],'attempts':0x3});})):await(0x0,SendWhatsAppMessage_1[_0x24b9fa(0x127)])({'body':(0x0,Mustache_1[_0x24b9fa(0x127)])(_0x37b01f,_0x1e9656),'ticket':_0x1e9656}),_0x18d6e0[_0x24b9fa(0x18e)]&&setTimeout(async()=>{const _0x30dc9b=_0x24b9fa;await(0x0,UpdateTicketService_1['default'])({'ticketId':_0x1e9656['id'],'ticketData':{'status':_0x30dc9b(0x151)},'companyId':_0xa54e82});},0x3e8),await(0x0,SetTicketMessagesAsRead_1[_0x24b9fa(0x127)])(_0x1e9656),_0x132715[_0x24b9fa(0x177)]({'mensagem':_0x24b9fa(0x186)});}catch(_0x54ed97){console[_0x24b9fa(0x17b)](_0x54ed97);if(Object[_0x24b9fa(0x171)](_0x54ed97)[_0x24b9fa(0x180)]===0x0)throw new AppError_1[(_0x24b9fa(0x127))](_0x24b9fa(0x132));else throw new AppError_1['default'](_0x54ed97[_0x24b9fa(0x145)]);}};exports[a26_0x33941e(0x177)]=send;const addReaction=async(_0xba35f7,_0x162c9e)=>{const _0x4d7084=a26_0x33941e;try{const {messageId:_0x1cd474}=_0xba35f7[_0x4d7084(0x148)],{type:_0x3f5fc7}=_0xba35f7['body'],{companyId:_0x4064aa,id:_0x4ad439}=_0xba35f7[_0x4d7084(0x142)],_0x5d77a0=await Message_1[_0x4d7084(0x127)][_0x4d7084(0x147)](_0x1cd474),_0x6f431=await Ticket_1[_0x4d7084(0x127)]['findByPk'](_0x5d77a0[_0x4d7084(0x1a3)],{'include':[_0x4d7084(0x12d)]});if(!_0x5d77a0)return _0x162c9e[_0x4d7084(0x1aa)](0x194)[_0x4d7084(0x177)]({'message':'Mensagem\x20não\x20encontrada'});const _0x48fc50=await(0x0,SendWhatsAppReaction_1['default'])({'messageId':_0x1cd474,'ticket':_0x6f431,'reactionType':_0x3f5fc7}),_0xdbd56f=await _0x5d77a0['update']({'reactions':[..._0x5d77a0[_0x4d7084(0x12c)],{'type':_0x3f5fc7,'userId':_0x4ad439}]}),_0xa31b1d=(0x0,socket_1[_0x4d7084(0x133)])();return _0xa31b1d['to'](_0x5d77a0[_0x4d7084(0x1a3)][_0x4d7084(0x166)]())[_0x4d7084(0x14b)](_0x4d7084(0x175)+_0x4064aa+'-appMessage',{'action':_0x4d7084(0x184),'message':_0x5d77a0}),_0x162c9e[_0x4d7084(0x1aa)](0xc8)[_0x4d7084(0x177)]({'message':_0x4d7084(0x176),'reactionResult':_0x48fc50,'reactions':_0xdbd56f[_0x4d7084(0x12c)]});}catch(_0x359f2a){console['error']('Erro\x20ao\x20adicionar\x20reação:',_0x359f2a);if(_0x359f2a instanceof AppError_1[_0x4d7084(0x127)])return _0x162c9e[_0x4d7084(0x1aa)](0x190)[_0x4d7084(0x177)]({'message':_0x359f2a['message']});return _0x162c9e['status'](0x1f4)[_0x4d7084(0x177)]({'message':_0x4d7084(0x169),'error':_0x359f2a['message']});}};exports['addReaction']=addReaction;function a26_0x239a(_0x450b94,_0x4e02e7){const _0x29a258=a26_0xfbdc();return a26_0x239a=function(_0x1ae0d7,_0x48fea3){_0x1ae0d7=_0x1ae0d7-0x11d;let _0xfbdc3d=_0x29a258[_0x1ae0d7];return _0xfbdc3d;},a26_0x239a(_0x450b94,_0x4e02e7);}const storeAudio=async(_0x116b97,_0x32554d)=>{const _0x272d12=a26_0x33941e,_0x597477=_0x116b97[_0x272d12(0x142)][_0x272d12(0x16e)],_0x4bbe6=_0x116b97[_0x272d12(0x15a)];let _0x276355='';const _0x77fdbb=generateRandomFilename(),_0x24c94e=_0x272d12(0x139)+_0x597477+'/'+_0x77fdbb;return await convertToMp3(_0x4bbe6[_0x272d12(0x149)],_0x24c94e),_0x4bbe6&&(_0x276355=await(0x0,TranslateAudioService_1[_0x272d12(0x127)])(_0x24c94e)),_0x32554d[_0x272d12(0x177)](_0x276355||_0x272d12(0x196));};exports[a26_0x33941e(0x17c)]=storeAudio;function convertToMp3(_0x2dc35f,_0x2f39dd){return new Promise((_0x516d47,_0x395fd4)=>{const _0x288648=a26_0x239a;(0x0,fluent_ffmpeg_1['default'])(_0x2dc35f)['toFormat']('mp3')['on'](_0x288648(0x18d),()=>{_0x516d47(_0x2f39dd);})['on']('error',_0x58a04e=>{console['error']('Erro\x20na\x20conversão\x20do\x20áudio:',_0x58a04e),_0x395fd4(_0x58a04e);})[_0x288648(0x1a1)](_0x2f39dd);});}function generateRandomFilename(){const _0x572ac4=a26_0x33941e,_0x44fe24=crypto_1[_0x572ac4(0x127)][_0x572ac4(0x1a4)](0x10)[_0x572ac4(0x166)]('hex');return _0x44fe24+_0x572ac4(0x144);}const forwardMessage=async(_0x3823ab,_0x5d60fa)=>{const _0x558a30=a26_0x33941e;console['log']('>>>>>>>>>>>>>>>>>forwardMessage\x20X<<<<<<<<<<<<<<<<<<<');const {body:_0x30792b,quotedMsg:_0x2defac}=_0x3823ab[_0x558a30(0x128)],_0x16aaf2=_0x3823ab[_0x558a30(0x128)][_0x558a30(0x150)],_0x3a855=_0x3823ab[_0x558a30(0x128)][_0x558a30(0x19e)];if(!_0x16aaf2||!_0x3a855)return _0x5d60fa[_0x558a30(0x1aa)](0xc8)['send'](_0x558a30(0x164));const _0x40629e=await(0x0,ShowMessageService_1[_0x558a30(0x127)])(_0x16aaf2),_0x27a042=await(0x0,ShowContactService_1[_0x558a30(0x182)])(_0x3a855);if(!_0x40629e)return _0x5d60fa[_0x558a30(0x1aa)](0x194)['send']('Message\x20not\x20found');if(!_0x27a042)return _0x5d60fa[_0x558a30(0x1aa)](0x194)[_0x558a30(0x177)](_0x558a30(0x126));const _0x569e60=await(0x0,ShowMessageService_1[_0x558a30(0x154)])(_0x40629e);if(!_0x569e60)return _0x5d60fa[_0x558a30(0x1aa)](0x194)['send'](_0x558a30(0x123));const _0x588be0=_0x3823ab['user'][_0x558a30(0x16e)],_0x33db35=await(0x0,FindOrCreateTicketService_1['default'])(_0x27a042,_0x569e60,0x0,_0x588be0);await(0x0,SetTicketMessagesAsRead_1[_0x558a30(0x127)])(_0x33db35);_0x40629e[_0x558a30(0x1ad)]===_0x558a30(0x14c)||_0x40629e[_0x558a30(0x1ad)]==='extendedTextMessage'?await(0x0,SendWhatsAppMessage_1[_0x558a30(0x127)])({'body':_0x40629e['body'],'ticket':_0x33db35,'quotedMsg':_0x2defac}):await(0x0,SendWhatsAppMedia_1['SendWhatsAppMediaFileAddress'])(_0x40629e[_0x558a30(0x16f)]||'',_0x33db35,_0x40629e[_0x558a30(0x128)]);const _0x1ad8ff=await(0x0,ShowUserService_1['default'])(_0x3823ab['user']['id']),_0x2585a1=await(0x0,user_1[_0x558a30(0x120)])(_0x1ad8ff);_0x33db35[_0x558a30(0x1aa)]=_0x558a30(0x13a),_0x33db35[_0x558a30(0x18b)]=_0x2585a1?.['id']||null,_0x33db35[_0x558a30(0x159)]=_0x1ad8ff['id'],_0x33db35[_0x558a30(0x137)]();const _0x1afe39=(0x0,socket_1[_0x558a30(0x133)])();return(0x0,UpdateTicketService_2[_0x558a30(0x134)])(_0x1afe39,_0x33db35,_0x33db35['id'],_0x588be0),_0x5d60fa['send']();};exports[a26_0x33941e(0x163)]=forwardMessage;