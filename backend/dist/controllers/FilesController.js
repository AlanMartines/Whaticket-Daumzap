const a19_0x586bef=a19_0x5dc7;(function(_0x5d9e0e,_0x4fe72e){const _0x8ccfcb=a19_0x5dc7,_0x13dfc7=_0x5d9e0e();while(!![]){try{const _0x4f73e9=parseInt(_0x8ccfcb(0xa2))/0x1+-parseInt(_0x8ccfcb(0x9d))/0x2*(-parseInt(_0x8ccfcb(0xaa))/0x3)+parseInt(_0x8ccfcb(0x7f))/0x4+-parseInt(_0x8ccfcb(0x81))/0x5+-parseInt(_0x8ccfcb(0xa5))/0x6+parseInt(_0x8ccfcb(0x80))/0x7+-parseInt(_0x8ccfcb(0xaf))/0x8;if(_0x4f73e9===_0x4fe72e)break;else _0x13dfc7['push'](_0x13dfc7['shift']());}catch(_0x175641){_0x13dfc7['push'](_0x13dfc7['shift']());}}}(a19_0x2cf6,0x33187));const a19_0xd80172=(function(){let _0x204955=!![];return function(_0x2a08b3,_0x42f0bc){const _0x22b8b1=_0x204955?function(){const _0x4cfb0c=a19_0x5dc7;if(_0x42f0bc){const _0x4afdfa=_0x42f0bc[_0x4cfb0c(0xa6)](_0x2a08b3,arguments);return _0x42f0bc=null,_0x4afdfa;}}:function(){};return _0x204955=![],_0x22b8b1;};}()),a19_0x382caa=a19_0xd80172(this,function(){const _0xa29cc8=a19_0x5dc7;return a19_0x382caa['toString']()[_0xa29cc8(0x94)](_0xa29cc8(0x7e))['toString']()[_0xa29cc8(0x96)](a19_0x382caa)[_0xa29cc8(0x94)](_0xa29cc8(0x7e));});a19_0x382caa();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x302274){const _0x48b403=a19_0x5dc7;return _0x302274&&_0x302274[_0x48b403(0x8a)]?_0x302274:{'default':_0x302274};};Object[a19_0x586bef(0xa8)](exports,a19_0x586bef(0x8a),{'value':!![]}),exports[a19_0x586bef(0x84)]=exports[a19_0x586bef(0x86)]=exports[a19_0x586bef(0x8b)]=exports[a19_0x586bef(0xa1)]=exports['uploadMedias']=exports['show']=exports[a19_0x586bef(0x7d)]=exports[a19_0x586bef(0xa4)]=void 0x0;const socket_1=require(a19_0x586bef(0x87)),AppError_1=__importDefault(require(a19_0x586bef(0xae))),lodash_1=require('lodash'),CreateService_1=__importDefault(require(a19_0x586bef(0x92))),ListService_1=__importDefault(require('../services/FileServices/ListService')),UpdateService_1=__importDefault(require(a19_0x586bef(0x95))),ShowService_1=__importDefault(require(a19_0x586bef(0x8c))),DeleteService_1=__importDefault(require('../services/FileServices/DeleteService')),SimpleListService_1=__importDefault(require('../services/FileServices/SimpleListService')),DeleteAllService_1=__importDefault(require(a19_0x586bef(0xab))),FilesOptions_1=__importDefault(require('../models/FilesOptions')),index=async(_0x45f910,_0x3cc9ed)=>{const _0x31f383=a19_0x586bef,{pageNumber:_0x190108,searchParam:_0x1ec453}=_0x45f910[_0x31f383(0x82)],{companyId:_0x381de3}=_0x45f910[_0x31f383(0x88)],{files:_0x1008b0,count:_0x4fa3a0,hasMore:_0x4fefdc}=await(0x0,ListService_1[_0x31f383(0x91)])({'searchParam':_0x1ec453,'pageNumber':_0x190108,'companyId':_0x381de3});return _0x3cc9ed[_0x31f383(0xad)]({'files':_0x1008b0,'count':_0x4fa3a0,'hasMore':_0x4fefdc});};exports[a19_0x586bef(0xa4)]=index;const store=async(_0x2e40d2,_0x311af0)=>{const _0x4b6362=a19_0x586bef,{name:_0x10304a,message:_0x5d8cda,options:_0x1003a7}=_0x2e40d2[_0x4b6362(0x7c)],{companyId:_0x471e42}=_0x2e40d2['user'],_0x577be4=await(0x0,CreateService_1[_0x4b6362(0x91)])({'name':_0x10304a,'message':_0x5d8cda,'options':_0x1003a7,'companyId':_0x471e42}),_0x4ab123=(0x0,socket_1[_0x4b6362(0x93)])();return _0x4ab123['to'](_0x4b6362(0x85)+_0x471e42+'-mainchannel')[_0x4b6362(0xa3)](_0x4b6362(0x8d)+_0x471e42+'-file',{'action':_0x4b6362(0x8e),'fileList':_0x577be4}),_0x311af0[_0x4b6362(0x9a)](0xc8)[_0x4b6362(0xad)](_0x577be4);};exports[a19_0x586bef(0x7d)]=store;const show=async(_0x255025,_0x8d0205)=>{const _0x5b42a7=a19_0x586bef,{fileId:_0x3b59de}=_0x255025[_0x5b42a7(0x9e)],{companyId:_0x509091}=_0x255025['user'],_0xb429b2=await(0x0,ShowService_1[_0x5b42a7(0x91)])(_0x3b59de,_0x509091);return _0x8d0205[_0x5b42a7(0x9a)](0xc8)['json'](_0xb429b2);};exports[a19_0x586bef(0x9c)]=show;function a19_0x5dc7(_0x34466c,_0x19c19e){const _0x2030d2=a19_0x2cf6();return a19_0x5dc7=function(_0x382caa,_0xd80172){_0x382caa=_0x382caa-0x7c;let _0x2cf61d=_0x2030d2[_0x382caa];return _0x2cf61d;},a19_0x5dc7(_0x34466c,_0x19c19e);}const uploadMedias=async(_0x3f854c,_0x16edac)=>{const _0x208965=a19_0x586bef,{fileId:_0x3c40ac,id:_0x5785b4,mediaType:_0x35fb63}=_0x3f854c[_0x208965(0x7c)],_0x4bba2d=_0x3f854c[_0x208965(0xa9)],_0x25427b=(0x0,lodash_1[_0x208965(0xa7)])(_0x4bba2d);try{let _0x298e2f;if(_0x4bba2d['length']>0x0)for(const [_0xb2f21d,_0x4d6459]of _0x4bba2d[_0x208965(0x83)]()){_0x298e2f=await FilesOptions_1['default'][_0x208965(0x9f)]({'where':{'fileId':_0x3c40ac,'id':Array[_0x208965(0x97)](_0x5785b4)?_0x5785b4[_0xb2f21d]:_0x5785b4}}),_0x298e2f['update']({'path':_0x4d6459['filename'][_0x208965(0x8f)]('/','-'),'mediaType':Array[_0x208965(0x97)](_0x35fb63)?_0x35fb63[_0xb2f21d]:_0x35fb63});}return _0x16edac[_0x208965(0x99)]({'mensagem':_0x208965(0x90)});}catch(_0x413d77){throw new AppError_1[(_0x208965(0x91))](_0x413d77[_0x208965(0xa0)]);}};exports[a19_0x586bef(0xb0)]=uploadMedias;function a19_0x2cf6(){const _0x2149b5=['995420eBREzd','2443147KJHQeh','1268995awBFWQ','query','entries','list','company-','removeAll','../libs/socket','user','admin','__esModule','remove','../services/FileServices/ShowService','company','create','replace','Arquivos\x20atualizados','default','../services/FileServices/CreateService','getIO','search','../services/FileServices/UpdateService','constructor','isArray','File\x20List\x20deleted','send','status','profile','show','4kcEsCy','params','findOne','message','update','60186hysXQy','emit','index','1467552PwehIE','apply','head','defineProperty','files','522336KWhFiD','../services/FileServices/DeleteAllService','-file','json','../errors/AppError','2388864uwQxPd','uploadMedias','body','store','(((.+)+)+)+$'];a19_0x2cf6=function(){return _0x2149b5;};return a19_0x2cf6();}const update=async(_0x446666,_0xe7621a)=>{const _0x5cce6b=a19_0x586bef;if(_0x446666[_0x5cce6b(0x88)][_0x5cce6b(0x9b)]!==_0x5cce6b(0x89))throw new AppError_1['default']('ERR_NO_PERMISSION',0x193);const {fileId:_0x466108}=_0x446666[_0x5cce6b(0x9e)],_0x5b3212=_0x446666[_0x5cce6b(0x7c)],{companyId:_0x561061}=_0x446666[_0x5cce6b(0x88)],_0x3b6ca1=await(0x0,UpdateService_1[_0x5cce6b(0x91)])({'fileData':_0x5b3212,'id':_0x466108,'companyId':_0x561061}),_0x7d5220=(0x0,socket_1[_0x5cce6b(0x93)])();return _0x7d5220['to'](_0x5cce6b(0x85)+_0x561061+'-mainchannel')[_0x5cce6b(0xa3)](_0x5cce6b(0x8d)+_0x561061+_0x5cce6b(0xac),{'action':_0x5cce6b(0xa1),'fileList':_0x3b6ca1}),_0xe7621a[_0x5cce6b(0x9a)](0xc8)[_0x5cce6b(0xad)](_0x3b6ca1);};exports['update']=update;const remove=async(_0xcbc753,_0x578a53)=>{const _0x42a978=a19_0x586bef,{fileId:_0x3c9c14}=_0xcbc753['params'],{companyId:_0x1ef19f}=_0xcbc753[_0x42a978(0x88)];await(0x0,DeleteService_1[_0x42a978(0x91)])(_0x3c9c14,_0x1ef19f);const _0x2e230e=(0x0,socket_1[_0x42a978(0x93)])();return _0x2e230e['to'](_0x42a978(0x85)+_0x1ef19f+'-mainchannel')[_0x42a978(0xa3)](_0x42a978(0x8d)+_0x1ef19f+'-file',{'action':'delete','fileId':_0x3c9c14}),_0x578a53['status'](0xc8)['json']({'message':_0x42a978(0x98)});};exports['remove']=remove;const removeAll=async(_0x326985,_0x42d149)=>{const _0x893701=a19_0x586bef,{companyId:_0x3bb7ee}=_0x326985[_0x893701(0x88)];return await(0x0,DeleteAllService_1[_0x893701(0x91)])(_0x3bb7ee),_0x42d149['send']();};exports['removeAll']=removeAll;const list=async(_0x5709f8,_0x1f919f)=>{const _0x1144b0=a19_0x586bef,{searchParam:_0x136bde}=_0x5709f8[_0x1144b0(0x82)],{companyId:_0x706845}=_0x5709f8[_0x1144b0(0x88)],_0x54e8f1=await(0x0,SimpleListService_1[_0x1144b0(0x91)])({'searchParam':_0x136bde,'companyId':_0x706845});return _0x1f919f[_0x1144b0(0xad)](_0x54e8f1);};exports[a19_0x586bef(0x84)]=list;