const a19_0x54f6a7=a19_0x4707;(function(_0x59559f,_0x2d797e){const _0xdc9020=a19_0x4707,_0x6bdcb2=_0x59559f();while(!![]){try{const _0x2ecedc=parseInt(_0xdc9020(0x151))/0x1+parseInt(_0xdc9020(0x115))/0x2+parseInt(_0xdc9020(0x137))/0x3*(parseInt(_0xdc9020(0x14b))/0x4)+parseInt(_0xdc9020(0x12b))/0x5*(-parseInt(_0xdc9020(0x126))/0x6)+parseInt(_0xdc9020(0x141))/0x7+parseInt(_0xdc9020(0x145))/0x8*(parseInt(_0xdc9020(0x148))/0x9)+-parseInt(_0xdc9020(0x11b))/0xa*(parseInt(_0xdc9020(0x134))/0xb);if(_0x2ecedc===_0x2d797e)break;else _0x6bdcb2['push'](_0x6bdcb2['shift']());}catch(_0x18e546){_0x6bdcb2['push'](_0x6bdcb2['shift']());}}}(a19_0x4946,0x7b7ff));function a19_0x4946(){const _0x91f47=['386569DQshsg','947620YlAQNu','status','../services/FileServices/CreateService','defineProperty','../services/FileServices/UpdateService','default','1308770PRAoRj','list','query','update','toString','findOne','index','Arquivos\x20atualizados','length','message','__esModule','4241334dumwiT','store','remove','constructor','isArray','5aKssAa','__importDefault','entries','company-','-file','search','params','../libs/socket','emit','88aFKNKJ','company','../services/FileServices/SimpleListService','6ZMAwPK','uploadMedias','../services/FileServices/DeleteService','../services/FileServices/ListService','body','removeAll','send','apply','profile','create','4203878bozLUc','ERR_NO_PERMISSION','user','show','218456qiTfqi','getIO','../services/FileServices/DeleteAllService','27DQNkmG','lodash','head','1433812iRtmRT','admin','(((.+)+)+)+$','json','filename','replace'];a19_0x4946=function(){return _0x91f47;};return a19_0x4946();}const a19_0x3041c2=(function(){let _0x184536=!![];return function(_0x326b48,_0x21602e){const _0x44fbb2=_0x184536?function(){const _0x2e10eb=a19_0x4707;if(_0x21602e){const _0x36f956=_0x21602e[_0x2e10eb(0x13e)](_0x326b48,arguments);return _0x21602e=null,_0x36f956;}}:function(){};return _0x184536=![],_0x44fbb2;};}()),a19_0x628c0d=a19_0x3041c2(this,function(){const _0x51e426=a19_0x4707;return a19_0x628c0d['toString']()[_0x51e426(0x130)](_0x51e426(0x14d))[_0x51e426(0x11f)]()[_0x51e426(0x129)](a19_0x628c0d)[_0x51e426(0x130)](_0x51e426(0x14d));});a19_0x628c0d();'use strict';var __importDefault=this&&this[a19_0x54f6a7(0x12c)]||function(_0x147400){const _0x562723=a19_0x54f6a7;return _0x147400&&_0x147400[_0x562723(0x125)]?_0x147400:{'default':_0x147400};};Object[a19_0x54f6a7(0x118)](exports,a19_0x54f6a7(0x125),{'value':!![]}),exports[a19_0x54f6a7(0x11c)]=exports[a19_0x54f6a7(0x13c)]=exports[a19_0x54f6a7(0x128)]=exports[a19_0x54f6a7(0x11e)]=exports[a19_0x54f6a7(0x138)]=exports[a19_0x54f6a7(0x144)]=exports[a19_0x54f6a7(0x127)]=exports[a19_0x54f6a7(0x121)]=void 0x0;const socket_1=require(a19_0x54f6a7(0x132)),AppError_1=__importDefault(require('../errors/AppError')),lodash_1=require(a19_0x54f6a7(0x149)),CreateService_1=__importDefault(require(a19_0x54f6a7(0x117))),ListService_1=__importDefault(require(a19_0x54f6a7(0x13a))),UpdateService_1=__importDefault(require(a19_0x54f6a7(0x119))),ShowService_1=__importDefault(require('../services/FileServices/ShowService')),DeleteService_1=__importDefault(require(a19_0x54f6a7(0x139))),SimpleListService_1=__importDefault(require(a19_0x54f6a7(0x136))),DeleteAllService_1=__importDefault(require(a19_0x54f6a7(0x147))),FilesOptions_1=__importDefault(require('../models/FilesOptions')),index=async(_0x2372cd,_0x24c9af)=>{const _0x104de5=a19_0x54f6a7,{pageNumber:_0x129e0f,searchParam:_0x122208}=_0x2372cd[_0x104de5(0x11d)],{companyId:_0x219a44}=_0x2372cd['user'],{files:_0x7270e9,count:_0x107b11,hasMore:_0x762283}=await(0x0,ListService_1['default'])({'searchParam':_0x122208,'pageNumber':_0x129e0f,'companyId':_0x219a44});return _0x24c9af[_0x104de5(0x14e)]({'files':_0x7270e9,'count':_0x107b11,'hasMore':_0x762283});};exports[a19_0x54f6a7(0x121)]=index;function a19_0x4707(_0xdd20fd,_0x91eaee){const _0x51f2e0=a19_0x4946();return a19_0x4707=function(_0x628c0d,_0x3041c2){_0x628c0d=_0x628c0d-0x115;let _0x4946d9=_0x51f2e0[_0x628c0d];return _0x4946d9;},a19_0x4707(_0xdd20fd,_0x91eaee);}const store=async(_0x5e6f41,_0x228673)=>{const _0x5b857a=a19_0x54f6a7,{name:_0x20eccd,message:_0x3a7e2a,options:_0x110230}=_0x5e6f41[_0x5b857a(0x13b)],{companyId:_0x33a917}=_0x5e6f41[_0x5b857a(0x143)],_0x222078=await(0x0,CreateService_1[_0x5b857a(0x11a)])({'name':_0x20eccd,'message':_0x3a7e2a,'options':_0x110230,'companyId':_0x33a917}),_0x1be378=(0x0,socket_1[_0x5b857a(0x146)])();return _0x1be378['to']('company-'+_0x33a917+'-mainchannel')['emit'](_0x5b857a(0x135)+_0x33a917+_0x5b857a(0x12f),{'action':_0x5b857a(0x140),'fileList':_0x222078}),_0x228673['status'](0xc8)[_0x5b857a(0x14e)](_0x222078);};exports[a19_0x54f6a7(0x127)]=store;const show=async(_0x3926a1,_0x18158b)=>{const _0x5b1114=a19_0x54f6a7,{fileId:_0x9d1a31}=_0x3926a1[_0x5b1114(0x131)],{companyId:_0x6c343e}=_0x3926a1[_0x5b1114(0x143)],_0xe904cd=await(0x0,ShowService_1['default'])(_0x9d1a31,_0x6c343e);return _0x18158b[_0x5b1114(0x116)](0xc8)[_0x5b1114(0x14e)](_0xe904cd);};exports[a19_0x54f6a7(0x144)]=show;const uploadMedias=async(_0x572248,_0x3036f2)=>{const _0x4cc955=a19_0x54f6a7,{fileId:_0x5ebb38,id:_0x3e6688,mediaType:_0x2f58b2}=_0x572248[_0x4cc955(0x13b)],_0x22cc92=_0x572248['files'],_0x24d538=(0x0,lodash_1[_0x4cc955(0x14a)])(_0x22cc92);try{let _0x17d56f;if(_0x22cc92[_0x4cc955(0x123)]>0x0)for(const [_0x424b06,_0x18b140]of _0x22cc92[_0x4cc955(0x12d)]()){_0x17d56f=await FilesOptions_1['default'][_0x4cc955(0x120)]({'where':{'fileId':_0x5ebb38,'id':Array[_0x4cc955(0x12a)](_0x3e6688)?_0x3e6688[_0x424b06]:_0x3e6688}}),_0x17d56f[_0x4cc955(0x11e)]({'path':_0x18b140[_0x4cc955(0x14f)][_0x4cc955(0x150)]('/','-'),'mediaType':Array[_0x4cc955(0x12a)](_0x2f58b2)?_0x2f58b2[_0x424b06]:_0x2f58b2});}return _0x3036f2['send']({'mensagem':_0x4cc955(0x122)});}catch(_0x139aa3){throw new AppError_1['default'](_0x139aa3[_0x4cc955(0x124)]);}};exports[a19_0x54f6a7(0x138)]=uploadMedias;const update=async(_0x4c96ca,_0x181320)=>{const _0x274b0d=a19_0x54f6a7;if(_0x4c96ca['user'][_0x274b0d(0x13f)]!==_0x274b0d(0x14c))throw new AppError_1[(_0x274b0d(0x11a))](_0x274b0d(0x142),0x193);const {fileId:_0x59ec3e}=_0x4c96ca[_0x274b0d(0x131)],_0x48143e=_0x4c96ca[_0x274b0d(0x13b)],{companyId:_0x1a9ca3}=_0x4c96ca[_0x274b0d(0x143)],_0x4ccd52=await(0x0,UpdateService_1[_0x274b0d(0x11a)])({'fileData':_0x48143e,'id':_0x59ec3e,'companyId':_0x1a9ca3}),_0x116e9c=(0x0,socket_1[_0x274b0d(0x146)])();return _0x116e9c['to'](_0x274b0d(0x12e)+_0x1a9ca3+'-mainchannel')[_0x274b0d(0x133)]('company'+_0x1a9ca3+_0x274b0d(0x12f),{'action':_0x274b0d(0x11e),'fileList':_0x4ccd52}),_0x181320[_0x274b0d(0x116)](0xc8)[_0x274b0d(0x14e)](_0x4ccd52);};exports[a19_0x54f6a7(0x11e)]=update;const remove=async(_0x1c57e5,_0x299aed)=>{const _0x1bc613=a19_0x54f6a7,{fileId:_0x556b90}=_0x1c57e5[_0x1bc613(0x131)],{companyId:_0x1a0d1a}=_0x1c57e5[_0x1bc613(0x143)];await(0x0,DeleteService_1[_0x1bc613(0x11a)])(_0x556b90,_0x1a0d1a);const _0xde81cd=(0x0,socket_1[_0x1bc613(0x146)])();return _0xde81cd['to']('company-'+_0x1a0d1a+'-mainchannel')['emit'](_0x1bc613(0x135)+_0x1a0d1a+_0x1bc613(0x12f),{'action':'delete','fileId':_0x556b90}),_0x299aed[_0x1bc613(0x116)](0xc8)['json']({'message':'File\x20List\x20deleted'});};exports[a19_0x54f6a7(0x128)]=remove;const removeAll=async(_0x4d4bf1,_0x1d161d)=>{const _0x15b418=a19_0x54f6a7,{companyId:_0x583d30}=_0x4d4bf1['user'];return await(0x0,DeleteAllService_1[_0x15b418(0x11a)])(_0x583d30),_0x1d161d[_0x15b418(0x13d)]();};exports[a19_0x54f6a7(0x13c)]=removeAll;const list=async(_0x53667d,_0x41434d)=>{const _0x2200ee=a19_0x54f6a7,{searchParam:_0x5c3e34}=_0x53667d[_0x2200ee(0x11d)],{companyId:_0x3db99}=_0x53667d[_0x2200ee(0x143)],_0x5393dd=await(0x0,SimpleListService_1[_0x2200ee(0x11a)])({'searchParam':_0x5c3e34,'companyId':_0x3db99});return _0x41434d[_0x2200ee(0x14e)](_0x5393dd);};exports[a19_0x54f6a7(0x11c)]=list;