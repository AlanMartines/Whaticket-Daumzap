const a35_0x5f54ac=a35_0x4975;(function(_0x556bfa,_0x4cce2e){const _0x35145d=a35_0x4975,_0x11f0ec=_0x556bfa();while(!![]){try{const _0x26db6c=parseInt(_0x35145d(0x172))/0x1*(parseInt(_0x35145d(0x190))/0x2)+-parseInt(_0x35145d(0x177))/0x3+parseInt(_0x35145d(0x191))/0x4+parseInt(_0x35145d(0x189))/0x5+parseInt(_0x35145d(0x18a))/0x6*(parseInt(_0x35145d(0x193))/0x7)+-parseInt(_0x35145d(0x195))/0x8*(parseInt(_0x35145d(0x18c))/0x9)+-parseInt(_0x35145d(0x179))/0xa;if(_0x26db6c===_0x4cce2e)break;else _0x11f0ec['push'](_0x11f0ec['shift']());}catch(_0x1155d7){_0x11f0ec['push'](_0x11f0ec['shift']());}}}(a35_0x4413,0x43031));const a35_0x1917a9=(function(){let _0x227a76=!![];return function(_0x16c8cb,_0x1a0cf4){const _0x11cd93=_0x227a76?function(){const _0x21874b=a35_0x4975;if(_0x1a0cf4){const _0xe3c010=_0x1a0cf4[_0x21874b(0x192)](_0x16c8cb,arguments);return _0x1a0cf4=null,_0xe3c010;}}:function(){};return _0x227a76=![],_0x11cd93;};}()),a35_0x53cd61=a35_0x1917a9(this,function(){const _0x4e4dcf=a35_0x4975;return a35_0x53cd61[_0x4e4dcf(0x188)]()[_0x4e4dcf(0x180)]('(((.+)+)+)+$')['toString']()['constructor'](a35_0x53cd61)['search'](_0x4e4dcf(0x186));});a35_0x53cd61();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x331cbe){const _0x1d510b=a35_0x4975;return _0x331cbe&&_0x331cbe[_0x1d510b(0x18e)]?_0x331cbe:{'default':_0x331cbe};};function a35_0x4413(){const _0x1bc7a4=['send','__esModule','-auth','1051574OgOtze','463308whBxir','apply','68257uzVJmK','body','2768osiZVu','update','ERR_SESSION_EXPIRED','email','../helpers/SendRefreshToken','companyId','user','1QJKEQI','RefreshTokenService','findByPk','default','json','585540ODQMHg','../libs/socket','6081190gwpvXi','SendRefreshToken','../models/User','jrt','../services/AuthServices/RefreshTokenService','clearCookie','company-','search','../errors/AppError','cookies','store','remove','-mainchannel','(((.+)+)+)+$','../services/UserServices/AuthUserService','toString','486665OcHNDN','306LQkMrG','status','4122SAXRbD'];a35_0x4413=function(){return _0x1bc7a4;};return a35_0x4413();}Object['defineProperty'](exports,a35_0x5f54ac(0x18e),{'value':!![]}),exports[a35_0x5f54ac(0x184)]=exports['me']=exports[a35_0x5f54ac(0x16c)]=exports[a35_0x5f54ac(0x183)]=void 0x0;const AppError_1=__importDefault(require(a35_0x5f54ac(0x181))),socket_1=require(a35_0x5f54ac(0x178)),AuthUserService_1=__importDefault(require(a35_0x5f54ac(0x187))),SendRefreshToken_1=require(a35_0x5f54ac(0x16f)),RefreshTokenService_1=require(a35_0x5f54ac(0x17d)),FindUserFromToken_1=__importDefault(require('../services/AuthServices/FindUserFromToken')),User_1=__importDefault(require(a35_0x5f54ac(0x17b))),store=async(_0x3b3d54,_0x5e152e)=>{const _0x46ffe0=a35_0x5f54ac,{email:_0x402d7a,password:_0x3d32a7}=_0x3b3d54[_0x46ffe0(0x194)],{token:_0x563234,serializedUser:_0x2ea091,refreshToken:_0x1fe1da}=await(0x0,AuthUserService_1['default'])({'email':_0x402d7a,'password':_0x3d32a7});(0x0,SendRefreshToken_1[_0x46ffe0(0x17a)])(_0x5e152e,_0x1fe1da);const _0x52d3b0=(0x0,socket_1['getIO'])();return _0x52d3b0['to'](_0x46ffe0(0x17f)+_0x2ea091['companyId']+_0x46ffe0(0x185))['emit'](_0x46ffe0(0x17f)+_0x2ea091['companyId']+_0x46ffe0(0x18f),{'action':_0x46ffe0(0x16c),'user':{'id':_0x2ea091['id'],'email':_0x2ea091[_0x46ffe0(0x16e)],'companyId':_0x2ea091[_0x46ffe0(0x170)]}}),_0x5e152e[_0x46ffe0(0x18b)](0xc8)[_0x46ffe0(0x176)]({'token':_0x563234,'user':_0x2ea091});};function a35_0x4975(_0x37f89a,_0x36253b){const _0x555a8d=a35_0x4413();return a35_0x4975=function(_0x53cd61,_0x1917a9){_0x53cd61=_0x53cd61-0x16c;let _0x441350=_0x555a8d[_0x53cd61];return _0x441350;},a35_0x4975(_0x37f89a,_0x36253b);}exports[a35_0x5f54ac(0x183)]=store;const update=async(_0x3d5da6,_0x82a730)=>{const _0x53894b=a35_0x5f54ac,_0x5b9334=_0x3d5da6[_0x53894b(0x182)]['jrt'];if(!_0x5b9334)throw new AppError_1['default']('ERR_SESSION_EXPIRED',0x191);const {user:_0x44bb1e,newToken:_0x27765b,refreshToken:_0x46f1ab}=await(0x0,RefreshTokenService_1[_0x53894b(0x173)])(_0x82a730,_0x5b9334);return(0x0,SendRefreshToken_1[_0x53894b(0x17a)])(_0x82a730,_0x46f1ab),_0x82a730[_0x53894b(0x176)]({'token':_0x27765b,'user':_0x44bb1e});};exports[a35_0x5f54ac(0x16c)]=update;const me=async(_0x29036f,_0x1cf7a5)=>{const _0x1150fd=a35_0x5f54ac,_0x5c4825=_0x29036f[_0x1150fd(0x182)][_0x1150fd(0x17c)],_0x1f1ea3=await(0x0,FindUserFromToken_1['default'])(_0x5c4825),{id:_0x137435,profile:_0x58446f,super:_0x83edd0}=_0x1f1ea3;if(!_0x5c4825)throw new AppError_1['default'](_0x1150fd(0x16d),0x191);return _0x1cf7a5[_0x1150fd(0x176)]({'id':_0x137435,'profile':_0x58446f,'super':_0x83edd0});};exports['me']=me;const remove=async(_0x504e96,_0x37a518)=>{const _0x396977=a35_0x5f54ac,{id:_0x5a507f}=_0x504e96[_0x396977(0x171)],_0x122651=await User_1[_0x396977(0x175)][_0x396977(0x174)](_0x5a507f);return await _0x122651[_0x396977(0x16c)]({'online':![]}),_0x37a518[_0x396977(0x17e)](_0x396977(0x17c)),_0x37a518[_0x396977(0x18d)]();};exports[a35_0x5f54ac(0x184)]=remove;