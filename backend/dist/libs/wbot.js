const a256_0x407595=a256_0x134d;(function(_0x316d2d,_0x455e39){const _0x27f8f3=a256_0x134d,_0x5aa96e=_0x316d2d();while(!![]){try{const _0x153d46=parseInt(_0x27f8f3(0x19d))/0x1+-parseInt(_0x27f8f3(0x1aa))/0x2+parseInt(_0x27f8f3(0x1b7))/0x3+-parseInt(_0x27f8f3(0x134))/0x4+-parseInt(_0x27f8f3(0x13d))/0x5+parseInt(_0x27f8f3(0x19a))/0x6*(parseInt(_0x27f8f3(0x15d))/0x7)+parseInt(_0x27f8f3(0x144))/0x8*(-parseInt(_0x27f8f3(0x16f))/0x9);if(_0x153d46===_0x455e39)break;else _0x5aa96e['push'](_0x5aa96e['shift']());}catch(_0xb69f21){_0x5aa96e['push'](_0x5aa96e['shift']());}}}(a256_0xebd4,0x798e0));const a256_0x138449=(function(){let _0x163f10=!![];return function(_0x34385a,_0x3d710a){const _0x40ab72=_0x163f10?function(){const _0x51b33f=a256_0x134d;if(_0x3d710a){const _0xe2fa8=_0x3d710a[_0x51b33f(0x19b)](_0x34385a,arguments);return _0x3d710a=null,_0xe2fa8;}}:function(){};return _0x163f10=![],_0x40ab72;};}()),a256_0x10efff=a256_0x138449(this,function(){const _0x18c9d9=a256_0x134d;return a256_0x10efff[_0x18c9d9(0x196)]()['search']('(((.+)+)+)+$')[_0x18c9d9(0x196)]()['constructor'](a256_0x10efff)[_0x18c9d9(0x13e)](_0x18c9d9(0x166));});a256_0x10efff();'use strict';function a256_0x134d(_0x3b1aec,_0x4f1f97){const _0x5c938f=a256_0xebd4();return a256_0x134d=function(_0x10efff,_0x138449){_0x10efff=_0x10efff-0x134;let _0xebd400=_0x5c938f[_0x10efff];return _0xebd400;},a256_0x134d(_0x3b1aec,_0x4f1f97);}var __createBinding=this&&this[a256_0x407595(0x1b8)]||(Object['create']?function(_0x465a22,_0x298c09,_0x11da3b,_0x4e6675){const _0x3b2994=a256_0x407595;if(_0x4e6675===undefined)_0x4e6675=_0x11da3b;var _0x34eddc=Object[_0x3b2994(0x19f)](_0x298c09,_0x11da3b);(!_0x34eddc||('get'in _0x34eddc?!_0x298c09['__esModule']:_0x34eddc[_0x3b2994(0x1af)]||_0x34eddc[_0x3b2994(0x153)]))&&(_0x34eddc={'enumerable':!![],'get':function(){return _0x298c09[_0x11da3b];}}),Object[_0x3b2994(0x165)](_0x465a22,_0x4e6675,_0x34eddc);}:function(_0x421c53,_0x44d07e,_0x5cdd5e,_0x192a34){if(_0x192a34===undefined)_0x192a34=_0x5cdd5e;_0x421c53[_0x192a34]=_0x44d07e[_0x5cdd5e];}),__setModuleDefault=this&&this[a256_0x407595(0x18a)]||(Object[a256_0x407595(0x17e)]?function(_0x25f84e,_0x56c9c1){const _0x39d7a5=a256_0x407595;Object[_0x39d7a5(0x165)](_0x25f84e,_0x39d7a5(0x140),{'enumerable':!![],'value':_0x56c9c1});}:function(_0x4ebbce,_0x3b5d6d){const _0x144734=a256_0x407595;_0x4ebbce[_0x144734(0x140)]=_0x3b5d6d;}),__importStar=this&&this[a256_0x407595(0x1ac)]||function(_0x56b7bf){const _0xc84234=a256_0x407595;if(_0x56b7bf&&_0x56b7bf[_0xc84234(0x18d)])return _0x56b7bf;var _0x3a8843={};if(_0x56b7bf!=null){for(var _0x21ac72 in _0x56b7bf)if(_0x21ac72!==_0xc84234(0x140)&&Object[_0xc84234(0x152)]['hasOwnProperty'][_0xc84234(0x159)](_0x56b7bf,_0x21ac72))__createBinding(_0x3a8843,_0x56b7bf,_0x21ac72);}return __setModuleDefault(_0x3a8843,_0x56b7bf),_0x3a8843;},__importDefault=this&&this['__importDefault']||function(_0x4499e4){const _0x563b8b=a256_0x407595;return _0x4499e4&&_0x4499e4[_0x563b8b(0x18d)]?_0x4499e4:{'default':_0x4499e4};};Object[a256_0x407595(0x165)](exports,a256_0x407595(0x18d),{'value':!![]}),exports[a256_0x407595(0x192)]=exports[a256_0x407595(0x19e)]=exports[a256_0x407595(0x1b1)]=exports['removeWbot']=exports['getWbot']=void 0x0;const Sentry=__importStar(require('@sentry/node')),baileys_1=__importStar(require('@whiskeysockets/baileys')),Whatsapp_1=__importDefault(require(a256_0x407595(0x184))),Contact_1=__importDefault(require('../models/Contact')),logger_1=require(a256_0x407595(0x1a3)),logger_2=__importDefault(require(a256_0x407595(0x137))),authState_1=__importDefault(require(a256_0x407595(0x181))),AppError_1=__importDefault(require(a256_0x407595(0x193))),socket_1=require(a256_0x407595(0x14a)),StartWhatsAppSession_1=require(a256_0x407595(0x174)),DeleteBaileysService_1=__importDefault(require(a256_0x407595(0x170))),node_cache_1=__importDefault(require('node-cache')),date_fns_1=require(a256_0x407595(0x178)),wbotMessageListener_1=require('../services/WbotServices/wbotMessageListener'),ImportWhatsAppMessageService_1=__importDefault(require(a256_0x407595(0x16e))),loggerBaileys=logger_2[a256_0x407595(0x140)][a256_0x407595(0x190)]({});loggerBaileys['level']=a256_0x407595(0x13f);const sessions=[],retriesQrCodeMap=new Map(),getWbot=_0x106fa3=>{const _0x8c245d=a256_0x407595,_0x204b56=sessions[_0x8c245d(0x156)](_0x5d618a=>_0x5d618a['id']===_0x106fa3);if(_0x204b56===-0x1)throw new AppError_1[(_0x8c245d(0x140))]('ERR_WAPP_NOT_INITIALIZED');return sessions[_0x204b56];};exports[a256_0x407595(0x194)]=getWbot;const removeWbot=async(_0x11e497,_0x56f666=!![])=>{const _0x57eca2=a256_0x407595;try{const _0x2175a2=sessions[_0x57eca2(0x156)](_0x13e1e2=>_0x13e1e2['id']===_0x11e497);_0x2175a2!==-0x1&&(_0x56f666&&(sessions[_0x2175a2][_0x57eca2(0x154)](),sessions[_0x2175a2]['ws'][_0x57eca2(0x15c)]()),sessions[_0x57eca2(0x1b0)](_0x2175a2,0x1));}catch(_0x149032){logger_1['logger']['error'](_0x149032);}};exports[a256_0x407595(0x188)]=removeWbot;const restartWbot=async(_0x244058,_0x4d36b2)=>{const _0x8d4da=a256_0x407595;try{const _0x3df499={'where':{'companyId':_0x244058},'attributes':['id']},_0x5e526d=await Whatsapp_1[_0x8d4da(0x140)][_0x8d4da(0x187)](_0x3df499);_0x5e526d['map'](async _0x3d58cf=>{const _0x54287e=sessions['findIndex'](_0x1b3e55=>_0x1b3e55['id']===_0x3d58cf['id']);_0x54287e!==-0x1&&sessions[_0x54287e]['ws']['close']();});}catch(_0x10dad7){logger_1[_0x8d4da(0x191)][_0x8d4da(0x136)](_0x10dad7);}};exports['restartWbot']=restartWbot,exports[a256_0x407595(0x19e)]=[];function a256_0xebd4(){const _0x16ee8f=['10.0','getIO','date-fns','fetchLatestBaileysVersion','fromObject','BROWSER_CLIENT','add','PRODUCT_LIST','create','importRecentMessages','debug','../helpers/authState','includes','connection.update','../models/Whatsapp','makeCacheableSignalKeyStore','Socket\x20\x20','findAll','removeWbot','remoteJid','__setModuleDefault','push','statusCode','__esModule','creds.update','open','child','logger','initWASocket','../errors/AppError','getWbot','deviceSentMessage','toString','statusImportMessages','update','stringify','228UuhiDc','apply','messaging-history.set','709460HCzkdn','dataMessages','getOwnPropertyDescriptor','Importando\x20whtasapp!','delete','output','../utils/logger','[wbot.ts]\x20getMessage:\x20result\x20of\x20recovering\x20message\x20','Message','importOldMessages','log','creds','companyId','1231066DUBIKx','CONNECTED','__importStar','Starting\x20session\x20','findOne','writable','splice','restartWbot','messageTimestamp','company-','join','whatsappSession','loggedOut','2567301atzfub','__createBinding','DISCONNECTED','unshift','2690836XDEyNY','getTime','error','@whiskeysockets/baileys/lib/Utils/logger','floor','presence.update',',\x20isLatest:\x20','removeAllListeners','makeInMemoryStore','745280TcaGeH','search','silent','default','Chrome','reload','listType','1835016JkXVMA','loadMessage','isJidBroadcast','parse','set','ListMessage','./socket','listMessage','-mainchannel','wsocket\x20or\x20wsocket.ev\x20is\x20null.','captureException','ListType','DisconnectReason','Daumzap','prototype','configurable','logout','split','findIndex','isValidMsg','StartWhatsAppSession','call','replace','messages','close','110404orFxDq','BROWSER_NAME','env','lastKnownPresence','Running','bind','emit','-whatsappSession','defineProperty','(((.+)+)+)+$','qrcode','proto','importMessages-','get','jidNormalizedUser','message','keys','../services/WhatsappService/ImportWhatsAppMessageService','9LTaDGk','../services/BaileysServices/DeleteBaileysService','info','-contact','g.us','../services/WbotServices/StartWhatsAppSession','\x20Connection\x20Update\x20'];a256_0xebd4=function(){return _0x16ee8f;};return a256_0xebd4();}const initWASocket=async _0x9771bf=>{return new Promise(async(_0xc4b31d,_0x5793cd)=>{const _0x3efb9b=a256_0x134d;try{await((async()=>{const _0x84303d=a256_0x134d,_0x352d5b=(0x0,socket_1[_0x84303d(0x177)])(),_0x37d765=await Whatsapp_1[_0x84303d(0x140)][_0x84303d(0x1ae)]({'where':{'id':_0x9771bf['id']}});if(!_0x37d765)return;const {id:_0x17e7f7,name:_0x4f3cc8,provider:_0x534d89}=_0x37d765,{version:_0x319a40,isLatest:_0x425077}=await(0x0,baileys_1[_0x84303d(0x179)])(),_0x20cab8=_0x534d89==='stable'?!![]:![];logger_1[_0x84303d(0x191)][_0x84303d(0x171)]('using\x20WA\x20v'+_0x319a40[_0x84303d(0x1b4)]('.')+_0x84303d(0x13a)+_0x425077),logger_1[_0x84303d(0x191)][_0x84303d(0x171)]('isLegacy:\x20'+_0x20cab8),logger_1[_0x84303d(0x191)][_0x84303d(0x171)](_0x84303d(0x1ad)+_0x4f3cc8);let _0x22c5a1=0x0,_0x3d33ec=null;const _0x17b88b=(0x0,baileys_1[_0x84303d(0x13c)])({'logger':loggerBaileys});async function _0x51f294(_0x507f07){const _0x45cdac=_0x84303d;if(_0x17b88b){const _0x2b15c3=await _0x17b88b[_0x45cdac(0x145)](_0x507f07[_0x45cdac(0x189)],_0x507f07['id']);return logger_1[_0x45cdac(0x191)][_0x45cdac(0x180)]({'key':_0x507f07,'message':JSON['stringify'](_0x2b15c3)},_0x45cdac(0x1a4)+_0x507f07[_0x45cdac(0x189)]+'\x20'+_0x507f07['id']),_0x2b15c3?.[_0x45cdac(0x16c)]||undefined;}return baileys_1[_0x45cdac(0x168)]['Message'][_0x45cdac(0x17a)]({});}const {state:_0xa3316d,saveState:_0x43bb7b}=await(0x0,authState_1[_0x84303d(0x140)])(_0x9771bf),_0x35e890=new node_cache_1[(_0x84303d(0x140))]();_0x3d33ec=(0x0,baileys_1['default'])({'logger':loggerBaileys,'printQRInTerminal':![],'browser':[process[_0x84303d(0x15f)][_0x84303d(0x17b)]||_0x84303d(0x151),process[_0x84303d(0x15f)][_0x84303d(0x15e)]||_0x84303d(0x141),process[_0x84303d(0x15f)]['BROWSER_VERSION']||_0x84303d(0x176)],'auth':{'creds':_0xa3316d[_0x84303d(0x1a8)],'keys':(0x0,baileys_1[_0x84303d(0x185)])(_0xa3316d[_0x84303d(0x16d)],loggerBaileys)},'msgRetryCounterCache':_0x35e890,'getMessage':_0x51f294,'shouldIgnoreJid':_0x407a81=>{const _0x197fd7=_0x84303d;return(0x0,baileys_1[_0x197fd7(0x146)])(_0x407a81)||_0x407a81[_0x197fd7(0x182)]('newsletter');},'version':[0x2,0xbb8,0x3c8d6c7b],'transactionOpts':{'maxCommitRetries':0x1,'delayBetweenTriesMs':0xa},'patchMessageBeforeSending'(_0xd92606){const _0x15c506=_0x84303d;return _0xd92606[_0x15c506(0x195)]?.[_0x15c506(0x16c)]?.[_0x15c506(0x14b)]?.[_0x15c506(0x143)]===baileys_1[_0x15c506(0x168)][_0x15c506(0x1a5)][_0x15c506(0x149)][_0x15c506(0x14f)][_0x15c506(0x17d)]&&(_0xd92606=JSON[_0x15c506(0x147)](JSON[_0x15c506(0x199)](_0xd92606)),_0xd92606[_0x15c506(0x195)][_0x15c506(0x16c)]['listMessage']['listType']=baileys_1[_0x15c506(0x168)][_0x15c506(0x1a5)][_0x15c506(0x149)][_0x15c506(0x14f)]['SINGLE_SELECT']),_0xd92606[_0x15c506(0x14b)]?.[_0x15c506(0x143)]==baileys_1['proto']['Message'][_0x15c506(0x149)][_0x15c506(0x14f)][_0x15c506(0x17d)]&&(_0xd92606=JSON['parse'](JSON['stringify'](_0xd92606)),_0xd92606['listMessage'][_0x15c506(0x143)]=baileys_1[_0x15c506(0x168)][_0x15c506(0x1a5)][_0x15c506(0x149)]['ListType']['SINGLE_SELECT']),_0xd92606;}});if(_0x37d765?.[_0x84303d(0x1a6)]){let _0x1fe097=new Date(_0x37d765[_0x84303d(0x1a6)])[_0x84303d(0x135)](),_0x6b1139=_0x37d765[_0x84303d(0x17f)]!=''?new Date(_0x37d765[_0x84303d(0x17f)])['getTime']():new Date()[_0x84303d(0x135)]();console[_0x84303d(0x1a7)](_0x84303d(0x1a0));const _0x42d05f=new Date()[_0x84303d(0x135)]();await _0x37d765[_0x84303d(0x198)]({'statusImportMessages':_0x42d05f}),_0x3d33ec['ev']['on'](_0x84303d(0x19c),async _0x5a2b86=>{const _0x3cf453=_0x84303d,_0x2afdef=new Date()[_0x3cf453(0x135)]();await _0x37d765[_0x3cf453(0x198)]({'statusImportMessages':_0x2afdef});const _0x2fe3d8=_0x9771bf['id'];let _0x375c6b=_0x5a2b86[_0x3cf453(0x15b)],_0x58883f=[];_0x375c6b['forEach'](_0x5e3c22=>{const _0x1e26d1=_0x3cf453,_0x55b815=Math[_0x1e26d1(0x138)](_0x5e3c22[_0x1e26d1(0x1b2)]*0x3e8);(0x0,wbotMessageListener_1[_0x1e26d1(0x157)])(_0x5e3c22)&&(_0x1fe097<=_0x55b815&&_0x6b1139>=_0x55b815&&(_0x5e3c22['key']?.['remoteJid'][_0x1e26d1(0x155)]('@')[0x1]!=_0x1e26d1(0x173)?_0x58883f['push'](_0x5e3c22):_0x37d765?.['importOldMessagesGroups']&&_0x58883f[_0x1e26d1(0x18b)](_0x5e3c22)));}),!exports['dataMessages']?.[_0x2fe3d8]&&(exports[_0x3cf453(0x19e)][_0x2fe3d8]=[]),exports['dataMessages'][_0x2fe3d8][_0x3cf453(0x1ba)](..._0x58883f),setTimeout(async()=>{const _0x3e2379=_0x3cf453;_0x352d5b['to'](_0x3e2379(0x1b3)+_0x37d765[_0x3e2379(0x1a9)]+_0x3e2379(0x14c))['emit'](_0x3e2379(0x169)+_0x37d765[_0x3e2379(0x1a9)],{'action':'update','status':{'this':-0x1,'all':-0x1}}),_0x352d5b['to'](_0x3e2379(0x1b3)+_0x37d765[_0x3e2379(0x1a9)]+_0x3e2379(0x14c))[_0x3e2379(0x163)](_0x3e2379(0x1b5),{'action':'update','session':_0x37d765});},0x1f4),setTimeout(async()=>{const _0x43fc49=_0x3cf453;let _0xb0f1a7=!isNaN(new Date(Math[_0x43fc49(0x138)](parseInt(_0x37d765?.[_0x43fc49(0x197)])))['getTime']());if(_0xb0f1a7){const _0x5b13f0=new Date(Math['floor'](parseInt(_0x37d765?.[_0x43fc49(0x197)])))['getTime'](),_0x3f8322=+(0x0,date_fns_1[_0x43fc49(0x17c)])(_0x5b13f0,{'seconds':+0x2d})['getTime']();_0x3f8322<new Date()['getTime']()&&(await(0x0,ImportWhatsAppMessageService_1[_0x43fc49(0x140)])(_0x37d765),_0x37d765[_0x43fc49(0x198)]({'statusImportMessages':_0x43fc49(0x161)}));}_0x352d5b['to'](_0x43fc49(0x1b3)+_0x37d765[_0x43fc49(0x1a9)]+_0x43fc49(0x14c))[_0x43fc49(0x163)](_0x43fc49(0x1b5),{'action':_0x43fc49(0x198),'session':_0x37d765});},0xafc8);});}_0x3d33ec['ev']['on'](_0x84303d(0x183),async({connection:_0x546f78,lastDisconnect:_0x9564ff,qr:_0x3fbc3f})=>{const _0x1d4bae=_0x84303d;logger_1[_0x1d4bae(0x191)][_0x1d4bae(0x171)](_0x1d4bae(0x186)+_0x4f3cc8+_0x1d4bae(0x175)+(_0x546f78||'')+'\x20'+(_0x9564ff||''));if(_0x3d33ec&&_0x3d33ec['ev']){_0x546f78==='close'&&(_0x9564ff?.[_0x1d4bae(0x136)]?.['output']?.[_0x1d4bae(0x18c)]===0x193&&(await _0x9771bf[_0x1d4bae(0x198)]({'status':'PENDING','session':'','number':''}),await(0x0,DeleteBaileysService_1[_0x1d4bae(0x140)])(_0x9771bf['id']),_0x352d5b['to'](_0x1d4bae(0x1b3)+_0x9771bf[_0x1d4bae(0x1a9)]+'-mainchannel')[_0x1d4bae(0x163)](_0x1d4bae(0x1b3)+_0x9771bf[_0x1d4bae(0x1a9)]+_0x1d4bae(0x164),{'action':_0x1d4bae(0x198),'session':_0x9771bf}),await(0x0,exports[_0x1d4bae(0x188)])(_0x17e7f7,![])),_0x9564ff?.[_0x1d4bae(0x136)]?.[_0x1d4bae(0x1a2)]?.[_0x1d4bae(0x18c)]!==baileys_1[_0x1d4bae(0x150)][_0x1d4bae(0x1b6)]?(await(0x0,exports[_0x1d4bae(0x188)])(_0x17e7f7,![]),setTimeout(()=>(0x0,StartWhatsAppSession_1[_0x1d4bae(0x158)])(_0x9771bf,_0x9771bf['companyId']),0x7d0)):(await _0x9771bf['update']({'status':'PENDING','session':'','number':''}),await(0x0,DeleteBaileysService_1[_0x1d4bae(0x140)])(_0x9771bf['id']),_0x352d5b['to'](_0x1d4bae(0x1b3)+_0x9771bf['companyId']+'-mainchannel')[_0x1d4bae(0x163)](_0x1d4bae(0x1b3)+_0x9771bf[_0x1d4bae(0x1a9)]+'-whatsappSession',{'action':'update','session':_0x9771bf}),await(0x0,exports[_0x1d4bae(0x188)])(_0x17e7f7,![]),setTimeout(()=>(0x0,StartWhatsAppSession_1['StartWhatsAppSession'])(_0x9771bf,_0x9771bf[_0x1d4bae(0x1a9)]),0x7d0)));if(_0x546f78===_0x1d4bae(0x18f)){await _0x9771bf[_0x1d4bae(0x198)]({'status':_0x1d4bae(0x1ab),'qrcode':'','retries':0x0,'number':_0x3d33ec['type']==='md'?(0x0,baileys_1[_0x1d4bae(0x16b)])(_0x3d33ec['user']['id'])[_0x1d4bae(0x155)]('@')[0x0]:'-'}),_0x352d5b['to'](_0x1d4bae(0x1b3)+_0x9771bf[_0x1d4bae(0x1a9)]+'-mainchannel')[_0x1d4bae(0x163)](_0x1d4bae(0x1b3)+_0x9771bf[_0x1d4bae(0x1a9)]+'-whatsappSession',{'action':_0x1d4bae(0x198),'session':_0x9771bf});const _0x5e8898=sessions['findIndex'](_0x222dd7=>_0x222dd7['id']===_0x9771bf['id']);_0x5e8898===-0x1&&(_0x3d33ec['id']=_0x9771bf['id'],sessions['push'](_0x3d33ec)),_0xc4b31d(_0x3d33ec);}if(_0x3fbc3f!==undefined){if(retriesQrCodeMap[_0x1d4bae(0x16a)](_0x17e7f7)&&retriesQrCodeMap[_0x1d4bae(0x16a)](_0x17e7f7)>=0x3)await _0x37d765[_0x1d4bae(0x198)]({'status':_0x1d4bae(0x1b9),'qrcode':''}),await(0x0,DeleteBaileysService_1[_0x1d4bae(0x140)])(_0x37d765['id']),_0x352d5b['to']('company-'+_0x9771bf['companyId']+_0x1d4bae(0x14c))[_0x1d4bae(0x163)](_0x1d4bae(0x1b3)+_0x9771bf[_0x1d4bae(0x1a9)]+_0x1d4bae(0x164),{'action':'update','session':_0x37d765}),_0x3d33ec['ev'][_0x1d4bae(0x13b)]('connection.update'),_0x3d33ec['ws']['close'](),_0x3d33ec=null,retriesQrCodeMap[_0x1d4bae(0x1a1)](_0x17e7f7);else{logger_1['logger'][_0x1d4bae(0x171)]('Session\x20QRCode\x20Generate\x20'+_0x4f3cc8),retriesQrCodeMap[_0x1d4bae(0x148)](_0x17e7f7,_0x22c5a1+=0x1),await _0x9771bf[_0x1d4bae(0x198)]({'qrcode':_0x3fbc3f,'status':_0x1d4bae(0x167),'retries':0x0,'number':''});const _0x14425a=sessions[_0x1d4bae(0x156)](_0x588d00=>_0x588d00['id']===_0x9771bf['id']);_0x14425a===-0x1&&(_0x3d33ec['id']=_0x9771bf['id'],sessions['push'](_0x3d33ec)),_0x352d5b['to'](_0x1d4bae(0x1b3)+_0x9771bf[_0x1d4bae(0x1a9)]+'-mainchannel')['emit'](_0x1d4bae(0x1b3)+_0x9771bf[_0x1d4bae(0x1a9)]+_0x1d4bae(0x164),{'action':_0x1d4bae(0x198),'session':_0x9771bf});}}}else console['log'](_0x1d4bae(0x14d));}),_0x3d33ec['ev']['on'](_0x84303d(0x18e),_0x43bb7b),_0x3d33ec['ev']['on'](_0x84303d(0x139),async({id:_0x33cc04,presences:_0x3132c1})=>{const _0x272000=_0x84303d;try{const _0x2867a1=await Contact_1[_0x272000(0x140)][_0x272000(0x1ae)]({'where':{'number':_0x33cc04[_0x272000(0x15a)](/\D/g,''),'companyId':_0x9771bf[_0x272000(0x1a9)]}});await _0x2867a1['update']({'presence':_0x3132c1[_0x33cc04][_0x272000(0x160)]}),await _0x2867a1[_0x272000(0x142)](),_0x352d5b['to'](_0x272000(0x1b3)+_0x9771bf[_0x272000(0x1a9)]+_0x272000(0x14c))['emit'](_0x272000(0x1b3)+_0x9771bf[_0x272000(0x1a9)]+_0x272000(0x172),{'action':_0x272000(0x198),'contact':_0x2867a1});}catch(_0x122251){}}),_0x17b88b[_0x84303d(0x162)](_0x3d33ec['ev']);})());}catch(_0x39616c){Sentry[_0x3efb9b(0x14e)](_0x39616c),console[_0x3efb9b(0x1a7)](_0x39616c),_0x5793cd(_0x39616c);}});};exports[a256_0x407595(0x192)]=initWASocket;