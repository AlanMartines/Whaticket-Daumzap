const a256_0x47d051=a256_0x4302;(function(_0x55dedd,_0x2b78ca){const _0xf08bc1=a256_0x4302,_0x8b8a68=_0x55dedd();while(!![]){try{const _0x25f35=-parseInt(_0xf08bc1(0x233))/0x1+-parseInt(_0xf08bc1(0x250))/0x2*(-parseInt(_0xf08bc1(0x24f))/0x3)+-parseInt(_0xf08bc1(0x1f6))/0x4+-parseInt(_0xf08bc1(0x1f4))/0x5+-parseInt(_0xf08bc1(0x240))/0x6+-parseInt(_0xf08bc1(0x1f7))/0x7+parseInt(_0xf08bc1(0x234))/0x8;if(_0x25f35===_0x2b78ca)break;else _0x8b8a68['push'](_0x8b8a68['shift']());}catch(_0x5f2515){_0x8b8a68['push'](_0x8b8a68['shift']());}}}(a256_0x8186,0xd9977));const a256_0x50f1ce=(function(){let _0x11073b=!![];return function(_0x511f36,_0x5aac73){const _0x1605dc=_0x11073b?function(){const _0x715666=a256_0x4302;if(_0x5aac73){const _0x48ef60=_0x5aac73[_0x715666(0x225)](_0x511f36,arguments);return _0x5aac73=null,_0x48ef60;}}:function(){};return _0x11073b=![],_0x1605dc;};}()),a256_0x2e3bcb=a256_0x50f1ce(this,function(){const _0xd9bf0d=a256_0x4302;return a256_0x2e3bcb[_0xd9bf0d(0x222)]()['search']('(((.+)+)+)+$')[_0xd9bf0d(0x222)]()[_0xd9bf0d(0x202)](a256_0x2e3bcb)['search'](_0xd9bf0d(0x1f1));});a256_0x2e3bcb();function a256_0x8186(){const _0x40ab8f=['../services/WbotServices/wbotMessageListener','prototype','listType','../services/WbotServices/StartWhatsAppSession','../services/BaileysServices/DeleteBaileysService','g.us','defineProperty','dataMessages','PRODUCT_LIST','node-cache','constructor','error','debug','env','importOldMessages','logger','../services/WhatsappService/ImportWhatsAppMessageService','messages','user','creds','output','findIndex','company-','set','push','creds.update','restartWbot','split','SINGLE_SELECT','emit','-whatsappSession','getWbot','__importDefault','loadMessage','importOldMessagesGroups','get','parse','update','silent','messageTimestamp','companyId','@whiskeysockets/baileys/lib/Utils/logger','toString','statusImportMessages','info','apply','DisconnectReason','BROWSER_VERSION','BROWSER_NAME','../helpers/authState','keys','stable','includes','../models/Contact','configurable','DISCONNECTED','BROWSER_CLIENT','default','join','1362086wHFimH','31527008nPktvU','presence.update','floor','../models/Whatsapp','importRecentMessages','create','jidNormalizedUser','\x20Connection\x20Update\x20','@sentry/node','qrcode','__setModuleDefault','Starting\x20session\x20','5985684dEFxDg','[wbot.ts]\x20getMessage:\x20result\x20of\x20recovering\x20message\x20','statusCode','call','../utils/logger','message','ListType','wsocket\x20or\x20wsocket.ev\x20is\x20null.','listMessage','splice','connection.update','lastKnownPresence','-contact','deviceSentMessage','fetchLatestBaileysVersion','3CJtIJq','2711554fhrWcl','makeInMemoryStore','key','removeWbot','type','stringify','log','loggedOut','add','findOne','importMessages-','close','getTime','delete','isJidBroadcast','Message','__esModule','captureException','remoteJid','__createBinding','makeCacheableSignalKeyStore','ListMessage','-mainchannel','forEach','PENDING','@whiskeysockets/baileys','./socket','(((.+)+)+)+$','isLegacy:\x20','../errors/AppError','4925760khIJvk','proto','1323668MFxmbk','5107403YaPGhg'];a256_0x8186=function(){return _0x40ab8f;};return a256_0x8186();}function a256_0x4302(_0x9f4e4a,_0x1709f2){const _0x2be493=a256_0x8186();return a256_0x4302=function(_0x2e3bcb,_0x50f1ce){_0x2e3bcb=_0x2e3bcb-0x1f0;let _0x81869=_0x2be493[_0x2e3bcb];return _0x81869;},a256_0x4302(_0x9f4e4a,_0x1709f2);}'use strict';var __createBinding=this&&this[a256_0x47d051(0x263)]||(Object[a256_0x47d051(0x239)]?function(_0x583a85,_0x24fd59,_0x3706f8,_0x56b05b){const _0x4978b5=a256_0x47d051;if(_0x56b05b===undefined)_0x56b05b=_0x3706f8;var _0x20eb7b=Object['getOwnPropertyDescriptor'](_0x24fd59,_0x3706f8);(!_0x20eb7b||('get'in _0x20eb7b?!_0x24fd59['__esModule']:_0x20eb7b['writable']||_0x20eb7b[_0x4978b5(0x22e)]))&&(_0x20eb7b={'enumerable':!![],'get':function(){return _0x24fd59[_0x3706f8];}}),Object[_0x4978b5(0x1fe)](_0x583a85,_0x56b05b,_0x20eb7b);}:function(_0x53935e,_0x1e2fbe,_0x71052b,_0x23018e){if(_0x23018e===undefined)_0x23018e=_0x71052b;_0x53935e[_0x23018e]=_0x1e2fbe[_0x71052b];}),__setModuleDefault=this&&this[a256_0x47d051(0x23e)]||(Object[a256_0x47d051(0x239)]?function(_0x17ba30,_0x11314b){const _0x210c26=a256_0x47d051;Object['defineProperty'](_0x17ba30,_0x210c26(0x231),{'enumerable':!![],'value':_0x11314b});}:function(_0x559ebe,_0x537b10){const _0x13556a=a256_0x47d051;_0x559ebe[_0x13556a(0x231)]=_0x537b10;}),__importStar=this&&this['__importStar']||function(_0x41eb79){const _0x3fdaeb=a256_0x47d051;if(_0x41eb79&&_0x41eb79[_0x3fdaeb(0x260)])return _0x41eb79;var _0x5c40f0={};if(_0x41eb79!=null){for(var _0x23799a in _0x41eb79)if(_0x23799a!=='default'&&Object[_0x3fdaeb(0x1f9)]['hasOwnProperty'][_0x3fdaeb(0x243)](_0x41eb79,_0x23799a))__createBinding(_0x5c40f0,_0x41eb79,_0x23799a);}return __setModuleDefault(_0x5c40f0,_0x41eb79),_0x5c40f0;},__importDefault=this&&this[a256_0x47d051(0x218)]||function(_0x2d6236){return _0x2d6236&&_0x2d6236['__esModule']?_0x2d6236:{'default':_0x2d6236};};Object['defineProperty'](exports,a256_0x47d051(0x260),{'value':!![]}),exports['initWASocket']=exports[a256_0x47d051(0x1ff)]=exports[a256_0x47d051(0x212)]=exports[a256_0x47d051(0x253)]=exports[a256_0x47d051(0x217)]=void 0x0;const Sentry=__importStar(require(a256_0x47d051(0x23c))),baileys_1=__importStar(require(a256_0x47d051(0x269))),Whatsapp_1=__importDefault(require(a256_0x47d051(0x237))),Contact_1=__importDefault(require(a256_0x47d051(0x22d))),logger_1=require(a256_0x47d051(0x244)),logger_2=__importDefault(require(a256_0x47d051(0x221))),authState_1=__importDefault(require(a256_0x47d051(0x229))),AppError_1=__importDefault(require(a256_0x47d051(0x1f3))),socket_1=require(a256_0x47d051(0x1f0)),StartWhatsAppSession_1=require(a256_0x47d051(0x1fb)),DeleteBaileysService_1=__importDefault(require(a256_0x47d051(0x1fc))),node_cache_1=__importDefault(require(a256_0x47d051(0x201))),date_fns_1=require('date-fns'),wbotMessageListener_1=require(a256_0x47d051(0x1f8)),ImportWhatsAppMessageService_1=__importDefault(require(a256_0x47d051(0x208))),loggerBaileys=logger_2[a256_0x47d051(0x231)]['child']({});loggerBaileys['level']=a256_0x47d051(0x21e);const sessions=[],retriesQrCodeMap=new Map(),getWbot=_0x4a9b69=>{const _0x32a53a=a256_0x47d051,_0x2c9fae=sessions[_0x32a53a(0x20d)](_0x1fb7c2=>_0x1fb7c2['id']===_0x4a9b69);if(_0x2c9fae===-0x1)throw new AppError_1['default']('ERR_WAPP_NOT_INITIALIZED');return sessions[_0x2c9fae];};exports[a256_0x47d051(0x217)]=getWbot;const removeWbot=async(_0x3ea018,_0x405a79=!![])=>{const _0x6712cd=a256_0x47d051;try{const _0x31a10e=sessions[_0x6712cd(0x20d)](_0x178c83=>_0x178c83['id']===_0x3ea018);_0x31a10e!==-0x1&&(_0x405a79&&(sessions[_0x31a10e]['logout'](),sessions[_0x31a10e]['ws'][_0x6712cd(0x25b)]()),sessions[_0x6712cd(0x249)](_0x31a10e,0x1));}catch(_0x215ac8){logger_1[_0x6712cd(0x207)]['error'](_0x215ac8);}};exports[a256_0x47d051(0x253)]=removeWbot;const restartWbot=async(_0x58a654,_0x5d994a)=>{const _0x25da8e=a256_0x47d051;try{const _0x347ea1={'where':{'companyId':_0x58a654},'attributes':['id']},_0x376eb8=await Whatsapp_1[_0x25da8e(0x231)]['findAll'](_0x347ea1);_0x376eb8['map'](async _0x59c2d3=>{const _0x41809c=_0x25da8e,_0x1b8e7c=sessions[_0x41809c(0x20d)](_0x30d4a0=>_0x30d4a0['id']===_0x59c2d3['id']);_0x1b8e7c!==-0x1&&sessions[_0x1b8e7c]['ws'][_0x41809c(0x25b)]();});}catch(_0x6ebe1f){logger_1[_0x25da8e(0x207)]['error'](_0x6ebe1f);}};exports[a256_0x47d051(0x212)]=restartWbot,exports['dataMessages']=[];const initWASocket=async _0xf26e69=>{return new Promise(async(_0x6e5c41,_0x5944ea)=>{const _0x26124d=a256_0x4302;try{await((async()=>{const _0x3fe316=a256_0x4302,_0x545430=(0x0,socket_1['getIO'])(),_0x4194b7=await Whatsapp_1[_0x3fe316(0x231)][_0x3fe316(0x259)]({'where':{'id':_0xf26e69['id']}});if(!_0x4194b7)return;const {id:_0x5dbfb1,name:_0x377aee,provider:_0x3d09e4}=_0x4194b7,{version:_0xb78fd3,isLatest:_0x40cec9}=await(0x0,baileys_1[_0x3fe316(0x24e)])(),_0x45fbc0=_0x3d09e4===_0x3fe316(0x22b)?!![]:![];logger_1['logger'][_0x3fe316(0x224)]('using\x20WA\x20v'+_0xb78fd3[_0x3fe316(0x232)]('.')+',\x20isLatest:\x20'+_0x40cec9),logger_1[_0x3fe316(0x207)][_0x3fe316(0x224)](_0x3fe316(0x1f2)+_0x45fbc0),logger_1['logger'][_0x3fe316(0x224)](_0x3fe316(0x23f)+_0x377aee);let _0x3d37cc=0x0,_0x5e906a=null;const _0x4f0078=(0x0,baileys_1[_0x3fe316(0x251)])({'logger':loggerBaileys});async function _0xc4fe2f(_0x4b70bb){const _0x4ed6c3=_0x3fe316;if(_0x4f0078){const _0x29679d=await _0x4f0078[_0x4ed6c3(0x219)](_0x4b70bb[_0x4ed6c3(0x262)],_0x4b70bb['id']);return logger_1[_0x4ed6c3(0x207)][_0x4ed6c3(0x204)]({'key':_0x4b70bb,'message':JSON[_0x4ed6c3(0x255)](_0x29679d)},_0x4ed6c3(0x241)+_0x4b70bb[_0x4ed6c3(0x262)]+'\x20'+_0x4b70bb['id']),_0x29679d?.['message']||undefined;}return baileys_1[_0x4ed6c3(0x1f5)][_0x4ed6c3(0x25f)]['fromObject']({});}const {state:_0x327883,saveState:_0x58c700}=await(0x0,authState_1[_0x3fe316(0x231)])(_0xf26e69),_0x2a3aaf=new node_cache_1[(_0x3fe316(0x231))]();_0x5e906a=(0x0,baileys_1[_0x3fe316(0x231)])({'logger':loggerBaileys,'printQRInTerminal':![],'browser':[process['env'][_0x3fe316(0x230)]||'Daumzap',process[_0x3fe316(0x205)][_0x3fe316(0x228)]||'Chrome',process[_0x3fe316(0x205)][_0x3fe316(0x227)]||'10.0'],'auth':{'creds':_0x327883[_0x3fe316(0x20b)],'keys':(0x0,baileys_1[_0x3fe316(0x264)])(_0x327883[_0x3fe316(0x22a)],loggerBaileys)},'msgRetryCounterCache':_0x2a3aaf,'getMessage':_0xc4fe2f,'shouldIgnoreJid':_0x429313=>{const _0x4b4ec5=_0x3fe316;return(0x0,baileys_1[_0x4b4ec5(0x25e)])(_0x429313)||_0x429313[_0x4b4ec5(0x22c)]('newsletter');},'version':[0x2,0xbb8,0x3c8d6c7b],'transactionOpts':{'maxCommitRetries':0x1,'delayBetweenTriesMs':0xa},'patchMessageBeforeSending'(_0x220129){const _0x2aeace=_0x3fe316;return _0x220129['deviceSentMessage']?.[_0x2aeace(0x245)]?.[_0x2aeace(0x248)]?.[_0x2aeace(0x1fa)]===baileys_1['proto']['Message']['ListMessage'][_0x2aeace(0x246)][_0x2aeace(0x200)]&&(_0x220129=JSON[_0x2aeace(0x21c)](JSON[_0x2aeace(0x255)](_0x220129)),_0x220129[_0x2aeace(0x24d)][_0x2aeace(0x245)][_0x2aeace(0x248)][_0x2aeace(0x1fa)]=baileys_1[_0x2aeace(0x1f5)]['Message']['ListMessage'][_0x2aeace(0x246)][_0x2aeace(0x214)]),_0x220129[_0x2aeace(0x248)]?.['listType']==baileys_1[_0x2aeace(0x1f5)]['Message'][_0x2aeace(0x265)][_0x2aeace(0x246)][_0x2aeace(0x200)]&&(_0x220129=JSON['parse'](JSON[_0x2aeace(0x255)](_0x220129)),_0x220129[_0x2aeace(0x248)][_0x2aeace(0x1fa)]=baileys_1[_0x2aeace(0x1f5)][_0x2aeace(0x25f)]['ListMessage'][_0x2aeace(0x246)]['SINGLE_SELECT']),_0x220129;}});if(_0x4194b7?.[_0x3fe316(0x206)]){let _0x8b1b53=new Date(_0x4194b7[_0x3fe316(0x206)])[_0x3fe316(0x25c)](),_0x59ee64=_0x4194b7[_0x3fe316(0x238)]!=''?new Date(_0x4194b7['importRecentMessages'])[_0x3fe316(0x25c)]():new Date()[_0x3fe316(0x25c)]();console['log']('Importando\x20whtasapp!');const _0xe2d146=new Date()['getTime']();await _0x4194b7[_0x3fe316(0x21d)]({'statusImportMessages':_0xe2d146}),_0x5e906a['ev']['on']('messaging-history.set',async _0x1b1645=>{const _0x286091=_0x3fe316,_0x572bea=new Date()[_0x286091(0x25c)]();await _0x4194b7[_0x286091(0x21d)]({'statusImportMessages':_0x572bea});const _0x462145=_0xf26e69['id'];let _0xb67b28=_0x1b1645[_0x286091(0x209)],_0x59daa9=[];_0xb67b28[_0x286091(0x267)](_0xc30332=>{const _0x41ac3f=_0x286091,_0x5338d0=Math[_0x41ac3f(0x236)](_0xc30332[_0x41ac3f(0x21f)]*0x3e8);(0x0,wbotMessageListener_1['isValidMsg'])(_0xc30332)&&(_0x8b1b53<=_0x5338d0&&_0x59ee64>=_0x5338d0&&(_0xc30332[_0x41ac3f(0x252)]?.['remoteJid'][_0x41ac3f(0x213)]('@')[0x1]!=_0x41ac3f(0x1fd)?_0x59daa9[_0x41ac3f(0x210)](_0xc30332):_0x4194b7?.[_0x41ac3f(0x21a)]&&_0x59daa9[_0x41ac3f(0x210)](_0xc30332)));}),!exports[_0x286091(0x1ff)]?.[_0x462145]&&(exports['dataMessages'][_0x462145]=[]),exports[_0x286091(0x1ff)][_0x462145]['unshift'](..._0x59daa9),setTimeout(async()=>{const _0x53387a=_0x286091;_0x545430['to'](_0x53387a(0x20e)+_0x4194b7[_0x53387a(0x220)]+_0x53387a(0x266))['emit'](_0x53387a(0x25a)+_0x4194b7['companyId'],{'action':'update','status':{'this':-0x1,'all':-0x1}}),_0x545430['to'](_0x53387a(0x20e)+_0x4194b7[_0x53387a(0x220)]+_0x53387a(0x266))['emit']('whatsappSession',{'action':_0x53387a(0x21d),'session':_0x4194b7});},0x1f4),setTimeout(async()=>{const _0x5f2fd1=_0x286091;let _0x4eb58c=!isNaN(new Date(Math[_0x5f2fd1(0x236)](parseInt(_0x4194b7?.[_0x5f2fd1(0x223)])))[_0x5f2fd1(0x25c)]());if(_0x4eb58c){const _0x26e78b=new Date(Math[_0x5f2fd1(0x236)](parseInt(_0x4194b7?.[_0x5f2fd1(0x223)])))[_0x5f2fd1(0x25c)](),_0x415dc2=+(0x0,date_fns_1[_0x5f2fd1(0x258)])(_0x26e78b,{'seconds':+0x2d})['getTime']();_0x415dc2<new Date()[_0x5f2fd1(0x25c)]()&&(await(0x0,ImportWhatsAppMessageService_1[_0x5f2fd1(0x231)])(_0x4194b7),_0x4194b7[_0x5f2fd1(0x21d)]({'statusImportMessages':'Running'}));}_0x545430['to'](_0x5f2fd1(0x20e)+_0x4194b7[_0x5f2fd1(0x220)]+'-mainchannel')['emit']('whatsappSession',{'action':'update','session':_0x4194b7});},0xafc8);});}_0x5e906a['ev']['on'](_0x3fe316(0x24a),async({connection:_0x489008,lastDisconnect:_0x292af9,qr:_0x204608})=>{const _0x2a43c6=_0x3fe316;logger_1[_0x2a43c6(0x207)][_0x2a43c6(0x224)]('Socket\x20\x20'+_0x377aee+_0x2a43c6(0x23b)+(_0x489008||'')+'\x20'+(_0x292af9||''));if(_0x5e906a&&_0x5e906a['ev']){_0x489008==='close'&&(_0x292af9?.[_0x2a43c6(0x203)]?.['output']?.['statusCode']===0x193&&(await _0xf26e69[_0x2a43c6(0x21d)]({'status':_0x2a43c6(0x268),'session':'','number':''}),await(0x0,DeleteBaileysService_1[_0x2a43c6(0x231)])(_0xf26e69['id']),_0x545430['to'](_0x2a43c6(0x20e)+_0xf26e69[_0x2a43c6(0x220)]+_0x2a43c6(0x266))['emit']('company-'+_0xf26e69[_0x2a43c6(0x220)]+_0x2a43c6(0x216),{'action':_0x2a43c6(0x21d),'session':_0xf26e69}),await(0x0,exports[_0x2a43c6(0x253)])(_0x5dbfb1,![])),_0x292af9?.[_0x2a43c6(0x203)]?.[_0x2a43c6(0x20c)]?.[_0x2a43c6(0x242)]!==baileys_1[_0x2a43c6(0x226)][_0x2a43c6(0x257)]?(await(0x0,exports['removeWbot'])(_0x5dbfb1,![]),setTimeout(()=>(0x0,StartWhatsAppSession_1['StartWhatsAppSession'])(_0xf26e69,_0xf26e69[_0x2a43c6(0x220)]),0x7d0)):(await _0xf26e69[_0x2a43c6(0x21d)]({'status':_0x2a43c6(0x268),'session':'','number':''}),await(0x0,DeleteBaileysService_1[_0x2a43c6(0x231)])(_0xf26e69['id']),_0x545430['to'](_0x2a43c6(0x20e)+_0xf26e69[_0x2a43c6(0x220)]+_0x2a43c6(0x266))[_0x2a43c6(0x215)](_0x2a43c6(0x20e)+_0xf26e69['companyId']+_0x2a43c6(0x216),{'action':_0x2a43c6(0x21d),'session':_0xf26e69}),await(0x0,exports[_0x2a43c6(0x253)])(_0x5dbfb1,![]),setTimeout(()=>(0x0,StartWhatsAppSession_1['StartWhatsAppSession'])(_0xf26e69,_0xf26e69[_0x2a43c6(0x220)]),0x7d0)));if(_0x489008==='open'){await _0xf26e69[_0x2a43c6(0x21d)]({'status':'CONNECTED','qrcode':'','retries':0x0,'number':_0x5e906a[_0x2a43c6(0x254)]==='md'?(0x0,baileys_1[_0x2a43c6(0x23a)])(_0x5e906a[_0x2a43c6(0x20a)]['id'])[_0x2a43c6(0x213)]('@')[0x0]:'-'}),_0x545430['to'](_0x2a43c6(0x20e)+_0xf26e69[_0x2a43c6(0x220)]+'-mainchannel')[_0x2a43c6(0x215)](_0x2a43c6(0x20e)+_0xf26e69[_0x2a43c6(0x220)]+_0x2a43c6(0x216),{'action':'update','session':_0xf26e69});const _0x565241=sessions[_0x2a43c6(0x20d)](_0x36d62a=>_0x36d62a['id']===_0xf26e69['id']);_0x565241===-0x1&&(_0x5e906a['id']=_0xf26e69['id'],sessions[_0x2a43c6(0x210)](_0x5e906a)),_0x6e5c41(_0x5e906a);}if(_0x204608!==undefined){if(retriesQrCodeMap['get'](_0x5dbfb1)&&retriesQrCodeMap[_0x2a43c6(0x21b)](_0x5dbfb1)>=0x3)await _0x4194b7[_0x2a43c6(0x21d)]({'status':_0x2a43c6(0x22f),'qrcode':''}),await(0x0,DeleteBaileysService_1[_0x2a43c6(0x231)])(_0x4194b7['id']),_0x545430['to']('company-'+_0xf26e69[_0x2a43c6(0x220)]+'-mainchannel')[_0x2a43c6(0x215)]('company-'+_0xf26e69['companyId']+_0x2a43c6(0x216),{'action':_0x2a43c6(0x21d),'session':_0x4194b7}),_0x5e906a['ev']['removeAllListeners'](_0x2a43c6(0x24a)),_0x5e906a['ws'][_0x2a43c6(0x25b)](),_0x5e906a=null,retriesQrCodeMap[_0x2a43c6(0x25d)](_0x5dbfb1);else{logger_1[_0x2a43c6(0x207)][_0x2a43c6(0x224)]('Session\x20QRCode\x20Generate\x20'+_0x377aee),retriesQrCodeMap[_0x2a43c6(0x20f)](_0x5dbfb1,_0x3d37cc+=0x1),await _0xf26e69[_0x2a43c6(0x21d)]({'qrcode':_0x204608,'status':_0x2a43c6(0x23d),'retries':0x0,'number':''});const _0x30ddb5=sessions[_0x2a43c6(0x20d)](_0x35b53b=>_0x35b53b['id']===_0xf26e69['id']);_0x30ddb5===-0x1&&(_0x5e906a['id']=_0xf26e69['id'],sessions['push'](_0x5e906a)),_0x545430['to'](_0x2a43c6(0x20e)+_0xf26e69[_0x2a43c6(0x220)]+'-mainchannel')[_0x2a43c6(0x215)](_0x2a43c6(0x20e)+_0xf26e69[_0x2a43c6(0x220)]+_0x2a43c6(0x216),{'action':_0x2a43c6(0x21d),'session':_0xf26e69});}}}else console[_0x2a43c6(0x256)](_0x2a43c6(0x247));}),_0x5e906a['ev']['on'](_0x3fe316(0x211),_0x58c700),_0x5e906a['ev']['on'](_0x3fe316(0x235),async({id:_0x40652b,presences:_0x35c316})=>{const _0x2cde5f=_0x3fe316;try{const _0xeaef8=await Contact_1[_0x2cde5f(0x231)][_0x2cde5f(0x259)]({'where':{'number':_0x40652b['replace'](/\D/g,''),'companyId':_0xf26e69[_0x2cde5f(0x220)]}});await _0xeaef8['update']({'presence':_0x35c316[_0x40652b][_0x2cde5f(0x24b)]}),await _0xeaef8['reload'](),_0x545430['to']('company-'+_0xf26e69[_0x2cde5f(0x220)]+_0x2cde5f(0x266))[_0x2cde5f(0x215)](_0x2cde5f(0x20e)+_0xf26e69[_0x2cde5f(0x220)]+_0x2cde5f(0x24c),{'action':_0x2cde5f(0x21d),'contact':_0xeaef8});}catch(_0x156ce7){}}),_0x4f0078['bind'](_0x5e906a['ev']);})());}catch(_0x570818){Sentry[_0x26124d(0x261)](_0x570818),console[_0x26124d(0x256)](_0x570818),_0x5944ea(_0x570818);}});};exports['initWASocket']=initWASocket;