const a257_0x2d1fb6=a257_0x3a46;(function(_0x14fe02,_0x2b56c2){const _0x47849c=a257_0x3a46,_0x1f9f77=_0x14fe02();while(!![]){try{const _0x4ce603=parseInt(_0x47849c(0x12a))/0x1*(parseInt(_0x47849c(0x13d))/0x2)+parseInt(_0x47849c(0x128))/0x3*(-parseInt(_0x47849c(0x141))/0x4)+parseInt(_0x47849c(0x139))/0x5+-parseInt(_0x47849c(0x140))/0x6+-parseInt(_0x47849c(0x13b))/0x7*(parseInt(_0x47849c(0x12b))/0x8)+parseInt(_0x47849c(0x129))/0x9+parseInt(_0x47849c(0x12c))/0xa*(parseInt(_0x47849c(0x133))/0xb);if(_0x4ce603===_0x2b56c2)break;else _0x1f9f77['push'](_0x1f9f77['shift']());}catch(_0x407701){_0x1f9f77['push'](_0x1f9f77['shift']());}}}(a257_0x51f1,0x4b1ac));const a257_0x260fe4=(function(){let _0x50328e=!![];return function(_0x1bb289,_0x5658ba){const _0x1aa42c=_0x50328e?function(){if(_0x5658ba){const _0x1873e9=_0x5658ba['apply'](_0x1bb289,arguments);return _0x5658ba=null,_0x1873e9;}}:function(){};return _0x50328e=![],_0x1aa42c;};}()),a257_0x5df431=a257_0x260fe4(this,function(){const _0x39321c=a257_0x3a46;return a257_0x5df431['toString']()[_0x39321c(0x13c)](_0x39321c(0x130))[_0x39321c(0x13f)]()[_0x39321c(0x135)](a257_0x5df431)[_0x39321c(0x13c)]('(((.+)+)+)+$');});a257_0x5df431();function a257_0x3a46(_0x4e6f9f,_0x46e700){const _0x2bb199=a257_0x51f1();return a257_0x3a46=function(_0x5df431,_0x260fe4){_0x5df431=_0x5df431-0x127;let _0x51f19d=_0x2bb199[_0x5df431];return _0x51f19d;},a257_0x3a46(_0x4e6f9f,_0x46e700);}'use strict';var __importDefault=this&&this[a257_0x2d1fb6(0x137)]||function(_0x2ac776){const _0x2fd1e8=a257_0x2d1fb6;return _0x2ac776&&_0x2ac776[_0x2fd1e8(0x138)]?_0x2ac776:{'default':_0x2ac776};};Object[a257_0x2d1fb6(0x12d)](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require(a257_0x2d1fb6(0x13e))),User_1=__importDefault(require('../models/User')),Setting_1=__importDefault(require('../models/Setting')),apiTokenAuth=async(_0x2f299b,_0x4f9059,_0x54c24c)=>{const _0x4a0d73=a257_0x2d1fb6;try{const _0x24e937=_0x2f299b['headers']['authorization'][_0x4a0d73(0x12f)]('Bearer\x20','');if(!_0x24e937)return _0x54c24c();const _0x68895=await Setting_1[_0x4a0d73(0x131)][_0x4a0d73(0x132)]({'where':{'key':'apiToken','value':_0x24e937}});if(!_0x68895)return _0x54c24c();const _0xa0a858=await User_1[_0x4a0d73(0x131)][_0x4a0d73(0x132)]({'where':{'profile':'admin','companyId':_0x68895['companyId']}});return _0xa0a858&&(_0x2f299b[_0x4a0d73(0x13a)]={'id':''+_0xa0a858['id'],'profile':_0xa0a858[_0x4a0d73(0x136)],'isSuper':![],'companyId':_0x68895[_0x4a0d73(0x12e)]}),_0x54c24c();}catch(_0x3ac48d){console[_0x4a0d73(0x134)](_0x3ac48d);}throw new AppError_1[(_0x4a0d73(0x131))](_0x4a0d73(0x127),0x193);};function a257_0x51f1(){const _0x2bf328=['toString','1427628OOXPCx','10796NtZTsS','Token\x20inv√°lido','483RwRcSo','3645900qsZZpW','199TkJYWH','16OKjGvt','49070NRmmUk','defineProperty','companyId','replace','(((.+)+)+)+$','default','findOne','1100EVYIWq','log','constructor','profile','__importDefault','__esModule','914000WICGJo','user','387219ODcWps','search','122DlolDe','../errors/AppError'];a257_0x51f1=function(){return _0x2bf328;};return a257_0x51f1();}exports[a257_0x2d1fb6(0x131)]=apiTokenAuth;