const a257_0x25485c=a257_0x368c;function a257_0x3b21(){const _0x3341b4=['profile','defineProperty','companyId','../models/User','apiToken','log','173108IpXylJ','constructor','10257ELuPYJ','2531944YuTwIi','__esModule','174IqWOsg','Bearer\x20','apply','search','../errors/AppError','9313068tsSBCA','replace','1315580KseYhf','9BpqWSj','6dEGzeI','../models/Setting','11hnvguD','__importDefault','findOne','(((.+)+)+)+$','100583kcmLVx','headers','default','216ffCMhN','toString','2332120jyDpNA'];a257_0x3b21=function(){return _0x3341b4;};return a257_0x3b21();}(function(_0x30d63c,_0x5b7650){const _0x4b750a=a257_0x368c,_0xda3081=_0x30d63c();while(!![]){try{const _0x344064=parseInt(_0x4b750a(0xc1))/0x1*(-parseInt(_0x4b750a(0xcf))/0x2)+parseInt(_0x4b750a(0xc3))/0x3*(parseInt(_0x4b750a(0xd8))/0x4)+parseInt(_0x4b750a(0xda))/0x5+-parseInt(_0x4b750a(0xc6))/0x6*(parseInt(_0x4b750a(0xd5))/0x7)+-parseInt(_0x4b750a(0xc4))/0x8*(parseInt(_0x4b750a(0xce))/0x9)+parseInt(_0x4b750a(0xcd))/0xa*(parseInt(_0x4b750a(0xd1))/0xb)+parseInt(_0x4b750a(0xcb))/0xc;if(_0x344064===_0x5b7650)break;else _0xda3081['push'](_0xda3081['shift']());}catch(_0x1d87b8){_0xda3081['push'](_0xda3081['shift']());}}}(a257_0x3b21,0x4ac03));const a257_0x50e009=(function(){let _0xb47449=!![];return function(_0x7528f2,_0x420bac){const _0x5632a=_0xb47449?function(){const _0x12bc7d=a257_0x368c;if(_0x420bac){const _0x11ff43=_0x420bac[_0x12bc7d(0xc8)](_0x7528f2,arguments);return _0x420bac=null,_0x11ff43;}}:function(){};return _0xb47449=![],_0x5632a;};}()),a257_0x1b9644=a257_0x50e009(this,function(){const _0x4f633e=a257_0x368c;return a257_0x1b9644[_0x4f633e(0xd9)]()[_0x4f633e(0xc9)]('(((.+)+)+)+$')[_0x4f633e(0xd9)]()[_0x4f633e(0xc2)](a257_0x1b9644)[_0x4f633e(0xc9)](_0x4f633e(0xd4));});function a257_0x368c(_0x488e71,_0x339602){const _0x10edbf=a257_0x3b21();return a257_0x368c=function(_0x1b9644,_0x50e009){_0x1b9644=_0x1b9644-0xbb;let _0x3b2155=_0x10edbf[_0x1b9644];return _0x3b2155;},a257_0x368c(_0x488e71,_0x339602);}a257_0x1b9644();'use strict';var __importDefault=this&&this[a257_0x25485c(0xd2)]||function(_0x2268ba){const _0x373be5=a257_0x25485c;return _0x2268ba&&_0x2268ba[_0x373be5(0xc5)]?_0x2268ba:{'default':_0x2268ba};};Object[a257_0x25485c(0xbc)](exports,a257_0x25485c(0xc5),{'value':!![]});const AppError_1=__importDefault(require(a257_0x25485c(0xca))),User_1=__importDefault(require(a257_0x25485c(0xbe))),Setting_1=__importDefault(require(a257_0x25485c(0xd0))),apiTokenAuth=async(_0x4ca4bf,_0x4a5c21,_0x4dd84f)=>{const _0x32b69a=a257_0x25485c;try{const _0x4e4e79=_0x4ca4bf[_0x32b69a(0xd6)]['authorization'][_0x32b69a(0xcc)](_0x32b69a(0xc7),'');if(!_0x4e4e79)return _0x4dd84f();const _0x4f740c=await Setting_1[_0x32b69a(0xd7)]['findOne']({'where':{'key':_0x32b69a(0xbf),'value':_0x4e4e79}});if(!_0x4f740c)return _0x4dd84f();const _0x26ac6c=await User_1[_0x32b69a(0xd7)][_0x32b69a(0xd3)]({'where':{'profile':'admin','companyId':_0x4f740c[_0x32b69a(0xbd)]}});return _0x26ac6c&&(_0x4ca4bf['user']={'id':''+_0x26ac6c['id'],'profile':_0x26ac6c[_0x32b69a(0xbb)],'isSuper':![],'companyId':_0x4f740c[_0x32b69a(0xbd)]}),_0x4dd84f();}catch(_0x58be6c){console[_0x32b69a(0xc0)](_0x58be6c);}throw new AppError_1[(_0x32b69a(0xd7))]('Token\x20inv√°lido',0x193);};exports[a257_0x25485c(0xd7)]=apiTokenAuth;